/*!
 *
 * Bryntum Gantt 5.5.0
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
var _=Object.defineProperty;var O=(v,t,e)=>t in v?_(v,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):v[t]=e;var f=(v,t,e)=>(O(v,typeof t!="symbol"?t+"":t,e),e);import{Delayable as $,DomClassList as x,EventHelper as b,Rectangle as I,Widget as z,PanelCollapser as k,Animator as A,ObjectHelper as P,DomHelper as w,Base as B}from"./Editor.js";import{DragProxy as Z}from"./AvatarRendering.js";const i={e:"b-hover-edge",t:"b-hover-top",r:"b-hover-right",b:"b-hover-bottom",l:"b-hover-left"},j={[i.e]:1,[i.t]:1,[i.r]:1,[i.b]:1,[i.l]:1},N={t:[i.e,i.t],r:[i.e,i.r],b:[i.e,i.b],l:[i.e,i.l],tr:[i.e,i.t,i.r],bl:[i.e,i.b,i.l],tl:[i.e,i.t,i.l],br:[i.e,i.b,i.r]};var W=v=>class extends v.mixin($){static get $name(){return"Hoverable"}static get configurable(){return{hoverCls:null,hoverAnimationCls:null,hoverRootCls:null,hoverRootActiveCls:null,hoverDelay:null,hoverElement:null,hoverIgnoreElement:null,hoverEdges:null,hoverEdgeSize:10,hoverRootElement:{$config:"nullify",value:null},hoverSelector:null,hoverTarget:{$config:"nullify",value:null},hoverTrack:null,hoverZone:null}}static get delayable(){return{setHoverTarget:0}}hoverEnter(e){}hoverIgnore(e){var l;return(l=this.hoverIgnoreElement)===null||l===void 0?void 0:l.contains(e)}hoverLeave(e){}hoverMove(e){}onHoverMouseMove(e){const l=this,{hoverEdges:o,hoverEdgeSize:r,hoverTarget:n}=l;if(n){if(o){const{top:s,left:a,width:c,height:u,right:g,bottom:m}=n.getBoundingClientRect(),{clientX:h,clientY:d}=e,p=a+c/2,H=s+u/2,E=d<(r?s+r:H),L=h>=(r?g-r:p),S=d>=(r?m-r:H),M=h<(r?a+r:p),T=E||S?E?"t":"b":"",R=L||M?L?"r":"l":"";l.hoverZone=(o.includes(T)?T:"")+(o.includes(R)?R:"")}l.hoverEvent=e,l.hoverTrack&&l.hoverMove(e)}}onHoverMouseOver(e){this.hoverEvent=e,this.hoverElement=e.target}onHoverMouseOut(e){this.hoverEvent=e,this.hoverElement=e.relatedTarget}updateHoverDelay(e){this.setHoverTarget.delay=e}changeHoverEdges(e){return e===!0?"trbl":(e||"").replace("v","tb").replace("h","lr")}updateHoverEdges(){this.syncHoverListeners()}changeHoverElement(e){if(!this.hoverIgnore(e))return e}updateHoverElement(e){const{hoverSelector:l}=this;if(l){var o;e=(o=e)===null||o===void 0?void 0:o.closest(l)}this.setHoverTarget(e)}updateHoverRootElement(e,l){const{hoverRootCls:o}=this;o&&(l==null||l.classList.remove(o),e==null||e.classList.add(o)),this.syncHoverListeners()}changeHoverTarget(e,l){return l&&(this.hoverZone=null),e}updateHoverTarget(e,l){const o=this,{hoverCls:r,hoverAnimationCls:n,hoverRootActiveCls:s,hoverRootElement:a}=o;s&&(a==null||a.classList[e?"add":"remove"](s)),l&&(r&&l.classList.remove(r),n&&l.classList.remove(n),o.hoverLeave(l)),e&&(r&&e.classList.add(r),o.hoverEnter(l),o.hoverTrack&&o.hoverMove(o.hoverEvent),n&&(e.getBoundingClientRect(),e.classList.add(n)))}updateHoverTrack(){this.syncHoverListeners()}updateHoverZone(e){const{hoverAnimationCls:l,hoverTarget:o}=this;if(o){const{className:r}=o,n=x.change(r,e?N[e]:null,j);r!==n&&(o.className=n,e&&l&&(o.classList.remove(l),o.getBoundingClientRect(),o.classList.add(l)))}}setHoverTarget(e){this.hoverTarget=e}syncHoverListeners(){var e;const l=this,o=l.hoverRootElement,r={element:o,thisObj:l,mouseover:"onHoverMouseOver",mouseout:"onHoverMouseOut"};(l.hoverTrack||l.hoverEdges)&&(r.mousemove="onHoverMouseMove"),(e=l._hoverRootDetacher)===null||e===void 0||e.call(l),l._hoverRootDetacher=o&&b.on(r)}};class C extends Z{static get type(){return"tip"}static get configurable(){return{align:"t10-b50",offset:20,tooltip:{$config:["lazy","nullify"],value:{type:"tooltip"}}}}open(){this.getConfig("tooltip")}close(){var t;(t=this.tooltip)===null||t===void 0||t.hide()}dragMove(t){const{offset:e,tooltip:l}=this,{event:o}=t;l&&(l.isVisible||l.show(),l.alignTo({align:this.align,target:new I(o.clientX-e,o.clientY-e,e*2,e*2)}))}changeTooltip(t,e){return z.reconfigure(e,t,this)}}C.initClass(),C._$name="DragTipProxy";const{dockIsHorz:X}=k.maps,Y={top:0,down:0,left:1,bottom:2,up:2,right:3},y={up:{from:"translate(0,0)",to:"translate(0,-100%)"},down:{from:"translate(0,0)",to:"translate(0,100%)"},left:{from:"translate(0,0)",to:"translate(-100%,0)"},right:{from:"translate(0,0)",to:"translate(100%,0)"}};class D extends k.mixin($){static get $name(){return"PanelCollapserOverlay"}static get type(){return"overlay"}static get configurable(){return{autoCloseDelay:1e3,autoClose:!0,revealing:{value:null,$config:null,default:!1},recollapseTool:{type:"collapsetool",cls:"b-recollapse",collapsify:"overlay",handler(){var t;(t=this.collapsible)===null||t===void 0||t.toggleReveal()}}}}static get delayable(){return{doAutoClose:0}}doAutoClose(){this.toggleReveal(!1)}updateAutoCloseDelay(t){const{doAutoClose:e}=this;(e.suspended=t==null||t<0)||(e.delay=t,e.immediate=!t)}changeRecollapseTool(t){const e=this,{panel:l}=e;if(e.isConfiguring||e.isDestroying||!l||l.isDestroying)return t;l.tools={recollapse:t}}beforeCollapse(t){if(super.beforeCollapse(t)===!1)return!1;this.panel.revealed&&(t.animation=null)}applyHeaderDock(t,e=!0){var l;(l=this.panel)===null||l===void 0||l.recompose(),super.applyHeaderDock(t,e)}collapseBegin(t){const e=this,{collapseDir:l,innerElement:o}=e,{animation:r}=t,{collapseTool:n,panel:s}=e;e.configuredWidth=s._lastWidth,e.configuredHeight=s._lastHeight,e.applyHeaderDock(!0),e.lockInnerSize(),n==null||n.element.classList.add("b-collapsed"),r&&(s.element.classList.add("b-collapsing"),r.element=o,r.transform=y[l],t.animation=A.run(r))}onComplete(t){var e,l;super.onComplete(t);const o=this,{panel:r}=o,{element:n}=r;o.autoCloseLeaveDetacher=(e=o.autoCloseLeaveDetacher)===null||e===void 0?void 0:e.call(o),o.autoCloseClickDetacher=(l=o.autoCloseClickDetacher)===null||l===void 0?void 0:l.call(o),o.doAutoClose.cancel(),t==="reveal"&&o.autoClose&&(r.containsFocus&&(o.autoCloseLeaveDetacher=b.on({element:n,mouseenter:s=>{o.doAutoClose.cancel()},mouseleave:s=>{o.doAutoClose()}})),o.autoCloseClickDetacher=b.on({element:document.body,thisObj:r,mousedown:s=>{var a;!r.owns(s)&&!((a=o.revealer)!==null&&a!==void 0&&a.contains(s.target))&&o.autoCloseDelay!=null&&o.doAutoClose.now()}}))}expandBegin(t){const e=this,{animation:l}=t,{collapseDir:o,collapseTool:r,innerElement:n,panel:s}=e,{element:a}=s;a.classList.remove("b-collapsed","b-collapsing"),e.restoreConfiguredSize(),e.lockInnerSize(!1),e.lockInnerSize(),r==null||r.element.classList.remove("b-collapsed"),l&&(a.classList.add("b-collapsed","b-expanding"),l.element=n,l.transform={from:y[o].to,to:y[o].from},t.animation=A.run(l))}expandEnd(t){super.expandEnd(t);const{panel:e}=this;t.completed&&(e.revealed=!1),e.element.classList.remove("b-expanding")}expandRevert(t){super.expandRevert(t),this.panel.element.classList.add("b-expanding")}get innerElement(){return this.panel.overlayElement}get innerSizeElement(){return this.panel.element}get toolsConfig(){const t=this,{direction:e}=t,l=super.toolsConfig,o=t.recollapseTool;return o?{...l,recollapse:o&&P.assign({direction:e.toLowerCase()},o)}:l}lockInnerSize(t=!0){const e=this,{panel:l}=e,o=t&&l.rectangle(),r=t?[0,0,0,0]:"",n=super.lockInnerSize(t);return t&&(r[Y[e.collapseDir]]=`-${o[e.collapseDim]+10}px`),l.element.style.clipPath=t?`inset(${r.join(" ")})`:"",n}onOverlayTransitionDone(t){const e=this,{panel:l}=e;t.srcElement===l.overlayElement&&e.revealing&&(e.revealing=!1,e.onComplete(l.revealed?"reveal":"unreveal"))}onRevealerClick(){this.toggleReveal()}toggleReveal(t){const{panel:e}=this,{element:l}=e;e.collapsed&&(this.revealer=w.getActiveElement(l),t==null&&(t=!e.revealed),e.revealed!==t&&e.trigger("beforeToggleReveal",{reveal:t})!==!1&&(!t&&l.contains(this.revealer)&&e.revertFocus(!0),this.revealing=!0,e.revealed=t))}updateRevealing(t){const e=this,l=/left|right/i,{panel:o}=e,r=l.test(e.collapseDir)?"height":"width";o&&(e.innerElement.style[r]="0px",e.innerElement.style[`min-${r}`]="100%",o.element.classList[t?"add":"remove"]("b-panel-overlay-revealing"))}wrapCollapser(t,e){var l;const o=this,{collapseDir:r,panel:n}=o,{expandedHeaderDock:s,header:a,uiClassList:c}=n,u=(l=n.tools)===null||l===void 0?void 0:l.recollapse,[g,m]=o.splitHeaderItems({as:"element",dock:o.collapseDock}),h=X[s],d=n.hasHeader?n.title||(a==null?void 0:a.title)||"\xA0":null;return u&&(u.direction=r),["overlayElement",{class:{...c,[`b-panel-overlay-header-${s}`]:1,[`b-panel-overlay-${r}`]:1,[`b-${h?"h":"v"}box`]:1,"b-panel-overlay":1,"b-box-center":1},listeners:{transitionend:p=>o.onOverlayTransitionDone(p)},children:{overlayHeaderElement:d&&{tag:"header",class:new x({...c,[`b-dock-${s}`]:1,"b-panel-header":1,"b-panel-overlay-header":1},a==null?void 0:a.cls),children:[...g,{reference:"overlayTitleElement",html:d,class:{...c,[`b-align-${(a==null?void 0:a.titleAlign)||"start"}`]:1,"b-header-title":1}},...m]},[t]:e}}]}}D.initClass(),D._$name="PanelCollapserOverlay";var F=v=>{var t;return t=class extends(v||B){compose(){const{minified:l}=this;return{class:{"b-minified":l}}}get widgetClass(){}},f(t,"$name","Minifiable"),f(t,"configurable",{minifiable:!0,minified:null}),t};export{C as DragTipProxy,W as Hoverable,F as Minifiable,D as PanelCollapserOverlay};
//# sourceMappingURL=Minifiable.js.map
