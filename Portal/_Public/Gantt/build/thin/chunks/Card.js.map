{"version":3,"file":"Card.js","sources":["../../../../Core/lib/Core/widget/DateTimeField.js","../../../../Core/lib/Core/widget/layout/Card.js"],"sourcesContent":["import Field from './Field.js';\nimport TimeField from './TimeField.js';\nimport './DateField.js';\nimport DateHelper from '../helper/DateHelper.js';\nimport EventHelper from '../helper/EventHelper.js';\nimport ObjectHelper from '../helper/ObjectHelper.js';\nimport Widget from './Widget.js';\n\nconst midnightDate = new Date(2000, 0, 1);\n/**\n * @module Core/widget/DateTimeField\n */\n\n/**\n * A field combining a {@link Core.widget.DateField} and a {@link Core.widget.TimeField}.\n *\n * {@inlineexample Core/widget/DateTimeField.js}\n *\n * @extends Core/widget/Field\n * @classtype datetimefield\n * @inputfield\n */\nexport default class DateTimeField extends Field {\n    static configurable = {\n        /**\n         * Returns the TimeField instance\n         * @readonly\n         * @member {Core.widget.TimeField} timeField\n         */\n        /**\n         * Configuration for the {@link Core.widget.TimeField}\n         * @config {TimeFieldConfig}\n         */\n        timeField : {},\n\n        /**\n         * Returns the DateField instance\n         * @readonly\n         * @member {Core.widget.DateField} dateField\n         */\n        /**\n         * Configuration for the {@link Core.widget.DateField}\n         * @config {DateFieldConfig}\n         */\n        dateField : {\n            // To be able to use transformDateValue for parsing without loosing time, a bit of a hack\n            keepTime : true,\n            step     : '1 d'\n        },\n\n        /**\n         * The week start day in the {@link Core.widget.DateField#config-picker}, 0 meaning Sunday, 6 meaning Saturday.\n         * Uses localized value per default.\n         *\n         * @config {Number}\n         */\n        weekStartDay : null,\n\n        inputTemplate : () => '',\n\n        ariaElement : 'element'\n    };\n\n    static $name = 'DateTimeField';\n\n    static type = 'datetimefield';\n\n    // Factoryable type alias\n    static alias = 'datetime';\n\n    doDestroy() {\n        this.dateField.destroy();\n        this.timeField.destroy();\n\n        super.doDestroy();\n    }\n\n    get focusElement() {\n        return this.dateField.input;\n    }\n\n    // Implementation needed at this level because it has two inner elements in its inputWrap\n    get innerElements() {\n        return [\n            this.dateField.element,\n            this.timeField.element\n        ];\n    }\n\n    // Each subfield handles its own keystrokes\n    internalOnKeyEvent() { }\n\n    // CellEdit sets this dynamically on its editor field\n    updateRevertOnEscape(revertOnEscape) {\n        this.timeField.revertOnEscape = revertOnEscape;\n        this.dateField.revertOnEscape = revertOnEscape;\n    }\n\n    // Converts the timeField config into a TimeField\n    changeTimeField(config) {\n        const\n            me = this,\n            result = TimeField.new({\n                revertOnEscape : me.revertOnEscape,\n                syncInvalid(...args) {\n                    const updatingInvalid = me.updatingInvalid;\n\n                    TimeField.prototype.syncInvalid.apply(this, args);\n                    me.timeField && !updatingInvalid && me.syncInvalid();\n                }\n            }, config);\n\n        EventHelper.on({\n            element : result.element,\n            keydown : 'onTimeFieldKeyDown',\n            thisObj : me\n        });\n\n        // Must set *after* construction, otherwise it becomes the default state\n        // to reset readOnly back to\n        if (me.readOnly) {\n            result.readOnly = true;\n        }\n\n        return result;\n    }\n\n    // Set up change listener when TimeField is available. Not in timeField config to enable users to supply their own\n    // listeners block there\n    updateTimeField(timeField) {\n        const me = this;\n\n        timeField.ion({\n            change({ userAction, value }) {\n                if (userAction && !me.$settingValue) {\n                    const dateAndTime = me.dateField.value;\n                    me._isUserAction = true;\n                    me.value = dateAndTime ? DateHelper.copyTimeValues(dateAndTime, value || midnightDate) : null;\n                    me._isUserAction = false;\n                }\n            },\n            thisObj : me\n        });\n    }\n\n    // Converts the dateField config into a class based on { type : \"...\" } provided (DateField by default)\n    changeDateField(config) {\n        const\n            me     = this,\n            type   = config?.type || 'datefield',\n            cls    = Widget.resolveType(config.type || 'datefield'),\n            result = Widget.create(ObjectHelper.assign({\n                type,\n                revertOnEscape : me.revertOnEscape,\n                syncInvalid(...args) {\n                    const updatingInvalid = me.updatingInvalid;\n\n                    cls.prototype.syncInvalid.apply(this, args);\n                    me.dateField && !updatingInvalid && me.syncInvalid();\n                }\n            }, config));\n\n        EventHelper.on({\n            element : result.element,\n            keydown : 'onDateFieldKeyDown',\n            thisObj : me\n        });\n\n        // Must set *after* construction, otherwise it becomes the default state\n        // to reset readOnly back to\n        if (me.readOnly) {\n            result.readOnly = true;\n        }\n\n        result.ion(({\n            keydown : ({ event }) => {\n                if (event.key === 'Tab' && !event.shiftKey && this.timeField?.isVisible) {\n                    event.stopPropagation();\n                    event.cancelBubble = true;\n                }\n            }\n        }));\n\n        return result;\n    }\n\n    get childItems() {\n        return [this.dateField, this.timeField];\n    }\n\n    // Set up change listener when DateField is available. Not in dateField config to enable users to supply their own\n    // listeners block there\n    updateDateField(dateField) {\n        const me = this;\n\n        dateField.ion({\n            change({ userAction, value }) {\n                if (userAction && !me.$isInternalChange) {\n                    me._isUserAction = true;\n                    if (!me.timeField.value) {\n                        me.timeField.value = value;\n                    }\n                    else if (value) {\n                        // Preserve the time field value when changing the datefield.\n                        DateHelper.copyTimeValues(value, me.timeField.value || midnightDate);\n                    }\n                    me.value = value;\n                    me._isUserAction = false;\n                }\n            },\n            thisObj : me\n        });\n    }\n\n    updateWeekStartDay(weekStartDay) {\n        if (this.dateField) {\n            this.dateField.weekStartDay = weekStartDay;\n        }\n    }\n\n    changeWeekStartDay(value) {\n        return typeof value === 'number' ? value : (this.dateField?.weekStartDay ?? DateHelper.weekStartDay);\n    }\n\n    // Apply our value to our underlying fields\n    syncInputFieldValue(skipHighlight = this.isConfiguring) {\n        super.syncInputFieldValue(true);\n\n        const\n            me                       = this,\n            { dateField, timeField } = me,\n            highlightDate            = dateField.highlightExternalChange,\n            highlightTime            = timeField.highlightExternalChange;\n\n        if (!skipHighlight && !me.highlightExternalChange) {\n            skipHighlight = true;\n        }\n\n        me.$isInternalChange = true;\n\n        dateField.highlightExternalChange = false;\n\n        // <remove-on-release>\n        // TODO: Should be doable without this hack\n        // </remove-on-release>\n        // Prevent dateField from keeping its time value\n        dateField.value = null;\n\n        dateField.highlightExternalChange = highlightDate;\n\n        if (skipHighlight) {\n            timeField.highlightExternalChange = dateField.highlightExternalChange = false;\n        }\n\n        timeField.value = dateField.value = me.inputValue;\n\n        dateField.highlightExternalChange = highlightDate;\n        timeField.highlightExternalChange = highlightTime;\n\n        me.$isInternalChange = false;\n\n        // Must evaluate after child fields have been updated since our validity state depends on theirs.\n        me.syncInvalid();\n    }\n\n    onTimeFieldKeyDown(e) {\n        const me = this;\n\n        // we need to handle keydown for composed field manually and before it's done by cellEdit feature\n        if (e.key === 'Enter' || e.key === 'Tab') {\n            const dateAndTime = me.dateField.value;\n            me._isUserAction = true;\n            me.value = dateAndTime ? DateHelper.copyTimeValues(dateAndTime, me.timeField.value || midnightDate) : null;\n            me._isUserAction = false;\n        }\n    }\n\n    onDateFieldKeyDown(e) {\n        const me = this;\n\n        if (e.key === 'Tab' && !e.shiftKey) {\n            e.stopPropagation();\n            e.preventDefault();\n            me.timeField.focus();\n        }\n        // we need to handle keydown for composed field manually and before it's done by cellEdit feature\n        else if (e.key === 'Enter') {\n            me.value = me.dateField.value;\n        }\n    }\n\n    // Make us and our underlying fields required\n    updateRequired(required, was) {\n        this.timeField.required = this.dateField.required = required;\n    }\n\n    updateReadOnly(readOnly, was) {\n        super.updateReadOnly(readOnly, was);\n\n        if (!this.isConfiguring) {\n            this.timeField.readOnly = this.dateField.readOnly = readOnly;\n        }\n    }\n\n    // Make us and our underlying fields disabled\n    onDisabled(value) {\n        this.timeField.disabled = this.dateField.disabled = value;\n    }\n\n    focus() {\n        this.dateField.focus();\n    }\n\n    hasChanged(oldValue, newValue) {\n        return !DateHelper.isEqual(oldValue, newValue);\n    }\n\n    get isValid() {\n        return this.timeField.isValid && this.dateField.isValid;\n    }\n\n    setError(error, silent) {\n        [this.dateField, this.timeField].forEach(f => f.setError(error, silent));\n    }\n\n    getErrors() {\n        const errors = [...(this.dateField.getErrors() || []), ...(this.timeField.getErrors() || [])];\n\n        return errors.length ? errors : null;\n    }\n\n    clearError(error, silent) {\n        [this.dateField, this.timeField].forEach(f => f.clearError(error, silent));\n    }\n\n    updateInvalid() {\n        // use this flag in this level to avoid looping\n        this.updatingInvalid = true;\n        [this.dateField, this.timeField].forEach(f => f.updateInvalid());\n        this.updatingInvalid = false;\n    }\n}\n\nDateTimeField.initClass();\n","import Layout from './Layout.js';\nimport Widget from '../Widget.js';\nimport EventHelper from '../../helper/EventHelper.js';\n\n/**\n * @module Core/widget/layout/Card\n */\n\nconst animationClasses = [\n    'b-slide-out-left',\n    'b-slide-out-right',\n    'b-slide-in-left',\n    'b-slide-in-right'\n];\n\n/**\n * A helper class for containers which must manage multiple child widgets, of which only one may be visible at once such\n * as a {@link Core.widget.TabPanel}. This class offers an active widget switching API, and optional slide-in,\n * slide-out animations from child to child.\n * @extends Core/widget/layout/Layout\n * @layout\n * @classtype card\n */\nexport default class Card extends Layout {\n    static $name = 'Card';\n\n    static type = 'card';\n\n    static configurable = {\n        containerCls : 'b-card-container',\n\n        itemCls : 'b-card-item',\n\n        hideChildHeaderCls : 'b-hide-child-headers',\n\n        /**\n         * Specifies whether to slide tabs in and out of visibility.\n         * @config {Boolean}\n         * @default\n         */\n        animateCardChange : true,\n\n        /**\n         * The active child item.\n         * @config {Core.widget.Widget}\n         */\n        activeItem : null,\n\n        /**\n         * The active child index.\n         * @config {Number}\n         */\n        activeIndex : null\n    };\n\n    onChildAdd(item) {\n        super.onChildAdd(item);\n\n        const\n            me = this,\n            {\n                activeItem,\n                owner\n            }           = me,\n            activeIndex = owner.activeIndex != null ? owner.activeIndex : (me.activeIndex || 0),\n            itemIndex   = owner.items.indexOf(item),\n            isActive    = activeItem != null ? item === activeItem : itemIndex === activeIndex;\n\n        item.ion({\n            beforeHide : 'onBeforeChildHide',\n            beforeShow : 'onBeforeChildShow',\n            thisObj    : me\n        });\n\n        // Ensure inactive child items start hidden, and the active one starts shown.\n        // Sync our active indicators with reality ready for render.\n        if (isActive) {\n            me._activeIndex = itemIndex;\n            me._activeItem = item;\n            item.show();\n        }\n        else {\n            item.$isDeactivating = true;\n            item.hide();\n            item.$isDeactivating = false;\n        }\n    }\n\n    onChildRemove(item) {\n        super.onChildRemove(item);\n\n        const me = this;\n\n        // Active child has been removed without setting another child to be active.\n        // Choose an immediate sibling to be the new active item\n        if (me._activeItem === item) {\n            me.activateSiblingOf(item);\n        }\n\n        me._activeIndex = me.owner.items.indexOf(me._activeItem);\n\n        item.un({\n            beforeHide : 'onBeforeChildHide',\n            beforeShow : 'onBeforeChildShow',\n            thisObj    : me\n        });\n    }\n\n    /**\n     * Detect external code showing a child. We veto that show and activate it through the API.\n     * @internal\n     */\n    onBeforeChildShow({ source : showingChild }) {\n        // Some outside code is showing a child.\n        // We must control this, so veto it and activate it in the standard way.\n        if (!this.owner.isConfiguring && !showingChild.$isActivating) {\n            this.activeItem = showingChild;\n            return false;\n        }\n    }\n\n    /**\n     * Detect external code hiding a child. We veto that show and activate an immediate sibling through the API.\n     * @internal\n     */\n    onBeforeChildHide({ source : hidingChild }) {\n        // Some outside code is hiding a child.\n        // We must control this, so veto it and activate a sibling in the standard way.\n        if (!this.owner.isConfiguring && !hidingChild.$isDeactivating) {\n            this.activateSiblingOf(hidingChild);\n            return false;\n        }\n    }\n\n    activateSiblingOf(item) {\n        const\n            { owner } = this,\n            items     = owner.items.slice(),\n            removeAt  = items.indexOf(item);\n\n        items.splice(removeAt, 1);\n\n        this.activeIndex = Math.min(removeAt, items.length - 1);\n    }\n\n    /**\n     * Get/set active item, using index or the Widget to activate\n     * @param {Core.widget.Widget|Number} activeIndex\n     * @param {Number} [prevActiveIndex]\n     * @param {Object} [options]\n     * @param {Boolean} [options.animation] Pass `false` to disable animation\n     * @param {Boolean} [options.silent] Pass `true` to not fire transition events\n     * @returns {Object} An object describing the card change containing the following properties:\n     *  - `prevActiveIndex` The previously active index.\n     *  - `prevActiveItem ` The previously active child item.\n     *  - `activeIndex    ` The newly active index.\n     *  - `activeItem     ` The newly active child item.\n     *  - `promise        ` A promise which completes when the slide-in animation finishes and the child item contains\n     * focus if it is focusable.\n     * @internal\n     */\n    setActiveItem(activeIndex, prevActiveIndex = this.activeIndex, options) {\n        const\n            me             = this,\n            { owner }      = me,\n            { items }      = owner,\n            widgetPassed   = activeIndex instanceof Widget,\n            prevActiveItem = items[prevActiveIndex],\n            newActiveItem  = owner.items[activeIndex = widgetPassed ? items.indexOf(activeIndex) : parseInt(activeIndex, 10)],\n            animation      = options?.animation !== false,\n            chatty         = !options?.silent,\n            event = {\n                prevActiveIndex,\n                prevActiveItem\n            };\n\n        // There's a child widget at that index to activate and we're not already activating it.\n        if (newActiveItem && !newActiveItem.$isActivating && newActiveItem !== prevActiveItem) {\n            const\n                prevItemElement = prevActiveItem && prevActiveItem.element,\n                newActiveElement = newActiveItem && newActiveItem.element;\n\n            // A previous card change is in progress, abort it and clean the items it was operating upon\n            if (me.animateDetacher) {\n                const activeCardChange = me.animateDetacher.event;\n\n                // The animation that is in flight is already doing what we are being asked for.\n                // Allow it to complete.\n                if (activeCardChange.activeItem === newActiveItem) {\n                    return activeCardChange.promise;\n                }\n                me.animateDetacher();\n                activeCardChange.prevActiveItem.element.classList.remove(...animationClasses);\n                activeCardChange.activeItem.element.classList.remove(...animationClasses);\n                me.animateDetacher = null;\n            }\n\n            event.activeIndex = activeIndex;\n            event.activeItem = newActiveItem;\n\n            /**\n             * The active item is about to be changed. Return `false` to prevent this.\n             * @event beforeActiveItemChange\n             * @preventable\n             * @on-owner\n             * @param {Number} activeIndex - The new active index.\n             * @param {Core.widget.Widget} activeItem - The new active child widget.\n             * @param {Number} prevActiveIndex - The previous active index.\n             * @param {Core.widget.Widget} prevActiveItem - The previous active child widget.\n             */\n            if (chatty && owner.trigger('beforeActiveItemChange', event) === false) {\n                return null;\n            }\n\n            // Since onBeforeActiveItemChange happens before event handlers run, the activation could be cancelled by\n            // a listener, so we do a special hook once we are sure things are going down.\n            // We pretend that we have already switched active index so that the owner\n            // does not attempt to initiate the change.\n            const reset = me._activeIndex !== event.activeIndex;\n\n            if (reset) {\n                me._activeIndex = event.activeIndex;\n            }\n\n            chatty && owner.onBeginActiveItemChange?.(event);\n\n            if (reset) {\n                me._activeIndex = event.prevActiveIndex;\n            }\n\n            // If we're animating and there's something to slide out\n            // then slide it out, and slide the new item in\n            if (animation && prevItemElement && owner.isVisible && me.animateCardChange) {\n                event.promise = me.cardChangeAnimation = new Promise((resolve, reject) => {                   // During the card sliding trick, we don't want resize notifications.\n                    // The outgoing card should be as inert as if it were hidden.\n                    const wasMonitoringSize = prevActiveItem.monitorResize;\n                    prevActiveItem.monitorResize = false;\n\n                    me.contentElement.style.overflowX = 'hidden';\n\n                    // The outgoing card must report its isVisible property as false from now on\n                    // even before we officially hide it.\n                    prevActiveItem._hidden = true;\n\n                    // Show the item so that it can be slid in.\n                    // Events will ensue, UIs can react to the show event.\n                    // The flag is so that our onBeforeChildShow listener can\n                    // tell if it's part of our orderly activate operation.\n                    newActiveItem.$isActivating = true;\n                    newActiveItem.show();\n                    newActiveItem.$isActivating = false;\n\n                    prevItemElement.classList.add(activeIndex > prevActiveIndex ? 'b-slide-out-left' : 'b-slide-out-right');\n                    newActiveElement.classList.add(activeIndex < prevActiveIndex ? 'b-slide-in-left' : 'b-slide-in-right');\n                    owner.isAnimating = true;\n\n                    // When the new widget is in place, clean up\n                    me.animateDetacher = EventHelper.onTransitionEnd({\n                        mode    : 'animation',\n                        element : newActiveElement,\n\n                        // onTransitionEnd protects us from being called\n                        // after the thisObj is destroyed.\n                        thisObj : prevActiveItem,\n\n                        handler()  {\n                            // Calendar got stuck with `b-animating` in some monkey scenarios, hoisted this to make\n                            // sure it was not left behind\n                            owner.isAnimating = me.cardChangeAnimation = false;\n\n                            // if animateDetacher variable has been cleared before this callback,\n                            // this means race-condition call happened. active item should be called again to\n                            // prevent unexpected layout behaviour\n                            if (!me.animateDetacher) {\n                                me.setActiveItem(activeIndex, prevActiveIndex, options);\n                                return;\n                            }\n\n                            me.animateDetacher = null;\n\n                            // Clean incoming widget's animation classes\n                            newActiveElement.classList.remove(...animationClasses);\n\n                            // If there's an outgoing item, clean its animation classes and hide it\n                            if (prevItemElement) {\n                                prevItemElement.classList.remove(...animationClasses);\n\n                                // The flag is so that our onBeforeChildHide listener can\n                                // tell if it's part of our orderly activate operation.\n                                prevActiveItem.$isDeactivating = true;\n                                prevActiveItem._hidden = false;\n                                prevActiveItem.hide();\n                                prevActiveItem.monitorResize = wasMonitoringSize;\n                                prevActiveItem.$isDeactivating = false;\n                            }\n\n                            me.contentElement.style.overflowX = '';\n                            me.onActiveItemChange(event, resolve, !chatty);\n                        }\n                    });\n\n                    me.animateDetacher.reject = reject;\n                    me.animateDetacher.event = event;\n                });\n            }\n            // Nothing to slide out or we are not animating.\n            else {\n                // Show the new active items first, so that the hide listener doesn't\n                // automatically set a new active item based on active item being hidden.\n                // The flag is so that our onBeforeChildShow listener can\n                // tell if it's part of our orderly activate operation.\n                newActiveItem.$isActivating = true;\n                newActiveItem.show();\n\n                // focus the new item before lost the component focus when hide the old one\n                // (because losing focus closes owner if it is floatable)\n                newActiveItem.focus();\n\n                newActiveItem.$isActivating = false;\n\n                if (prevActiveItem) {\n                    // The flag is so that our onBeforeChildHide listener can\n                    // tell if it's part of our orderly activate operation.\n                    prevActiveItem.$isDeactivating = true;\n                    prevActiveItem.hide();\n                    prevActiveItem.$isDeactivating = false;\n                }\n\n                me.onActiveItemChange(event, null, !chatty);\n            }\n        }\n\n        return event;\n    }\n\n    onActiveItemChange(event, resolve, silent) {\n        const me = this;\n\n        me._activeItem = event.activeItem;\n        me._activeIndex = event.activeIndex;\n\n        /**\n         * The active item has changed.\n         * @event activeItemChange\n         * @on-owner\n         * @param {Number} activeIndex - The new active index.\n         * @param {Core.widget.Widget} activeItem - The new active child widget.\n         * @param {Number} prevActiveIndex - The previous active index.\n         * @param {Core.widget.Widget} prevActiveItem - The previous active child widget.\n         */\n        !silent && me.owner.trigger('activeItemChange', event);\n\n        // Note that we have to call focus *after* the element is in its new position\n        // because focus({preventScroll:true}) is not supported everywhere\n        // and crazy browser scrolling behaviour on focus breaks the animation.\n        me.owner.containsFocus && event.activeItem.focus();\n\n        resolve?.(event);\n    }\n\n    renderChildren() {\n        const { owner } = this;\n\n        owner.contentElement.classList.toggle(this.hideChildHeaderCls, owner.suppressChildHeaders);\n\n        super.renderChildren();\n    }\n\n    changeActiveIndex(activeIndex) {\n        const { owner } = this;\n\n        // Sanitize it if possible\n        return owner.isConfiguring && !owner._items ? activeIndex : Math.min(activeIndex, owner.items.length - 1);\n    }\n\n    updateActiveIndex(activeIndex, oldActiveIndex) {\n        if (!this.owner.isConfiguring) {\n            this.setActiveItem(activeIndex, oldActiveIndex);\n        }\n    }\n\n    updateActiveItem(activeItem) {\n        if (!this.owner.isConfiguring) {\n            this.setActiveItem(activeItem, this.activeIndex);\n        }\n    }\n\n    /**\n     * If the layout is set to {@link #config-animateCardChange}, then this property\n     * will be `true` during the animated card change.\n     * @property {Boolean}\n     * @readonly\n     */\n    get isChangingCard() {\n        return Boolean(this.animateDetacher);\n    }\n}\n\n// Layouts must register themselves so that the static layout instantiation\n// in Layout knows what to do with layout type names\nCard.initClass();\n"],"names":["midnightDate","Date","DateTimeField","Field","configurable","timeField","dateField","keepTime","step","weekStartDay","inputTemplate","ariaElement","$name","type","alias","doDestroy","destroy","focusElement","input","innerElements","element","internalOnKeyEvent","updateRevertOnEscape","revertOnEscape","changeTimeField","config","me","result","TimeField","new","syncInvalid","args","updatingInvalid","prototype","apply","EventHelper","on","keydown","thisObj","readOnly","updateTimeField","ion","change","userAction","value","$settingValue","dateAndTime","_isUserAction","DateHelper","copyTimeValues","changeDateField","cls","Widget","resolveType","create","ObjectHelper","assign","event","_this$timeField","key","shiftKey","isVisible","stopPropagation","cancelBubble","childItems","updateDateField","$isInternalChange","updateWeekStartDay","changeWeekStartDay","_this$dateField","syncInputFieldValue","skipHighlight","isConfiguring","highlightDate","highlightExternalChange","highlightTime","inputValue","onTimeFieldKeyDown","e","onDateFieldKeyDown","preventDefault","focus","updateRequired","required","was","updateReadOnly","onDisabled","disabled","hasChanged","oldValue","newValue","isEqual","isValid","setError","error","silent","forEach","f","getErrors","errors","length","clearError","updateInvalid","initClass","_$name","animationClasses","Card","Layout","containerCls","itemCls","hideChildHeaderCls","animateCardChange","activeItem","activeIndex","onChildAdd","item","owner","itemIndex","items","indexOf","isActive","beforeHide","beforeShow","_activeIndex","_activeItem","show","$isDeactivating","hide","onChildRemove","activateSiblingOf","un","onBeforeChildShow","source","showingChild","$isActivating","onBeforeChildHide","hidingChild","slice","removeAt","splice","Math","min","setActiveItem","prevActiveIndex","options","widgetPassed","prevActiveItem","newActiveItem","parseInt","animation","chatty","_owner$onBeginActiveI","prevItemElement","newActiveElement","animateDetacher","activeCardChange","promise","classList","remove","trigger","reset","onBeginActiveItemChange","call","cardChangeAnimation","Promise","resolve","reject","wasMonitoringSize","monitorResize","contentElement","style","overflowX","_hidden","add","isAnimating","onTransitionEnd","mode","handler","onActiveItemChange","containsFocus","renderChildren","toggle","suppressChildHeaders","changeActiveIndex","_items","updateActiveIndex","oldActiveIndex","updateActiveItem","isChangingCard","Boolean"],"mappings":"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"}