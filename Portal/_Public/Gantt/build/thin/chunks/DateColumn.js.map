{"version":3,"file":"DateColumn.js","sources":["../../../../Grid/lib/Grid/column/DateColumn.js"],"sourcesContent":["import Column from './Column.js';\nimport ColumnStore from '../data/ColumnStore.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\n\n/**\n * @module Grid/column/DateColumn\n */\n\n/**\n * A column that displays a date in the specified {@link #config-format}. By default `L` format is used, which\n * contains the following info: full year, 2-digit month, and 2-digit day. Depending on the browser locale,\n * the formatted date might look different. [Intl.DateTimeFormat API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat)\n * is used to format the date. Here is an example of possible outputs depending on the browser locale:\n *\n * ```javascript\n * // These options represent `L` format\n * const options = { year : 'numeric', month : '2-digit', day : '2-digit' };\n *\n * new Intl.DateTimeFormat('en-US', options).format(new Date(2021, 6, 1)); // \"07/01/2021\"\n * new Intl.DateTimeFormat('ru-RU', options).format(new Date(2021, 6, 1)); // \"01.07.2021\"\n *\n * // Formatting using Bryntum API\n * LocaleManager.applyLocale('En');\n * DateHelper.format(new Date(2021, 6, 1), 'L'); // \"07/01/2021\"\n * LocaleManager.applyLocale('Ru');\n * DateHelper.format(new Date(2021, 6, 1), 'L'); // \"01.07.2021\"\n * ```\n *\n * To learn more about available formats check out {@link Core.helper.DateHelper} docs.\n *\n * The {@link Core.data.field.DateDataField field} this column reads data from should be a type of date.\n *\n * Default editor is a {@link Core.widget.DateField}.\n *\n * @extends Grid/column/Column\n *\n * @example\n * new Grid({\n *     columns : [\n *          { type: 'date', text: 'Start date', format: 'YYYY-MM-DD', field: 'start' }\n *     ]\n * });\n *\n * @classType date\n * @inlineexample Grid/column/DateColumn.js\n * @column\n */\nexport default class DateColumn extends Column {\n\n    //region Config\n\n    static $name = 'DateColumn';\n\n    static type  = 'date';\n\n    // Type to use when auto adding field\n    static fieldType = 'date';\n\n    static fields = ['format', 'pickerFormat', 'step', 'min', 'max'];\n\n    static get defaults() {\n        return {\n            /**\n             * Min value for the cell editor\n             * @config {String|Date} min\n             */\n\n            /**\n             * Max value for the cell editor\n             * @config {String|Date} max\n             */\n\n            /**\n             * The {@link Core.data.field.DateDataField#config-name} of the data model date field to read data from.\n             * @config {String} field\n             * @category Common\n             */\n\n            /**\n             * Date format to convert a given date object into a string to display. By default `L` format is used, which\n             * contains the following info: full year, 2-digit month, and 2-digit day. Depending on the browser locale,\n             * the formatted date might look different. [Intl.DateTimeFormat API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat)\n             * is used to format the date. Here is an example of possible outputs depending on the browser locale:\n             *\n             * ```javascript\n             * // These options represent `L` format\n             * const options = { year : 'numeric', month : '2-digit', day : '2-digit' };\n             *\n             * new Intl.DateTimeFormat('en-US', options).format(new Date(2021, 6, 1)); // \"07/01/2021\"\n             * new Intl.DateTimeFormat('ru-RU', options).format(new Date(2021, 6, 1)); // \"01.07.2021\"\n             *\n             * // Formatting using Bryntum API\n             * LocaleManager.applyLocale('En');\n             * DateHelper.format(new Date(2021, 6, 1), 'L'); // \"07/01/2021\"\n             * LocaleManager.applyLocale('Ru');\n             * DateHelper.format(new Date(2021, 6, 1), 'L'); // \"01.07.2021\"\n             * ```\n             *\n             * To learn more about available formats check out {@link Core.helper.DateHelper} docs.\n             *\n             * Note, the {@link Core.data.field.DateDataField field} this column reads data from should be a type of date.\n             * @config {String}\n             * @default\n             * @category Common\n             */\n            format : 'L',\n\n            /**\n             * Time increment duration value to apply when clicking the left / right trigger icons. See\n             * {@link Core.widget.DateField#config-step} for more information\n             * Set to `null` to hide the step triggers.\n             * @config {String|Number|DurationConfig}\n             * @default\n             * @category Common\n             */\n            step : 1,\n\n            minWidth : 85,\n\n            filterType : 'date'\n        };\n    }\n\n    //endregion\n\n    //region Display\n\n    /**\n     * Renderer that displays the date with the specified format. Also adds cls 'date-cell' to the cell.\n     * @private\n     */\n    defaultRenderer({ value }) {\n        return value ? this.formatValue(value) : '';\n    }\n\n    /**\n     * Group renderer that displays the date with the specified format.\n     * @private\n     */\n    groupRenderer({ cellElement, groupRowFor }) {\n        cellElement.innerHTML = this.formatValue(groupRowFor);\n    }\n\n    //endregion\n\n    //region Formatter\n\n    /**\n     * Used by both renderer and groupRenderer to do the actual formatting of the date\n     * @private\n     * @param value\n     * @returns {String}\n     */\n    formatValue(value) {\n        // Ideally we should be served a date, but if not make it easier for the user by parsing\n        if (typeof value === 'string') {\n            value = DateHelper.parse(value, this.format || undefined); // null does not use default format\n        }\n        return DateHelper.format(value, this.format || undefined);\n    }\n\n    //endregion\n\n    //region Getters/setters\n\n    /**\n     * Get/Set format for date displayed in cell and editor (see {@link Core.helper.DateHelper#function-format-static} for formatting options)\n     * @property {String}\n     */\n    set format(value) {\n        const { editor } = this.data;\n\n        this.set('format', value);\n\n        if (editor) {\n            editor.format = value;\n        }\n    }\n\n    get format() {\n        return this.get('format');\n    }\n\n    get defaultEditor() {\n        const\n            me                         = this,\n            { min, max, step, format } = me;\n\n        return {\n            name                 : me.field,\n            type                 : 'date',\n            calendarContainerCls : 'b-grid-cell-editor-related',\n            weekStartDay         : me.grid.weekStartDay,\n            format,\n            max,\n            min,\n            step\n        };\n    }\n\n    //endregion\n\n}\n\nColumnStore.registerColumnType(DateColumn, true);\nDateColumn.exposeProperties();\n"],"names":["DateColumn","Column","$name","type","fieldType","fields","defaults","format","step","minWidth","filterType","defaultRenderer","value","formatValue","groupRenderer","cellElement","groupRowFor","innerHTML","DateHelper","parse","undefined","editor","data","set","get","defaultEditor","me","min","max","name","field","calendarContainerCls","weekStartDay","grid","ColumnStore","registerColumnType","exposeProperties","_$name"],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMA,UAAU,SAASC,MAAM,CAAC;AAC3C;EACA,OAAOC,KAAK,GAAG,YAAY,CAAA;EAC3B,OAAOC,IAAI,GAAI,MAAM,CAAA;AACrB;EACA,OAAOC,SAAS,GAAG,MAAM,CAAA;AACzB,EAAA,OAAOC,MAAM,GAAG,CAAC,QAAQ,EAAE,cAAc,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;EAChE,WAAWC,QAAQA,GAAG;IAClB,OAAO;AACH;AACZ;AACA;AACA;AACY;AACZ;AACA;AACA;AACY;AACZ;AACA;AACA;AACA;AACY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACYC,MAAAA,MAAM,EAAG,GAAG;AACZ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACYC,MAAAA,IAAI,EAAG,CAAC;AACRC,MAAAA,QAAQ,EAAG,EAAE;AACbC,MAAAA,UAAU,EAAG,MAAA;KAChB,CAAA;AACL,GAAA;AACA;AACA;AACA;AACJ;AACA;AACA;AACIC,EAAAA,eAAeA,CAAC;AAAEC,IAAAA,KAAAA;AAAM,GAAC,EAAE;IACvB,OAAOA,KAAK,GAAG,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC,GAAG,EAAE,CAAA;AAC/C,GAAA;AACA;AACJ;AACA;AACA;AACIE,EAAAA,aAAaA,CAAC;IAAEC,WAAW;AAAEC,IAAAA,WAAAA;AAAY,GAAC,EAAE;IACxCD,WAAW,CAACE,SAAS,GAAG,IAAI,CAACJ,WAAW,CAACG,WAAW,CAAC,CAAA;AACzD,GAAA;AACA;AACA;AACA;AACJ;AACA;AACA;AACA;AACA;EACIH,WAAWA,CAACD,KAAK,EAAE;AACf;AACA,IAAA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;AAC3BA,MAAAA,KAAK,GAAGM,UAAU,CAACC,KAAK,CAACP,KAAK,EAAE,IAAI,CAACL,MAAM,IAAIa,SAAS,CAAC,CAAC;AAC9D,KAAA;;IACA,OAAOF,UAAU,CAACX,MAAM,CAACK,KAAK,EAAE,IAAI,CAACL,MAAM,IAAIa,SAAS,CAAC,CAAA;AAC7D,GAAA;AACA;AACA;AACA;AACJ;AACA;AACA;EACI,IAAIb,MAAMA,CAACK,KAAK,EAAE;IACd,MAAM;AAAES,MAAAA,MAAAA;KAAQ,GAAG,IAAI,CAACC,IAAI,CAAA;AAC5B,IAAA,IAAI,CAACC,GAAG,CAAC,QAAQ,EAAEX,KAAK,CAAC,CAAA;AACzB,IAAA,IAAIS,MAAM,EAAE;MACRA,MAAM,CAACd,MAAM,GAAGK,KAAK,CAAA;AACzB,KAAA;AACJ,GAAA;EACA,IAAIL,MAAMA,GAAG;AACT,IAAA,OAAO,IAAI,CAACiB,GAAG,CAAC,QAAQ,CAAC,CAAA;AAC7B,GAAA;EACA,IAAIC,aAAaA,GAAG;IAChB,MACIC,EAAE,GAA2B,IAAI;AACjC,MAAA;QAAEC,GAAG;QAAEC,GAAG;QAAEpB,IAAI;AAAED,QAAAA,MAAAA;AAAO,OAAC,GAAGmB,EAAE,CAAA;IACnC,OAAO;MACHG,IAAI,EAAmBH,EAAE,CAACI,KAAK;AAC/B3B,MAAAA,IAAI,EAAmB,MAAM;AAC7B4B,MAAAA,oBAAoB,EAAG,4BAA4B;AACnDC,MAAAA,YAAY,EAAWN,EAAE,CAACO,IAAI,CAACD,YAAY;MAC3CzB,MAAM;MACNqB,GAAG;MACHD,GAAG;AACHnB,MAAAA,IAAAA;KACH,CAAA;AACL,GAAA;AACA;AACJ,CAAA;;AACA0B,WAAW,CAACC,kBAAkB,CAACnC,UAAU,EAAE,IAAI,CAAC,CAAA;AAChDA,UAAU,CAACoC,gBAAgB,EAAE,CAAA;AAC7BpC,UAAU,CAACqC,MAAM,GAAG,YAAY;;;;"}