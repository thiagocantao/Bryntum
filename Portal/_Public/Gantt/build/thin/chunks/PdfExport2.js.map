{"version":3,"file":"PdfExport2.js","sources":["../../../../Scheduler/lib/Scheduler/column/ResourceInfoColumn.js","../../../../Scheduler/lib/Scheduler/feature/Labels.js","../../../../Scheduler/lib/Scheduler/feature/RowReorder.js","../../../../Scheduler/lib/Scheduler/feature/TimelineSummary.js","../../../../Scheduler/lib/Scheduler/feature/export/Utils.js","../../../../Scheduler/lib/Scheduler/feature/export/exporter/SchedulerExporterMixin.js","../../../../Scheduler/lib/Scheduler/feature/export/exporter/MultiPageExporter.js","../../../../Scheduler/lib/Scheduler/feature/export/exporter/MultiPageVerticalExporter.js","../../../../Scheduler/lib/Scheduler/view/export/field/ScheduleRangeCombo.js","../../../../Scheduler/lib/Scheduler/view/export/SchedulerExportDialog.js","../../../../Scheduler/lib/Scheduler/feature/export/exporter/SinglePageExporter.js","../../../../Scheduler/lib/Scheduler/feature/export/PdfExport.js"],"sourcesContent":["import Column from '../../Grid/column/Column.js';\nimport ColumnStore from '../../Grid/data/ColumnStore.js';\nimport StringHelper from '../../Core/helper/StringHelper.js';\nimport VersionHelper from '../../Core/helper/VersionHelper.js';\nimport AvatarRendering from '../../Core/widget/util/AvatarRendering.js';\n\n/**\n * @module Scheduler/column/ResourceInfoColumn\n */\n\n/**\n * Displays basic resource information. Defaults to showing an image + name + event count (all configurable).\n *\n * If a resource has no image, you can either provide an icon using `iconCls` in the data (you then need to specify\n * `image === false` in your data) or the resource initials will be shown.\n *\n * Be sure to specify {@link Scheduler.view.mixin.SchedulerEventRendering#config-resourceImagePath} to instruct the\n * column where to look for the images.\n *\n * If an image fails to load or if a resource lacks an image, the resource name initials will be rendered. If the\n * resource has an {@link Scheduler/model/mixin/ResourceModelMixin#field-eventColor} specified, it will be used as the\n * background color of the initials.\n *\n * @inlineexample Scheduler/column/ResourceInfoColumn.js\n * @classType resourceInfo\n * @extends Grid/column/Column\n * @column\n */\nexport default class ResourceInfoColumn extends Column {\n\n    static get $name() {\n        return 'ResourceInfoColumn';\n    }\n\n    static get type() {\n        return 'resourceInfo';\n    }\n\n    static get fields() {\n        return ['showEventCount', 'showRole', 'showMeta', 'showImage', 'validNames', 'autoScaleThreshold', 'useNameAsImageName'];\n    }\n\n    static get defaults() {\n        return {\n            /** @hideconfigs renderer */\n\n            /**\n             * Show image. Looks for image name in fields on the resource in the following order: 'imageUrl', 'image',\n             * 'name'. Set `showImage` to a field name to use a custom field. Set `Scheduler.resourceImagePath` to\n             * specify where to load images from. If no extension found, defaults to\n             * {@link Scheduler.view.mixin.SchedulerEventRendering#config-resourceImageExtension}.\n             * @config {Boolean}\n             * @default\n             */\n            showImage : true,\n\n            /**\n             * Show number of events assigned to the resource below the name.\n             * @config {Boolean}\n             * @default\n             */\n            showEventCount : true,\n\n            /**\n             * A template string to render any extra information about the resource below the name\n             * @config {Function}\n             * @param {Scheduler.model.ResourceModel} resourceRecord The record representing the current row\n             */\n            showMeta : null,\n\n            /**\n             * Show resource role below the name. Specify `true` to display data from the `role` field, or specify a field\n             * name to read this value from.\n             * @config {Boolean|String}\n             * @default\n             */\n            showRole : false,\n\n            /**\n             * Valid image names. Set to `null` to allow all names.\n             * @deprecated This will be removed in 6.0\n             * @config {String[]}\n             */\n            validNames : null,\n\n            /**\n             * Specify 0 to prevent the column from adapting its content according to the used row height, or specify a\n             * threshold (row height) at which scaling should start.\n             * @config {Number}\n             * @default\n             */\n            autoScaleThreshold : 40,\n\n            /**\n             * Use the resource name as the image name when no `image` is specified on the resource.\n             * @config {Boolean}\n             * @default\n             */\n            useNameAsImageName : true,\n\n            field      : 'name',\n            htmlEncode : false,\n            width      : 140,\n            cellCls    : 'b-resourceinfo-cell',\n            editor     : VersionHelper.isTestEnv ? false : 'text'\n        };\n    }\n\n    construct(...args) {\n        super.construct(...args);\n\n        this.avatarRendering = new AvatarRendering({\n            element : this.grid.element\n        });\n    }\n\n    doDestroy() {\n        super.doDestroy();\n\n        this.avatarRendering.destroy();\n    }\n\n    getImageURL(imageName) {\n        const\n            resourceImagePath = this.grid.resourceImagePath || '',\n            parts             = resourceImagePath.split('//'),\n            urlPart           = parts.length > 1 ? parts[1] : resourceImagePath,\n            joined            = StringHelper.joinPaths([urlPart || '', imageName || '']);\n\n        return parts.length > 1 ? parts[0] + '//' + joined : joined;\n    }\n\n    template(resourceRecord, value) {\n        const me        = this,\n            {\n                showImage,\n                showRole,\n                showMeta,\n                showEventCount,\n                grid\n            }         = me,\n            {\n                timeAxis,\n                resourceImageExtension = '',\n                defaultResourceImageName\n            }         = grid,\n            roleField = typeof showRole === 'string' ? showRole : 'role',\n            count     = showEventCount && resourceRecord.eventStore.getEvents({\n                includeOccurrences : grid.enableRecurringEvents,\n                resourceRecord,\n                startDate          : timeAxis.startDate,\n                endDate            : timeAxis.endDate\n            }).length;\n\n        let imageUrl;\n\n        if (showImage && resourceRecord.image !== false) {\n            if (resourceRecord.imageUrl) {\n                imageUrl = resourceRecord.imageUrl;\n            }\n            else {\n                // record.image is supposed to be a file name, located at resourceImagePath\n                const\n                    imageName = typeof showImage === 'string'\n                        ? showImage\n                        : (resourceRecord.image || value && me.useNameAsImageName && (value.toLowerCase() + resourceImageExtension) || defaultResourceImageName) || '';\n\n                imageUrl = imageName && me.getImageURL(imageName);\n\n                // Image name should have an extension\n                if (imageUrl && !imageName.includes('.')) {\n                    // If validNames is specified, check that imageName is valid\n                    if (!me.validNames || me.validNames.includes(imageName)) {\n                        imageUrl += resourceImageExtension;\n                    }\n                }\n            }\n        }\n\n        return {\n            class    : 'b-resource-info',\n            children : [\n                showImage && me.avatarRendering.getResourceAvatar({\n                    resourceRecord,\n                    initials        : resourceRecord.initials,\n                    color           : resourceRecord.eventColor,\n                    iconCls         : resourceRecord.iconCls,\n                    imageUrl,\n                    defaultImageUrl : defaultResourceImageName && this.getImageURL(defaultResourceImageName)\n                }),\n                showRole || showEventCount || showMeta ? {\n                    tag      : 'dl',\n                    children : [\n                        {\n                            tag  : 'dt',\n                            text : value\n                        },\n                        showRole ? {\n                            tag   : 'dd',\n                            class : 'b-resource-role',\n                            text  : resourceRecord.getValue(roleField)\n                        } : null,\n\n                        showEventCount ? {\n                            tag   : 'dd',\n                            class : 'b-resource-events',\n                            html  : me.L('L{eventCountText}', count)\n                        } : null,\n\n                        showMeta ? {\n                            tag   : 'dd',\n                            class : 'b-resource-meta',\n                            html  : me.showMeta(resourceRecord)\n                        } : null\n                    ]\n                } : value // This becomes a text node, no HTML encoding needed\n            ]\n        };\n\n    }\n\n    defaultRenderer({ grid, record, cellElement, value, isExport }) {\n        let result;\n\n        if (record.isSpecialRow) {\n            result = '';\n        }\n        else if (isExport) {\n            result = value;\n        }\n        else {\n            if (this.autoScaleThreshold && grid.rowHeight < this.autoScaleThreshold) {\n                cellElement.style.fontSize = (grid.rowHeight / 40) + 'em';\n            }\n            else {\n                cellElement.style.fontSize = '';\n            }\n\n            result = this.template(record, value);\n        }\n\n        return result;\n    }\n}\n\nColumnStore.registerColumnType(ResourceInfoColumn);\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport DomSync from '../../Core/helper/DomSync.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\nimport StringHelper from '../../Core/helper/StringHelper.js';\nimport Editor from '../../Core/widget/Editor.js';\n\n/**\n * @module Scheduler/feature/Labels\n */\n\nconst\n    sides       = [\n        'top',\n        'before',\n        'after',\n        'bottom'\n    ],\n    editorAlign = (side, client) => {\n        switch (side) {\n            case 'top' :\n                return 'b-b';\n            case 'after' :\n                return client.rtl ? 'r-r' : 'l-l';\n            case 'right' :\n                return 'l-l';\n            case 'bottom' :\n                return 't-t';\n            case 'before' :\n                return client.rtl ? 'l-l' : 'r-r';\n            case 'left' :\n                return 'r-r';\n        }\n    },\n    topBottom   = {\n        top    : 1,\n        bottom : 1\n    },\n    layoutModes = {\n        estimate : 1,\n        measure  : 1\n    },\n    layoutSides = {\n        before : 1,\n        after  : 1\n    };\n\n/**\n * Configuration object for a label used by the Labels feature.\n * @typedef {Object} SchedulerLabelConfig\n * @property {String} field The name of a field in one of the associated records, {@link Scheduler.model.EventModel} or\n * {@link Scheduler.model.ResourceModel}. The record from which the field value is drawn will be ascertained by checking\n * for field definitions by the specified name.\n * @property {Function} renderer A function, which when passed an object containing `eventRecord`, `resourceRecord`,\n * `assignmentRecord` and `domConfig` properties, returns the HTML to display as the label\n * @property {Scheduler.model.EventModel} renderer.eventRecord\n * @property {Scheduler.model.ResourceModel} renderer.resourceRecord\n * @property {Scheduler.model.AssignmentModel} renderer.assignmentRecord\n * @property {DomConfig} renderer.domConfig\n * @property {Object} thisObj The `this` reference to use in the `renderer`.\n * @property {FieldConfig|Core.widget.Field} editor If the label is to be editable, a field configuration object with a\n * `type` property, or an instantiated Field. **The `field` property is mandatory for editing to work**.\n */\n\n/**\n * Displays labels at positions {@link #config-top}, {@link #config-right}, {@link #config-bottom} and\n * {@link #config-left}.\n *\n * Text in labels can be set from a field on the {@link Scheduler.model.EventModel} or the\n * {@link Scheduler.model.ResourceModel} or using a custom renderer.\n *\n * Since `top` and `bottom` labels occupy space that would otherwise be used by the event we recommend using bigger\n * rowHeights (>55px for both labels with default styling) and zero barMargins because `top`/`bottom` labels give space\n * around events anyway.\n *\n * To prevent labels from being overlapped by other events, see {@link #config-labelLayoutMode}.\n *\n * This feature is **off** by default. It is **not** supported in vertical mode.\n * For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Scheduler/labels\n * @inlineexample Scheduler/feature/Labels.js\n * @classtype labels\n * @feature\n */\nexport default class Labels extends InstancePlugin {\n    //region Config\n\n    static get $name() {\n        return 'Labels';\n    }\n\n    static get configurable() {\n        return {\n            /**\n             * CSS class to apply to label elements\n             * @config {String}\n             * @default\n             */\n            labelCls : 'b-sch-label',\n\n            /**\n             * Top label configuration object.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            top : null,\n\n            /**\n             * Configuration object for the label which appears *after* the event bar in the current writing direction.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            after : null,\n\n            /**\n             * Right label configuration object.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            right : null,\n\n            /**\n             * Bottom label configuration object.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            bottom : null,\n\n            /**\n             * Configuration object for the label which appears *before* the event bar in the current writing direction.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            before : null,\n\n            /**\n             * Left label configuration object.\n             * @config {SchedulerLabelConfig}\n             * @default\n             */\n            left : null,\n\n            thisObj : null,\n\n            /**\n             * What action should be taken when focus moves leaves the cell editor, for example when clicking outside.\n             * May be `'complete'` or `'cancel`'.\n             * @config {'complete'|'cancel'}\n             * @default\n             */\n            blurAction : 'cancel',\n\n            /**\n             * How to handle labels during event layout. Options are:\n             *\n             * * default - Labels do not affect event layout, events will overlap labels\n             * * estimate - Label width is estimated by multiplying text length with {@link #config-labelCharWidth}\n             * * measure - Label width is determined by measuring the label, precise but slow\n             *\n             * Note that this only applies to the left and right labels, top and bottom labels does not take part in the\n             * event layout process.\n             *\n             * @config {'default'|'estimate'|'measure'}\n             * @default\n             */\n            labelLayoutMode : 'default',\n\n            /**\n             * Factor representing the average char width in pixels used to determine label width when configured\n             * with `labelLayoutMode: 'estimate'`.\n             * @config {Number}\n             * @default\n             */\n            labelCharWidth : 7\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            chain : ['onEventDataGenerated']\n        };\n    }\n\n    //endregion\n\n    //region Init & destroy\n\n    construct(scheduler, config) {\n        const me = this;\n\n        if (scheduler.isVertical) {\n            throw new Error('Labels feature is not supported in vertical mode');\n        }\n\n        me.scheduler = scheduler;\n\n        super.construct(scheduler, config);\n\n        if (me.top || me.bottom || me.before || me.after) {\n            me.updateHostClasslist();\n\n            // rowHeight warning, not in use\n            //const labelCount = !!me.topLabel + !!me.bottomLabel;\n            //if (scheduler.rowHeight < 60 - labelCount * 12) console.log('')\n        }\n    }\n\n    updateHostClasslist() {\n        const\n            { top, bottom } = this,\n            { classList }   = this.scheduler.element;\n\n        classList.remove('b-labels-topbottom');\n        classList.remove('b-labels-top');\n        classList.remove('b-labels-bottom');\n\n        // OR is correct. This means that there are labels above OR below.\n        if (top || bottom) {\n            classList.add('b-labels-topbottom');\n            if (top) {\n                classList.add('b-labels-top');\n            }\n            if (bottom) {\n                classList.add('b-labels-bottom');\n            }\n        }\n    }\n\n    onLabelDblClick(event) {\n        const\n            me        = this,\n            target    = event.target;\n\n        if (target && !me.scheduler.readOnly) {\n            const\n                { side }          = target.dataset,\n                labelConfig       = me[side],\n                { editor, field } = labelConfig;\n\n            if (editor) {\n                const eventRecord = this.scheduler.resolveEventRecord(event.target);\n\n                if (eventRecord.readOnly) {\n                    return;\n                }\n\n                if (!(editor instanceof Editor)) {\n                    labelConfig.editor = new Editor({\n                        blurAction   : me.blurAction,\n                        inputField   : editor,\n                        scrollAction : 'realign'\n                    });\n                }\n\n                // Editor removes itself from the DOM after being hidden\n                labelConfig.editor.render(me.scheduler.element);\n\n                labelConfig.editor.startEdit({\n                    target,\n                    align     : editorAlign(side, me.client),\n                    matchSize : false,\n                    record    : eventRecord,\n                    field\n                });\n\n                event.stopImmediatePropagation();\n                return false;\n            }\n        }\n    }\n\n    changeTop(top) {\n        return this.processLabelSpec(top, 'top');\n    }\n\n    updateTop() {\n        this.updateHostClasslist();\n    }\n\n    changeAfter(after) {\n        return this.processLabelSpec(after, 'after');\n    }\n\n    updateAfter() {\n        this.updateHostClasslist();\n    }\n\n    changeRight(right) {\n        this[this.client.rtl ? 'before' : 'after'] = right;\n    }\n\n    changeBottom(bottom) {\n        return this.processLabelSpec(bottom, 'bottom');\n    }\n\n    updateBottom() {\n        this.updateHostClasslist();\n    }\n\n    changeBefore(before) {\n        return this.processLabelSpec(before, 'before');\n    }\n\n    updateBefore() {\n        this.updateHostClasslist();\n    }\n\n    changeLeft(left) {\n        this[this.client.rtl ? 'after' : 'before'] = left;\n    }\n\n    processLabelSpec(labelSpec, side) {\n        if (typeof labelSpec === 'function') {\n            labelSpec = {\n                renderer : labelSpec\n            };\n        }\n        else if (typeof labelSpec === 'string') {\n            labelSpec = {\n                field : labelSpec\n            };\n        }\n        // Allow us to mutate ownProperties in the labelSpec without mutating outside object\n        else if (labelSpec) {\n            labelSpec = Object.setPrototypeOf({}, labelSpec);\n        }\n        // Clear label\n        else {\n            return null;\n        }\n\n        const\n            { scheduler }                                = this,\n            { eventStore, resourceStore, taskStore, id } = scheduler,\n            { field, editor }                            = labelSpec;\n\n        // If there are milestones, and we are changing the available height\n        // either by adding a top/bottom label, or adding a top/bottom label\n        // then during the next dependency refresh, milestone width must be recalculated.\n        if (topBottom[side]) {\n            scheduler.milestoneWidth = null;\n        }\n\n        if (eventStore && !taskStore) {\n            labelSpec.recordType = 'event';\n        }\n        else {\n            labelSpec.recordType = 'task';\n        }\n\n        // Find the field definition or property from whichever store and cache the type.\n        if (field) {\n            let\n                fieldDef,\n                fieldFound = false;\n\n            if (eventStore && !taskStore) {\n                fieldDef = eventStore.modelClass.fieldMap[field];\n                if (fieldDef) {\n                    labelSpec.fieldDef = fieldDef;\n                    labelSpec.recordType = 'event';\n                    fieldFound = true;\n                }\n                // Check if it references a property\n                else if (Reflect.has(eventStore.modelClass.prototype, field)) {\n                    labelSpec.recordType = 'event';\n                    fieldFound = true;\n                }\n            }\n\n            if (!fieldDef && taskStore) {\n                fieldDef = taskStore.modelClass.fieldMap[field];\n                if (fieldDef) {\n                    labelSpec.fieldDef = fieldDef;\n                    labelSpec.recordType = 'task';\n                    fieldFound = true;\n                }\n                // Check if it references a property\n                else if (Reflect.has(resourceStore.modelClass.prototype, field)) {\n                    labelSpec.recordType = 'task';\n                    fieldFound = true;\n                }\n            }\n\n            if (!fieldDef && resourceStore) {\n                fieldDef = resourceStore.modelClass.fieldMap[field];\n                if (fieldDef) {\n                    labelSpec.fieldDef = fieldDef;\n                    labelSpec.recordType = 'resource';\n                    fieldFound = true;\n                }\n                // Check if it references a property\n                else if (Reflect.has(resourceStore.modelClass.prototype, field)) {\n                    labelSpec.recordType = 'resource';\n                    fieldFound = true;\n                }\n            }\n            //<debug>\n            // We couldn't find the requested field in the modelClass\n            // for either of the stores.\n            if (!fieldFound) {\n                throw new Error(`Scheduler ${id} labels ${side} field ${field} does not exist in either eventStore or resourceStore`);\n            }\n            //</debug>\n\n            if (editor) {\n                if (typeof editor === 'boolean') {\n                    scheduler.editor = {\n                        type : 'textfield'\n                    };\n                }\n                else if (typeof editor === 'string') {\n                    scheduler.editor = {\n                        type : editor\n                    };\n                }\n                EventHelper.on({\n                    element  : scheduler.timeAxisSubGrid.element,\n                    delegate : '.b-sch-label',\n                    dblclick : 'onLabelDblClick',\n                    thisObj  : this\n                });\n            }\n        }\n\n        //<debug>\n        if (!labelSpec.field && !labelSpec.renderer) {\n            throw new Error(`Scheduler ${scheduler.id} labels ${side} must either have a field or a renderer`);\n        }\n        //</debug>\n\n        return labelSpec;\n    }\n\n    doDisable(disable) {\n        super.doDisable(disable);\n\n        if (this.client.isPainted) {\n            this.client.refresh();\n        }\n    }\n\n    //endregion\n\n    generateLabelConfigs(data) {\n        const\n            me      = this,\n            configs = [];\n\n        // Insert all configured labels\n        for (const side of sides) {\n            if (me[side]) {\n                const\n                    {\n                        field,\n                        fieldDef,\n                        recordType,\n                        renderer,\n                        thisObj\n                    }  = me[side],\n                    domConfig = {\n                        tag       : 'label',\n                        className : {\n                            [me.labelCls]              : 1,\n                            [`${me.labelCls}-${side}`] : 1\n                        },\n                        dataset : {\n                            side,\n                            taskFeature : `label-${side}`\n                        }\n                    };\n\n                let value;\n\n                const\n                    eventRecordProperty = `${recordType}Record`,\n                    eventRecord         = data[eventRecordProperty];\n\n                // If there's a renderer, use that by preference\n                if (renderer) {\n                    value = renderer.call(thisObj || me.thisObj || me, {\n                        [eventRecordProperty] : eventRecord,\n                        resourceRecord        : data.resourceRecord,\n                        assignmentRecord      : data.assignmentRecord,\n                        domConfig\n                    });\n                }\n                else {\n                    value = eventRecord.getValue(field);\n\n                    // If it's a date, format it according to the Scheduler's defaults\n                    if (fieldDef?.type === 'date' && !renderer) {\n                        value = DateHelper.format(value, me.client.displayDateFormat);\n                    }\n                    else {\n                        value = StringHelper.encodeHtml(value);\n                    }\n                }\n\n                domConfig.html = value || '\\xa0';\n\n                configs.push(domConfig);\n            }\n        }\n\n        return configs;\n    }\n\n    measureLabels(configs, data) {\n        const\n            me      = this,\n            pxPerMS = me.client.timeAxisViewModel.getSingleUnitInPixels('millisecond');\n\n        for (const config of configs) {\n            if (layoutSides[config.dataset.side]) {\n                let { html } = config;\n\n                let length = 0;\n\n                // Calculate length based on string length\n                if (me.labelLayoutMode === 'estimate') {\n                    // Strip tags before estimating\n                    if (html.includes('<')) {\n                        html = DomHelper.stripTags(html);\n                    }\n\n                    length = (html.length * me.labelCharWidth) + 18; // 18 = 1.5em, margin from event\n                }\n                // Measure\n                else {\n                    const element = me.labelMeasureElement || (me.labelMeasureElement = DomHelper.createElement({\n                        className : 'b-sch-event-wrap b-measure-label',\n                        parent    : me.client.foregroundCanvas\n                    }));\n\n                    // Outer DomSync should not remove\n                    element.retainElement = true;\n\n                    DomSync.sync({\n                        targetElement : element,\n                        childrenOnly  : true,\n                        domConfig     : {\n                            children : [\n                                config\n                            ]\n                        }\n                    });\n\n                    length = element.firstElementChild.offsetWidth;\n                }\n\n                // Convert from px to ms\n                const ms = length / pxPerMS;\n\n                // Adjust values used for event layout (not event position)\n                switch (config.dataset.side) {\n                    case 'before':\n                        data.startMS -= ms;\n                        break;\n                    case 'after':\n                        data.endMS += ms;\n                        break;\n                }\n            }\n        }\n    }\n\n    onEventDataGenerated(data) {\n        if (!this.disabled && !data.eventRecord?.isResourceTimeRange) {\n            const configs = this.generateLabelConfigs(data);\n\n            if (layoutModes[this.labelLayoutMode]) {\n                this.measureLabels(configs, data);\n            }\n\n            data.wrapperChildren.push(...configs);\n        }\n    }\n\n    updateLabelLayoutMode() {\n        if (!this.isConfiguring) {\n            this.client.refreshWithTransition();\n        }\n    }\n\n    updateLabelCharWidth() {\n        if (!this.isConfiguring) {\n            this.client.refreshWithTransition();\n        }\n    }\n}\n\n// <remove-on-release>\n// TODO: Refactor the SASS, so that the auto-generated class name of b-' + cls.name.toLowerCase() can be used.\n// </remove-on-release>\nLabels.featureClass = 'b-sch-labels';\n\nGridFeatureManager.registerFeature(Labels, false, 'Scheduler');\n","import GridRowReorder from '../../Grid/feature/RowReorder.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport TransactionalFeature from './mixin/TransactionalFeature.js';\n\n/**\n * @module Scheduler/feature/RowReorder\n */\n\n/**\n * This feature implement support for project transactions and used by default in Gantt. For general RowReorder feature\n * documentation see {@link Grid.feature.RowReorder}.\n * @extends Grid/feature/RowReorder\n * @classtype rowReorder\n * @feature\n *\n * @typings Grid.feature.RowReorder -> Grid.feature.GridRowReorder\n */\nexport default class RowReorder extends TransactionalFeature(GridRowReorder) {\n    static $name = 'RowReorder';\n\n    onDragStart(...args) {\n        super.onDragStart(...args);\n\n        if (this.client.transactionalFeaturesEnabled) {\n            return this.startFeatureTransaction();\n        }\n    }\n\n    onDrop(...args) {\n        // Actual reorder will happen in a wrapper function to `tryPropagateWithChanges`, meaning reorder will be a\n        // transaction. This transaction will not even have any changes in it. So we can reject it.\n        this.rejectFeatureTransaction();\n\n        return super.onDrop(...args);\n    }\n\n    onAbort(...args) {\n        this.rejectFeatureTransaction();\n\n        return super.onAbort(...args);\n    }\n}\n\nGridFeatureManager.registerFeature(RowReorder, false, 'Scheduler');\nGridFeatureManager.registerFeature(RowReorder, true, 'Gantt');\n","import GridSummary from '../../Grid/feature/Summary.js';\nimport Tooltip from '../../Core/widget/Tooltip.js';\n\n/**\n * @module Scheduler/feature/TimelineSummary\n */\n\n// noinspection JSClosureCompilerSyntax\n/**\n * Base class, not to be used directly.\n * @extends Grid/feature/Summary\n * @abstract\n */\nexport default class TimelineSummary extends GridSummary {\n    //region Config\n\n    static get $name() {\n        return 'TimelineSummary';\n    }\n\n    static get configurable() {\n        return {\n            /**\n             * Show tooltip containing summary values and labels\n             * @config {Boolean}\n             * @default\n             */\n            showTooltip : true\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            chain : ['renderRows', 'updateProject']\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    construct(client, config) {\n        const me = this;\n\n        super.construct(client, config);\n\n        if (!me.summaries) {\n            me.summaries = [{ renderer : me.renderer }];\n        }\n\n        // Feature might be run from Grid (in docs), should not crash\n        // https://app.assembla.com/spaces/bryntum/tickets/6801/details\n        if (client.isTimelineBase) {\n            me.updateProject(client.project);\n\n            client.ion({\n                timeAxisViewModelUpdate : me.renderRows,\n                thisObj                 : me\n            });\n        }\n    }\n\n    //endregion\n\n    //region Render\n\n    updateProject(project) {\n        this.detachListeners('summaryProject');\n\n        project.ion({\n            name      : 'summaryProject',\n            dataReady : 'updateTimelineSummaries',\n            thisObj   : this\n        });\n    }\n\n    renderRows() {\n        if (this.client.isHorizontal) {\n            this.client.timeAxisSubGrid.footer.element.querySelector('.b-grid-footer').classList.add('b-sch-summarybar');\n        }\n\n        super.renderRows();\n\n        if (!this.disabled) {\n            this.render();\n        }\n    }\n\n    get summaryBarElement() {\n        return this.client.element.querySelector('.b-sch-summarybar');\n    }\n\n    render() {\n        const\n            me                   = this,\n            { client: timeline } = me,\n            sizeProp             = timeline.isHorizontal ? 'width' : 'height',\n            colCfg               = timeline.timeAxisViewModel.columnConfig,\n            summaryContainer     = me.summaryBarElement;\n\n        if (summaryContainer) {\n            // if any sum config has a label, init tooltip\n            if (!me._tip && me.showTooltip && me.summaries.some(config => config.label)) {\n                me._tip = new Tooltip({\n                    id             : `${timeline.id}-summary-tip`,\n                    cls            : 'b-timeaxis-summary-tip',\n                    hoverDelay     : 0,\n                    hideDelay      : 100,\n                    forElement     : summaryContainer,\n                    anchorToTarget : true,\n                    trackMouse     : false,\n                    forSelector    : '.b-timeaxis-tick',\n                    getHtml        : ({ activeTarget }) => activeTarget._tipHtml\n                });\n            }\n\n            summaryContainer.innerHTML = colCfg[colCfg.length - 1].map(col => `<div class=\"b-timeaxis-tick\" style=\"${sizeProp}: ${col.width}px\"></div>`).join('');\n\n            me.updateTimelineSummaries();\n        }\n    }\n\n    //endregion\n\n    /**\n     * Refreshes the summaries\n     */\n    refresh() {\n        super.refresh();\n        this.updateTimelineSummaries();\n    }\n\n    doDisable(disable) {\n        const { isConfiguring } = this.client;\n\n        super.doDisable(disable);\n\n        this.summaryColumn?.toggle(!disable);\n\n        if (!isConfiguring && !disable) {\n            this.render();\n        }\n    }\n\n    doDestroy() {\n        this._tip?.destroy();\n        super.doDestroy();\n    }\n}\n","export const ScheduleRange = {\n    completeview : 'completeview',\n    // completedata : 'completedata',\n    currentview  : 'currentview',\n    daterange    : 'daterange'\n};\n","import DateHelper from '../../../../Core/helper/DateHelper.js';\nimport Rectangle from '../../../../Core/helper/util/Rectangle.js';\nimport DomHelper from '../../../../Core/helper/DomHelper.js';\nimport DomSync from '../../../../Core/helper/DomSync.js';\nimport { ScheduleRange } from '../Utils.js';\n\nconst immediatePromise = Promise.resolve();\n\nexport default base => class SchedulerExporterMixin extends base {\n    async scrollRowIntoView(client, index) {\n        const\n            {\n                rowManager,\n                scrollable\n            }    = client,\n            oldY = scrollable.y;\n\n        // If it's a valid index to scroll to, then try it.\n        if (index < client.store.count) {\n            // Scroll the requested row to the viewport top\n            scrollable.scrollTo(null, rowManager.calculateTop(index));\n\n            // If that initiated a scroll, we need to wait for the row to be rendered, so return\n            // a Promise which resolves when that happens.\n            if (scrollable.y !== oldY) {\n                // GridBase adds listener to vertical scroll to update rows. Rows might be or might not be updated,\n                // but at the end of each scroll grid will trigger `scroll` event. So far this is the only scroll event\n                // triggered by the grid itself and it is different from `scroll` event on scrollable.\n                return new Promise(resolve => {\n                    const detacher = client.ion({\n                        scroll({ scrollTop }) {\n                            // future-proof: only react to scroll event with certain argument\n                            if (scrollTop != null && rowManager.getRow(index)) {\n                                detacher();\n                                resolve();\n                            }\n                        }\n                    });\n                });\n            }\n        }\n\n        // No scroll occurred. Promise must be resolved immediately\n        return immediatePromise;\n    }\n\n    async scrollToDate(client, date) {\n        let scrollFired = false;\n\n        const promises    = [];\n\n        // Time axis is updated on element scroll, which is async event. We need to synchronize this logic.\n        // If element horizontal scroll is changed then sync event is fired. We add listener to that one specific event\n        // and remove it right after scrollToDate sync code, keeping listeners clean. If scrolling occurred, we need\n        // to wait until time header is updated.\n        const detacher = client.timeAxisSubGrid.scrollable.ion({\n            scrollStart({ x }) {\n                if (x != null) {\n                    scrollFired = true;\n                }\n            }\n        });\n\n        // added `block: start` to do scrolling faster\n        // it moves data to begin of visible area that is longer section for re-render\n        promises.push(client.scrollToDate(date, { block : 'start' }));\n\n        detacher();\n\n        if (scrollFired) {\n            // We have to wait for scrollEnd event before moving forward. When exporting large view we might have to scroll\n            // extensively and it might occur that requested scroll position would not be reached because concurrent\n            // scrollEnd events would move scroll back.\n            // scrollEnd is on a 100ms timer *after* the last scroll event fired, so all necessary\n            // updated will have occurred.\n            // Covered by Gantt/tests/feature/export/MultiPageVertical.t.js\n            promises.push(client.timeAxisSubGrid.header.scrollable.await('scrollEnd', { checkLog : false }));\n        }\n\n        await Promise.all(promises);\n    }\n\n    cloneElement(element, target, clear) {\n        super.cloneElement(element, target, clear);\n\n        const clonedEl = this.element.querySelector('.b-schedulerbase');\n\n        // Remove default animation classes\n        clonedEl?.classList.remove(...['fade-in', 'slide-from-left', 'slide-from-top', 'zoom-in'].map(name => `b-initial-${name}`));\n    }\n\n    async prepareComponent(config) {\n        const\n            me                     = this,\n            { client }             = config,\n            { currentOrientation } = client,\n            includeTimeline        = client.timeAxisSubGrid.width > 0;\n\n        switch (config.scheduleRange) {\n            case ScheduleRange.completeview:\n                config.rangeStart = client.startDate;\n                config.rangeEnd   = client.endDate;\n                break;\n            case ScheduleRange.currentview: {\n                const { startDate, endDate } = client.visibleDateRange;\n                config.rangeStart = startDate;\n                config.rangeEnd = endDate;\n                break;\n            }\n        }\n\n        await client.waitForAnimations();\n\n        // Disable infinite scroll before export, so it doesn't change time span\n        config.infiniteScroll = client.infiniteScroll;\n        client.infiniteScroll = false;\n\n        // Don't change timespan if time axis subgrid is not visible\n        if (includeTimeline) {\n            // set new timespan before calling parent to get proper scheduler header/content size\n            client.setTimeSpan(config.rangeStart, config.rangeEnd);\n\n            // Access svgCanvas el to create dependency canvas early\n            client.svgCanvas;\n        }\n\n        // Disable event animations during export\n        me._oldEnableEventAnimations = client.enableEventAnimations;\n        client.enableEventAnimations = false;\n\n        // Add scroll buffer for the horizontal rendering\n        if (currentOrientation.isHorizontalRendering) {\n            me._oldScrollBuffer = currentOrientation.scrollBuffer;\n            me._oldVerticalBuffer = currentOrientation.verticalBufferSize;\n            currentOrientation.scrollBuffer = 100;\n            currentOrientation.verticalBufferSize = -1;\n        }\n\n        // Raise flag on the client to render all suggested dependencies\n        client.ignoreViewBox = true;\n\n        await super.prepareComponent(config);\n\n        const\n            { exportMeta, element } = me,\n            fgCanvasEl              = element.querySelector('.b-sch-foreground-canvas'),\n            timeAxisEl              = element.querySelector('.b-horizontaltimeaxis');\n\n        exportMeta.includeTimeline = includeTimeline;\n\n        if (includeTimeline && config.scheduleRange !== ScheduleRange.completeview) {\n            // If we are exporting subrange of dates we need to change subgrid size accordingly\n            exportMeta.totalWidth -= exportMeta.subGrids.normal.width;\n            exportMeta.totalWidth += exportMeta.subGrids.normal.width = client.timeAxisViewModel.getDistanceBetweenDates(config.rangeStart, config.rangeEnd);\n\n            const\n                horizontalPages = Math.ceil(exportMeta.totalWidth / exportMeta.pageWidth),\n                totalPages      = horizontalPages * exportMeta.verticalPages;\n\n            exportMeta.horizontalPages = horizontalPages;\n            exportMeta.totalPages = totalPages;\n\n            // store left scroll to imitate normal grid/header scroll using margin\n            exportMeta.subGrids.normal.scrollLeft = client.getCoordinateFromDate(config.rangeStart);\n        }\n\n        exportMeta.timeAxisHeaders = [];\n        exportMeta.timeAxisPlaceholders = [];\n        exportMeta.headersColleted = false;\n\n        DomHelper.forEachSelector(timeAxisEl, '.b-sch-header-row', headerRow => {\n            exportMeta.timeAxisPlaceholders.push(me.createPlaceholder(headerRow));\n            exportMeta.timeAxisHeaders.push(new Map());\n        });\n\n        // Add placeholder for events, clear all event elements, but not the entire elements as it contains svg canvas\n        exportMeta.subGrids.normal.eventsPlaceholder = me.createPlaceholder(fgCanvasEl, false);\n        DomHelper.removeEachSelector(fgCanvasEl, '.b-sch-event-wrap,.b-sch-resourcetimerange');\n\n        DomHelper.removeEachSelector(me.element, '.b-released');\n\n        exportMeta.eventsBoxes = new Map();\n        exportMeta.client = client;\n\n        if (client.hasActiveFeature('columnLines')) {\n            const columnLinesCanvas = element.querySelector('.b-column-lines-canvas');\n\n            exportMeta.columnLinesPlaceholder = me.createPlaceholder(columnLinesCanvas);\n\n            exportMeta.columnLines = { lines : new Map(), majorLines : new Map() };\n        }\n\n        if (client.hasActiveFeature('timeRanges')) {\n            const\n                timeRangesHeaderCanvas = element.querySelector('.b-sch-timeaxiscolumn .b-sch-timeranges-canvas'),\n                timeRangesBodyCanvas = element.querySelector('.b-sch-foreground-canvas .b-sch-timeranges-canvas');\n\n            exportMeta.timeRanges = {};\n\n            // header is optional\n            if (timeRangesHeaderCanvas) {\n                exportMeta.timeRanges.header = config.enableDirectRendering ? '' : {};\n                exportMeta.timeRangesHeaderPlaceholder = me.createPlaceholder(timeRangesHeaderCanvas);\n            }\n\n            exportMeta.timeRanges.body = config.enableDirectRendering ? '' : {};\n            exportMeta.timeRangesBodyPlaceholder = me.createPlaceholder(timeRangesBodyCanvas);\n        }\n\n        if (client.hasActiveFeature('dependencies')) {\n            client.features.dependencies.fillDrawingCache();\n\n            const svgCanvasEl = element.querySelector(`[id=\"${client.svgCanvas.getAttribute('id')}\"]`);\n\n            // Same as above, clear only dependency lines, because there might be markers added by user\n            if (svgCanvasEl) {\n                exportMeta.dependencyCanvasEl = svgCanvasEl;\n\n                exportMeta.dependenciesPlaceholder = me.createPlaceholder(svgCanvasEl, false, {\n                    ns  : 'http://www.w3.org/2000/svg',\n                    tag : 'path'\n                });\n                DomHelper.removeEachSelector(svgCanvasEl, '.b-sch-dependency');\n            }\n        }\n\n        // We need to scroll component to date to calculate correct start margin\n        if (includeTimeline && !DateHelper.betweenLesser(config.rangeStart, client.startDate, client.endDate)) {\n            await me.scrollToDate(client, config.rangeStart);\n        }\n    }\n\n    async restoreState(config) {\n        let waitForHorizontalScroll = false;\n\n        const\n            { client } = config,\n            promises = [];\n\n        // If scroll will be changed during restoring state (and it will likely be), raise a flag that exporter should\n        // wait for scrollEnd event before releasing control\n        const detacher = client.timeAxisSubGrid.scrollable.ion({\n            scrollStart({ x }) {\n                // HACK: scrollStart might actually fire when scroll is set to existing value\n                if (this.element.scrollLeft !== x) {\n                    waitForHorizontalScroll = true;\n                }\n            }\n        });\n\n        promises.push(super.restoreState(config));\n\n        // Scroll start will be fired synchronously\n        detacher();\n\n        if (waitForHorizontalScroll) {\n            promises.push(client.timeAxisSubGrid.header.scrollable.await('scrollEnd', { checkLog : false }));\n        }\n\n        await Promise.all(promises);\n    }\n\n    async restoreComponent(config) {\n        const\n            { client }             = config,\n            { currentOrientation } = client;\n\n        client.ignoreViewBox = false;\n\n        client.infiniteScroll = config.infiniteScroll;\n\n        client.enableEventAnimations = this._oldEnableEventAnimations;\n\n        if (currentOrientation.isHorizontalRendering) {\n            currentOrientation.scrollBuffer = this._oldScrollBuffer;\n            currentOrientation.verticalBufferSize = this._oldVerticalBuffer;\n        }\n\n        await super.restoreComponent(config);\n    }\n\n    async onRowsCollected(rows, config) {\n        const me = this;\n\n        await super.onRowsCollected(rows, config);\n\n        // Only collect this data if timeline is visible\n        if (me.exportMeta.includeTimeline) {\n            const\n                { client, enableDirectRendering } = config,\n                { timeView }                      = client,\n                { pageRangeStart, pageRangeEnd }  = me.getCurrentPageDateRange(config);\n\n            if (enableDirectRendering) {\n                // If first page does not include timeline we don't need to render anything for it\n                if (pageRangeStart && pageRangeEnd) {\n                    me.renderHeaders(config, pageRangeStart, pageRangeEnd);\n\n                    me.renderLines(config, pageRangeStart, pageRangeEnd);\n\n                    me.renderRanges(config, pageRangeStart, pageRangeEnd);\n\n                    me.renderEvents(config, rows, pageRangeStart, pageRangeEnd);\n                }\n            }\n            else {\n                // Exported page may not contain timeline view, in which case we need to fall through\n                if (pageRangeStart) {\n                    let rangeProcessed = false;\n\n                    await me.scrollToDate(client, pageRangeStart);\n\n                    // Time axis and events are only rendered for the visible time span\n                    // we need to scroll the view and gather events/timeline elements\n                    // while (timeView.endDate <= config.rangeEnd) {\n                    while (!rangeProcessed) {\n                        me.collectLines(config);\n\n                        me.collectHeaders(config);\n\n                        me.collectRanges(config);\n\n                        me.collectEvents(rows, config);\n\n                        if (DateHelper.timeSpanContains(timeView.startDate, timeView.endDate, pageRangeStart, pageRangeEnd)) {\n                            rangeProcessed = true;\n                        }\n                        else if (timeView.endDate.getTime() >= pageRangeEnd.getTime()) {\n                            rangeProcessed = true;\n                        }\n                        else {\n                            const endDate = timeView.endDate;\n\n                            await me.scrollToDate(client, timeView.endDate);\n\n                            // If timeview end date is same as before scroll it means client is not able to scroll to date\n                            // and will go into infinite loop unless we stop it\n                            if (endDate.getTime() === timeView.endDate.getTime()) {\n                                throw new Error('Could not scroll to date');\n                            }\n                        }\n                    }\n                }\n\n                await me.scrollToDate(client, config.rangeStart);\n            }\n        }\n    }\n\n    getCurrentPageDateRange({ rangeStart, rangeEnd, enableDirectRendering, client }) {\n        const\n            me = this,\n            { exportMeta } = me,\n            { horizontalPages, horizontalPosition, pageWidth, subGrids } = exportMeta;\n\n        let pageRangeStart, pageRangeEnd;\n\n        // when exporting to multiple pages we only need to scroll sub-range within visible time span\n        if (horizontalPages > 1) {\n            const\n                pageStartX = horizontalPosition * pageWidth,\n                pageEndX   = (horizontalPosition + 1) * pageWidth,\n                // Assuming normal grid is right next to right side of the locked grid\n                // There is also a default splitter\n                normalGridX = subGrids.locked.width + subGrids.locked.splitterWidth;\n\n            if (pageEndX <= normalGridX) {\n                pageRangeEnd = pageRangeStart = null;\n            }\n            else {\n                const { scrollLeft = 0 } = subGrids.normal;\n\n                pageRangeStart = client.getDateFromCoordinate(Math.max(pageStartX - normalGridX + scrollLeft, 0));\n\n                // Extend visible schedule by 20% to cover up possible splitter\n                const multiplier = enableDirectRendering ? 1 : 1.2;\n\n                pageRangeEnd = client.getDateFromCoordinate((pageEndX - normalGridX + scrollLeft) * multiplier) || rangeEnd;\n            }\n        }\n        else {\n            pageRangeStart = rangeStart;\n            pageRangeEnd   = rangeEnd;\n        }\n\n        return {\n            pageRangeStart,\n            pageRangeEnd\n        };\n    }\n\n    prepareExportElement() {\n        const\n            { element, exportMeta }                = this,\n            { id, headerId, footerId, scrollLeft } = exportMeta.subGrids.normal,\n            el                                     = element.querySelector(`[id=\"${id}\"]`);\n\n        ['.b-sch-background-canvas', '.b-sch-foreground-canvas'].forEach(selector => {\n            const canvasEl = el.querySelector(selector);\n\n            if (canvasEl) {\n                // Align canvases to last exported row bottom. If no such property exists - remove inline height\n                if (exportMeta.lastExportedRowBottom) {\n                    canvasEl.style.height = `${exportMeta.lastExportedRowBottom}px`;\n                }\n                else {\n                    canvasEl.style.height = '';\n                }\n\n                // Simulate horizontal scroll\n                if (scrollLeft) {\n                    canvasEl.style.marginLeft = `-${scrollLeft}px`;\n                }\n            }\n        });\n\n        if (scrollLeft) {\n            [headerId, footerId].forEach(id => {\n                const el = element.querySelector(`[id=\"${id}\"] .b-widget-scroller`);\n                if (el) {\n                    el.style.marginLeft = `-${scrollLeft}px`;\n                }\n            });\n        }\n\n        return super.prepareExportElement();\n    }\n\n    collectHeaders(config) {\n        const\n            me             = this,\n            { client }     = config,\n            { exportMeta } = me;\n\n        // We only need to collect headers once, this flag is raised once they are collected along all exported range\n        if (!exportMeta.headersCollected) {\n            const\n                timeAxisEl = client.timeView.element,\n                timeAxisHeaders = exportMeta.timeAxisHeaders;\n\n            DomHelper.forEachSelector(timeAxisEl, '.b-sch-header-row', (headerRow, index, headerRows) => {\n                const headersMap = timeAxisHeaders[index];\n\n                DomHelper.forEachSelector(headerRow, '.b-sch-header-timeaxis-cell', el => {\n                    if (!headersMap.has(el.dataset.tickIndex)) {\n                        headersMap.set(el.dataset.tickIndex, el.outerHTML);\n                    }\n                });\n\n                if (index === headerRows.length - 1 && headersMap.has(String(client.timeAxis.count - 1))) {\n                    exportMeta.headersCollected = true;\n                }\n            });\n        }\n    }\n\n    collectRanges(config) {\n        const\n            me             = this,\n            { client }     = config,\n            { exportMeta } = me,\n            { timeRanges } = exportMeta;\n\n        if (!exportMeta.headersCollected && timeRanges) {\n            const\n                { headerCanvas, bodyCanvas } = client.features.timeRanges;\n\n            if (headerCanvas) {\n                DomHelper.forEachSelector(headerCanvas, '.b-sch-timerange', el => {\n                    timeRanges.header[el.dataset.id] = el.outerHTML;\n                });\n            }\n\n            DomHelper.forEachSelector(bodyCanvas, '.b-sch-timerange', el => {\n                timeRanges.body[el.dataset.id] = el.outerHTML;\n            });\n        }\n    }\n\n    collectLines(config) {\n        const\n            me              = this,\n            { client }      = config,\n            { exportMeta }  = me,\n            { columnLines } = exportMeta;\n\n        if (!exportMeta.headersCollected && columnLines) {\n            const bgCanvas = client.backgroundCanvas;\n\n            DomHelper.forEachSelector(bgCanvas, '.b-column-line, .b-column-line-major', (lineEl) => {\n                if (lineEl.classList.contains('b-column-line')) {\n                    const lineIndex = Number(lineEl.dataset.line.replace(/line-/, ''));\n\n                    columnLines.lines.set(lineIndex, lineEl.outerHTML);\n                }\n                else {\n                    const lineIndex = Number(lineEl.dataset.line.replace(/major-/, ''));\n\n                    columnLines.majorLines.set(lineIndex, lineEl.outerHTML);\n                }\n            });\n        }\n    }\n\n    collectEvents(rows, config) {\n        const\n            me         = this,\n            addedRows  = rows.length,\n            { client } = config,\n            normalRows = me.exportMeta.subGrids.normal.rows;\n\n        rows.forEach((row, index) => {\n            const\n                rowConfig = normalRows[normalRows.length - addedRows + index],\n                resource  = client.store.getAt(row.dataIndex),\n                eventsMap = rowConfig[3];\n\n            resource.events?.forEach(event => {\n                if (event.isScheduled) {\n                    let el = client.getElementFromEventRecord(event, resource);\n\n                    if (el && (el = el.parentElement) && !eventsMap.has(event.id)) {\n                        eventsMap.set(event.id, [el.outerHTML, Rectangle.from(el, el.offsetParent)]);\n                    }\n                }\n            });\n\n            resource.timeRanges?.forEach(timeRange => {\n                const\n                    elId = client.features.resourceTimeRanges?.generateElementId(timeRange) || '',\n                    el   = client.foregroundCanvas.syncIdMap[elId];\n\n                if (el && !eventsMap.has(elId)) {\n                    eventsMap.set(elId, [el.outerHTML, Rectangle.from(el, el.offsetParent)]);\n                }\n            });\n        });\n    }\n\n    //#region Direct rendering\n\n    renderHeaders(config, start, end) {\n        const\n            me               = this,\n            { exportMeta }   = me,\n            { client }       = config,\n            timeAxisHeaders  = exportMeta.timeAxisHeaders,\n            // Get the time axis view reference that we will use to build cells for specific time ranges\n            { timeAxisView } = client.timeAxisColumn,\n            domConfig        = timeAxisView.buildCells(start, end),\n            targetElement    = document.createElement('div');\n\n        DomSync.sync({\n            targetElement,\n            domConfig\n        });\n\n        DomHelper.forEachSelector(targetElement, '.b-sch-header-row', (headerRow, index) => {\n            const headersMap = timeAxisHeaders[index];\n\n            DomHelper.forEachSelector(headerRow, '.b-sch-header-timeaxis-cell', el => {\n                if (!headersMap.has(el.dataset.tickIndex)) {\n                    headersMap.set(el.dataset.tickIndex, el.outerHTML);\n                }\n            });\n        });\n    }\n\n    renderEvents(config, rows, start, end) {\n        const\n            me         = this,\n            { client } = config,\n            normalRows = me.exportMeta.subGrids.normal.rows;\n\n        rows.forEach((row, index) => {\n            const\n                rowConfig      = normalRows[index],\n                eventsMap      = rowConfig[3],\n                resource       = client.store.getAt(row.dataIndex),\n                resourceLayout = client.currentOrientation.getResourceLayout(resource),\n                left           = client.getCoordinateFromDate(start),\n                right          = client.getCoordinateFromDate(end),\n                eventDOMConfigs = client.currentOrientation.getEventDOMConfigForCurrentView(resourceLayout, row, left, right),\n                targetElement   = document.createElement('div');\n\n            eventDOMConfigs.forEach(domConfig => {\n                const\n                    { eventId }                  = domConfig.dataset,\n                    { left, top, width, height } = domConfig.style;\n\n                DomSync.sync({\n                    targetElement,\n                    domConfig\n                });\n\n                eventsMap.set(eventId, [targetElement.outerHTML, new Rectangle(left, top, width, height)]);\n            });\n        });\n    }\n\n    renderLines(config, start, end) {\n        const\n            me              = this,\n            { client }      = config,\n            { exportMeta }  = me,\n            { columnLines } = exportMeta;\n\n        if (columnLines) {\n            const\n                domConfigs    = client.features.columnLines.getColumnLinesDOMConfig(start, end),\n                targetElement = document.createElement('div');\n\n            DomSync.sync({\n                targetElement,\n                domConfig : {\n                    children : domConfigs\n                },\n                onlyChildren : true\n            });\n\n            // Put all lines HTML to a single key in the set. That allows us to share code path with legacy export mode\n            columnLines.lines.set(0, targetElement.innerHTML);\n        }\n    }\n\n    renderRanges(config, start, end) {\n        const\n            me             = this,\n            { client }     = config,\n            { exportMeta } = me,\n            { timeRanges } = exportMeta;\n\n        if (timeRanges) {\n            const\n                domConfigs    = client.features.timeRanges.getDOMConfig(start, end),\n                targetElement = document.createElement('div');\n\n            // domConfigs is an array of two elements - first includes time range configs for body, second - for head\n            domConfigs.forEach((children, i) => {\n                DomSync.sync({\n                    targetElement,\n                    domConfig : {\n                        children,\n                        onlyChildren : true\n                    }\n                });\n\n                // body configs\n                if (i === 0) {\n                    timeRanges.body = targetElement.innerHTML;\n                }\n                // header configs\n                else {\n                    timeRanges.header = targetElement.innerHTML;\n                }\n            });\n        }\n    }\n\n    //#endregion\n\n    buildPageHtml(config) {\n        const\n            me = this,\n            {\n                subGrids,\n                timeAxisHeaders,\n                timeAxisPlaceholders,\n                columnLines,\n                columnLinesPlaceholder,\n                timeRanges,\n                timeRangesHeaderPlaceholder,\n                timeRangesBodyPlaceholder\n            }  = me.exportMeta,\n            { enableDirectRendering } = config;\n\n        // Now when rows are collected, we need to add them to exported grid\n        let html = me.prepareExportElement();\n\n        Object.values(subGrids).forEach(({ placeHolder, eventsPlaceholder, rows, mergedCellsHtml }) => {\n            const\n                placeHolderText       = placeHolder.outerHTML,\n                // Rows can be repositioned, in which case event related to that row should also be translated\n                { resources, events } = me.positionRows(rows, config);\n\n            let contentHtml =  resources.join('');\n\n            if (mergedCellsHtml?.length) {\n                contentHtml += `<div class=\"b-grid-merged-cells-container\">${mergedCellsHtml.join('')}</div>`;\n            }\n\n            html = html.replace(placeHolderText, contentHtml);\n\n            if (eventsPlaceholder) {\n                html = html.replace(eventsPlaceholder.outerHTML, events.join(''));\n            }\n        });\n\n        timeAxisHeaders.forEach((headers, index) => {\n            html = html.replace(timeAxisPlaceholders[index].outerHTML, Array.from(headers.values()).join(''));\n        });\n\n        if (columnLines) {\n            const lineElements = Array.from(columnLines.lines.values()).concat(Array.from(columnLines.majorLines.values()));\n\n            html = html.replace(columnLinesPlaceholder.outerHTML, lineElements.join(''));\n\n            // Lines are collected once for old mode, don't clear them\n            if (enableDirectRendering) {\n                me.exportMeta.columnLines.lines.clear();\n                me.exportMeta.columnLines.majorLines.clear();\n            }\n        }\n\n        if (timeRanges) {\n            if (enableDirectRendering) {\n                html = html.replace(timeRangesBodyPlaceholder.outerHTML, timeRanges.body);\n\n                // time ranges header element is optional\n                if (timeRangesHeaderPlaceholder) {\n                    html = html.replace(timeRangesHeaderPlaceholder.outerHTML, timeRanges.header);\n                }\n\n                me.exportMeta.timeRanges = {};\n            }\n            else {\n                html = html.replace(timeRangesBodyPlaceholder.outerHTML, Object.values(timeRanges.body).join(''));\n\n                // time ranges header element is optional\n                if (timeRangesHeaderPlaceholder) {\n                    html = html.replace(timeRangesHeaderPlaceholder.outerHTML, Object.values(timeRanges.body).join(''));\n                }\n            }\n        }\n\n        html = me.buildDependenciesHtml(html);\n\n        return html;\n    }\n\n    getEventBox(event) {\n        const\n            me = this,\n            {\n                eventsBoxes,\n                enableDirectRendering\n            } = me.exportMeta;\n\n        const box = event && eventsBoxes.get(String(event.id));\n\n        // In scheduler milestone box left edge is aligned with milestone start date. Later element is rotated and\n        // shifted by CSS by 50% of its width. Dependency feature relies on actual element sizes, but pdf export\n        // does not render actual elements. Therefore, we need to adjust the box.\n        // <remove-on-release>\n        // TODO: RTL support?\n        // </remove-on-release>\n        if (enableDirectRendering && box && event.isMilestone) {\n            box.translate(-box.width / 2, 0);\n        }\n\n        return box;\n    }\n\n    renderDependencies() {\n        const\n            me                = this,\n            {\n                client,\n                eventsBoxes\n            }                 = me.exportMeta,\n            { dependencies }  = client,\n            dependencyFeature = client.features.dependencies,\n            targetElement     = DomHelper.createElement();\n\n        let draw = false;\n\n        dependencies.forEach(dependency => {\n            if ((!eventsBoxes.has(String(dependency.from)) &&\n                !eventsBoxes.has(String(dependency.to))) ||\n                !dependencyFeature.isDependencyVisible(dependency)) {\n                return;\n            }\n\n            const\n                fromBox = me.getEventBox(dependency.fromEvent),\n                toBox   = me.getEventBox(dependency.toEvent);\n\n            dependencyFeature.drawDependency(dependency, true, { from : fromBox?.clone(), to : toBox?.clone() });\n            draw = true;\n        });\n\n        // Force dom sync\n        if (draw) {\n            dependencyFeature.domSync(targetElement);\n        }\n\n        return targetElement.innerHTML;\n    }\n\n    buildDependenciesHtml(html) {\n        const { dependenciesPlaceholder, includeTimeline } = this.exportMeta;\n\n        if (dependenciesPlaceholder && includeTimeline) {\n            const placeholder = dependenciesPlaceholder.outerHTML;\n            html = html.replace(placeholder, this.renderDependencies());\n        }\n\n        return html;\n    }\n};\n","import GridMultiPageExporter from '../../../../Grid/feature/export/exporter/MultiPageExporter.js';\nimport SchedulerExporterMixin from './SchedulerExporterMixin.js';\n\n/**\n * @module Scheduler/feature/export/exporter/MultiPageExporter\n */\n\n/**\n * A multiple page exporter. Used by the {@link Scheduler.feature.export.PdfExport} feature to export to multiple pages.\n * You do not need to use this class directly.\n *\n * ### Extending exporter\n *\n * ```javascript\n * class MyMultiPageExporter extends MultiPageExporter {\n *     // type is required for exporter\n *     static get type() {\n *         return 'mymultipageexporter';\n *     }\n *\n *     get stylesheets() {\n *         const stylesheets = super.stylesheets;\n *\n *         stylesheets.forEach(styleNodeOrLinkTag => doSmth(styleNodeOrLinkTag))\n *\n *         return stylesheets;\n *     }\n * }\n *\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             // this export feature is configured with only one exporter\n *             exporters : [MyMultiPageExporter]\n *         }\n *     }\n * });\n *\n * // run export with the new exporter\n * scheduler.features.pdfExport.export({ exporter : 'mymultipageexporter' });\n * ```\n *\n * @classType multipage\n * @feature\n * @extends Grid/feature/export/exporter/MultiPageExporter\n *\n * @typings Grid.feature.export.exporter.MultiPageExporter -> Grid.feature.export.exporter.GridMultiPageExporter\n */\nexport default class MultiPageExporter extends SchedulerExporterMixin(GridMultiPageExporter) {\n\n    static get $name() {\n        return 'MultiPageExporter';\n    }\n\n    static get type() {\n        return 'multipage';\n    }\n\n    async stateNextPage(config) {\n        await super.stateNextPage(config);\n\n        this.exportMeta.eventsBoxes.clear();\n    }\n\n    positionRows(rows) {\n        const\n            resources   = [],\n            events      = [];\n\n        // In case of variable row height row vertical position is not guaranteed to increase\n        // monotonously. Position row manually instead\n        rows.forEach(([html, top, height, eventsHtml]) => {\n            resources.push(html);\n            eventsHtml && Array.from(eventsHtml.entries()).forEach(([key, [html, box, extras = []]]) => {\n                events.push(html + extras.join(''));\n\n                // Store event box to render dependencies later\n                this.exportMeta.eventsBoxes.set(String(key), box);\n            });\n        });\n\n        return { resources, events };\n    }\n}\n","import GridMultiPageVerticalExporter from '../../../../Grid/feature/export/exporter/MultiPageVerticalExporter.js';\nimport SchedulerExporterMixin from './SchedulerExporterMixin.js';\nimport { ScheduleRange } from '../Utils.js';\n\n/**\n * @module Scheduler/feature/export/exporter/MultiPageVerticalExporter\n */\n\n/**\n * A vertical multiple page exporter. Used by the {@link Scheduler.feature.export.PdfExport} feature to export to\n * multiple pages. Content will be scaled in a horizontal direction to fit the page.\n *\n * You do not need to use this class directly.\n *\n * ### Extending exporter\n *\n * ```javascript\n * class MyMultiPageVerticalExporter extends MultiPageVerticalExporter {\n *     // type is required for exporter\n *     static get type() {\n *         return 'mymultipageverticalexporter';\n *     }\n *\n *     get stylesheets() {\n *         const stylesheets = super.stylesheets;\n *\n *         stylesheets.forEach(styleNodeOrLinkTag => doSmth(styleNodeOrLinkTag))\n *\n *         return stylesheets;\n *     }\n * }\n *\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             // this export feature is configured with only one exporter\n *             exporters : [MyMultiPageVerticalExporter]\n *         }\n *     }\n * });\n *\n * // run export with the new exporter\n * scheduler.features.pdfExport.export({ exporter : 'mymultipageverticalexporter' });\n * ```\n *\n * @classType multipagevertical\n * @feature\n * @extends Grid/feature/export/exporter/MultiPageVerticalExporter\n *\n * @typings Grid.feature.export.exporter.MultiPageVerticalExporter -> Grid.feature.export.exporter.GridMultiPageVerticalExporter\n */\nexport default class MultiPageVerticalExporter extends SchedulerExporterMixin(GridMultiPageVerticalExporter) {\n\n    static get $name() {\n        return 'MultiPageVerticalExporter';\n    }\n\n    static get type() {\n        return 'multipagevertical';\n    }\n\n    async stateNextPage(config) {\n        await super.stateNextPage(config);\n\n        this.exportMeta.eventsBoxes.clear();\n    }\n\n    async prepareComponent(config) {\n        await super.prepareComponent(config);\n\n        // Scheduler exporter mixin can update totalWidth, so we need to adjust pages and scale here again\n        if (config.scheduleRange !== ScheduleRange.completeview) {\n            this.estimateTotalPages(config);\n        }\n    }\n\n    positionRows(rows) {\n        const\n            resources   = [],\n            events      = [];\n\n        // In case of variable row height row vertical position is not guaranteed to increase\n        // monotonously. Position row manually instead\n        rows.forEach(([html, , , eventsHtml]) => {\n            resources.push(html);\n            eventsHtml && Array.from(eventsHtml.entries()).forEach(([key, [html, box, extras = []]]) => {\n                events.push(html + extras.join(''));\n\n                // Store event box to render dependencies later\n                this.exportMeta.eventsBoxes.set(String(key), box);\n            });\n        });\n\n        return { resources, events };\n    }\n}\n","import { ScheduleRange } from '../../../feature/export/Utils.js';\nimport Combo from '../../../../Core/widget/Combo.js';\n\nexport default class ScheduleRangeCombo extends Combo {\n\n    // <debug>\n    // region Localization test\n    static localization = [\n        'L{completeview}',\n        'L{currentview}',\n        'L{daterange}',\n        'L{completedata}'\n    ];\n    // endregion\n    // </debug>\n\n    static get $name() {\n        return 'ScheduleRangeCombo';\n    }\n\n    // Factoryable type name\n    static get type() {\n        return 'schedulerangecombo';\n    }\n\n    static get defaultConfig() {\n        return {\n            editable              : false,\n            localizeDisplayFields : true,\n            displayField          : 'text',\n            buildItems() {\n                return Object.entries(ScheduleRange).map(([id, text]) => ({ value : id, text : 'L{' + text + '}' }));\n            }\n        };\n    }\n}\n\n// Register this widget type with its Factory\nScheduleRangeCombo.initClass();\n","import DateHelper from '../../../Core/helper/DateHelper.js';\nimport GridExportDialog from '../../../Grid/view/export/ExportDialog.js';\nimport { ScheduleRange } from '../../feature/export/Utils.js';\nimport '../../view/export/field/ScheduleRangeCombo.js';\nimport Field from '../../../Core/widget/Field.js';\n\n/**\n * @module Scheduler/view/export/SchedulerExportDialog\n */\n\n/**\n * Extends the Grid's {@link Grid.view.export.ExportDialog} and adds a few extra fields specific to the scheduler.\n *\n * ## Default widgets\n *\n * The default widgets of this dialog are:\n *\n * | Widget ref             | Type                                     | Weight | Description                                          |\n * |------------------------|------------------------------------------|--------|----------------------------------------------------- |\n * | `columnsField`         | {@link Core.widget.Combo Combo}          | 100    | Choose columns to export                             |\n * | `scheduleRangeField`   | {@link Core.widget.Combo Combo}          | 150    | Choose date range to export                          |\n * | `rangesContainer`      | {@link Core.widget.Container Container}  | 151    | Container for range fields                           |\n * | \\>`rangeStartField`    | {@link Core.widget.DateField DateField}  | 10     | Choose date range start                              |\n * | \\>`rangeEndField`      | {@link Core.widget.DateField DateField}  | 30     | Choose date range end                                |\n * | `rowsRangeField`       | {@link Core.widget.Combo Combo}          | 200    | Choose which rows to export                          |\n * | `exporterTypeField`    | {@link Core.widget.Combo Combo}          | 300    | Type of the exporter to use                          |\n * | `alignRowsField`       | {@link Core.widget.Checkbox Checkbox}    | 400    | Align row top to the page top on every exported page |\n * | `repeatHeaderField`    | {@link Core.widget.Checkbox Checkbox}    | 500    | Toggle repeating headers on / off                    |\n * | `fileFormatField`      | {@link Core.widget.Combo Combo}          | 600    | Choose file format                                   |\n * | `paperFormatField`     | {@link Core.widget.Combo Combo}          | 700    | Choose paper format                                  |\n * | `orientationField`     | {@link Core.widget.Combo Combo}          | 800    | Choose orientation                                   |\n *\n * The default buttons are:\n *\n * | Widget ref             | Type                                     | Weight | Description                                          |\n * |------------------------|------------------------------------------|--------|------------------------------------------------------|\n * | `exportButton`         | {@link Core.widget.Button Button}        | 100    | Triggers export                                      |\n * | `cancelButton`         | {@link Core.widget.Button Button}        | 200    | Cancel export                                        |\n *\n * *\\> nested items*\n *\n * ## Configuring default widgets\n *\n * Widgets can be customized with {@link Scheduler.feature.export.PdfExport#config-exportDialog} config:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             exportDialog : {\n *                 items : {\n *                     // hide the field\n *                     orientationField  : { hidden : true },\n *\n *                     // reorder fields\n *                     exporterTypeField : { weight : 150 },\n *\n *                     // change default format in exporter\n *                     fileFormatField   : { value : 'png' },\n *\n *                     // Configure nested fields\n *                     rangesContainer : {\n *                         items : {\n *                             rangeStartField : { value : new Date() },\n *                             rangeEndField : { value : new Date() }\n *                         }\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * });\n *\n * scheduler.features.pdfExport.showExportDialog();\n * ```\n *\n * ## Using DateTime fields for range start/end\n *\n * This config system is also capable (but not limited to) of changing layout of the container and replacing widget type:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             exportDialog : {\n *                 items : {\n *                     rangesContainer : {\n *                         // DateTime fields are longer, so we better lay them out\n *                         // vertically\n *                         layoutStyle : {\n *                             flexDirection : 'column'\n *                         },\n *                         items : {\n *                             rangeStartField : {\n *                                 // Use DateTime widget for ranges\n *                                 type       : 'datetime',\n *\n *                                 // Sync label width with other fields\n *                                 labelWidth : '12em'\n *                             },\n *                             rangeEndField : {\n *                                 type       : 'datetime',\n *                                 labelWidth : '12em'\n *                             },\n *                             // Add a filler widget that would add a margin at the bottom\n *                             filler : {\n *                                 height : '0.6em',\n *                                 weight : 900\n *                             }\n *                         }\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * });\n *\n * ```\n *\n * ## Configuring default columns\n *\n * By default all visible columns are selected in the export dialog. This is managed by\n * {@link #config-autoSelectVisibleColumns} config. To change default selected columns you should disable this config\n * and set field value. Value should be an array of valid column ids (or column instances). This way you can\n * preselect hidden columns:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     columns : [\n *         { id : 'name', text : 'Name', field : 'name' },\n *         { id : 'age', text : 'Age', field : 'age' },\n *         { id : 'city', text : 'City', field : 'city', hidden : true }\n *     ],\n *     features : {\n *         pdfExport : {\n *             exportDialog : {\n *                 autoSelectVisibleColumns : false,\n *                 items : {\n *                     columnsField : { value : ['name', 'city'] }\n *                 }\n *             }\n *         }\n *     }\n * })\n *\n * // This will show export dialog with Name and City columns selected\n * // even though City column is hidden in the UI\n * scheduler.features.pdfExport.showExportDialog();\n * ```\n *\n * ## Adding fields\n *\n * You can add your own fields to the export dialog. To make such field value acessible to the feature it should follow\n * naming pattern - it should have `ref` config ending with `Field`, see other fields for reference - `orientationField`,\n * `columnsField`, etc. Fields not matching this pattern are ignored. When values are collected from the dialog, `Field`\n * part of the widget reference is removed, so `orientationField` becomes `orientation`, `fooField` becomes `foo`, etc.\n *\n * ```javascript\n * const grid = new Grid({\n *     features : {\n *         pdfExport : {\n *             exportDialog : {\n *                 items : {\n *                     // This field gets into export config\n *                     fooField : {\n *                         type : 'text',\n *                         label : 'Foo',\n *                         value : 'FOO'\n *                     },\n *\n *                     // This one does not, because name doesn't end with `Field`\n *                     bar : {\n *                         type : 'text',\n *                         label : 'Bar',\n *                         value : 'BAR'\n *                     },\n *\n *                     // Add a container widget to wrap some fields together\n *                     myContainer : {\n *                         type : 'container',\n *                         items : {\n *                             // This one gets into config too despite the nesting level\n *                             bazField : {\n *                                 type : 'text',\n *                                 label : 'Baz',\n *                                 value : 'BAZ'\n *                             }\n *                         }\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * });\n *\n * // Assuming export dialog is opened and export triggered with default values\n * // you can receive custom field values here\n * grid.on({\n *     beforePdfExport({ config }) {\n *         console.log(config.foo) // 'FOO'\n *         console.log(config.bar) // undefined\n *         console.log(config.baz) // 'BAZ'\n *     }\n * });\n * ```\n *\n * ## Configuring widgets at runtime\n *\n * If you don't know column ids before grid instantiation or you want a flexible config, you can change widget values\n * before dialog pops up:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     columns : [\n *         { id : 'name', text : 'Name', field : 'name' },\n *         { id : 'age', text : 'Age', field : 'age' },\n *         { id : 'city', text : 'City', field : 'city', hidden : true }\n *     ],\n *     features : {\n *         pdfExport : true\n *     }\n * });\n *\n * // Such listener would ignore autoSelectVisibleColumns config. Similar to the snippet\n * // above this will show Name and City columns\n * scheduler.features.pdfExport.exportDialog.on({\n *     beforeShow() {\n *         this.widgetMap.columnsField.value = ['age', 'city']\n *     }\n * });\n * ```\n *\n * @extends Grid/view/export/ExportDialog\n */\nexport default class SchedulerExportDialog extends GridExportDialog {\n\n    //region Config\n\n    static get $name() {\n        return 'SchedulerExportDialog';\n    }\n\n    static get type() {\n        return 'schedulerexportdialog';\n    }\n\n    static get configurable() {\n        return {\n            defaults : {\n                localeClass : this\n            },\n            items : {\n                scheduleRangeField : {\n                    type   : 'schedulerangecombo',\n                    label  : 'L{Schedule range}',\n                    value  : 'completeview',\n                    weight : 150,\n                    onChange({ value }) {\n                        this.parent.widgetMap.rangesContainer.hidden = value !== ScheduleRange.daterange;\n                    }\n                },\n                rangesContainer : {\n                    type     : 'container',\n                    flex     : '1 0 100%',\n                    weight   : 151,\n                    hidden   : true,\n                    defaults : {\n                        localeClass : this\n                    },\n                    items : {\n                        filler : {\n                            // Filler widget to align date fields\n                            weight : 0,\n                            type   : 'widget',\n                            style  : 'margin-inline-end: -1em;'\n                        },\n                        rangeStartField : {\n                            type       : 'datefield',\n                            label      : 'L{Export from}',\n                            labelWidth : '3em',\n                            flex       : '1 0 25%',\n                            weight     : 10,\n                            onChange({ value }) {\n                                this.parent.widgetMap.rangeEndField.min = DateHelper.add(value, 1, 'd');\n                            }\n                        },\n                        rangeEndField : {\n                            type       : 'datefield',\n                            label      : 'L{Export to}',\n                            labelWidth : '1em',\n                            flex       : '1 0 25%',\n                            weight     : 30,\n                            onChange({ value }) {\n                                this.parent.widgetMap.rangeStartField.max = DateHelper.add(value, -1, 'd');\n                            }\n                        }\n                    }\n                }\n            }\n        };\n    }\n\n    //endregion\n\n    onLocaleChange() {\n        const\n            labelWidth = this.L('labelWidth');\n\n        this.width = this.L('L{width}');\n\n        this.items.forEach(widget => {\n            if (widget instanceof Field) {\n                widget.labelWidth = labelWidth;\n            }\n            else if (widget.ref === 'rangesContainer') {\n                widget.items[0].width = labelWidth;\n            }\n        });\n    }\n\n    applyInitialValues(config) {\n        super.applyInitialValues(config);\n\n        const\n            me                   = this,\n            {\n                client,\n                scheduleRange\n            }                    = config,\n            items                = config.items = config.items || {},\n            scheduleRangeField   = items.scheduleRangeField = items.scheduleRangeField || {},\n            rangesContainer      = items.rangesContainer = items.rangesContainer || {},\n            rangesContainerItems = rangesContainer.items = rangesContainer.items || {},\n            filler               = rangesContainerItems.filler = rangesContainerItems.filler || {},\n            rangeStartField      = rangesContainerItems.rangeStartField = rangesContainerItems.rangeStartField || {},\n            rangeEndField        = rangesContainerItems.rangeEndField = rangesContainerItems.rangeEndField || {};\n\n        filler.width = me.L('labelWidth');\n\n        scheduleRangeField.value = scheduleRangeField.value || scheduleRange;\n\n        if (scheduleRangeField.value === ScheduleRange.daterange) {\n            rangesContainer.hidden = false;\n        }\n\n        const rangeStart = rangeStartField.value = rangeStartField.value || client.startDate;\n        rangeStartField.max = DateHelper.max(client.startDate, DateHelper.add(client.endDate, -1, 'd'));\n\n        let rangeEnd = rangeEndField.value || client.endDate;\n\n        // This is the only place where we can validate date range before it gets to export feature\n        if (rangeEnd <= rangeStart) {\n            rangeEnd = DateHelper.add(rangeStart, 1, 'd');\n        }\n\n        rangeEndField.value = rangeEnd;\n        rangeEndField.min   = DateHelper.min(client.endDate, DateHelper.add(client.startDate, 1, 'd'));\n    }\n}\n","import GridSinglePageExporter from '../../../../Grid/feature/export/exporter/SinglePageExporter.js';\nimport SchedulerExporterMixin from './SchedulerExporterMixin.js';\n\n/**\n * @module Scheduler/feature/export/exporter/SinglePageExporter\n */\n\n/**\n * A single page exporter. Used by the {@link Scheduler.feature.export.PdfExport} feature to export to single page.\n * Content will be scaled in both directions to fit the page.\n *\n * You do not need to use this class directly.\n *\n * ### Extending exporter\n *\n * ```javascript\n * class MySinglePageExporter extends SinglePageExporter {\n *     // type is required for exporter\n *     static get type() {\n *         return 'mysinglepageexporter';\n *     }\n *\n *     get stylesheets() {\n *         const stylesheets = super.stylesheets;\n *\n *         stylesheets.forEach(styleNodeOrLinkTag => doSmth(styleNodeOrLinkTag))\n *\n *         return stylesheets;\n *     }\n * }\n *\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             // this export feature is configured with only one exporter\n *             exporters : [MySinglePageExporter]\n *         }\n *     }\n * });\n *\n * // run export with the new exporter\n * scheduler.features.pdfExport.export({ exporter : 'mysinglepageexporter' });\n * ```\n *\n * @classType singlepage\n * @feature\n * @extends Grid/feature/export/exporter/SinglePageExporter\n *\n * @typings Grid.feature.export.exporter.SinglePageExporter -> Grid.feature.export.exporter.GridSinglePageExporter\n */\nexport default class SinglePageExporter extends SchedulerExporterMixin(GridSinglePageExporter) {\n\n    static get $name() {\n        return 'SinglePageExporter';\n    }\n\n    static get type() {\n        return 'singlepage';\n    }\n\n    // We should not collect dependencies per each page, instead we'd render them once\n    collectDependencies() {}\n\n    positionRows(rows, config) {\n        const\n            resources   = [],\n            events      = [],\n            translateRe = /translate\\((\\d+.?\\d*)px, (\\d+.?\\d*)px\\)/,\n            topRe       = /top:.+?px/;\n\n        if (config.enableDirectRendering) {\n            rows.forEach(([html, , , eventsHtml]) => {\n                resources.push(html);\n\n                eventsHtml && Array.from(eventsHtml.entries()).forEach(([key, [html, box, extras = []]]) => {\n                    // Store event box to render dependencies later\n                    this.exportMeta.eventsBoxes.set(String(key), box);\n\n                    events.push(html + extras.join(''));\n                });\n            });\n        }\n        else {\n            let currentTop = 0;\n\n            // In case of variable row height row vertical position is not guaranteed to increase\n            // monotonously. Position row manually instead\n            rows.forEach(([html, top, height, eventsHtml]) => {\n                // Adjust row vertical position by changing `translate` style\n                resources.push(html.replace(translateRe, `translate($1px, ${currentTop}px)`));\n\n                const rowTopDelta = currentTop - top;\n\n                eventsHtml && Array.from(eventsHtml.entries()).forEach(([key, [html, box]]) => {\n                    // Fix event vertical position according to the row top\n                    box.translate(0, rowTopDelta);\n\n                    // Store event box to render dependencies later\n                    this.exportMeta.eventsBoxes.set(String(key), box);\n\n                    // Adjust event vertical position by replacing `top` style\n                    events.push(html.replace(topRe, `top: ${box.y}px`));\n                });\n\n                currentTop += height;\n            });\n        }\n\n        return { resources, events };\n    }\n}\n","import GridPdfExport from '../../../Grid/feature/export/PdfExport.js';\nimport GridFeatureManager from '../../../Grid/feature/GridFeatureManager.js';\nimport SchedulerExportDialog from '../../view/export/SchedulerExportDialog.js';\nimport SinglePageExporter from './exporter/SinglePageExporter.js';\nimport MultiPageExporter from './exporter/MultiPageExporter.js';\nimport MultiPageVerticalExporter from './exporter/MultiPageVerticalExporter.js';\nimport ObjectHelper from '../../../Core/helper/ObjectHelper.js';\n\n/**\n * @module Scheduler/feature/export/PdfExport\n */\n\n/**\n * Generates PDF/PNG files from the Scheduler component.\n *\n * <img src=\"Scheduler/export-dialog.png\" style=\"max-width : 300px\" alt=\"Scheduler Export dialog\">\n *\n * **NOTE:** Server side is required to make export work!\n *\n * Check out PDF Export Server documentation and installation steps [here](https://github.com/bryntum/pdf-export-server#pdf-export-server)\n *\n * When your server is up and running, it listens to requests. The Export feature sends a request to the specified URL\n * with the HTML fragments. The server generates a PDF (or PNG) file and returns a download link (or binary, depending\n * on {@link #config-sendAsBinary} config). Then the Export feature opens the link in a new tab and the file is\n * automatically downloaded by your browser. This is configurable, see {@link #config-openAfterExport} config.\n *\n * The {@link #config-exportServer} URL must be configured. The URL can be localhost if you start the server locally,\n * or your remote server address.\n *\n * ## Usage\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             exportServer : 'http://localhost:8080' // Required\n *         }\n *     }\n * })\n *\n * // Opens popup allowing to customize export settings\n * scheduler.features.pdfExport.showExportDialog();\n *\n * // Simple export\n * scheduler.features.pdfExport.export({\n *     // Required, set list of column ids to export\n *     columns : scheduler.columns.map(c => c.id)\n * }).then(result => {\n *     // Response instance and response content in JSON\n *     let { response, responseJSON } = result;\n * });\n * ```\n *\n * Appends configs related to exporting time axis: {@link #config-scheduleRange}, {@link #config-rangeStart},\n * {@link #config-rangeEnd}\n *\n * ## Loading resources\n *\n * If you face a problem with loading resources when exporting, the cause might be that the application and the export server are hosted on different servers.\n * This is due to [Cross-Origin Resource Sharing](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) (CORS). There are 2 options how to handle this:\n * - Allow cross-origin requests from the server where your export is hosted to the server where your application is hosted;\n * - Copy all resources keeping the folder hierarchy from the server where your application is hosted to the server where your export is hosted\n * and setup paths using {@link Grid.feature.export.PdfExport#config-translateURLsToAbsolute} config and configure the export server to give access to the path:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         pdfExport : {\n *             exportServer : 'http://localhost:8080',\n *             // '/resources' is hardcoded in WebServer implementation\n *             translateURLsToAbsolute : 'http://localhost:8080/resources'\n *         }\n *     }\n * })\n * ```\n *\n * ```javascript\n * // Following path would be served by this address: http://localhost:8080/resources/\n * node ./src/server.js -h 8080 -r web/application/styles\n * ```\n *\n * where `web/application/styles` is a physical root location of the copied resources, for example:\n *\n * <img src=\"Grid/export-server-resources.png\" style=\"max-width : 500px\" alt=\"Export server structure with copied resources\" />\n *\n * @extends Grid/feature/export/PdfExport\n * @classtype pdfExport\n * @feature\n *\n * @typings Grid.feature.export.PdfExport -> Grid.feature.export.GridPdfExport\n */\nexport default class PdfExport extends GridPdfExport {\n    static get $name() {\n        return 'PdfExport';\n    }\n\n    static get defaultConfig() {\n        return {\n            exporters     : [SinglePageExporter, MultiPageExporter, MultiPageVerticalExporter],\n            dialogClass   : SchedulerExportDialog,\n            /**\n             * Specifies how to export time span.\n             *  * completeview - Complete configured time span, from scheduler start date to end date\n             *  * currentview  - Currently visible time span\n             *  * daterange    - Use specific date range, provided additionally in config. See {@link #config-rangeStart}/\n             *  {@link #config-rangeEnd}\n             * @config {'completeview'|'currentview'|'daterange'}\n             * @default\n             * @category Export file config\n             */\n            scheduleRange : 'completeview',\n\n            /**\n             * Exported time span range start. Used with `daterange` config of the {@link #config-scheduleRange}\n             * @config {Date}\n             * @category Export file config\n             */\n            rangeStart : null,\n\n            /**\n             * Returns the instantiated export dialog widget as configured by {@link #config-exportDialog}\n             * @member {Scheduler.view.export.SchedulerExportDialog} exportDialog\n             */\n            /**\n             * A config object to apply to the {@link Scheduler.view.export.SchedulerExportDialog} widget.\n             * @config {SchedulerExportDialogConfig} exportDialog\n             */\n\n            /**\n             * Exported time span range end. Used with `daterange` config of the {@link #config-scheduleRange}\n             * @config {Date}\n             * @category Export file config\n             */\n            rangeEnd : null\n        };\n    }\n\n    get defaultExportDialogConfig() {\n        return ObjectHelper.copyProperties(super.defaultExportDialogConfig, this, ['scheduleRange']);\n    }\n\n    buildExportConfig(config) {\n        config = super.buildExportConfig(config);\n\n        const {\n            scheduleRange,\n            rangeStart,\n            rangeEnd\n        } = this;\n\n        // Time axis is filtered from UI, need to append it\n        if (config.columns && !config.columns.find(col => col.type === 'timeAxis')) {\n            config.columns.push(config.client.timeAxisColumn.id);\n        }\n\n        return ObjectHelper.assign({\n            scheduleRange,\n            rangeStart,\n            rangeEnd\n        }, config);\n    }\n}\n\nGridFeatureManager.registerFeature(PdfExport, false, 'Scheduler');\n"],"names":["ResourceInfoColumn","Column","$name","type","fields","defaults","showImage","showEventCount","showMeta","showRole","validNames","autoScaleThreshold","useNameAsImageName","field","htmlEncode","width","cellCls","editor","VersionHelper","isTestEnv","construct","args","avatarRendering","AvatarRendering","element","grid","doDestroy","destroy","getImageURL","imageName","resourceImagePath","parts","split","urlPart","length","joined","StringHelper","joinPaths","template","resourceRecord","value","me","timeAxis","resourceImageExtension","defaultResourceImageName","roleField","count","eventStore","getEvents","includeOccurrences","enableRecurringEvents","startDate","endDate","imageUrl","image","toLowerCase","includes","class","children","getResourceAvatar","initials","color","eventColor","iconCls","defaultImageUrl","tag","text","getValue","html","L","defaultRenderer","record","cellElement","isExport","result","isSpecialRow","rowHeight","style","fontSize","ColumnStore","registerColumnType","_$name","sides","editorAlign","side","client","rtl","topBottom","top","bottom","layoutModes","estimate","measure","layoutSides","before","after","Labels","InstancePlugin","configurable","labelCls","right","left","thisObj","blurAction","labelLayoutMode","labelCharWidth","pluginConfig","chain","scheduler","config","isVertical","Error","updateHostClasslist","classList","remove","add","onLabelDblClick","event","target","readOnly","dataset","labelConfig","eventRecord","resolveEventRecord","Editor","inputField","scrollAction","render","startEdit","align","matchSize","stopImmediatePropagation","changeTop","processLabelSpec","updateTop","changeAfter","updateAfter","changeRight","changeBottom","updateBottom","changeBefore","updateBefore","changeLeft","labelSpec","renderer","Object","setPrototypeOf","resourceStore","taskStore","id","milestoneWidth","recordType","fieldDef","modelClass","fieldMap","Reflect","has","prototype","EventHelper","on","timeAxisSubGrid","delegate","dblclick","doDisable","disable","isPainted","refresh","generateLabelConfigs","data","configs","domConfig","className","taskFeature","eventRecordProperty","call","assignmentRecord","DateHelper","format","displayDateFormat","encodeHtml","push","measureLabels","pxPerMS","timeAxisViewModel","getSingleUnitInPixels","DomHelper","stripTags","labelMeasureElement","createElement","parent","foregroundCanvas","retainElement","DomSync","sync","targetElement","childrenOnly","firstElementChild","offsetWidth","ms","startMS","endMS","onEventDataGenerated","_data$eventRecord","disabled","isResourceTimeRange","wrapperChildren","updateLabelLayoutMode","isConfiguring","refreshWithTransition","updateLabelCharWidth","featureClass","GridFeatureManager","registerFeature","RowReorder","TransactionalFeature","GridRowReorder","onDragStart","transactionalFeaturesEnabled","startFeatureTransaction","onDrop","rejectFeatureTransaction","onAbort","TimelineSummary","GridSummary","showTooltip","summaries","isTimelineBase","updateProject","project","ion","timeAxisViewModelUpdate","renderRows","detachListeners","name","dataReady","isHorizontal","footer","querySelector","summaryBarElement","timeline","sizeProp","colCfg","columnConfig","summaryContainer","_tip","some","label","Tooltip","cls","hoverDelay","hideDelay","forElement","anchorToTarget","trackMouse","forSelector","getHtml","activeTarget","_tipHtml","innerHTML","map","col","join","updateTimelineSummaries","_this$summaryColumn","summaryColumn","toggle","_this$_tip","ScheduleRange","completeview","currentview","daterange","immediatePromise","Promise","resolve","base","SchedulerExporterMixin","scrollRowIntoView","index","rowManager","scrollable","oldY","y","store","scrollTo","calculateTop","detacher","scroll","scrollTop","getRow","scrollToDate","date","scrollFired","promises","scrollStart","x","block","header","await","checkLog","all","cloneElement","clear","clonedEl","prepareComponent","currentOrientation","includeTimeline","scheduleRange","rangeStart","rangeEnd","visibleDateRange","waitForAnimations","infiniteScroll","setTimeSpan","svgCanvas","_oldEnableEventAnimations","enableEventAnimations","isHorizontalRendering","_oldScrollBuffer","scrollBuffer","_oldVerticalBuffer","verticalBufferSize","ignoreViewBox","exportMeta","fgCanvasEl","timeAxisEl","totalWidth","subGrids","normal","getDistanceBetweenDates","horizontalPages","Math","ceil","pageWidth","totalPages","verticalPages","scrollLeft","getCoordinateFromDate","timeAxisHeaders","timeAxisPlaceholders","headersColleted","forEachSelector","headerRow","createPlaceholder","Map","eventsPlaceholder","removeEachSelector","eventsBoxes","hasActiveFeature","columnLinesCanvas","columnLinesPlaceholder","columnLines","lines","majorLines","timeRangesHeaderCanvas","timeRangesBodyCanvas","timeRanges","enableDirectRendering","timeRangesHeaderPlaceholder","body","timeRangesBodyPlaceholder","features","dependencies","fillDrawingCache","svgCanvasEl","getAttribute","dependencyCanvasEl","dependenciesPlaceholder","ns","betweenLesser","restoreState","waitForHorizontalScroll","restoreComponent","onRowsCollected","rows","timeView","pageRangeStart","pageRangeEnd","getCurrentPageDateRange","renderHeaders","renderLines","renderRanges","renderEvents","rangeProcessed","collectLines","collectHeaders","collectRanges","collectEvents","timeSpanContains","getTime","horizontalPosition","pageStartX","pageEndX","normalGridX","locked","splitterWidth","getDateFromCoordinate","max","multiplier","prepareExportElement","headerId","footerId","el","forEach","selector","canvasEl","lastExportedRowBottom","height","marginLeft","headersCollected","headerRows","headersMap","tickIndex","set","outerHTML","String","headerCanvas","bodyCanvas","bgCanvas","backgroundCanvas","lineEl","contains","lineIndex","Number","line","replace","addedRows","normalRows","row","_resource$events","_resource$timeRanges","rowConfig","resource","getAt","dataIndex","eventsMap","events","isScheduled","getElementFromEventRecord","parentElement","Rectangle","from","offsetParent","timeRange","_client$features$reso","elId","resourceTimeRanges","generateElementId","syncIdMap","start","end","timeAxisView","timeAxisColumn","buildCells","document","resourceLayout","getResourceLayout","eventDOMConfigs","getEventDOMConfigForCurrentView","eventId","domConfigs","getColumnLinesDOMConfig","onlyChildren","getDOMConfig","i","buildPageHtml","values","placeHolder","mergedCellsHtml","placeHolderText","resources","positionRows","contentHtml","headers","Array","lineElements","concat","buildDependenciesHtml","getEventBox","box","get","isMilestone","translate","renderDependencies","dependencyFeature","draw","dependency","to","isDependencyVisible","fromBox","fromEvent","toBox","toEvent","drawDependency","clone","domSync","placeholder","MultiPageExporter","GridMultiPageExporter","stateNextPage","eventsHtml","entries","key","extras","MultiPageVerticalExporter","GridMultiPageVerticalExporter","estimateTotalPages","ScheduleRangeCombo","Combo","defaultConfig","editable","localizeDisplayFields","displayField","buildItems","initClass","SchedulerExportDialog","GridExportDialog","localeClass","items","scheduleRangeField","weight","onChange","widgetMap","rangesContainer","hidden","flex","filler","rangeStartField","labelWidth","rangeEndField","min","onLocaleChange","widget","Field","ref","applyInitialValues","rangesContainerItems","SinglePageExporter","GridSinglePageExporter","collectDependencies","translateRe","topRe","currentTop","rowTopDelta","PdfExport","GridPdfExport","exporters","dialogClass","defaultExportDialogConfig","ObjectHelper","copyProperties","buildExportConfig","columns","find","assign"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMib,qBAAqB,SAASC,YAAgB,CAAC;AAChE;EACA,WAAWjgB,KAAKA,GAAG;AACf,IAAA,OAAO,uBAAuB,CAAA;AAClC,GAAA;EACA,WAAWC,IAAIA,GAAG;AACd,IAAA,OAAO,uBAAuB,CAAA;AAClC,GAAA;EACA,WAAW+F,YAAYA,GAAG;IACtB,OAAO;AACH7F,MAAAA,QAAQ,EAAG;AACP+f,QAAAA,WAAW,EAAG,IAAA;OACjB;AACDC,MAAAA,KAAK,EA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"}