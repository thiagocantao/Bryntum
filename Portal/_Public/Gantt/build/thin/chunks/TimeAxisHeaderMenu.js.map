{"version":3,"file":"TimeAxisHeaderMenu.js","sources":["../../../../chronograph/src/class/Base.js","../../../../Engine/lib/Engine/calendar/CalendarCacheIntervalMultiple.js","../../../../Engine/lib/Engine/calendar/CalendarCacheMultiple.js","../../../../Scheduler/lib/Scheduler/column/DurationColumn.js","../../../../Scheduler/lib/Scheduler/feature/base/DragBase.js","../../../../Scheduler/lib/Scheduler/feature/EventResize.js","../../../../Scheduler/lib/Scheduler/feature/mixin/TaskEditTransactional.js","../../../../Scheduler/lib/Scheduler/feature/mixin/TransactionalFeature.js","../../../../Scheduler/lib/Scheduler/feature/base/DragCreateBase.js","../../../../Scheduler/lib/Scheduler/feature/base/TooltipBase.js","../../../../Scheduler/lib/Scheduler/feature/AbstractTimeRanges.js","../../../../Scheduler/lib/Scheduler/feature/ColumnLines.js","../../../../Scheduler/lib/Scheduler/feature/mixin/DependencyCreation.js","../../../../Scheduler/lib/Scheduler/feature/mixin/DependencyGridCache.js","../../../../Scheduler/lib/Scheduler/util/RectangularPathFinder.js","../../../../Scheduler/lib/Scheduler/feature/mixin/DependencyLineGenerator.js","../../../../Scheduler/lib/Scheduler/feature/mixin/DependencyTooltip.js","../../../../Scheduler/lib/Scheduler/feature/Dependencies.js","../../../../Scheduler/lib/Scheduler/feature/EventFilter.js","../../../../Scheduler/lib/Scheduler/feature/mixin/NonWorkingTimeMixin.js","../../../../Scheduler/lib/Scheduler/feature/NonWorkingTime.js","../../../../Scheduler/lib/Scheduler/feature/ScheduleTooltip.js","../../../../Scheduler/lib/Scheduler/feature/TimeAxisHeaderMenu.js"],"sourcesContent":["//---------------------------------------------------------------------------------------------------------------------\n/**\n * This is a base class, providing the type-safe static constructor [[new]]. This is very convenient when using\n * [[Mixin|mixins]], as mixins can not have types in the constructors.\n */\nexport class Base {\n    /**\n     * This method applies its 1st argument (if any) to the current instance using `Object.assign()`.\n     *\n     * Supposed to be overridden in the subclasses to customize the instance creation process.\n     *\n     * @param props\n     */\n    initialize(props) {\n        props && Object.assign(this, props);\n    }\n    /**\n     * This is a type-safe static constructor method, accepting a single argument, with the object, corresponding to the\n     * class properties. It will generate a compilation error, if unknown property is provided.\n     *\n     * For example:\n     *\n     * ```ts\n     * class MyClass extends Base {\n     *     prop     : string\n     * }\n     *\n     * const instance : MyClass = MyClass.new({ prop : 'prop', wrong : 11 })\n     * ```\n     *\n     * will produce:\n     *\n     * ```plaintext\n     * TS2345: Argument of type '{ prop: string; wrong: number; }' is not assignable to parameter of type 'Partial<MyClass>'.\n     * Object literal may only specify known properties, and 'wrong' does not exist in type 'Partial<MyClass>'\n     * ```\n     *\n     * The only thing this constructor does is create an instance and call the [[initialize]] method on it, forwarding\n     * the first argument. The customization of instance is supposed to be performed in that method.\n     *\n     * @param props\n     */\n    static new(props) {\n        const instance = new this();\n        instance.initialize(props);\n        return instance;\n    }\n}\n","import { stripDuplicates } from \"../util/StripDuplicates.js\";\nexport class CalendarCacheIntervalMultiple {\n    constructor(config) {\n        this.intervalGroups = [];\n        config && Object.assign(this, config);\n    }\n    combineWith(interval) {\n        const copy = this.intervalGroups.slice();\n        copy.push([interval.calendar, interval]);\n        return new CalendarCacheIntervalMultiple({ intervalGroups: copy });\n    }\n    getIsWorkingForEvery() {\n        if (this.isWorkingForEvery != null)\n            return this.isWorkingForEvery;\n        for (let [_calendar, intervals] of this.getGroups()) {\n            if (!intervals[0].isWorking)\n                return this.isWorkingForEvery = false;\n        }\n        return this.isWorkingForEvery = true;\n    }\n    getIsWorkingForSome() {\n        if (this.isWorkingForSome != null)\n            return this.isWorkingForSome;\n        for (let [_calendar, intervals] of this.getGroups()) {\n            if (intervals[0].isWorking)\n                return this.isWorkingForSome = true;\n        }\n        return this.isWorkingForSome = false;\n    }\n    getCalendars() {\n        this.getGroups();\n        return this.calendars;\n    }\n    isCalendarWorking(calendar) {\n        return this.getCalendarsWorkStatus().get(calendar);\n    }\n    getCalendarsWorkStatus() {\n        if (this.calendarsWorkStatus)\n            return this.calendarsWorkStatus;\n        const res = new Map();\n        for (let [calendar, intervals] of this.getGroups()) {\n            // <remove-on-release>\n            // TODO: fix types\n            // </remove-on-release>\n            res.set(calendar, intervals[0].isWorking);\n        }\n        return this.calendarsWorkStatus = res;\n    }\n    getCalendarsWorking() {\n        if (this.calendarsWorking)\n            return this.calendarsWorking;\n        const calendars = [];\n        for (let [calendar, intervals] of this.getGroups()) {\n            // <remove-on-release>\n            // TODO: fix types\n            // </remove-on-release>\n            if (intervals[0].isWorking)\n                calendars.push(calendar);\n        }\n        return this.calendarsWorking = calendars;\n    }\n    getCalendarsNonWorking() {\n        if (this.calendarsNonWorking)\n            return this.calendarsNonWorking;\n        const calendars = [];\n        for (let [calendar, intervals] of this.getGroups()) {\n            // <remove-on-release>\n            // TODO: fix types\n            // </remove-on-release>\n            if (!intervals[0].isWorking)\n                calendars.push(calendar);\n        }\n        return this.calendarsNonWorking = calendars;\n    }\n    getGroups() {\n        if (this.intervalsByCalendar)\n            return this.intervalsByCalendar;\n        const calendars = this.calendars = [];\n        const intervalsByCalendar = new Map();\n        this.intervalGroups.forEach(([calendar, interval]) => {\n            let data = intervalsByCalendar.get(calendar);\n            if (!data) {\n                calendars.push(calendar);\n                data = [];\n                intervalsByCalendar.set(calendar, data);\n            }\n            data.push.apply(data, interval.intervals);\n        });\n        intervalsByCalendar.forEach((intervals, calendar) => {\n            const unique = stripDuplicates(intervals);\n            unique.sort(\n            // sort in decreasing order\n            (interval1, interval2) => interval2.getPriorityField() - interval1.getPriorityField());\n            intervalsByCalendar.set(calendar, unique);\n        });\n        return this.intervalsByCalendar = intervalsByCalendar;\n    }\n}\n","import { stripDuplicates } from \"../util/StripDuplicates.js\";\nimport { CalendarCache } from \"./CalendarCache.js\";\nimport { CalendarCacheIntervalMultiple } from \"./CalendarCacheIntervalMultiple.js\";\nimport { IntervalCache } from \"./IntervalCache.js\";\n/**\n * The calendar cache for combination of multiple calendars\n */\nexport class CalendarCacheMultiple extends CalendarCache {\n    constructor(config) {\n        super(config);\n        this.calendarCaches = stripDuplicates(this.calendarCaches);\n        this.intervalCache = new IntervalCache({\n            emptyInterval: new CalendarCacheIntervalMultiple(),\n            combineIntervalsFn: (interval1, interval2) => {\n                return interval1.combineWith(interval2);\n            }\n        });\n    }\n    fillCache(startDate, endDate) {\n        this.calendarCaches.forEach(calendarCache => {\n            calendarCache.fillCache(startDate, endDate);\n            this.includeWrappingRangeFrom(calendarCache, startDate, endDate);\n        });\n    }\n}\nconst COMBINED_CALENDARS_CACHE = new Map();\nexport const combineCalendars = (calendars) => {\n    const uniqueOnly = stripDuplicates(calendars);\n    if (uniqueOnly.length === 0)\n        throw new Error(\"No calendars to combine\");\n    uniqueOnly.sort((calendar1, calendar2) => {\n        if (calendar1.internalId < calendar2.internalId)\n            return -1;\n        else\n            return 1;\n    });\n    const hash = uniqueOnly.map(calendar => calendar.internalId + '/').join('');\n    const versionsHash = uniqueOnly.map(calendar => calendar.version + '/').join('');\n    let cached = COMBINED_CALENDARS_CACHE.get(hash);\n    let res;\n    if (cached && cached.versionsHash === versionsHash)\n        res = cached.cache;\n    else {\n        res = new CalendarCacheMultiple({ calendarCaches: uniqueOnly.map(calendar => calendar.calendarCache) });\n        // COMBINED_CALENDARS_CACHE.set(hash, {\n        //     versionsHash    : versionsHash,\n        //     cache           : res\n        // })\n    }\n    return res;\n};\n","import ColumnStore from '../../Grid/data/ColumnStore.js';\nimport NumberColumn from '../../Grid/column/NumberColumn.js';\nimport Duration from '../../Core/data/Duration.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport ObjectHelper from '../../Core/helper/ObjectHelper.js';\nimport '../../Core/widget/DurationField.js';\n\n/**\n * @module Scheduler/column/DurationColumn\n */\n\n/**\n * A column showing the task {@link Scheduler/model/TimeSpan#field-fullDuration duration}. Please note, this column\n * is preconfigured and expects its field to be of the {@link Core.data.Duration} type.\n *\n * The default editor is a {@link Core.widget.DurationField}. It parses time units, so you can enter \"4d\"\n * indicating 4 days duration, or \"4h\" indicating 4 hours, etc. The numeric magnitude can be either an integer or a\n * float value. Both \",\" and \".\" are valid decimal separators. For example, you can enter \"4.5d\" indicating 4.5 days\n * duration, or \"4,5h\" indicating 4.5 hours.\n *\n * {@inlineexample Scheduler/column/DurationColumn.js}\n * @extends Grid/column/NumberColumn\n * @classType duration\n * @column\n */\nexport default class DurationColumn extends NumberColumn {\n    compositeField = true;\n\n    //region Config\n\n    static get $name() {\n        return 'DurationColumn';\n    }\n\n    static get type() {\n        return 'duration';\n    }\n\n    static get isGanttColumn() {\n        return true;\n    }\n\n    static get fields() {\n        return [\n            /**\n             * Precision of displayed duration, defaults to use {@link Scheduler.view.Scheduler#config-durationDisplayPrecision}.\n             * Specify an integer value to override that setting, or `false` to use raw value\n             * @config {Number|Boolean} decimalPrecision\n             */\n            { name : 'decimalPrecision', defaultValue : 1 }\n        ];\n    }\n\n    static get defaults() {\n        return {\n            /**\n             * Min value\n             * @config {Number}\n             */\n            min : null,\n\n            /**\n             * Max value\n             * @config {Number}\n             */\n            max : null,\n\n            /**\n             * Step size for spin button clicks.\n             * @member {Number} step\n             */\n            /**\n             * Step size for spin button clicks. Also used when pressing up/down keys in the field.\n             * @config {Number}\n             * @default\n             */\n            step : 1,\n\n            /**\n             * Large step size, defaults to 10 * `step`. Applied when pressing SHIFT and stepping either by click or\n             * using keyboard.\n             * @config {Number}\n             * @default 10\n             */\n            largeStep : 0,\n\n            field         : 'fullDuration',\n            text          : 'L{Duration}',\n            instantUpdate : true,\n            // Undocumented, used by Filter feature to get type of the filter field\n            filterType    : 'duration',\n\n            sortable(durationEntity1, durationEntity2) {\n                const\n                    ms1 = durationEntity1.getValue(this.field),\n                    ms2 = durationEntity2.getValue(this.field);\n\n                return ms1 - ms2;\n            }\n        };\n    }\n\n    construct() {\n        super.construct(...arguments);\n\n        const sortFn = this.sortable;\n\n        this.sortable = (...args) => sortFn.call(this, ...args);\n    }\n\n    get defaultEditor() {\n        const { max, min, step, largeStep } = this;\n\n        // Remove any undefined configs, to allow config system to use default values instead\n        return ObjectHelper.cleanupProperties({\n            type : 'duration',\n            name : this.field,\n            max,\n            min,\n            step,\n            largeStep\n        });\n    }\n\n    //endregion\n\n    //region Internal\n\n    get durationUnitField() {\n        return `${this.field}Unit`;\n    }\n\n    roundValue(duration) {\n        const\n            nbrDecimals = typeof this.grid.durationDisplayPrecision === 'number' ? this.grid.durationDisplayPrecision : this.decimalPrecision,\n            multiplier  = Math.pow(10, nbrDecimals),\n            rounded     = Math.round(duration * multiplier) / multiplier;\n\n        return rounded;\n    }\n\n    formatValue(duration, durationUnit) {\n        if (duration instanceof Duration) {\n            durationUnit = duration.unit;\n            duration     = duration.magnitude;\n        }\n\n        duration = this.roundValue(duration);\n\n        return duration + ' ' + DateHelper.getLocalizedNameOfUnit(durationUnit, duration !== 1);\n    }\n\n    //endregion\n\n    //region Render\n\n    defaultRenderer({ value, record, isExport }) {\n        const\n            type          = typeof value,\n            durationValue = type === 'number' ? value : value?.magnitude,\n            durationUnit  = type === 'number' ? record.getValue(this.durationUnitField) : value?.unit;\n\n        // in case of bad input (for instance NaN, undefined or NULL value)\n        if (typeof durationValue !== 'number') {\n            return isExport ? '' : null;\n        }\n\n        return this.formatValue(durationValue, durationUnit);\n    }\n\n    //endregion\n\n    // Used with CellCopyPaste as fullDuration doesn't work via record.get\n    toClipboardString({ record }) {\n        return record.getValue(this.field).toString();\n    }\n\n    fromClipboardString({ string, record }) {\n        const duration = DateHelper.parseDuration(string, true, this.durationUnit);\n\n        if (duration && 'magnitude' in duration) {\n            return duration;\n        }\n\n        return record.fullDuration;\n    }\n\n    calculateFillValue({ value, record }) {\n        return this.fromClipboardString({ string : value, record });\n    }\n\n}\n\nColumnStore.registerColumnType(DurationColumn);\n","import InstancePlugin from '../../../Core/mixin/InstancePlugin.js';\nimport DateHelper from '../../../Core/helper/DateHelper.js';\nimport DomHelper from '../../../Core/helper/DomHelper.js';\nimport DragHelper from '../../../Core/helper/DragHelper.js';\nimport Rectangle from '../../../Core/helper/util/Rectangle.js';\nimport ClockTemplate from '../../tooltip/ClockTemplate.js';\nimport Tooltip from '../../../Core/widget/Tooltip.js';\nimport Objects from '../../../Core/helper/util/Objects.js';\nimport Widget from '../../../Core/widget/Widget.js';\n\n/**\n * @module Scheduler/feature/base/DragBase\n */\n\n// <remove-on-release>\n// TODO: shift to copy\n// </remove-on-release>\n\n/**\n * Base class for EventDrag (Scheduler) and TaskDrag (Gantt) features. Contains shared code. Not to be used directly.\n *\n * @extends Core/mixin/InstancePlugin\n * @abstract\n */\nexport default class DragBase extends InstancePlugin {\n    //region Config\n\n    static get defaultConfig() {\n        return {\n            // documented on Schedulers EventDrag feature and Gantt's TaskDrag\n            tooltipTemplate : data => `\n                <div class=\"b-sch-tip-${data.valid ? 'valid' : 'invalid'}\">\n                    ${data.startClockHtml}\n                    ${data.endClockHtml}\n                    <div class=\"b-sch-tip-message\">${data.message}</div>\n                </div>\n            `,\n\n            /**\n             * Specifies whether or not to show tooltip while dragging event\n             * @config {Boolean}\n             * @default\n             */\n            showTooltip : true,\n\n            /**\n             * When enabled, the event being dragged always \"snaps\" to the exact start date that it will have after drop.\n             * @config {Boolean}\n             * @default\n             */\n            showExactDropPosition : false,\n\n            /*\n             * The store from which the dragged items are mapped to the UI.\n             * In Scheduler's implementation of this base class, this will be\n             * an EventStore, in Gantt's implementations, this will be a TaskStore.\n             * Because both derive from this base, we must refer to it as this.store.\n             * @private\n             */\n            store : null,\n\n            /**\n             * An object used to configure the internal {@link Core.helper.DragHelper} class\n             * @config {DragHelperConfig}\n             */\n            dragHelperConfig : null,\n\n            tooltipCls : 'b-eventdrag-tooltip'\n        };\n    }\n\n    static get configurable() {\n        return {\n            /**\n             * Set to `false` to allow dragging tasks outside the client Scheduler.\n             * Useful when you want to drag tasks between multiple Scheduler instances\n             * @config {Boolean}\n             * @default\n             */\n            constrainDragToTimeline : true,\n\n            // documented on Schedulers EventDrag feature, not used for Gantt\n            constrainDragToResource : true,\n\n            constrainDragToTimeSlot : false,\n\n            /**\n             * Yields the {@link Core.widget.Tooltip} which tracks the event during a drag operation.\n             * @member {Core.widget.Tooltip} tip\n             */\n            /**\n             * A config object to allow customization of the {@link Core.widget.Tooltip} which tracks\n             * the event during a drag operation.\n             * @config {TooltipConfig}\n             */\n            tip : {\n                $config : ['lazy', 'nullify'],\n                value   : {\n                    align : {\n                        align          : 'b-t',\n                        allowTargetOut : true\n                    },\n                    autoShow                 : true,\n                    updateContentOnMouseMove : true\n                }\n            },\n\n            /**\n             * The `eventDrag`and `taskDrag` events are normally only triggered when the drag operation will lead to a\n             * change in date or assignment. By setting this config to `false`, that logic is bypassed to trigger events\n             * for each native mouse move event.\n             * @prp {Boolean}\n             */\n            throttleDragEvent : true\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            chain : ['onPaint']\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    internalSnapToPosition(snapTo) {\n        const { dragData } = this;\n\n        this.snapToPosition?.({\n            assignmentRecord : dragData.assignmentRecord,\n            eventRecord      : dragData.eventRecord,\n            resourceRecord   : dragData.newResource || dragData.resourceRecord,\n            startDate        : dragData.startDate,\n            endDate          : dragData.endDate,\n            snapTo\n        });\n    }\n\n    buildDragHelperConfig() {\n        const\n            me                                  = this,\n            {\n                client,\n                constrainDragToTimeline,\n                constrainDragToResource,\n                constrainDragToTimeSlot,\n                dragHelperConfig = {}\n            }                                   = me,\n            { timeAxisViewModel, isHorizontal } = client,\n            lockY                               = isHorizontal ? constrainDragToResource : constrainDragToTimeSlot,\n            lockX                               = isHorizontal ? constrainDragToTimeSlot : constrainDragToResource;\n\n        // If implementer wants to allow users dragging outside the timeline element, setup the internal dropTargetSelector\n        if (me.externalDropTargetSelector) {\n            dragHelperConfig.dropTargetSelector = `.b-timeaxissubgrid,${me.externalDropTargetSelector}`;\n        }\n\n        return Objects.merge({\n            name                 : me.constructor.name, // useful when debugging with multiple draggers\n            positioning          : 'absolute',\n            lockX,\n            lockY,\n            minX                 : true, // Allows dropping with start before time axis\n            maxX                 : true, // Allows dropping with end after time axis\n            constrain            : false,\n            cloneTarget          : !constrainDragToTimeline,\n            // If we clone event dragged bars, we assume ownership upon drop so we can reuse the element and have animations\n            removeProxyAfterDrop : false,\n            dragWithin           : constrainDragToTimeline ? null : document.body,\n            hideOriginalElement  : true,\n            dropTargetSelector   : '.b-timelinebase',\n\n            // A CSS class added to drop target while dragging events\n            dropTargetCls : me.externalDropTargetSelector ? 'b-drop-target' : '',\n\n            outerElement   : client.timeAxisSubGridElement,\n            targetSelector : client.eventSelector,\n            scrollManager  : constrainDragToTimeline ? client.scrollManager : null,\n            createProxy    : el => me.createProxy(el),\n\n            snapCoordinates : ({ element, newX, newY }) => {\n                const { dragData } = me;\n                // Snapping not supported when dragging outside a scheduler\n                if (me.constrainDragToTimeline && !me.constrainDragToTimeSlot && (me.showExactDropPosition || timeAxisViewModel.snap)) {\n                    const\n                        draggedEventRecord = dragData.draggedEntities[0],\n                        coordinate         = me.getCoordinate(draggedEventRecord, element, [newX, newY]),\n                        snappedDate        = timeAxisViewModel.getDateFromPosition(coordinate, 'round'),\n                        { calendar }       = draggedEventRecord;\n\n                    if (!calendar || snappedDate && calendar.isWorkingTime(snappedDate, DateHelper.add(snappedDate, draggedEventRecord.fullDuration))) {\n                        const snappedPosition = snappedDate && timeAxisViewModel.getPositionFromDate(snappedDate);\n\n                        if (snappedDate && snappedDate >= client.startDate && snappedPosition != null) {\n                            if (isHorizontal) {\n                                newX = snappedPosition;\n                            }\n                            else {\n                                newY = snappedPosition;\n                            }\n                        }\n                    }\n                }\n\n                const snapTo = { x : newX, y : newY };\n\n                me.internalSnapToPosition(snapTo);\n\n                return snapTo;\n            },\n            internalListeners : {\n                beforedragstart : 'onBeforeDragStart',\n                dragstart       : 'onDragStart',\n                afterdragstart  : 'onAfterDragStart',\n                drag            : 'onDrag',\n                drop            : 'onDrop',\n                abort           : 'onDragAbort',\n                abortFinalized  : 'onDragAbortFinalized',\n                reset           : 'onDragReset',\n                thisObj         : me\n            }\n        }, dragHelperConfig, {\n            isElementDraggable : (el, event) => {\n                return (!dragHelperConfig || !dragHelperConfig.isElementDraggable || dragHelperConfig.isElementDraggable(el, event)) &&\n                    me.isElementDraggable(el, event);\n            }\n        });\n    }\n\n    /**\n     * Called when scheduler is rendered. Sets up drag and drop and hover tooltip.\n     * @private\n     */\n    onPaint({ firstPaint }) {\n        const\n            me         = this,\n            { client } = me;\n\n        me.drag?.destroy();\n\n        me.drag = DragHelper.new(me.buildDragHelperConfig());\n\n        if (firstPaint) {\n            client.rowManager.ion({\n                changeTotalHeight : () => me.updateYConstraint(me.dragData?.[`${client.scheduledEventName}Record`]),\n                thisObj           : me\n            });\n        }\n\n        if (me.showTooltip) {\n            me.clockTemplate = new ClockTemplate({\n                scheduler : client\n            });\n        }\n    }\n\n    doDestroy() {\n        this.drag?.destroy();\n        this.clockTemplate?.destroy();\n        this.tip?.destroy();\n        super.doDestroy();\n    }\n\n    get tipId() {\n        return `${this.client.id}-event-drag-tip`;\n    }\n\n    changeTip(tip, oldTip) {\n        const me = this;\n\n        if (tip) {\n            const result = Tooltip.reconfigure(oldTip, Tooltip.mergeConfigs({\n                forElement : me.element,\n                id         : me.tipId,\n                getHtml    : me.getTipHtml.bind(me),\n                cls        : me.tooltipCls,\n                owner      : me.client\n            }, tip), {\n                owner    : me.client,\n                defaults : {\n                    type : 'tooltip'\n                }\n            });\n\n            result.ion({ innerHtmlUpdate : 'updateDateIndicator', thisObj : me });\n\n            return result;\n        }\n        else {\n            oldTip?.destroy();\n        }\n    }\n\n    //endregion\n\n    //region Drag events\n\n    createProxy(element) {\n        const proxy = element.cloneNode(true);\n        delete proxy.id;\n\n        proxy.classList.add(`b-sch-${this.client.mode}`);\n        return proxy;\n    }\n\n    onBeforeDragStart({ context, event }) {\n        const\n            me             = this,\n            { client }     = me,\n            dragData       = me.getMinimalDragData(context, event),\n            eventRecord    = dragData?.[`${client.scheduledEventName}Record`],\n            resourceRecord = dragData.resourceRecord;\n\n        if (client.readOnly || me.disabled || !eventRecord || eventRecord.isDraggable === false || eventRecord.readOnly || resourceRecord?.readOnly) {\n            return false;\n        }\n\n        // Cache the date corresponding to the drag start point so that on drag, we can always\n        // perform the same calculation to then find the time delta without having to calculate\n        // the new start and end times from the position that the element is.\n        context.pointerStartDate = client.getDateFromXY([context.startClientX, context.startPageY], null, false);\n\n        const result = me.triggerBeforeEventDrag(\n            `before${client.capitalizedEventName}Drag`,\n            {\n                ...dragData,\n                event,\n                // to be deprecated\n                context : {\n                    ...context,\n                    ...dragData\n                }\n            }\n        ) !== false;\n\n        if (result) {\n            me.updateYConstraint(eventRecord, resourceRecord);\n\n            // Hook for features that need to react to drag starting, used by NestedEvents\n            client[`before${client.capitalizedEventName}DragStart`]?.(context, dragData);\n        }\n\n        return result;\n    }\n\n    onAfterDragStart({ context, event }) {}\n\n    /**\n     * Returns true if a drag operation is active\n     * @property {Boolean}\n     * @readonly\n     */\n    get isDragging() {\n        return this.drag?.isDragging;\n    }\n\n    // Checked by dependencies to determine if live redrawing is needed\n    get isActivelyDragging() {\n        return this.isDragging && !this.finalizing;\n    }\n\n    /**\n     * Triggered when dragging of an event starts. Initializes drag data associated with the event being dragged.\n     * @private\n     */\n    onDragStart({ context, event }) {\n        const\n            me     = this,\n            // When testing with Selenium, it simulates drag and drop with a single mousemove event, we might be over\n            // another client already\n            client = me.findClientFromTarget(event, context) ?? me.client;\n\n        me.currentOverClient = client;\n        me.drag.unifiedProxy = me.unifiedDrag;\n\n        me.onMouseOverNewTimeline(client, true);\n\n        const dragData = me.dragData = me.getDragData(context);\n\n        // Do not let DomSync reuse the element\n        me.suspendElementRedrawing(context.element);\n\n        if (me.showTooltip && me.tip) {\n            const tipTarget = dragData.context.dragProxy ? dragData.context.dragProxy.firstChild : context.element;\n\n            me.tip.showBy(tipTarget);\n        }\n\n        me.triggerDragStart(dragData);\n\n        // Hook for features that need to take action after drag starts\n        client[`after${client.capitalizedEventName}DragStart`]?.(context, dragData);\n\n        const\n            {\n                eventMenu,\n                taskMenu\n            }           = client.features,\n            menuFeature = eventMenu || taskMenu;\n\n        // If this is a touch action, hide the context menu which may have shown\n        menuFeature?.hideContextMenu?.(false);\n    }\n\n    updateDateIndicator() {\n        const\n            { startDate, endDate } = this.dragData,\n            { tip, clockTemplate } = this,\n            endDateElement         = tip.element.querySelector('.b-sch-tooltip-enddate');\n\n        clockTemplate.updateDateIndicator(tip.element, startDate);\n\n        endDateElement && clockTemplate.updateDateIndicator(endDateElement, endDate);\n    }\n\n    findClientFromTarget(event, context) {\n        let { target } = event;\n\n        // Can't detect target under a touch event\n        if (/^touch/.test(event.type)) {\n            const center = Rectangle.from(context.element, null, true).center;\n\n            target = DomHelper.elementFromPoint(center.x, center.y);\n        }\n\n        const client = Widget.fromElement(target, 'timelinebase');\n        // Do not allow drops on histogram widgets\n        return client?.isResourceHistogram ? null : client;\n    }\n\n    /**\n     * Triggered while dragging an event. Updates drag data, validation etc.\n     * @private\n     */\n    onDrag({ context, event }) {\n        const\n            me    = this,\n            dd    = me.dragData,\n            start = dd.startDate;\n\n        let client;\n\n        if (me.constrainDragToTimeline) {\n            client = me.client;\n        }\n        else {\n            client = me.findClientFromTarget(event, dd.context);\n        }\n\n        me.updateDragContext(context, event);\n\n        if (!client) {\n            return;\n        }\n\n        if (client !== me.currentOverClient) {\n            me.onMouseOverNewTimeline(client);\n        }\n\n        //this.checkShiftChange();\n\n        // Let product specific implementations trigger drag event (eventDrag, taskDrag)\n        if (dd.dirty || !me.throttleDragEvent) {\n            const valid = dd.valid;\n\n            me.triggerEventDrag(dd, start);\n\n            if (valid !== dd.valid) {\n                dd.context.valid = dd.externalDragValidity = dd.valid;\n            }\n        }\n\n        if (me.showTooltip && me.tip) {\n            // If we've an error message to show, force the tip to be visible\n            // even if the target is not in view.\n            me.tip.lastAlignSpec.allowTargetOut = !dd.valid;\n            me.tip.realign();\n        }\n    }\n\n    onMouseOverNewTimeline(newTimeline, initial) {\n        const\n            me                          = this,\n            { drag : { lockX, lockY } } = me,\n            scrollables                 = [];\n\n        me.currentOverClient.element.classList.remove('b-dragging-' + me.currentOverClient.scheduledEventName);\n\n        newTimeline.element.classList.add('b-dragging-' + newTimeline.scheduledEventName);\n\n        if (!initial) {\n            me.currentOverClient.scrollManager.stopMonitoring();\n        }\n\n        if (!lockX) {\n            scrollables.push({\n                element   : newTimeline.timeAxisSubGrid.scrollable.element,\n                direction : 'horizontal'\n            });\n        }\n\n        if (!lockY) {\n            scrollables.push({\n                element   : newTimeline.scrollable.element,\n                direction : 'vertical'\n            });\n        }\n\n        newTimeline.scrollManager.startMonitoring({\n            scrollables,\n            callback : me.drag.onScrollManagerScrollCallback\n        });\n\n        me.currentOverClient = newTimeline;\n    }\n\n    triggerBeforeEventDropFinalize(eventType, eventData, client) {\n        client.trigger(eventType, eventData);\n    }\n\n    /**\n     * Triggered when dropping an event. Finalizes the operation.\n     * @private\n     */\n    onDrop({ context, event }) {\n        const\n            me                    = this,\n            { currentOverClient, dragData } = me;\n\n        let modified = false;\n\n        // Stop monitoring early, to avoid scrolling during finalization\n        currentOverClient?.scrollManager.stopMonitoring();\n\n        me.tip?.hide();\n\n        context.valid = context.valid && me.isValidDrop(dragData);\n\n        // If dropping outside scheduler, we opt in on DragHelper removing the proxy element\n        me.drag.removeProxyAfterDrop = Boolean(dragData.externalDropTarget);\n\n        if (context.valid && dragData.startDate && dragData.endDate) {\n            let beforeDropTriggered = false;\n\n            dragData.finalize = async(valid) => {\n                if (beforeDropTriggered || dragData.async) {\n                    await me.finalize(valid);\n                }\n                else {\n                    // If user finalized operation synchronously in the beforeDropFinalize listener, just use\n                    // the valid param and carry on\n                    // but ignore it, if the context is already marked as invalid\n                    context.valid = context.valid && valid;\n                }\n            };\n\n            me.triggerBeforeEventDropFinalize(`before${currentOverClient.capitalizedEventName}DropFinalize`, {\n                context  : dragData,\n                domEvent : event\n            }, currentOverClient);\n\n            beforeDropTriggered = true;\n\n            // Allow implementer to take control of the flow, by returning false from this listener,\n            // to show a confirmation popup etc. This event is documented in EventDrag and TaskDrag\n            context.async = dragData.async;\n\n            // Internal validation, making sure all dragged records fit inside the view\n            if (!context.async && !dragData.externalDropTarget) {\n                modified = (dragData.startDate - dragData.origStart) !== 0 || dragData.newResource !== dragData.resourceRecord;\n            }\n        }\n\n        if (!context.async) {\n            me.finalize(dragData.valid && context.valid && modified);\n        }\n    }\n\n    onDragAbort({ context }) {\n        const me = this;\n\n        // Stop monitoring early, to avoid scrolling during finalization\n        me.currentOverClient?.scrollManager.stopMonitoring();\n\n        me.client.currentOrientation.onDragAbort({ context, dragData : me.dragData });\n\n        // otherwise the event disappears on next refresh (#62)\n        me.resetDraggedElements();\n\n        me.tip?.hide();\n\n        // Trigger eventDragAbort / taskDragAbort depending on product\n        me.triggerDragAbort(me.dragData);\n    }\n\n    // Fired after any abort animation has completed (the point where we want to trigger redraw of progress lines etc)\n    onDragAbortFinalized({ context }) {\n        const me = this;\n\n        me.triggerDragAbortFinalized(me.dragData);\n\n        // Hook for features that need to react on drag abort, used by NestedEvents\n        me.client[`after${me.client.capitalizedEventName}DragAbortFinalized`]?.(context, me.dragData);\n    }\n\n    // For the drag across multiple schedulers, tell all involved scroll managers to stop monitoring\n    onDragReset({ source : dragHelper }) {\n        const\n            me              = this,\n            currentTimeline = me.currentOverClient;\n\n        if (dragHelper.context?.started) {\n            me.resetDraggedElements();\n\n            currentTimeline.trigger(`${currentTimeline.scheduledEventName}DragReset`);\n        }\n\n        currentTimeline?.element.classList.remove(`b-dragging-${currentTimeline.scheduledEventName}`);\n        me.dragData = null;\n    }\n\n    resetDraggedElements() {\n        const\n            { dragData }                     = this,\n            { eventBarEls, draggedEntities } = dragData;\n\n        this.resumeRecordElementRedrawing(dragData.record);\n\n        draggedEntities.forEach((record, i) => {\n            this.resumeRecordElementRedrawing(record);\n\n            // <remove-on-release>\n            // TODO: why?\n            // </remove-on-release>\n            eventBarEls[i].classList.remove(this.drag.draggingCls);\n            eventBarEls[i].retainElement = false;\n        });\n\n        // Code expects 1:1 ratio between eventBarEls & dragged assignments, but when dragging an event of a linked\n        // resource that is not the case, and we need to clean up some more\n        dragData.context.element.retainElement = false;\n    }\n\n    /**\n     * Triggered internally on invalid drop.\n     * @private\n     */\n    onInternalInvalidDrop(abort) {\n        const\n            me          = this,\n            { context } = me.drag;\n\n        me.tip?.hide();\n\n        me.triggerAfterDrop(me.dragData, false);\n\n        context.valid = false;\n\n        if (abort) {\n            me.drag.abort();\n        }\n    }\n\n    //endregion\n\n    //region Finalization & validation\n\n    /**\n     * Called on drop to update the record of the event being dropped.\n     * @private\n     * @param {Boolean} updateRecords Specify true to update the record, false to treat as invalid\n     */\n    async finalize(updateRecords) {\n        const\n            me                              = this,\n            { dragData, currentOverClient } = me,\n            clientEventTipFeature           = currentOverClient.features.taskTooltip || currentOverClient.features.eventTooltip;\n\n        // Drag could've been aborted by window blur event. If it is aborted - we have nothing to finalize.\n        if (!dragData || me.finalizing) {\n            return;\n        }\n\n        const { context, draggedEntities, externalDropTarget } = dragData;\n\n        let result;\n\n        me.finalizing = true;\n\n        draggedEntities.forEach((record, i) => {\n            me.resumeRecordElementRedrawing(record);\n\n            // <remove-on-release>\n            // TODO: Why is this needed? EventResize.t.js fails without it\n            // </remove-on-release>\n            dragData.eventBarEls[i].classList.remove(me.drag.draggingCls);\n            dragData.eventBarEls[i].retainElement = false;\n        });\n\n        // Code expects 1:1 ratio between eventBarEls & dragged assignments, but when dragging an event of a linked\n        // resource that is not the case, and we need to clean up some more\n        context.element.retainElement = false;\n\n        if ((externalDropTarget && dragData.valid) || updateRecords) {\n            // updateRecords may or may not be async.\n            // We see if it returns a Promise.\n            result = me.updateRecords(dragData);\n\n            // If updateRecords is async, the calling DragHelper must know this and\n            // go into a awaitingFinalization state.\n            if (!externalDropTarget && Objects.isPromise(result)) {\n                context.async = true;\n                await result;\n            }\n\n            // If the finalize handler decided to change the dragData's validity...\n            if (!dragData.valid) {\n                me.onInternalInvalidDrop(true);\n            }\n            else {\n                if (context.async) {\n                    context.finalize();\n                }\n                if (externalDropTarget) {\n                    // Force a refresh early so that removed events will not temporary be visible while engine is\n                    // recalculating (the row below clears the 'b-hidden' CSS class of the original drag element)\n                    me.client.refreshRows(false);\n                }\n                me.triggerAfterDrop(dragData, true);\n            }\n        }\n        else {\n            me.onInternalInvalidDrop(context.async || dragData.async);\n        }\n\n        me.finalizing = false;\n\n        // Prevent event tooltip showing after a drag drop\n        if (clientEventTipFeature?.enabled) {\n            clientEventTipFeature.disabled = true;\n\n            currentOverClient.setTimeout(() => {\n                clientEventTipFeature.disabled = false;\n            }, 200);\n        }\n\n        return result;\n    }\n\n    //endregion\n\n    //region Drag data\n\n    /**\n     * Updates drag data's dates and validity (calls #validatorFn if specified)\n     * @private\n     */\n    updateDragContext(info, event) {\n        const\n            me                  = this,\n            { drag }            = me,\n            dd                  = me.dragData,\n            client              = me.currentOverClient,\n            { isHorizontal }    = client,\n            [record]            = dd.draggedEntities,\n            eventRecord         = record.isAssignment ? record.event : record,\n            lastDragStartDate   = dd.startDate,\n            constrainToTimeSlot = me.constrainDragToTimeSlot || (isHorizontal ? drag.lockX : drag.lockY);\n\n        dd.browserEvent = event;\n\n        // getProductDragContext may switch valid flag, need to keep it here\n        Object.assign(dd, me.getProductDragContext(dd));\n\n        if (constrainToTimeSlot) {\n            dd.timeDiff = 0;\n        }\n        else {\n            let timeDiff;\n\n            // Time diff is calculated differently for continuous and non-continuous time axis\n            if (client.timeAxis.isContinuous) {\n                const\n                    timeAxisPosition = client.isHorizontal ? info.pageX ?? info.startPageX : info.pageY ?? info.startPageY,\n                    // Use the localized coordinates to ask the TimeAxisViewModel what date the mouse is at.\n                    // Pass allowOutOfRange as true in case we have dragged out of either side of the timeline viewport.\n                    pointerDate      = client.getDateFromCoordinate(timeAxisPosition, null, false, true);\n\n                timeDiff = dd.timeDiff = pointerDate - info.pointerStartDate;\n            }\n            else {\n                const range = me.resolveStartEndDates(info.element);\n\n                // if dragging is out of timeAxis rect bounds, we will not be able to get dates\n                dd.valid = Boolean(range.startDate && range.endDate);\n\n                if (dd.valid) {\n                    timeDiff = range.startDate - dd.origStart;\n                }\n            }\n\n            // If we got a time diff, we calculate new dates the same way no matter if it's continuous or not.\n            // This prevents no-change drops in non-continuous time axis from being processed by updateAssignments()\n            if (timeDiff !== null) {\n                // calculate and round new startDate based on actual timeDiff\n                dd.startDate = me.adjustStartDate(dd.origStart, timeDiff);\n\n                dd.endDate = DateHelper.add(dd.startDate, eventRecord.fullDuration);\n\n                if (dd.valid) {\n                    dd.timeDiff = dd.startDate - dd.origStart;\n                }\n            }\n        }\n\n        const positionDirty = dd.dirty = dd.dirty || lastDragStartDate - dd.startDate !== 0;\n\n        if (dd.valid) {\n            // If it's fully outside, we don't allow them to drop it - the event would disappear from their control.\n            if (me.constrainDragToTimeline && (dd.endDate <= client.timeAxis.startDate || dd.startDate >= client.timeAxis.endDate)) {\n                dd.valid           = false;\n                dd.context.message = me.L('L{EventDrag.noDropOutsideTimeline}');\n            }\n            else if (positionDirty || dd.externalDropTarget) {\n                // Used to rely on faulty code above that would not be valid initially. With that changed we ignore\n                // checking validity here on drag start, which is detected by not having a pageX\n                const result = dd.externalDragValidity = !event || (info.pageX && me.checkDragValidity(dd, event));\n\n                if (!result || typeof result === 'boolean') {\n                    dd.valid           = result !== false;\n                    dd.context.message = '';\n                }\n                else {\n                    dd.valid           = result.valid !== false;\n                    dd.context.message = result.message;\n                }\n            }\n            else {\n                // Apply cached value from external drag validation\n                dd.valid = dd.externalDragValidity !== false && dd.externalDragValidity?.valid !== false;\n            }\n        }\n        else {\n            dd.valid = false;\n        }\n\n        dd.context.valid = dd.valid;\n    }\n\n    suspendRecordElementRedrawing(record, suspend = true) {\n        this.suspendElementRedrawing(this.getRecordElement(record), suspend);\n        // <remove-on-release>\n        // TODO: temporary get rid of retainElement joggling to check tests\n        // </remove-on-release>\n        record.instanceMeta(this.client).retainElement = suspend;\n    }\n\n    resumeRecordElementRedrawing(record) {\n        this.suspendRecordElementRedrawing(record, false);\n    }\n\n    suspendElementRedrawing(element, suspend = true) {\n        // <remove-on-release>\n        // TODO: temporary get rid of retainElement joggling to check tests\n        // </remove-on-release>\n        if (element) {\n            element.retainElement = suspend;\n        }\n    }\n\n    resumeElementRedrawing(element) {\n        this.suspendElementRedrawing(element, false);\n    }\n\n    /**\n     * Initializes drag data (dates, constraints, dragged events etc). Called when drag starts.\n     * @private\n     * @param info\n     * @returns {*}\n     */\n    getDragData(info) {\n        const\n            me                = this,\n            { client, drag }  = me,\n            productDragData   = me.setupProductDragData(info),\n            {\n                record,\n                eventBarEls,\n                draggedEntities\n            }                 = productDragData,\n            { startEvent }    = drag,\n            timespan          = record.isAssignment ? record.event : record,\n            origStart         = timespan.startDate,\n            origEnd           = timespan.endDate,\n            timeAxis          = client.timeAxis,\n            startsOutsideView = origStart < timeAxis.startDate,\n            endsOutsideView   = origEnd > timeAxis.endDate,\n            multiSelect       = client.isSchedulerBase ? client.multiEventSelect : client.selectionMode.multiSelect,\n            coordinate        = me.getCoordinate(timespan, info.element, [info.elementStartX, info.elementStartY]),\n            clientCoordinate  = me.getCoordinate(timespan, info.element, [info.startClientX, info.startClientY]);\n\n        me.suspendRecordElementRedrawing(record);\n\n        // prevent elements from being released when out of view\n        draggedEntities.forEach(record => me.suspendRecordElementRedrawing(record));\n\n        // Make sure the dragged event is selected (no-op for already selected)\n        // Preserve other selected events if ctrl/meta is pressed\n        if (record.isAssignment) {\n            client.selectAssignment(record, startEvent.ctrlKey && multiSelect);\n        }\n        else {\n            client.selectEvent(record, startEvent.ctrlKey && multiSelect);\n        }\n\n        const dragData = {\n            context : info,\n            ...productDragData,\n\n            sourceDate       : startsOutsideView ? origStart : client.getDateFromCoordinate(coordinate),\n            screenSourceDate : client.getDateFromCoordinate(clientCoordinate, null, false),\n\n            startDate : origStart,\n            endDate   : origEnd,\n            timeDiff  : 0,\n\n            origStart,\n            origEnd,\n            startsOutsideView,\n            endsOutsideView,\n\n            duration     : origEnd - origStart,\n            browserEvent : startEvent // So we can know if SHIFT/CTRL was pressed\n        };\n\n        eventBarEls.forEach(el => el.classList.remove('b-sch-event-hover', 'b-active'));\n\n        if (eventBarEls.length > 1) {\n            // RelatedElements are secondary elements moved by the same delta as the grabbed element\n            info.relatedElements = eventBarEls.slice(1);\n        }\n\n        return dragData;\n    }\n\n    //endregion\n\n    //region Constraints\n\n    // private\n    setupConstraints(constrainRegion, elRegion, tickSize, constrained) {\n        const\n            me        = this,\n            xTickSize = !me.showExactDropPosition && tickSize > 1 ? tickSize : 0,\n            yTickSize = 0;\n\n        // If `constrained` is false then we have no date constraints and should constrain mouse position to scheduling area\n        // else we have specified date constraints and so we should limit mouse position to smaller region inside of constrained region using offsets and width.\n        if (constrained) {\n            me.setXConstraint(constrainRegion.left, constrainRegion.right - elRegion.width, xTickSize);\n        }\n        // And if not constrained, release any constraints from the previous drag.\n        else {\n            // minX being true means allow the start to be before the time axis.\n            // maxX being true means allow the end to be after the time axis.\n            me.setXConstraint(true, true, xTickSize);\n        }\n        me.setYConstraint(constrainRegion.top, constrainRegion.bottom - elRegion.height, yTickSize);\n    }\n\n    updateYConstraint(eventRecord, resourceRecord) {\n        const\n            me          = this,\n            { client }  = me,\n            { context } = me.drag,\n            tickSize    = client.timeAxisViewModel.snapPixelAmount;\n\n        // If we're dragging when the vertical size is recalculated by the host grid,\n        // we must update our Y constraint unless we are locked in the Y axis.\n        if (context && !me.drag.lockY) {\n            let constrainRegion;\n\n            // This calculates a relative region which the DragHelper uses within its outerElement\n            if (me.constrainDragToTimeline) {\n                constrainRegion = client.getScheduleRegion(resourceRecord, eventRecord);\n            }\n            // Not constraining to timeline.\n            // Unusual configuration, but this must mean no Y constraining.\n            else {\n                me.setYConstraint(null, null, tickSize);\n                return;\n            }\n\n            me.setYConstraint(\n                constrainRegion.top,\n                constrainRegion.bottom - context.element.offsetHeight,\n                tickSize\n            );\n        }\n        else {\n            me.setYConstraint(null, null, tickSize);\n        }\n    }\n\n    setXConstraint(iLeft, iRight, iTickSize) {\n        const { drag } = this;\n\n        drag.minX = iLeft;\n        drag.maxX = iRight;\n    }\n\n    setYConstraint(iUp, iDown, iTickSize) {\n        const { drag } = this;\n\n        drag.minY = iUp;\n        drag.maxY = iDown;\n    }\n\n    //endregion\n\n    //region Other stuff\n\n    adjustStartDate(startDate, timeDiff) {\n        const rounded = this.client.timeAxis.roundDate(\n            new Date(startDate - 0 + timeDiff),\n            this.client.snapRelativeToEventStartDate ? startDate : false\n        );\n\n        return this.constrainStartDate(rounded);\n    }\n\n    resolveStartEndDates(draggedElement) {\n        const\n            timeline         = this.currentOverClient,\n            { timeAxis }     = timeline,\n            proxyRect        = Rectangle.from(draggedElement.querySelector(timeline.eventInnerSelector), timeline.timeAxisSubGridElement),\n            dd               = this.dragData,\n            [record]         = dd.draggedEntities,\n            eventRecord      = record.isAssignment ? record.event : record,\n            { fullDuration } = eventRecord,\n            fillSnap         = timeline.fillTicks && timeline.snapRelativeToEventStartDate;\n\n        // Non-continuous time axis will return null instead of date for a rectangle outside of the view unless\n        // told to estimate date.\n        // When using fillTicks, we need exact dates for calculations below\n        let {\n            start : startDate, end : endDate\n        } = timeline.getStartEndDatesFromRectangle(proxyRect, fillSnap ? null : 'round', fullDuration, true);\n\n        // if dragging is out of timeAxis rect bounds, we will not be able to get dates\n        if (startDate && endDate) {\n            // When filling ticks, proxy start does not represent actual start date.\n            // Need to compensate to get expected result\n            if (fillSnap) {\n                const\n                    // Events offset into the tick, in MS\n                    offsetMS = eventRecord.startDate - DateHelper.startOf(eventRecord.startDate, timeAxis.unit),\n                    // Proxy length in MS\n                    proxyMS  = endDate - startDate,\n                    // Part of proxy that is \"filled\" and needs to be removed\n                    offsetPx = (offsetMS / proxyMS) * proxyRect.width;\n\n                // Deflate top for vertical mode, left for horizontal mode\n                proxyRect.deflate(offsetPx, 0, 0, offsetPx);\n\n                const proxyStart = proxyRect.getStart(timeline.rtl, !timeline.isVertical);\n\n                // Get date from offset proxy start\n                startDate = timeline.getDateFromCoordinate(proxyStart, null, true);\n                // Snap relative to event start date\n                startDate = timeAxis.roundDate(startDate, eventRecord.startDate);\n            }\n\n            startDate = this.adjustStartDate(startDate, 0);\n\n            if (!dd.startsOutsideView) {\n                // Make sure we didn't target a start date that is filtered out, if we target last hour cell (e.g. 21:00) of\n                // the time axis, and the next tick is 08:00 following day. Trying to drop at end of 21:00 cell should target start of next cell\n                if (!timeAxis.dateInAxis(startDate, false)) {\n                    const tick = timeAxis.getTickFromDate(startDate);\n\n                    if (tick >= 0) {\n                        startDate = timeAxis.getDateFromTick(tick);\n                    }\n                }\n\n                endDate = startDate && DateHelper.add(startDate, fullDuration);\n            }\n            else if (!dd.endsOutsideView) {\n                startDate = endDate && DateHelper.add(endDate, -fullDuration);\n            }\n        }\n\n        return {\n            startDate,\n            endDate\n        };\n    }\n\n    //endregion\n\n    //region Dragtip\n\n    /**\n     * Gets html to display in tooltip while dragging event. Uses clockTemplate to display start & end dates.\n     */\n    getTipHtml() {\n        const\n            me                                      = this,\n            { dragData, client, tooltipTemplate }   = me,\n            { startDate, endDate, draggedEntities } = dragData,\n            startText                               = client.getFormattedDate(startDate),\n            endText                                 = client.getFormattedEndDate(endDate, startDate),\n            { valid, message, element, dragProxy }  = dragData.context,\n            tipTarget                               = dragProxy ? dragProxy.firstChild : element,\n            dragged                                 = draggedEntities[0],\n            // Scheduler always drags assignments\n            timeSpanRecord                          = dragged.isTask ? dragged : dragged.event;\n\n        // Keep align target up to date in case of derendering the target when\n        // dragged outside render window, and re-entry into the render window.\n        me.tip.lastAlignSpec.target = tipTarget;\n\n        return tooltipTemplate({\n            valid,\n            startDate,\n            endDate,\n            startText,\n            endText,\n            dragData,\n            message                                : message || '',\n            [client.scheduledEventName + 'Record'] : timeSpanRecord,\n            startClockHtml                         : me.clockTemplate.template({\n                date : startDate,\n                text : startText,\n                cls  : 'b-sch-tooltip-startdate'\n            }),\n            endClockHtml : timeSpanRecord.isMilestone\n                ? ''\n                : me.clockTemplate.template({\n                    date : endDate,\n                    text : endText,\n                    cls  : 'b-sch-tooltip-enddate'\n                })\n        });\n    }\n\n    //endregion\n\n    //region Configurable\n\n    // Constrain to time slot means lockX if we're horizontal, otherwise lockY\n    updateConstrainDragToTimeSlot(value) {\n        const axis = this.client.isHorizontal ? 'lockX' : 'lockY';\n\n        if (this.drag) {\n            this.drag[axis] = value;\n        }\n    }\n\n    // Constrain to resource means lockY if we're horizontal, otherwise lockX\n    updateConstrainDragToResource(constrainDragToResource) {\n        const me = this;\n\n        if (me.drag) {\n            const\n                { constrainDragToTimeSlot } = me,\n                { isHorizontal }            = me.client;\n\n            if (constrainDragToResource) {\n                me.constrainDragToTimeline = true;\n            }\n            me.drag.lockY = isHorizontal ? constrainDragToResource : constrainDragToTimeSlot;\n            me.drag.lockX = isHorizontal ? constrainDragToTimeSlot : constrainDragToResource;\n        }\n    }\n\n    updateConstrainDragToTimeline(constrainDragToTimeline) {\n        if (!this.isConfiguring) {\n            Object.assign(this.drag, {\n                cloneTarget   : !constrainDragToTimeline,\n                dragWithin    : constrainDragToTimeline ? null : document.body,\n                scrollManager : constrainDragToTimeline ? this.client.scrollManager : null\n            });\n        }\n    }\n\n    constrainStartDate(startDate) {\n        const\n            { dragData }        = this,\n            { dateConstraints } = dragData,\n            scheduleableRecord  = dragData.eventRecord || dragData.taskRecord || dragData.draggedEntities[0];\n\n        if (dateConstraints?.start) {\n            startDate = DateHelper.max(dateConstraints.start, startDate);\n        }\n\n        if (dateConstraints?.end) {\n            startDate = DateHelper.min(new Date(dateConstraints.end - scheduleableRecord.durationMS), startDate);\n        }\n\n        return startDate;\n    }\n\n    //endregion\n\n    //region Product specific, implemented in subclasses\n    getElementFromContext(context) {\n        return context.grabbed || context.dragProxy || context.element;\n    }\n\n    // Provide your custom implementation of this to allow additional selected records to be dragged together with the original one.\n    getRelatedRecords(record) {\n        return [];\n    }\n\n    getMinimalDragData(info, event) {\n        // Can be overridden in subclass\n        return {};\n    }\n\n    // Check if element can be dropped at desired location\n    isValidDrop(dragData) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Similar to the fn above but also calls validatorFn\n    checkDragValidity(dragData) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Update records being dragged\n    updateRecords(context) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Determine if an element can be dragged\n    isElementDraggable(el, event) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Get coordinate for correct axis\n    getCoordinate(record, element, coord) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Product specific drag data\n    setupProductDragData(info) {\n        throw new Error('Implement in subclass');\n    }\n\n    // Product specific data in drag context\n    getProductDragContext(dd) {\n        throw new Error('Implement in subclass');\n    }\n\n    getRecordElement(record) {\n        throw new Error('Implement in subclass');\n    }\n\n    //endregion\n}\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport Draggable from '../../Core/mixin/Draggable.js';\nimport Droppable from '../../Core/mixin/Droppable.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport StringHelper from '../../Core/helper/StringHelper.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\nimport Tooltip from '../../Core/widget/Tooltip.js';\nimport ClockTemplate from '../tooltip/ClockTemplate.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\nimport BrowserHelper from '../../Core/helper/BrowserHelper.js';\nimport TimeSpan from '../../Scheduler/model/TimeSpan.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport VersionHelper from '../../Core/helper/VersionHelper.js';\n\n/**\n * @module Scheduler/feature/EventResize\n */\n\nconst tipAlign = {\n    top    : 'b-t',\n    right  : 'b100-t100',\n    bottom : 't-b',\n    left   : 'b0-t0'\n};\n\n/**\n * Feature that allows resizing an event by dragging its end.\n *\n * By default it displays a tooltip with the new start and end dates, formatted using\n * {@link Scheduler/view/mixin/TimelineViewPresets#config-displayDateFormat}.\n *\n * ## Customizing the resize tooltip\n *\n * To show custom HTML in the tooltip, please see the {@link #config-tooltipTemplate} config. Example:\n *\n * ```javascript\n * eventResize : {\n *     // A minimal end date tooltip\n *     tooltipTemplate : ({ record, endDate }) => {\n *         return DateHelper.format(endDate, 'MMM D');\n *     }\n * }\n * ```\n *\n * This feature is **enabled** by default\n *\n * This feature is extended with a few overrides by the Gantt's `TaskResize` feature.\n *\n * This feature updates the event's `startDate` or `endDate` live in order to leverage the\n * rendering pathway to always yield a correct appearance. The changes are done in\n * {@link Core.data.Model#function-beginBatch batched} mode so that changes do not become\n * eligible for data synchronization or propagation until the operation is completed.\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Scheduler/basic\n * @inlineexample Scheduler/feature/EventResize.js\n * @classtype eventResize\n * @feature\n */\nexport default class EventResize extends InstancePlugin.mixin(Draggable, Droppable) {\n    //region Events\n\n    /**\n     * Fired on the owning Scheduler before resizing starts. Return `false` to prevent the action.\n     * @event beforeEventResize\n     * @on-owner\n     * @preventable\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.EventModel} eventRecord Event record being resized\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record the resize starts within\n     * @param {MouseEvent} event Browser event\n     */\n\n    /**\n     * Fires on the owning Scheduler when event resizing starts\n     * @event eventResizeStart\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.EventModel} eventRecord Event record being resized\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record the resize starts within\n     * @param {MouseEvent} event Browser event\n     */\n\n    /**\n     * Fires on the owning Scheduler on each resize move event\n     * @event eventPartialResize\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.EventModel} eventRecord Event record being resized\n     * @param {Date} startDate\n     * @param {Date} endDate\n     * @param {HTMLElement} element\n     */\n\n    /**\n     * Fired on the owning Scheduler to allow implementer to prevent immediate finalization by setting\n     * `data.context.async = true` in the listener, to show a confirmation popup etc\n     *\n     * ```javascript\n     *  scheduler.on('beforeeventresizefinalize', ({context}) => {\n     *      context.async = true;\n     *      setTimeout(() => {\n     *          // async code don't forget to call finalize\n     *          context.finalize();\n     *      }, 1000);\n     *  })\n     * ```\n     *\n     * @event beforeEventResizeFinalize\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Object} context\n     * @param {Scheduler.model.EventModel} context.eventRecord Event record being resized\n     * @param {Date} context.startDate New startDate (changed if resizing start side)\n     * @param {Date} context.endDate New endDate (changed if resizing end side)\n     * @param {Date} context.originalStartDate Start date before resize\n     * @param {Date} context.originalEndDate End date before resize\n     * @param {Boolean} context.async Set true to handle resize asynchronously (e.g. to wait for user confirmation)\n     * @param {Function} context.finalize Call this method to finalize resize. This method accepts one argument:\n     *                   pass `true` to update records, or `false`, to ignore changes\n     * @param {Event} event Browser event\n     */\n\n    /**\n     * Fires on the owning Scheduler after the resizing gesture has finished.\n     * @event eventResizeEnd\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Boolean} changed Shows if the record has been changed by the resize action\n     * @param {Scheduler.model.EventModel} eventRecord Event record being resized\n     */\n\n    //endregion\n\n    //region Config\n\n    static get $name() {\n        return 'EventResize';\n    }\n\n    static get configurable() {\n        return {\n            draggingItemCls : 'b-sch-event-wrap-resizing',\n\n            resizingItemInnerCls : 'b-sch-event-resizing',\n\n            /**\n             * Use left handle when resizing. Only applies when owning client's `direction` is 'horizontal'\n             * @config {Boolean}\n             * @default\n             */\n            leftHandle : true,\n\n            /**\n             * Use right handle when resizing. Only applies when owning client's `direction` is 'horizontal'\n             * @config {Boolean}\n             * @default\n             */\n            rightHandle : true,\n\n            /**\n             * Use top handle when resizing. Only applies when owning client's direction` is 'vertical'\n             * @config {Boolean}\n             * @default\n             */\n            topHandle : true,\n\n            /**\n             * Use bottom handle when resizing. Only applies when owning client's `direction` is 'vertical'\n             * @config {Boolean}\n             * @default\n             */\n            bottomHandle : true,\n\n            /**\n             * Resizing handle size to use instead of that determined by CSS\n             * @config {Number}\n             * @deprecated Since 5.2.7. The handle size is determined from responsive CSS. Will be removed in 6.0\n             */\n            handleSize : null,\n\n            /**\n             * Automatically shrink virtual handles when available space < handleSize. The virtual handles will\n             * decrease towards width/height 1, reserving space between opposite handles to for example leave room for\n             * dragging. To configure reserved space, see {@link #config-reservedSpace}.\n             * @config {Boolean}\n             * @default false\n             */\n            dynamicHandleSize : true,\n\n            /**\n             * Set to true to allow resizing to a zero-duration span\n             * @config {Boolean}\n             * @default false\n             */\n            allowResizeToZero : null,\n\n            /**\n             * Room in px to leave unoccupied by handles when shrinking them dynamically (see\n             * {@link #config-dynamicHandleSize}).\n             * @config {Number}\n             * @default\n             */\n            reservedSpace : 5,\n\n            /**\n             * Resizing handle size to use instead of that determined by CSS on touch devices\n             * @config {Number}\n             * @deprecated Since 5.2.7. The handle size is determined from responsive CSS. Will be removed in 6.0\n             */\n            touchHandleSize : null,\n\n            /**\n             * The amount of pixels to move pointer/mouse before it counts as a drag operation.\n             * @config {Number}\n             * @default\n             */\n            dragThreshold : 0,\n\n            dragTouchStartDelay : 0,\n\n            draggingClsSelector : '.b-timeline-base',\n\n            /**\n             * `false` to not show a tooltip while resizing\n             * @config {Boolean}\n             * @default\n             */\n            showTooltip : true,\n\n            /**\n             * true to see exact event length during resizing\n             * @config {Boolean}\n             * @default\n             */\n            showExactResizePosition : false,\n\n            /**\n             * An empty function by default, but provided so that you can perform custom validation on\n             * the item being resized. Return true if the new duration is valid, false to signal that it is not.\n             * @param {Object} context The resize context, contains the record & dates.\n             * @param {Scheduler.model.TimeSpan} context.record The record being resized.\n             * @param {Date} context.startDate The new start date.\n             * @param {Date} context.endDate The new start date.\n             * @param {Date} context.originalStartDate Start date before resize\n             * @param {Date} context.originalEndDate End date before resize\n             * @param {Event} event The browser Event object\n             * @returns {Boolean}\n             * @config {Function}\n             */\n            validatorFn : () => true,\n\n            /**\n             * `this` reference for the validatorFn\n             * @config {Object}\n             */\n            validatorFnThisObj : null,\n\n            /**\n             * Setting this property may change the configuration of the {@link #config-tip}, or\n             * cause it to be destroyed if `null` is passed.\n             *\n             * Reading this property returns the Tooltip instance.\n             * @member {Core.widget.Tooltip|TooltipConfig} tip\n             */\n            /**\n             * If a tooltip is required to illustrate the resize, specify this as `true`, or a config\n             * object for the {@link Core.widget.Tooltip}.\n             * @config {Core.widget.Tooltip|TooltipConfig}\n             */\n            tip : {\n                $config : ['lazy', 'nullify'],\n                value   : {\n                    autoShow                 : false,\n                    axisLock                 : true,\n                    trackMouse               : false,\n                    updateContentOnMouseMove : true,\n                    hideDelay                : 0\n                }\n            },\n\n            /**\n             * A template function returning the content to show during a resize operation.\n             * @param {Object} context A context object\n             * @param {Date} context.startDate New start date\n             * @param {Date} context.endDate New end date\n             * @param {Scheduler.model.TimeSpan} context.record The record being resized\n             * @config {Function} tooltipTemplate\n             */\n            tooltipTemplate : context => `\n                <div class=\"b-sch-tip-${context.valid ? 'valid' : 'invalid'}\">\n                    ${context.startClockHtml}\n                    ${context.endClockHtml}\n                    <div class=\"b-sch-tip-message\">${context.message}</div>\n                </div>\n            `,\n\n            ignoreSelector : '.b-sch-terminal',\n            dragActiveCls  : 'b-resizing-event'\n        };\n    }\n\n    static get pluginConfig() {\n        return {\n            chain : ['render', 'onEventDataGenerated', 'isEventElementDraggable']\n        };\n    }\n\n    //endregion\n\n    //region Init & destroy\n\n    doDestroy() {\n        super.doDestroy();\n\n        this.dragging?.destroy();\n    }\n\n    render() {\n        const\n            me         = this,\n            { client } = me;\n\n        // Only active when in these items\n        me.dragSelector = me.dragItemSelector = client.eventSelector;\n\n        // Set up elements and listeners\n        me.dragRootElement = me.dropRootElement = client.timeAxisSubGridElement;\n\n        // Drag only in time dimension\n        me.dragLock = client.isVertical ? 'y' : 'x';\n    }\n\n    // Prevent event dragging when it happens over a resize handle\n    isEventElementDraggable(eventElement, eventRecord, el, event) {\n        const\n            me = this,\n            eventResizable = eventRecord?.resizable;\n\n        // ALLOW event drag:\n        // - if resizing is disabled or event is not resizable\n        // - if it's a milestone Milestones cannot be resized\n        if (me.disabled || !eventResizable || eventRecord.isMilestone) {\n            return true;\n        }\n\n        // not over the event handles\n        return ((eventResizable !== true && eventResizable !== 'start') || !me.isOverStartHandle(event, eventElement)) &&\n            ((eventResizable !== true && eventResizable !== 'end') || !me.isOverEndHandle(event, eventElement));\n    }\n\n    // Called for each event during render, allows manipulation of render data.\n    onEventDataGenerated({ eventRecord, wrapperCls, cls }) {\n        if (eventRecord === this.dragging?.context?.eventRecord) {\n            wrapperCls['b-active'] =\n                wrapperCls[this.draggingItemCls] =\n                wrapperCls['b-over-resize-handle'] =\n                cls['b-resize-handle'] =\n                cls[this.resizingItemInnerCls] = 1;\n        }\n    }\n\n    // Sneak a first peek at the drag event to put necessary date values into the context\n    onDragPointerMove(event) {\n        const\n            {\n                client,\n                dragging\n            }          = this,\n            {\n                visibleDateRange,\n                isHorizontal\n            }          = client,\n            rtl        = isHorizontal && client.rtl,\n            dimension  = isHorizontal ? 'X' : 'Y',\n            pageScroll = globalThis[`page${dimension}Offset`],\n            coord      = event[`page${dimension}`] + (dragging.context?.offset || 0),\n            clientRect = Rectangle.from(client.timeAxisSubGridElement, null, true),\n            startCoord = clientRect.getStart(rtl, isHorizontal),\n            endCoord   = clientRect.getEnd(rtl, isHorizontal);\n\n        let date = client.getDateFromCoord({ coord, local : false });\n\n        if (rtl) {\n            // If we're dragging off the start side, fix at the visible startDate\n            if (coord - pageScroll > startCoord) {\n                date = visibleDateRange.startDate;\n            }\n            // If we're dragging off the end side, fix at the visible endDate\n            else if (coord < endCoord) {\n                date = visibleDateRange.endDate;\n            }\n        }\n        // If we're dragging off the start side, fix at the visible startDate\n        else if (coord - pageScroll < startCoord) {\n            date = visibleDateRange.startDate;\n        }\n        // If we're dragging off the end side, fix at the visible endDate\n        else if (coord - pageScroll > endCoord) {\n            date = visibleDateRange.endDate;\n        }\n\n        dragging.clientStartCoord = startCoord;\n        dragging.clientEndCoord = endCoord;\n        dragging.date = date;\n\n        super.onDragPointerMove(event);\n    }\n\n    /**\n     * Returns true if a resize operation is active\n     * @property {Boolean}\n     * @readonly\n     */\n    get isResizing() {\n        return Boolean(this.dragging);\n    }\n\n    beforeDrag(drag) {\n        const\n            { client }     = this,\n            eventRecord    = client.resolveTimeSpanRecord(drag.itemElement),\n            resourceRecord = !client.isGanttBase && client.resolveResourceRecord(client.isVertical ? drag.startEvent : drag.itemElement);\n\n        // Events not part of project are transient records in a Gantt display store and not meant to be modified\n        if (this.disabled || client.readOnly || resourceRecord?.readOnly ||\n            (eventRecord && (eventRecord.readOnly || !(eventRecord.project || eventRecord.isOccurrence))) ||\n            super.beforeDrag(drag) === false) {\n            return false;\n        }\n\n        drag.mousedownDate = drag.date = client.getDateFromCoordinate(drag.event[`page${client.isHorizontal ? 'X' : 'Y'}`], null, false);\n\n        // trigger beforeEventResize or beforeTaskResize depending on product\n        return this.triggerBeforeResize(drag);\n    }\n\n    dragStart(drag) {\n        const\n            me             = this,\n            {\n                client,\n                tip\n            }              = me,\n            {\n                startEvent,\n                itemElement\n            }              = drag,\n            name           = client.scheduledEventName,\n            eventRecord    = client.resolveEventRecord(itemElement),\n            {\n                isBatchUpdating,\n                wrapStartDate,\n                wrapEndDate\n            } = eventRecord,\n            useEventBuffer = client.features.eventBuffer?.enabled,\n            eventStartDate = isBatchUpdating ? eventRecord.get('startDate') : eventRecord.startDate,\n            eventEndDate   = isBatchUpdating ? eventRecord.get('endDate') : eventRecord.endDate,\n            horizontal     = me.dragLock === 'x',\n            rtl            = horizontal && client.rtl,\n            draggingEnd    = me.isOverEndHandle(startEvent, itemElement),\n            toSet          = draggingEnd ? 'endDate' : 'startDate',\n            wrapToSet      = !useEventBuffer ? null : draggingEnd ? 'wrapEndDate' : 'wrapStartDate',\n            otherEnd       = draggingEnd ? 'startDate' : 'endDate',\n            setMethod      = draggingEnd ? 'setEndDate' : 'setStartDate',\n            setOtherMethod = draggingEnd ? 'setStartDate' : 'setEndDate',\n            elRect         = Rectangle.from(itemElement),\n            startCoord     = horizontal ? startEvent.clientX : startEvent.clientY,\n            endCoord       = draggingEnd ? elRect.getEnd(rtl, horizontal) : elRect.getStart(rtl, horizontal),\n            context        = drag.context = {\n                eventRecord,\n                element        : itemElement,\n                timespanRecord : eventRecord,\n                taskRecord     : eventRecord,\n                owner          : me,\n                valid          : true,\n                oldValue       : draggingEnd ? eventEndDate : eventStartDate,\n                startDate      : eventStartDate,\n                endDate        : eventEndDate,\n                offset         : useEventBuffer ? 0 : endCoord - startCoord,\n                edge           : horizontal ? (draggingEnd ? 'right' : 'left') : (draggingEnd ? 'bottom' : 'top'),\n                finalize       : me.finalize,\n                event          : drag.event,\n\n                // these two are public\n                originalStartDate : eventStartDate,\n                originalEndDate   : eventEndDate,\n                wrapStartDate,\n                wrapEndDate,\n                draggingEnd,\n                toSet,\n                wrapToSet,\n                otherEnd,\n                setMethod,\n                setOtherMethod\n            };\n\n        // The record must know that it is being resized.\n        eventRecord.meta.isResizing = true;\n\n        client.element.classList.add(...me.dragActiveCls.split(' '));\n\n        // During this batch we want the client's UI to update itself using the proposed changes\n        // Only if startDrag has not already done it\n        if (!client.listenToBatchedUpdates) {\n            client.beginListeningForBatchedUpdates();\n        }\n\n        // No changes must get through to data.\n        // Only if startDrag has not already started the batch\n        if (!isBatchUpdating) {\n            me.beginEventRecordBatch(eventRecord);\n        }\n\n        // Let products do their specific stuff\n        me.setupProductResizeContext(context, startEvent);\n\n        // Trigger eventResizeStart or taskResizeStart depending on product\n        // Subclasses (like EventDragCreate) won't actually fire this event.\n        me.triggerEventResizeStart(`${name}ResizeStart`, {\n            [`${name}Record`] : eventRecord,\n            event             : startEvent,\n            ...me.getResizeStartParams(context)\n        }, context);\n\n        // Scheduler renders assignments, Gantt renders Tasks\n        context.resizedRecord = client.resolveAssignmentRecord?.(context.element) || eventRecord;\n\n        if (tip) {\n            // Tip needs to be shown first for getTooltipTarget to be able to measure anchor size\n            tip.show();\n            tip.align = tipAlign[context.edge];\n            tip.showBy(me.getTooltipTarget(drag));\n        }\n    }\n\n    // Subclasses may override this\n    triggerBeforeResize(drag) {\n        const\n            { client }  = this,\n            eventRecord = client.resolveTimeSpanRecord(drag.itemElement);\n\n        return client.trigger(\n            `before${client.capitalizedEventName}Resize`,\n            {\n                [`${client.scheduledEventName}Record`] : eventRecord,\n                event                                  : drag.event,\n                ...this.getBeforeResizeParams({ event : drag.startEvent, element : drag.itemElement })\n            }\n        );\n    }\n\n    // Subclasses may override this\n    triggerEventResizeStart(eventType, event, context) {\n        this.client.trigger(eventType, event);\n\n        // Hook for features that needs to react on resize start\n        this.client[`after${StringHelper.capitalize(eventType)}`]?.(context, event);\n    }\n\n    triggerEventResizeEnd(eventType, event) {\n        this.client.trigger(eventType, event);\n    }\n\n    triggerEventPartialResize(eventType, event) {\n        // Trigger eventPartialResize or taskPartialResize depending on product\n        this.client.trigger(eventType, event);\n    }\n\n    triggerBeforeEventResizeFinalize(eventType, event) {\n        this.client.trigger(eventType, event);\n    }\n\n    dragEnter(drag) {\n        // We only respond to our own DragContexts\n        return drag.context?.owner === this;\n    }\n\n    resizeEventPartiallyInternal(eventRecord, context) {\n        const\n            { client } = this,\n            // <debug>\n            { detectExcessiveRendering } = client,\n            // </debug>\n            { toSet } = context;\n\n        // <debug>\n        client.detectExcessiveRendering = false;\n        // </debug>\n\n        if (client.features.eventBuffer?.enabled) {\n            if (toSet === 'startDate') {\n                const diff = context.startDate.getTime() - context.originalStartDate.getTime();\n                eventRecord.wrapStartDate = new Date(context.wrapStartDate.getTime() + diff);\n            }\n\n            else if (toSet === 'endDate') {\n                const diff = context.endDate.getTime() - context.originalEndDate.getTime();\n                eventRecord.wrapEndDate = new Date(context.wrapEndDate.getTime() + diff);\n            }\n        }\n\n        eventRecord.set(toSet, context[toSet]);\n\n        // <debug>\n        client.detectExcessiveRendering = detectExcessiveRendering;\n        // </debug>\n    }\n\n    applyDateConstraints(date, eventRecord, context) {\n        const\n            minDate = context.dateConstraints?.start,\n            maxDate = context.dateConstraints?.end;\n\n        // Keep desired date within constraints\n        if (minDate || maxDate) {\n            date = DateHelper.constrain(date, minDate, maxDate);\n            context.snappedDate = DateHelper.constrain(context.snappedDate, minDate, maxDate);\n        }\n\n        return date;\n    }\n\n    // Override the draggable interface so that we can update the bar while dragging outside\n    // the Draggable's rootElement (by default it stops notifications when outside rootElement)\n    moveDrag(drag) {\n        const\n            me          = this,\n            {\n                client,\n                tip\n            }           = me,\n            horizontal  = me.dragLock === 'x',\n            dimension   = horizontal ? 'X' : 'Y',\n            name        = client.scheduledEventName,\n            {\n                visibleDateRange,\n                enableEventAnimations,\n                timeAxis,\n                weekStartDay\n            }           = client,\n            rtl         = horizontal && client.rtl,\n            {\n                resolutionUnit,\n                resolutionIncrement\n            }           = timeAxis,\n            {\n                event,\n                context\n            }           = drag,\n            {\n                eventRecord\n            }           = context,\n            offset      = context.offset * (rtl ? -1 : 1),\n            {\n                isOccurrence\n            }           = eventRecord,\n            eventStart  = eventRecord.get('startDate'),\n            eventEnd    = eventRecord.get('endDate'),\n            coord       = event[`client${dimension}`] + offset,\n            clientRect  = Rectangle.from(client.timeAxisSubGridElement, null, true),\n            startCoord  = clientRect.getStart(rtl, horizontal),\n            endCoord    = clientRect.getEnd(rtl, horizontal);\n\n        context.event = event;\n\n        // If this is the last move event recycled because of a scroll, refresh the date\n        if (event.isScroll) {\n            drag.date = client.getDateFromCoordinate(event[`page${dimension}`] + offset, null, false);\n        }\n\n        let crossedOver, avoidedZeroSize,\n            // Use the value set up in onDragPointerMove by default\n            { date } = drag,\n            {\n                toSet,\n                otherEnd,\n                draggingEnd\n            } = context;\n\n        if (rtl) {\n            // If we're dragging off the start side, fix at the visible startDate\n            if (coord > startCoord) {\n                date = drag.date = visibleDateRange.startDate;\n            }\n            // If we're dragging off the end side, fix at the visible endDate\n            else if (coord < endCoord) {\n                date = drag.date = visibleDateRange.endDate;\n            }\n\n        }\n        // If we're dragging off the start side, fix at the visible startDate\n        else if (coord < startCoord) {\n            date = drag.date = visibleDateRange.startDate;\n        }\n        // If we're dragging off the end side, fix at the visible endDate\n        else if (coord > endCoord) {\n            date = drag.date = visibleDateRange.endDate;\n        }\n\n        // Detect crossover which some subclasses might need to process\n        if (toSet === 'endDate') {\n            if (date < eventStart) {\n                crossedOver = -1;\n            }\n        }\n        else {\n            if (date > eventEnd) {\n                crossedOver = 1;\n            }\n        }\n\n        // If we dragged the dragged end over to the opposite side of the start end.\n        // Some subclasses allow this and need to respond. EventDragCreate does this.\n        if (crossedOver && me.onDragEndSwitch) {\n            me.onDragEndSwitch(context, date, crossedOver);\n            otherEnd = context.otherEnd;\n            toSet = context.toSet;\n        }\n\n        if (client.snapRelativeToEventStartDate) {\n            date = timeAxis.roundDate(date, context.oldValue);\n        }\n\n        // The displayed and eventual data value\n        context.snappedDate = DateHelper.round(date, timeAxis.resolution, null, weekStartDay);\n\n        const duration = DateHelper.diff(date, context[otherEnd], resolutionUnit) * (draggingEnd ? -1 : 1);\n\n        // Narrower than half resolutionIncrement will abort drag creation, set flag to have UI reflect this\n        if (me.isEventDragCreate) {\n            context.tooNarrow = duration < resolutionIncrement / 2;\n        }\n        // The mousepoint date means that the duration is less than resolutionIncrement resolutionUnits.\n        // Ensure that the dragged end is at least resolutionIncrement resolutionUnits from the other end.\n        else if (duration < resolutionIncrement) {\n            // Snap to zero if allowed\n            if (me.allowResizeToZero) {\n                context.snappedDate = date = context[otherEnd];\n            }\n            else {\n                const sign = otherEnd === 'startDate' ? 1 : -1;\n                context.snappedDate = date = timeAxis.roundDate(DateHelper.add(eventRecord.get(otherEnd), resolutionIncrement * sign, resolutionUnit));\n                avoidedZeroSize = true;\n            }\n        }\n\n        // take dateConstraints into account\n        date = me.applyDateConstraints(date, eventRecord, context);\n\n        // If the mouse move has changed the detected date\n        if (!context.date || date - context.date || avoidedZeroSize) {\n            context.date = date;\n\n            // The validityFn needs to see the proposed value.\n            // Consult our snap config to see if we should be dragging in snapped mode\n            context[toSet] = me.showExactResizePosition || client.timeAxisViewModel.snap ? context.snappedDate : date;\n\n            // Snapping would take it to zero size - this is not allowed in drag resizing.\n            context.valid = me.allowResizeToZero || context[toSet] - context[toSet === 'startDate' ? 'endDate' : 'startDate'] !== 0;\n\n            // If the date to push into the record is new...\n            if (eventRecord.get(toSet) - context[toSet]) {\n                context.valid = me.checkValidity(context, event);\n                context.message = '';\n\n                if (context.valid && typeof context.valid !== 'boolean') {\n                    context.message = context.valid.message;\n                    context.valid = context.valid.valid;\n                }\n\n                // If users returns nothing, that's interpreted as valid\n                context.valid = (context.valid !== false);\n\n                if (context.valid) {\n                    const partialResizeEvent = {\n                        [`${name}Record`] : eventRecord,\n                        startDate         : eventStart,\n                        endDate           : eventEnd,\n                        element           : drag.itemElement,\n                        context\n                    };\n\n                    // Update the event we are about to fire and the context *before* we update the record\n                    partialResizeEvent[toSet] = context[toSet];\n\n                    // Trigger eventPartialResize or taskPartialResize depending on product\n                    me.triggerEventPartialResize(`${name}PartialResize`, partialResizeEvent);\n\n                    // An occurrence must have a store to announce its batched changes through.\n                    // They must usually never have a store - they are transient, but we\n                    // need to update the UI.\n                    if (isOccurrence) {\n                        eventRecord.stores.push(client.eventStore);\n                    }\n\n                    // Update the eventRecord.\n                    // Use setter rather than accessor so that in a Project, the entity's\n                    // accessor doesn't propagate the change to the whole project.\n                    // Scheduler must not animate this.\n                    client.enableEventAnimations = false;\n\n                    this.resizeEventPartiallyInternal(eventRecord, context);\n\n                    client.enableEventAnimations = enableEventAnimations;\n\n                    if (isOccurrence) {\n                        eventRecord.stores.length = 0;\n                    }\n                }\n\n                // Flag drag created too narrow events as invalid late, want all code above to execute for them\n                // to get the proper size rendered\n                if (context.tooNarrow) {\n                    context.valid = false;\n                }\n            }\n        }\n\n        if (tip) {\n            // In case of edge flip (EventDragCreate), the align point may change\n            tip.align = tipAlign[context.edge];\n            tip.alignTo(me.getTooltipTarget(drag));\n        }\n\n        super.moveDrag(drag);\n    }\n\n    dragEnd(drag) {\n        const { context } = drag;\n\n        if (context) {\n            context.event = drag.event;\n        }\n\n        if (drag.aborted) {\n            context?.finalize(false);\n        }\n        // 062_resize.t.js specifies that if drag was not started but the mouse has moved,\n        // the eventresizestart and eventresizeend must fire\n        else if (!this.isEventDragCreate && !drag.started && !EventHelper.getPagePoint(drag.event).equals(EventHelper.getPagePoint(drag.startEvent))) {\n            this.dragStart(drag);\n            this.cleanup(drag.context, false);\n        }\n    }\n\n    async dragDrop({ context, event }) {\n        // Set the start/end date, whichever we were dragging\n        // to the correctly rounded value before updating.\n        context[context.toSet] = context.snappedDate;\n\n        const\n            {\n                client\n            } = this,\n            {\n                startDate,\n                endDate\n            } = context;\n\n        let modified;\n\n        this.tip?.hide();\n\n        context.valid = startDate && endDate && (this.allowResizeToZero || (endDate - startDate > 0)) && // Input sanity check\n            (context[context.toSet] - context.oldValue) && // Make sure dragged end changed\n            context.valid !== false;\n\n        if (context.valid) {\n            // Seems to be a valid resize operation, ask outside world if anyone wants to take control over the finalizing,\n            // to show a confirm dialog prior to applying the new values. Triggers beforeEventResizeFinalize or\n            // beforeTaskResizeFinalize depending on product\n            this.triggerBeforeEventResizeFinalize(`before${client.capitalizedEventName}ResizeFinalize`, { context, event, [`${client.scheduledEventName}Record`] : context.eventRecord });\n            modified = true;\n        }\n\n        // If a handler has set the async flag, it means that they are going to finalize\n        // the operation at some time in the future, so we should not call it.\n        if (!context.async) {\n            await context.finalize(modified);\n        }\n    }\n\n    // This is called with a thisObj of the context object\n    // We set \"me\" to the owner, and \"context\" to the thisObj so that it\n    // reads as if it were a method of this class.\n    async finalize(updateRecord) {\n        const\n            me      = this.owner,\n            context = this,\n            {\n                eventRecord,\n                oldValue,\n                toSet\n            }       = context,\n            {\n                snapRelativeToEventStartDate,\n                timeAxis\n            }       = me.client;\n\n        let wasChanged = false;\n\n        if (updateRecord) {\n            if (snapRelativeToEventStartDate) {\n                context[toSet] = context.snappedDate = timeAxis.roundDate(context.date, oldValue);\n            }\n\n            // Each product updates the record differently\n            wasChanged = await me.internalUpdateRecord(context, eventRecord);\n        }\n        else {\n            // Reverts the changes, a batchedUpdate event will fire which will reset the UI\n            me.cancelEventRecordBatch(eventRecord);\n\n            // Manually trigger redraw of occurrences since they are not part of any stores\n            if (eventRecord.isOccurrence) {\n                eventRecord.resources.forEach(resource => me.client.repaintEventsForResource(resource));\n            }\n        }\n\n        if (!me.isDestroyed) {\n            me.cleanup(context, wasChanged);\n        }\n    }\n\n    // This is always called on drop or abort.\n    cleanup(context, changed) {\n        const\n            me               = this,\n            { client }       = me,\n            {\n                element,\n                eventRecord\n            }                = context,\n            name             = client.scheduledEventName;\n\n        // The record must know that it is being resized.\n        eventRecord.meta.isResizing = false;\n\n        client.endListeningForBatchedUpdates();\n        me.tip?.hide();\n        me.unHighlightHandle(element);\n        client.element.classList.remove(...me.dragActiveCls.split(' '));\n        // if (dependencies) {\n        //     // When resizing is done and mouse is over element, we show terminals\n        //     if (element.matches(':hover')) {\n        //         dependencies.showTerminals(eventRecord, element);\n        //     }\n        // }\n\n        // Triggers eventResizeEnd or taskResizeEnd depending on product\n        me.triggerEventResizeEnd(`${name}ResizeEnd`, {\n            changed,\n            [`${name}Record`] : eventRecord,\n            ...me.getResizeEndParams(context)\n        });\n    }\n\n    async internalUpdateRecord(context, timespanRecord) {\n        const\n            { client }     = this,\n            { generation } = timespanRecord;\n\n        // Special handling of occurrences, they need normalization since that is not handled by engine at the moment\n        if (timespanRecord.isOccurrence) {\n            client.endListeningForBatchedUpdates();\n\n            // If >1 level deep, just unwind one level.\n            timespanRecord[timespanRecord.batching > 1 ? 'endBatch' : 'cancelBatch']();\n            timespanRecord.set(TimeSpan.prototype.inSetNormalize.call(timespanRecord, {\n                startDate : context.startDate,\n                endDate   : context.endDate\n            }));\n        }\n        else {\n            const toSet = {\n                [context.toSet] : context[context.toSet]\n            };\n\n            // If we have the Engine available, consult it to calculate a corrected duration.\n            // Adjust the dragged date point to conform with the calculated duration.\n            if (timespanRecord.isEntity) {\n                const\n                    {\n                        startDate,\n                        endDate,\n                        draggingEnd\n                    } = context;\n\n                // Fix the duration according to the Entity's rules.\n                context.duration = toSet.duration = timespanRecord.run('calculateProjectedDuration', startDate, endDate);\n\n                // Fix the dragged date point according to the Entity's rules.\n                toSet[context.toSet] = timespanRecord.run('calculateProjectedXDateWithDuration', draggingEnd ? startDate : endDate, draggingEnd, context.duration);\n\n                const setOtherEnd = !timespanRecord[context.otherEnd];\n\n                // Set all values, start and end in case they had never been set\n                // ie, we're now scheduling a previously unscheduled event.\n                if (setOtherEnd) {\n                    toSet[context.otherEnd] = context[context.otherEnd];\n                }\n\n                // Update the record to its final correct state using *batched changes*\n                // These will *not* be propagated, it's just to force the dragged event bar\n                // into its corrected shape before the real changes which will propagate are applied below.\n                // We MUST do it like this because the final state may not be a net change if the changes\n                // got rejected, and in that case, the engine will not end up firing any change events.\n                timespanRecord.set(toSet);\n\n                // Quit listening for batchedUpdate *before* we cancel the batch so that the\n                // change events from the revert do not update the UI.\n                client.endListeningForBatchedUpdates();\n\n                this.cancelEventRecordBatch(timespanRecord);\n\n                // Clear estimated wrap date, exact wrap date will be calculated when referred to from renderer\n                if (client.features.eventBuffer?.enabled) {\n                    timespanRecord[context.wrapToSet] = null;\n                }\n\n                const promisesToWait = [];\n\n                // Really update the data after cancelling the batch\n                if (setOtherEnd) {\n                    promisesToWait.push(timespanRecord[context.setOtherMethod](toSet[context.otherEnd], false));\n                }\n\n                promisesToWait.push(timespanRecord[context.setMethod](toSet[context.toSet], false));\n\n                await Promise.all(promisesToWait);\n\n                timespanRecord.endBatch();\n            }\n            else {\n                // Collect any changes (except the start/end date) that happened during the resize operation\n                const batchChanges = Object.assign({}, timespanRecord.meta.batchChanges);\n                delete batchChanges[context.toSet];\n                client.endListeningForBatchedUpdates();\n\n                this.cancelEventRecordBatch(timespanRecord);\n\n                timespanRecord.set(batchChanges);\n                timespanRecord[context.setMethod](toSet[context.toSet], false);\n            }\n        }\n\n        // wait for project data update\n        await client.project.commitAsync();\n\n        // If the record has been changed\n        return timespanRecord.generation !== generation;\n    }\n\n    onDragItemMouseMove(event) {\n        if (event.pointerType !== 'touch' && !this.handleSelector) {\n            this.checkResizeHandles(event);\n        }\n    }\n\n    /**\n     * Check if mouse is over a resize handle (virtual). If so, highlight.\n     * @private\n     * @param {MouseEvent} event\n     */\n    checkResizeHandles(event) {\n        const\n            me           = this,\n            { overItem } = me;\n\n        // mouse over a target element and allowed to resize?\n        if (overItem && !me.client.readOnly && (!me.allowResize || me.allowResize(overItem, event))) {\n            const eventRecord = me.client.resolveTimeSpanRecord(overItem);\n\n            if (eventRecord?.readOnly) {\n                return;\n            }\n\n            if (me.isOverAnyHandle(event, overItem)) {\n                me.highlightHandle(); // over handle\n            }\n            else {\n                me.unHighlightHandle(); // not over handle\n            }\n        }\n    }\n\n    onDragItemMouseLeave(event, oldOverItem) {\n        this.unHighlightHandle(oldOverItem);\n    }\n\n    /**\n     * Highlights handles (applies css that changes cursor).\n     * @private\n     */\n    highlightHandle() {\n        const\n            {\n                overItem : item,\n                client\n            }      = this,\n            handleTargetElement = item.syncIdMap?.[client.scheduledEventName] ?? item.querySelector(client.eventInnerSelector);\n\n        // over a handle, add cls to change cursor\n        handleTargetElement.classList.add('b-resize-handle');\n        item.classList.add('b-over-resize-handle');\n    }\n\n    /**\n     * Unhighlight handles (removes css).\n     * @private\n     */\n    unHighlightHandle(item = this.overItem) {\n        if (item) {\n            const\n                me    = this,\n                inner = item.syncIdMap?.[me.client.scheduledEventName] ?? item.querySelector(me.client.eventInnerSelector);\n\n            if (inner) {\n                inner.classList.remove('b-resize-handle', me.resizingItemInnerCls);\n            }\n\n            item.classList.remove('b-over-resize-handle', me.draggingItemCls);\n        }\n    }\n\n    isOverAnyHandle(event, target) {\n        return this.isOverStartHandle(event, target) || this.isOverEndHandle(event, target);\n    }\n\n    isOverStartHandle(event, target) {\n        return this.getHandleRect('start', event, target)?.contains(EventHelper.getPagePoint(event));\n    }\n\n    isOverEndHandle(event, target) {\n        return this.getHandleRect('end', event, target)?.contains(EventHelper.getPagePoint(event));\n    }\n\n    getHandleRect(side, event, eventEl) {\n        if (this.overItem) {\n            eventEl = event.target.closest(`.${this.client.eventCls}`) || eventEl.querySelector(`.${this.client.eventCls}`);\n            if (!eventEl) {\n                return;\n            }\n\n            const\n                me              = this,\n                start           = side === 'start',\n                { client }      = me,\n                rtl             = Boolean(client.rtl),\n                axis            = me.dragLock,\n                horizontal      = axis === 'x',\n                dim             = horizontal ? 'width' : 'height',\n                handleSpec      = `${horizontal ? (start && !rtl) ? 'left' : 'right' : start ? 'top' : 'bottom'}Handle`,\n                { offsetWidth } = eventEl,\n                timespanRecord  = client.resolveTimeSpanRecord(eventEl),\n                resizable       = timespanRecord?.isResizable,\n                eventRect       = Rectangle.from(eventEl),\n                result          = eventRect.clone(),\n                handleStyle     = globalThis.getComputedStyle(eventEl, ':before'),\n                // Larger draggable zones on pure touch devices with no mouse\n                touchHandleSize = (!me.handleSelector && !BrowserHelper.isHoverableDevice) ? me.touchHandleSize : undefined,\n                handleSize      = touchHandleSize || me.handleSize || parseFloat(handleStyle[dim]),\n                handleVisThresh = me.handleVisibilityThreshold || 2 * me.handleSize,\n                centerGap       = me.dynamicHandleSize ? me.reservedSpace / 2 : 0,\n                deflateArgs     = [0, 0, 0, 0];\n\n            // To decide if we are over a valid handle, we first check disabled state\n            // Then this.leftHandle/this.rightHandle/this.topHandle/this.bottomHandle\n            // Then whether there's enough event bar width to accommodate separate handles\n            // Then whether the event itself allows resizing at the specified side.\n            if (!me.disabled && me[handleSpec] && (offsetWidth >= handleVisThresh || me.dynamicHandleSize) && (resizable === true || resizable === side)) {\n                const oppositeEnd = (!horizontal && !start) || (horizontal && (rtl  === start));\n\n                if (oppositeEnd) {\n                    // Push handle start point to other end and clip result to other end\n                    result[axis] += (eventRect[dim] - handleSize);\n                    deflateArgs[horizontal ? 3 : 0] = eventRect[dim] / 2 + centerGap;\n                }\n                else {\n                    deflateArgs[horizontal ? 1 : 2] = eventRect[dim] / 2 + centerGap;\n                }\n\n                // Deflate the event bar rectangle to encapsulate 2px less than the side's own half\n                // so that we can constrain the handle zone to be inside its own half when bar is small.\n                eventRect.deflate(...deflateArgs);\n                result[dim] = handleSize;\n\n                // Constrain handle rectangles to each side so that they can never collide.\n                // Each handle is constrained into its own half.\n                result.constrainTo(eventRect);\n\n                // Zero sized handles cannot be hovered\n                if (result[dim]) {\n                    return result;\n                }\n            }\n        }\n    }\n\n    setupDragContext(event) {\n        const me = this;\n\n        // Only start a drag if we are over a handle zone.\n        if (me.overItem && me.isOverAnyHandle(event, me.overItem) && me.isElementResizable(me.overItem, event)) {\n            const result = super.setupDragContext(event);\n\n            result.scrollManager = me.client.scrollManager;\n\n            return result;\n        }\n    }\n\n    changeHandleSize() {\n        VersionHelper.deprecate('Scheduler', '6.0.0', 'Handle size is from CSS');\n    }\n\n    changeTouchHandleSize() {\n        VersionHelper.deprecate('Scheduler', '6.0.0', 'Handle size is from CSS');\n    }\n\n    changeTip(tip, oldTip) {\n        const me = this;\n\n        if (!me.showTooltip) {\n            return null;\n        }\n\n        if (tip) {\n            if (tip.isTooltip) {\n                tip.owner = me;\n            }\n            else {\n                tip = Tooltip.reconfigure(oldTip, Tooltip.mergeConfigs({\n                    id : me.tipId\n                }, tip, {\n                    getHtml : me.getTipHtml.bind(me),\n                    owner   : me.client\n                }, me.tip), {\n                    owner    : me,\n                    defaults : {\n                        type : 'tooltip'\n                    }\n                });\n            }\n\n            tip.ion({\n                innerhtmlupdate : 'updateDateIndicator',\n                thisObj         : me\n            });\n\n            me.clockTemplate = new ClockTemplate({\n                scheduler : me.client\n            });\n        }\n        else if (oldTip) {\n            oldTip.destroy();\n            me.clockTemplate?.destroy();\n        }\n\n        return tip;\n    }\n\n    //endregion\n\n    //region Events\n\n    isElementResizable(element, event) {\n        const\n            me             = this,\n            { client }     = me,\n            timespanRecord = client.resolveTimeSpanRecord(element);\n\n        if (client.readOnly) {\n            return false;\n        }\n\n        let resizable = timespanRecord?.isResizable;\n\n        // Not resizable if the mousedown is on a resizing handle of\n        // a percent bar.\n        const\n            handleHoldingElement = element?.syncIdMap[client.scheduledEventName] ?? element,\n            handleEl             = event.target.closest('[class$=\"-handle\"]');\n\n        if (!resizable || (handleEl && handleEl !== handleHoldingElement)) {\n            return false;\n        }\n\n        element = event.target.closest(me.dragSelector);\n\n        if (!element) {\n            return false;\n        }\n\n        const\n            startsOutside = element.classList.contains('b-sch-event-startsoutside'),\n            endsOutside   = element.classList.contains('b-sch-event-endsoutside');\n\n        if (resizable === true) {\n            if (startsOutside && endsOutside) {\n                return false;\n            }\n            else if (startsOutside) {\n                resizable = 'end';\n            }\n            else if (endsOutside) {\n                resizable = 'start';\n            }\n            else {\n                return me.isOverStartHandle(event, element) || me.isOverEndHandle(event, element);\n            }\n        }\n\n        if (\n            (startsOutside && resizable === 'start') ||\n            (endsOutside && resizable === 'end')\n        ) {\n            return false;\n        }\n\n        if (\n            (me.isOverStartHandle(event, element) && resizable === 'start') ||\n            (me.isOverEndHandle(event, element) && resizable === 'end')\n        ) {\n            return true;\n        }\n\n        return false;\n    }\n\n    updateDateIndicator() {\n        const\n            { clockTemplate } = this,\n            {\n                eventRecord,\n                draggingEnd,\n                snappedDate\n            }                 = this.dragging.context,\n            startDate         = draggingEnd ? eventRecord.get('startDate') : snappedDate,\n            endDate           = draggingEnd ? snappedDate : eventRecord.get('endDate'),\n            { element }       = this.tip;\n\n        clockTemplate.updateDateIndicator(element.querySelector('.b-sch-tooltip-startdate'), startDate);\n        clockTemplate.updateDateIndicator(element.querySelector('.b-sch-tooltip-enddate'), endDate);\n    }\n\n    getTooltipTarget({ itemElement, context }) {\n        const\n            me      = this,\n            { rtl } = me.client,\n            target  = Rectangle.from(itemElement, null, true);\n\n        if (me.dragLock === 'x') {\n            // Align to the dragged edge of the proxy, and then bump right so that the anchor aligns perfectly.\n            if ((!rtl && context.edge === 'right') || (rtl && context.edge === 'left')) {\n                target.x = target.right - 1;\n            }\n            else {\n                target.x -= me.tip.anchorSize[0] / 2;\n            }\n            target.width = me.tip.anchorSize[0] / 2;\n        }\n        else {\n            // Align to the dragged edge of the proxy, and then bump bottom so that the anchor aligns perfectly.\n            if (context.edge === 'bottom') {\n                target.y = target.bottom - 1;\n            }\n            target.height = me.tip.anchorSize[1] / 2;\n        }\n\n        return { target };\n    }\n\n    basicValidityCheck(context, event) {\n        return context.startDate &&\n            (context.endDate > context.startDate || this.allowResizeToZero) &&\n            this.validatorFn.call(this.validatorFnThisObj || this, context, event);\n    }\n\n    //endregion\n\n    //region Tooltip\n\n    getTipHtml({ tip }) {\n        const\n            me = this,\n            {\n                startDate,\n                endDate,\n                toSet,\n                snappedDate,\n                valid,\n                message = '',\n                timespanRecord\n            }  = me.dragging.context;\n\n        // Empty string hides the tip - we get called before the Resizer, so first call will be empty\n        if (!startDate || !endDate) {\n            return tip.html;\n        }\n\n        // Set whichever one we are moving\n        const tipData = {\n            record  : timespanRecord,\n            valid,\n            message,\n            startDate,\n            endDate,\n            [toSet] : snappedDate\n        };\n\n        // Format the two ends. This has to be done outside of the object initializer\n        // because they use properties that are only in the tipData object.\n        tipData.startText = me.client.getFormattedDate(tipData.startDate);\n        tipData.endText = me.client.getFormattedDate(tipData.endDate);\n        tipData.startClockHtml = me.clockTemplate.template({\n            date : tipData.startDate,\n            text : tipData.startText,\n            cls  : 'b-sch-tooltip-startdate'\n        });\n        tipData.endClockHtml = me.clockTemplate.template({\n            date : tipData.endDate,\n            text : tipData.endText,\n            cls  : 'b-sch-tooltip-enddate'\n        });\n\n        return me.tooltipTemplate(tipData);\n    }\n\n    //endregion\n\n    //region Product specific, may be overridden in subclasses\n\n    beginEventRecordBatch(eventRecord) {\n        eventRecord.beginBatch();\n    }\n\n    cancelEventRecordBatch(eventRecord) {\n        // Reverts the changes, a batchedUpdate event will fire which will reset the UI\n        eventRecord.cancelBatch();\n    }\n\n    getBeforeResizeParams(context) {\n        const { client } = this;\n\n        return {\n            resourceRecord : client.resolveResourceRecord(client.isVertical ? context.event : context.element)\n        };\n    }\n\n    getResizeStartParams(context) {\n        return {\n            resourceRecord : context.resourceRecord\n        };\n    }\n\n    getResizeEndParams(context) {\n        return {\n            resourceRecord : context.resourceRecord,\n            event          : context.event\n        };\n    }\n\n    setupProductResizeContext(context, event) {\n        const\n            { client }       = this,\n            { element }      = context,\n            eventRecord      = client.resolveEventRecord(element),\n            resourceRecord   = client.resolveResourceRecord?.(element),\n            assignmentRecord = client.resolveAssignmentRecord?.(element);\n\n        Object.assign(context, {\n            eventRecord,\n            taskRecord      : eventRecord,\n            resourceRecord,\n            assignmentRecord,\n            dateConstraints : client.getDateConstraints?.(resourceRecord, eventRecord)\n        });\n    }\n\n    checkValidity({ startDate, endDate, eventRecord, resourceRecord }) {\n        const { client } = this;\n\n        if (!client.allowOverlap) {\n            if (eventRecord.resources.some(resource => !client.isDateRangeAvailable(startDate, endDate, eventRecord, resource))) {\n                return {\n                    valid   : false,\n                    message : this.L('L{EventDrag.eventOverlapsExisting}')\n                };\n            }\n        }\n        return this.basicValidityCheck(...arguments);\n    }\n\n    get tipId() {\n        return `${this.client.id}-event-resize-tip`;\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(EventResize, true, 'Scheduler');\nGridFeatureManager.registerFeature(EventResize, false, 'ResourceHistogram');\n","import Base from '../../../Core/Base.js';\n\n/**\n * @module Scheduler/feature/mixin/TaskEditTransactional\n */\n\n/**\n * Mixin adding live updates support\n *\n * @mixin\n */\nexport default Target => class TaskEditTransactional extends (Target || Base) {\n    static get $name() {\n        return 'TaskEditTransactional';\n    }\n\n    captureStm(force) {\n        if (this.client.transactionalFeaturesEnabled) {\n            super.captureStm();\n\n            return this.startStmTransaction(force);\n        }\n        else {\n            super.captureStm(force);\n        }\n    }\n\n    freeStm(commitOrReject) {\n        if (this.hasStmCapture || !this.client.transactionalFeaturesEnabled) {\n            return super.freeStm(commitOrReject);\n        }\n    }\n\n    async startStmTransaction(startRecordingEarly) {\n        if (this.client.transactionalFeaturesEnabled) {\n            await this.startFeatureTransaction(startRecordingEarly);\n        }\n        else {\n            super.startStmTransaction();\n        }\n    }\n\n    commitStmTransaction() {\n        if (this.client.transactionalFeaturesEnabled) {\n            return this.finishFeatureTransaction();\n        }\n        else {\n            super.commitStmTransaction();\n        }\n    }\n\n    async rejectStmTransaction() {\n        if (this.client.transactionalFeaturesEnabled) {\n            this.rejectFeatureTransaction();\n        }\n        else {\n            await super.rejectStmTransaction();\n        }\n    }\n};\n","import Base from '../../../Core/Base.js';\nimport AttachToProjectMixin from '../../data/mixin/AttachToProjectMixin.js';\nimport IdHelper from '../../../Core/helper/IdHelper.js';\n\n/**\n * @module Scheduler/feature/mixin/TransactionalFeature\n */\n\n/**\n * Feature defining methods to lock the view for a time of a user action\n * @internal\n * @mixin\n */\nexport default Target => class TransactionalFeature extends AttachToProjectMixin(Target || Base) {\n    static $name = 'TransactionalFeature';\n\n    //#region AttachToProjectMixin implementation\n\n    detachFromProject(project) {\n        this.rejectFeatureTransaction();\n        super.detachFromProject(project);\n    }\n\n    //#endregion\n\n    getStmCapture() {\n        const result = super.getStmCapture();\n        result._editorPromiseResolve = this._editorPromiseResolve;\n        return result;\n    }\n\n    applyStmCapture(stmCapture) {\n        super.applyStmCapture(stmCapture);\n\n        this._editorPromiseResolve = stmCapture._editorPromiseResolve;\n    }\n\n    async startFeatureTransaction() {\n        if (!this.client.transactionalFeaturesEnabled) {\n            return;\n        }\n\n        const\n            me          = this,\n            { project } = me.client,\n            { stm }     = project;\n\n        // Await previous promise chain to resolve\n        let chainResolved;\n\n        if (me.hasStmCapture) {\n            stm.startTransaction();\n        }\n        else {\n            chainResolved = project.queue(() => project.commitAsync());\n        }\n\n        project.queue(() => {\n            if (!me.hasStmCapture) {\n                me._stmInitiallyDisabled = stm.disabled;\n                me._stmInitiallyAutoRecord = stm.autoRecord;\n\n                if (stm.isRecording) {\n                    stm.stopTransaction();\n                }\n                else if (me._stmInitiallyDisabled) {\n                    stm.enable();\n                }\n\n                // Disable autoRecord to avoid finishing transaction after a timeout\n                stm.autoRecord = false;\n            }\n\n            if (!stm.isRecording) {\n                // We need to wrap cell editing into own transaction to be able to apply user changes last\n                stm.startTransaction();\n            }\n\n            me.trigger?.('featureTransactionStart');\n\n            // Put an empty promise to the queue to pause it\n            return new Promise(resolve => me._editorPromiseResolve = resolve);\n        });\n\n        await chainResolved;\n    }\n\n    rejectFeatureTransaction() {\n        if (!this.client.transactionalFeaturesEnabled) {\n            return;\n        }\n\n        const\n            me = this,\n            { stm } = me.client.project;\n\n        me._editorPromiseResolve?.();\n        me._editorPromiseResolve = null;\n\n        stm.isRecording && stm.rejectTransaction();\n\n        if (!me.hasStmCapture && me._stmInitiallyDisabled != null) {\n            stm.disabled = me._stmInitiallyDisabled;\n            stm.autoRecord = me._stmInitiallyAutoRecord;\n        }\n\n        me.trigger('featureTransactionReject');\n    }\n\n    async finishFeatureTransaction(afterApplyStashCallback) {\n        if (!this.client.transactionalFeaturesEnabled) {\n            return;\n        }\n\n        const\n            me            = this,\n            { project }   = me.client,\n            { stm }       = project;\n\n        // In case there is a commit pending, we need to wait to not suspend more events than we should\n        if (!project.isEngineReady()) {\n            await project.commitAsync();\n        }\n\n        const\n            transactionId = stm.stash(),\n            {\n                _stmInitiallyDisabled,\n                _stmInitiallyAutoRecord\n            }             = me,\n            // This id is used to help debugging concurrent promises\n            id            = IdHelper.generateId('featureTransaction');\n\n        me._editorPromiseResolve?.();\n        me._editorPromiseResolve = null;\n\n        if (!me.isDestroying) {\n            me.trigger('featureTransactionFinalizeStart', { id });\n        }\n\n        return project.queue(async() => {\n            stm?.applyStash(transactionId);\n\n            await afterApplyStashCallback?.();\n\n            await project.commitAsync?.();\n\n            if (stm.isRecording) {\n                stm.stopTransaction();\n            }\n\n            if (!me.hasStmCapture && stm && !stm.isDestroying && _stmInitiallyDisabled != null) {\n                stm.disabled = _stmInitiallyDisabled;\n                stm.autoRecord = _stmInitiallyAutoRecord;\n            }\n\n            me.trigger?.('featureTransactionFinalized', { id });\n        });\n    }\n};\n","import EventResize from '../EventResize.js';\nimport ObjectHelper from '../../../Core/helper/ObjectHelper.js';\nimport EventHelper from '../../../Core/helper/EventHelper.js';\nimport Draggable from '../../../Core/mixin/Draggable.js';\nimport TaskEditStm from '../mixin/TaskEditStm.js';\nimport TaskEditTransactional from '../mixin/TaskEditTransactional.js';\nimport TransactionalFeature from '../mixin/TransactionalFeature.js';\n\n/**\n * @module Scheduler/feature/base/DragCreateBase\n */\nconst getDragCreateDragDistance = function(event) {\n    // Do not allow the drag to begin if the taskEdit feature (if present) is in the process\n    // of canceling. We must wait for it to have cleaned up its data manipulations before\n    // we can add the new, drag-created record\n    if (this.source?.client.features.taskEdit?._canceling) {\n        return false;\n    }\n    return EventHelper.getDistanceBetween(this.startEvent, event);\n};\n\n/**\n * Base class for EventDragCreate (Scheduler) and TaskDragCreate (Gantt) features. Contains shared code. Not to be used directly.\n *\n * @extends Scheduler/feature/EventResize\n */\nexport default class DragCreateBase extends EventResize.mixin(\n    TaskEditStm,\n    TransactionalFeature,\n    TaskEditTransactional\n) {\n    //region Config\n\n    static configurable = {\n        /**\n         * true to show a time tooltip when dragging to create a new event\n         * @config {Boolean}\n         * @default\n         */\n        showTooltip : true,\n\n        /**\n         * Number of pixels the drag target must be moved before dragging is considered to have started. Defaults to 2.\n         * @config {Number}\n         * @default\n         */\n        dragTolerance : 2,\n\n        // used by gantt to only allow one task per row\n        preventMultiple : false,\n\n        dragTouchStartDelay : 300,\n\n        /**\n         * `this` reference for the validatorFn\n         * @config {Object}\n         */\n        validatorFnThisObj : null,\n\n        tipTemplate : data => `\n            <div class=\"b-sch-tip-${data.valid ? 'valid' : 'invalid'}\">\n                ${data.startClockHtml}\n                ${data.endClockHtml}\n                <div class=\"b-sch-tip-message\">${data.message}</div>\n            </div>\n        `,\n\n        dragActiveCls : 'b-dragcreating'\n    };\n\n    static pluginConfig = {\n        chain  : ['render', 'onEventDataGenerated'],\n        before : ['onElementContextMenu']\n    };\n\n    construct(scheduler, config) {\n        if (config?.showTooltip === false) {\n            config.tip = null;\n        }\n        super.construct(...arguments);\n    }\n\n    //endregion\n\n    changeValidatorFn(validatorFn) {\n        // validatorFn property is used by the EventResize base to validate each mousemove\n        // We change the property name to createValidatorFn\n        this.createValidatorFn = validatorFn;\n    }\n\n    render() {\n        const\n            me         = this,\n            { client } = me;\n\n        // Set up elements and listeners\n        me.dragRootElement = me.dropRootElement = client.timeAxisSubGridElement;\n\n        // Drag only in time dimension\n        me.dragLock = client.isVertical ? 'y' : 'x';\n    }\n\n    onDragEndSwitch(context) {\n        const\n            { client }                = this,\n            { enableEventAnimations } = client,\n            {\n                eventRecord,\n                draggingEnd\n            }                         = context,\n            horizontal                = this.dragLock === 'x',\n            { initialDate }           = this.dragging;\n\n        // Setting the new opposite end should not animate\n        client.enableEventAnimations = false;\n\n        // Zero duration at the moment of the flip\n        eventRecord.set({\n            startDate : initialDate,\n            endDate   : initialDate\n        });\n\n        // We're switching to dragging the start\n        if (draggingEnd) {\n            Object.assign(context, {\n                endDate        : initialDate,\n                toSet          : 'startDate',\n                otherEnd       : 'endDate',\n                setMethod      : 'setStartDate',\n                setOtherMethod : 'setEndDate',\n                edge           : horizontal ? 'left' : 'top'\n            });\n        }\n        else {\n            Object.assign(context, {\n                startDate      : initialDate,\n                toSet          : 'endDate',\n                otherEnd       : 'startDate',\n                setMethod      : 'setEndDate',\n                setOtherMethod : 'setStartDate',\n                edge           : horizontal ? 'right' : 'bottom'\n            });\n        }\n\n        context.draggingEnd = this.draggingEnd = !draggingEnd;\n        client.enableEventAnimations = enableEventAnimations;\n    }\n\n    beforeDrag(drag) {\n        const\n            me                       = this,\n            result                   = super.beforeDrag(drag),\n            { pan, eventDragSelect } = me.client.features;\n\n        // Superclass's handler may also veto\n        if (result !== false && (\n            // used by gantt to only allow one task per row\n            (me.preventMultiple && !me.isRowEmpty(drag.rowRecord)) ||\n            me.disabled ||\n            // If Pan is enabled, it has right of way\n            (pan && !pan.disabled) ||\n            // If EventDragSelect is enabled, it has right of way\n            (eventDragSelect && !eventDragSelect.disabled)\n        )) {\n            return false;\n        }\n\n        // Prevent drag select if drag-creating, could collide otherwise\n        // (reset by GridSelection)\n        me.client.preventDragSelect = true;\n\n        return result;\n    }\n\n    startDrag(drag) {\n        const result = super.startDrag(drag);\n\n        // Returning false means operation is aborted.\n        if (result !== false) {\n            const { context } = drag;\n\n            // Date to flip around when changing direction\n            drag.initialDate = context.eventRecord.get(this.draggingEnd ? 'startDate' : 'endDate');\n\n            this.client.trigger('dragCreateStart', {\n                proxyElement   : drag.element,\n                eventElement   : drag.element,\n                eventRecord    : context.eventRecord,\n                resourceRecord : context.resourceRecord\n            });\n\n            // We are always dragging the exact edge of the event element.\n            drag.context.offset   = 0;\n            drag.context.oldValue = drag.mousedownDate;\n        }\n        return result;\n    }\n\n    // Used by our EventResize superclass to know whether the drag point is the end or the beginning.\n    isOverEndHandle() {\n        return this.draggingEnd;\n    }\n\n    setupDragContext(event) {\n        const { client } = this;\n\n        // Only mousedown on an empty cell can initiate drag-create\n        if (client.matchScheduleCell(event.target)) {\n            const resourceRecord = client.resolveResourceRecord(event)?.$original;\n\n            // And there must be a resource backing the cell.\n            if (resourceRecord && !resourceRecord.isSpecialRow) {\n                // Skip the EventResize's setupDragContext. We want the base one.\n                const\n                    result      = Draggable().prototype.setupDragContext.call(this, event),\n                    scrollables = [];\n\n                if (client.isVertical) {\n                    scrollables.push({\n                        element   : client.scrollable.element,\n                        direction : 'vertical'\n                    });\n                }\n                else {\n                    scrollables.push({\n                        element   : client.timeAxisSubGrid.scrollable.element,\n                        direction : 'horizontal'\n                    });\n                }\n\n                result.scrollManager = client.scrollManager;\n                result.monitoringConfig = { scrollables };\n                result.resourceRecord = result.rowRecord = resourceRecord;\n\n                // We use a special method to get the distance moved.\n                // If the TaskEdit feature is still in its canceling phase, then\n                // it returns false which inhibits the start of the drag-create\n                // until the cancelation is complete.\n                result.getDistance = getDragCreateDragDistance;\n                return result;\n            }\n        }\n    }\n\n    async dragDrop({ context, event }) {\n        // Set the start/end date, whichever we were dragging\n        // to the correctly rounded value before updating.\n        context[context.toSet] = context.snappedDate;\n\n        const\n            {\n                client\n            } = this,\n            {\n                startDate,\n                endDate,\n                eventRecord\n            } = context,\n            { generation } = eventRecord;\n\n        let modified;\n\n        this.tip?.hide();\n\n        // Handle https://github.com/bryntum/support/issues/3210.\n        // The issue arises when the mouseup arrives very quickly and the commit kicked off\n        // at event add has not yet completed. If it now completes *after* we finalize\n        // the drag, it will reset the event to its initial state.\n        // If that commit has in fact finished, this will be a no-op\n        await client.project.commitAsync();\n\n        // If the above commit in fact reset the event back to the initial state, we have to\n        // force the event rendering to bring it back to the currently known context state.\n        if (eventRecord.generation !== generation) {\n            context.eventRecord[context.toSet] = context.oldValue;\n            context.eventRecord[context.toSet] = context[context.toSet];\n        }\n\n        context.valid = startDate && endDate && (endDate - startDate > 0) && // Input sanity check\n            (context[context.toSet] - context.oldValue) && // Make sure dragged end changed\n            context.valid !== false;\n\n        if (context.valid) {\n            // Seems to be a valid drag-create operation, ask outside world if anyone wants to take control over the finalizing,\n            // to show a confirm dialog prior to finalizing the create.\n            client.trigger('beforeDragCreateFinalize', {\n                context,\n                event,\n                proxyElement   : context.element,\n                eventElement   : context.element,\n                eventRecord    : context.eventRecord,\n                resourceRecord : context.resourceRecord\n            });\n            modified = true;\n        }\n\n        // If a handler has set the async flag, it means that they are going to finalize\n        // the operation at some time in the future, so we should not call it.\n        if (!context.async) {\n            await context.finalize(modified);\n        }\n    }\n\n    updateDragTolerance(dragTolerance) {\n        this.dragThreshold = dragTolerance;\n    }\n\n    //region Tooltip\n\n    changeTip(tip, oldTip) {\n        return super.changeTip(!tip || tip.isTooltip ? tip : ObjectHelper.assign({\n            id : `${this.client.id}-drag-create-tip`\n        }, tip), oldTip);\n    }\n\n    //endregion\n\n    //region Finalize (create EventModel)\n\n    // this method is actually called on the `context` object,\n    // so `this` object inside might not be what you think (see `me = this.owner` below)\n    // not clear what was the motivation for such design\n    async finalize(doCreate) {\n        // only call this method once, do not re-enter\n        if (this.finalized) {\n            return;\n        }\n\n        this.finalized = true;\n\n        const\n            me                = this.owner,\n            context           = this,\n            completeFinalization = () => {\n                if (!me.isDestroyed) {\n                    me.client.trigger('afterDragCreate', {\n                        proxyElement   : context.element,\n                        eventElement   : context.element,\n                        eventRecord    : context.eventRecord,\n                        resourceRecord : context.resourceRecord\n                    });\n                    me.cleanup(context);\n                }\n            };\n\n        if (doCreate) {\n            // Call product specific implementation\n            await me.finalizeDragCreate(context);\n\n            completeFinalization();\n        }\n        // Aborting without going ahead with create - we must deassign and remove the event\n        else {\n            await me.cancelDragCreate(context);\n\n            me.onAborted?.(context);\n            completeFinalization();\n        }\n    }\n\n    async cancelDragCreate(context) {\n    }\n\n    async finalizeDragCreate(context) {\n        // EventResize base class applies final changes to the event record\n        await this.internalUpdateRecord(context, context.eventRecord);\n\n        const stmCapture = this.getStmCapture();\n\n        this.client?.trigger('dragCreateEnd', {\n            eventRecord    : context.eventRecord,\n            resourceRecord : context.resourceRecord,\n            event          : context.event,\n            eventElement   : context.element,\n            stmCapture\n        });\n\n        // Part of the Scheduler API. Triggered by its createEvent method.\n        // Auto-editing features can use this to edit new events.\n        // Note that this may be destroyed by a listener of the previous event.\n        this.client?.trigger('eventAutoCreated', {\n            eventRecord    : context.eventRecord,\n            resourceRecord : context.resourceRecord\n        });\n\n        return stmCapture.transferred;\n    }\n\n    cleanup(context) {\n        const\n            { client }      = this,\n            { eventRecord } = context;\n\n        // Base class's cleanup is not called, we have to clear this flag.\n        // The isCreating flag is only set if the event is to be handed off to the\n        // eventEdit feature and that feature then has responsibility for clearing it.\n        eventRecord.meta.isResizing = false;\n\n        client.endListeningForBatchedUpdates();\n        this.tip?.hide();\n        client.element.classList.remove(...this.dragActiveCls.split(' '));\n\n        context.element.parentElement.classList.remove('b-sch-dragcreating');\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * Prevent right click when drag creating\n     * @returns {Boolean}\n     * @private\n     */\n    onElementContextMenu() {\n        if (this.proxy) {\n            return false;\n        }\n    }\n\n    prepareCreateContextForFinalization(createContext, event, finalize, async = false) {\n        return {\n            ...createContext,\n            async,\n            event,\n            finalize\n        };\n    }\n\n    // Apply drag create \"proxy\" styling\n    onEventDataGenerated(renderData) {\n        if (this.dragging?.context?.eventRecord === renderData.eventRecord) {\n            // Allow custom styling for drag creation element\n            renderData.wrapperCls['b-sch-dragcreating'] = true;\n            // Styling when drag create will be aborted on drop (because it would yield zero duration)\n            renderData.wrapperCls['b-too-narrow'] = this.dragging.context.tooNarrow;\n        }\n    }\n\n    //endregion\n\n    //region Product specific, implemented in subclasses\n\n    // Empty implementation here. Only base EventResize class triggers this\n    triggerBeforeResize() {}\n\n    // Empty implementation here. Only base EventResize class triggers this\n    triggerEventResizeStart() {}\n\n    checkValidity(context, event) {\n        throw new Error('Implement in subclass');\n    }\n\n    handleBeforeDragCreate(dateTime, event) {\n        throw new Error('Implement in subclass');\n    }\n\n    isRowEmpty(rowRecord) {\n        throw new Error('Implement in subclass');\n    }\n\n    //endregion\n}\n","import InstancePlugin from '../../../Core/mixin/InstancePlugin.js';\nimport Tooltip from '../../../Core/widget/Tooltip.js';\nimport ClockTemplate from '../../tooltip/ClockTemplate.js';\n\n/**\n * @module Scheduler/feature/base/TooltipBase\n */\n\n/**\n * Base class for `EventTooltip` (Scheduler) and `TaskTooltip` (Gantt) features. Contains shared code. Not to be used directly.\n *\n * @extends Core/mixin/InstancePlugin\n * @extendsconfigs Core/widget/Tooltip\n */\nexport default class TooltipBase extends InstancePlugin {\n    //region Config\n\n    static get defaultConfig() {\n        return {\n\n            /**\n             * Specify true to have tooltip updated when mouse moves, if you for example want to display date at mouse\n             * position.\n             * @config {Boolean}\n             * @default\n             * @category Misc\n             */\n            autoUpdate : false,\n\n            /**\n             * The amount of time to hover before showing\n             * @config {Number}\n             * @default\n             */\n            hoverDelay : 250,\n\n            /**\n             * The time (in milliseconds) for which the Tooltip remains visible when the mouse leaves the target.\n             *\n             * May be configured as `false` to persist visible after the mouse exits the target element. Configure it\n             * as 0 to always retrigger `hoverDelay` even when moving mouse inside `fromElement`\n             * @config {Number}\n             * @default\n             */\n            hideDelay : 100,\n\n            // <remove-on-release>\n            // TODO: Rename to tooltipTemplate, deprecate template\n            // </remove-on-release>\n            template : null,\n\n            cls : null,\n\n            align : {\n                align : 'b-t'\n            },\n\n            clockTemplate : null,\n\n            // Set to true to update tooltip contents if record changes while tip is open\n            monitorRecordUpdate : null,\n\n            testConfig : {\n                hoverDelay : 0\n            }\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            chain : ['onPaint']\n        };\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * Triggered before a tooltip is shown. Return `false` to prevent the action.\n     * @preventable\n     * @event beforeShow\n     * @param {Core.widget.Tooltip} source The tooltip being shown.\n     * @param {Scheduler.model.EventModel} source.eventRecord The event record.\n     */\n\n    /**\n     * Triggered after a tooltip is shown.\n     * @event show\n     * @param {Core.widget.Tooltip} source The tooltip.\n     * @param {Scheduler.model.EventModel} source.eventRecord The event record.\n     */\n\n    //endregion\n\n    //region Init\n\n    construct(client, config) {\n        const me = this;\n\n        // process initial config into an actual config object\n        config = me.processConfig(config);\n\n        super.construct(client, config);\n\n        // Default triggering selector is the client's inner element selector\n        if (!me.forSelector) {\n            me.forSelector = `${client.eventInnerSelector}:not(.b-dragproxy,.b-iscreating)`;\n        }\n\n        me.clockTemplate = new ClockTemplate({\n            scheduler : client\n        });\n\n        client.ion({\n            [`before${client.scheduledEventName}drag`] : () => {\n                // Using {} on purpose to not return the promise\n                me.tooltip?.hide();\n            }\n        });\n    }\n\n    // TooltipBase feature handles special config cases, where user can supply a function to use as template\n    // instead of a normal config object\n    processConfig(config) {\n        if (typeof config === 'function') {\n            return {\n                template : config\n            };\n        }\n\n        return config;\n    }\n\n    // override setConfig to process config before applying it (used mainly from ReactScheduler)\n    setConfig(config) {\n        super.setConfig(this.processConfig(config));\n    }\n\n    doDestroy() {\n        this.destroyProperties('clockTemplate', 'tooltip');\n\n        super.doDestroy();\n    }\n\n    doDisable(disable) {\n        if (this.tooltip) {\n            this.tooltip.disabled = disable;\n        }\n\n        super.doDisable(disable);\n    }\n\n    //endregion\n\n    onPaint({ firstPaint }) {\n        if (firstPaint) {\n            const\n                me             = this,\n                { client }     = me,\n                ignoreSelector = `:not(${[\n                    '.b-dragselecting',\n                    '.b-eventeditor-editing',\n                    '.b-taskeditor-editing',\n                    '.b-resizing-event',\n                    '.b-task-percent-bar-resizing-task',\n                    '.b-dragcreating',\n                    `.b-dragging-${client.scheduledEventName}`,\n                    '.b-creating-dependency',\n                    '.b-dragproxy'\n                ].join()})`;\n\n            me.tooltip?.destroy();\n\n            /**\n             * A reference to the tooltip instance, which will have a special `eventRecord` property that\n             * you can use to get data from the contextual event record to which this tooltip is related.\n             * @member {Core.widget.Tooltip} tooltip\n             * @readonly\n             * @category Misc\n             */\n            const tip = me.tooltip = new Tooltip({\n                axisLock          : 'flexible',\n                id                : me.tipId || `${me.client.id}-event-tip`,\n                cls               : me.tipCls,\n                forSelector       : `.b-timelinebase${ignoreSelector} .b-grid-body-container:not(.b-scrolling) ${me.forSelector}`,\n                scrollAction      : 'realign',\n                forElement        : client.timeAxisSubGridElement,\n                showOnHover       : true,\n                anchorToTarget    : true,\n                getHtml           : me.getTipHtml.bind(me),\n                disabled          : me.disabled,\n                // on Core/mixin/Events constructor, me.config.listeners is deleted and attributed its value to me.configuredListeners\n                // to then on processConfiguredListeners it set me.listeners to our TooltipBase\n                // but since we need our initial config.listeners to set to our internal tooltip, we leave processConfiguredListeners empty\n                // to avoid lost our listeners to apply for our internal tooltip here and force our feature has all Tooltip events firing\n                ...me.config,\n                internalListeners : me.configuredListeners\n            });\n\n            tip.ion({\n                innerhtmlupdate : 'updateDateIndicator',\n                overtarget      : 'onOverNewTarget',\n                show            : 'onTipShow',\n                hide            : 'onTipHide',\n                thisObj         : me\n            });\n\n            // Once instantiated, any Tooltip configs are relayed through the feature directly to the tip\n            Object.keys(tip.$meta.configs).forEach(name => {\n                Object.defineProperty(this, name, {\n                    set : v => tip[name] = v,\n                    get : () => tip[name]\n                });\n            });\n        }\n    }\n\n    //region Listeners\n\n    // leave configuredListeners alone until render time at which they are used on the tooltip\n    processConfiguredListeners() {}\n\n    addListener(...args) {\n        const\n            // Call super method to handle enable/disable feature events\n            defaultDetacher = super.addListener(...args),\n            // Add listener to the `tooltip` instance\n            tooltipDetacher = this.tooltip?.addListener(...args);\n\n        if (defaultDetacher || tooltipDetacher) {\n            return () => {\n                defaultDetacher?.();\n                tooltipDetacher?.();\n            };\n        }\n    }\n\n    removeListener(...args) {\n        super.removeListener(...args);\n\n        // Remove listener from the `tooltip` instance\n        this.tooltip?.removeListener(...args);\n    }\n\n    //endregion\n\n    updateDateIndicator() {\n        const\n            me             = this,\n            tip            = me.tooltip,\n            endDateElement = tip.element.querySelector('.b-sch-tooltip-enddate');\n\n        if (!me.record) {\n            return;\n        }\n\n        me.clockTemplate.updateDateIndicator(tip.element, me.record.startDate);\n\n        endDateElement && me.clockTemplate.updateDateIndicator(endDateElement, me.record.endDate);\n    }\n\n    resolveTimeSpanRecord(forElement) {\n        return this.client.resolveTimeSpanRecord(forElement);\n    }\n\n    getTipHtml({ tip, activeTarget }) {\n        const\n            me             = this,\n            { client }     = me,\n            recordProp     = me.recordType || `${client.scheduledEventName}Record`,\n            timeSpanRecord = me.resolveTimeSpanRecord(activeTarget);\n\n        // If user has mouseovered a fading away element of a deleted event,\n        // an event record will not be found. In this case the tip must hide.\n        // Instance of check is to not display while propagating\n        if (timeSpanRecord?.startDate instanceof Date) {\n            const\n                { startDate, endDate } = timeSpanRecord,\n                startText              = client.getFormattedDate(startDate),\n                endDateValue           = client.getDisplayEndDate(endDate, startDate),\n                endText                = client.getFormattedDate(endDateValue);\n\n            tip.eventRecord = timeSpanRecord;\n\n            return me.template({\n                tip,\n                // eventRecord for Scheduler, taskRecord for Gantt\n                [`${recordProp}`] : timeSpanRecord,\n                startDate,\n                endDate,\n                startText,\n                endText,\n                startClockHtml    : me.clockTemplate.template({\n                    date : startDate,\n                    text : startText,\n                    cls  : 'b-sch-tooltip-startdate'\n                }),\n                endClockHtml : timeSpanRecord.isMilestone ? '' : me.clockTemplate.template({\n                    date : endDateValue,\n                    text : endText,\n                    cls  : 'b-sch-tooltip-enddate'\n                })\n            });\n        }\n        else {\n            tip.hide();\n            return '';\n        }\n    }\n\n    get record() {\n        return this.tooltip.eventRecord;\n    }\n\n    onTipShow() {\n        const me = this;\n\n        if (me.monitorRecordUpdate && !me.updateListener) {\n            me.updateListener = me.client.eventStore.ion({\n                change  : me.onRecordUpdate,\n                buffer  : 300,\n                thisObj : me\n            });\n        }\n    }\n\n    onTipHide() {\n        // To not retain full project when changing project\n        this.tooltip.eventRecord = null;\n\n        this.updateListener?.();\n        this.updateListener = null;\n    }\n\n    onOverNewTarget({ newTarget }) {\n        const { tooltip } = this;\n\n        if (tooltip.isVisible) {\n            if (this.client.timeAxisSubGrid.scrolling || this.client.scrolling) {\n                tooltip.hide(false);\n            }\n            else {\n                tooltip.eventRecord = this.resolveTimeSpanRecord(newTarget);\n            }\n        }\n    }\n\n    onRecordUpdate({ record }) {\n        const { tooltip } = this;\n\n        // Make sure the record we are showing the tip for is still relevant\n        // If the change moved the element out from under the mouse, we will be hidden.\n        if (tooltip?.isVisible && record === this.record) {\n            tooltip.updateContent();\n\n            // If we were aligning to the event bar, realign to it.\n            if (tooltip.lastAlignSpec.aligningToElement) {\n                tooltip.realign();\n            }\n            // The pointer is still over the target (otherwise tooltip would be hidden)\n            // So invoke the tooltip's positioning\n            else {\n                tooltip.internalOnPointerOver(this.client.lastPointerEvent);\n            }\n        }\n    }\n}\n","import DragHelper from '../../Core/helper/DragHelper.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport DomSync from '../../Core/helper/DomSync.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\nimport ObjectHelper from '../../Core/helper/ObjectHelper.js';\nimport ResizeHelper from '../../Core/helper/ResizeHelper.js';\nimport StringHelper from '../../Core/helper/StringHelper.js';\nimport Delayable from '../../Core/mixin/Delayable.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\nimport Tooltip from '../../Core/widget/Tooltip.js';\nimport ClockTemplate from '../tooltip/ClockTemplate.js';\n\n/**\n * @module Scheduler/feature/AbstractTimeRanges\n */\n\n/**\n * Abstract base class, you should not use this class directly.\n * @abstract\n * @mixes Core/mixin/Delayable\n * @extends Core/mixin/InstancePlugin\n */\nexport default class AbstractTimeRanges extends InstancePlugin.mixin(Delayable) {\n    //region Config\n\n    /**\n     * Fired on the owning Scheduler when a click happens on a time range header element\n     * @event timeRangeHeaderClick\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.TimeSpan} timeRangeRecord The record\n     * @param {MouseEvent} event DEPRECATED 5.3.0 Use `domEvent` instead\n     * @param {MouseEvent} domEvent Browser event\n     */\n\n    /**\n     * Fired on the owning Scheduler when a double click happens on a time range header element\n     * @event timeRangeHeaderDblClick\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.TimeSpan} timeRangeRecord The record\n     * @param {MouseEvent} event DEPRECATED 5.3.0 Use `domEvent` instead\n     * @param {MouseEvent} domEvent Browser event\n     */\n\n    /**\n     * Fired on the owning Scheduler when a right click happens on a time range header element\n     * @event timeRangeHeaderContextMenu\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source Scheduler instance\n     * @param {Scheduler.model.TimeSpan} timeRangeRecord The record\n     * @param {MouseEvent} event DEPRECATED 5.3.0 Use `domEvent` instead\n     * @param {MouseEvent} domEvent Browser event\n     */\n\n    static get defaultConfig() {\n        return {\n            // CSS class to apply to range elements\n            rangeCls : 'b-sch-range',\n\n            // CSS class to apply to line elements (0-duration time range)\n            lineCls : 'b-sch-line',\n\n            /**\n             * Set to `true` to enable dragging and resizing of range elements in the header. Only relevant when\n             * {@link #config-showHeaderElements} is `true`.\n             * @config {Boolean}\n             * @default\n             * @category Common\n             */\n            enableResizing : false,\n\n            /**\n             * A Boolean specifying whether to show tooltip while resizing range elements, or a\n             * {@link Core.widget.Tooltip} config object which is applied to the tooltip\n             * @config {Boolean|TooltipConfig}\n             * @default\n             * @category Common\n             */\n            showTooltip : true,\n\n            /**\n             * Template used to generate the tooltip contents when hovering a time range header element.\n             * ```\n             * const scheduler = new Scheduler({\n             *   features : {\n             *     timeRanges : {\n             *       tooltipTemplate({ timeRange }) {\n             *         return `${timeRange.name}`\n             *       }\n             *     }\n             *   }\n             * });\n             * ```\n             * @config {Function} tooltipTemplate\n             * @param {Object} data Tooltip data\n             * @param {Scheduler.model.TimeSpan} data.timeRange\n             * @category Common\n             */\n            tooltipTemplate : null,\n\n            dragTipTemplate : data => `\n                <div class=\"b-sch-tip-${data.valid ? 'valid' : 'invalid'}\">\n                    <div class=\"b-sch-tip-name\">${StringHelper.encodeHtml(data.name) || ''}</div>\n                    ${data.startClockHtml}\n                    ${data.endClockHtml || ''}\n                </div>\n            `,\n\n            baseCls : 'b-sch-timerange',\n\n            /**\n             * Function used to generate the HTML content for a time range header element.\n             * ```\n             * const scheduler = new Scheduler({\n             *   features : {\n             *     timeRanges : {\n             *       headerRenderer({ timeRange }) {\n             *         return `${timeRange.name}`\n             *       }\n             *     }\n             *   }\n             * });\n             * ```\n             * @config {Function} headerRenderer\n             * @param {Object} data Render data\n             * @param {Scheduler.model.TimeSpan} data.timeRange\n             * @category Common\n             */\n            headerRenderer : null,\n\n            /**\n             * Function used to generate the HTML content for a time range body element.\n             * ```\n             * const scheduler = new Scheduler({\n             *   features : {\n             *     timeRanges : {\n             *       bodyRenderer({ timeRange }) {\n             *         return `${timeRange.name}`\n             *       }\n             *     }\n             *   }\n             * });\n             * ```\n             * @config {Function} bodyRenderer\n             * @param {Object} data Render data\n             * @param {Scheduler.model.TimeSpan} data.timeRange\n             * @category Common\n             */\n            bodyRenderer : null,\n\n            // a unique cls used by subclasses to get custom styling of the elements rendered\n            cls : null,\n\n            narrowThreshold : 80\n        };\n    }\n\n    static configurable = {\n        /**\n         * Set to `false` to not render range elements into the time axis header\n         * @prp {Boolean}\n         * @default\n         * @category Common\n         */\n        showHeaderElements : true\n    };\n\n    // Plugin configuration. This plugin chains some functions in Grid.\n    static pluginConfig = {\n        chain : [\n            'onPaint',\n            'populateTimeAxisHeaderMenu',\n            'onSchedulerHorizontalScroll',\n            'afterScroll',\n            'onInternalResize'\n        ]\n    };\n\n    //endregion\n\n    //region Init & destroy\n\n    construct(client, config) {\n        const me = this;\n\n        super.construct(client, config);\n\n        if (client.isVertical) {\n            client.ion({\n                renderRows : me.onUIReady,\n                thisObj    : me,\n                once       : true\n            });\n        }\n\n        // Add a unique cls used by subclasses to get custom styling of the elements rendered\n        // This makes sure that each class only removed its own elements from the DOM\n        me.cls = me.cls || `b-sch-${me.constructor.$$name.toLowerCase()}`;\n\n        me.baseSelector = `.${me.baseCls}.${me.cls}`;\n\n        // header elements are required for interaction\n        if (me.enableResizing) {\n            me.showHeaderElements = true;\n        }\n    }\n\n    doDestroy() {\n        const me = this;\n\n        me.detachListeners('timeAxisViewModel');\n        me.detachListeners('timeAxis');\n\n        me.clockTemplate?.destroy();\n        me.tip?.destroy();\n\n        me.drag?.destroy();\n        me.resize?.destroy();\n\n        super.doDestroy();\n    }\n\n    doDisable(disable) {\n        this.renderRanges();\n\n        super.doDisable(disable);\n    }\n\n    setupTimeAxisViewModelListeners() {\n        const me = this;\n\n        me.detachListeners('timeAxisViewModel');\n        me.detachListeners('timeAxis');\n\n        me.client.timeAxisViewModel.ion({\n            name    : 'timeAxisViewModel',\n            update  : 'onTimeAxisViewModelUpdate',\n            thisObj : me\n        });\n\n        me.client.timeAxis.ion({\n            name          : 'timeAxis',\n            includeChange : 'renderRanges',\n            thisObj       : me\n        });\n\n        me.updateLineBuffer();\n    }\n\n    onUIReady() {\n        const\n            me         = this,\n            { client } = me;\n\n        // If timeAxisViewModel is swapped, re-setup listeners to new instance\n        client.ion({\n            timeAxisViewModelChange : me.setupTimeAxisViewModelListeners,\n            thisObj                 : me\n        });\n\n        me.setupTimeAxisViewModelListeners();\n\n        if (!client.hideHeaders) {\n            if (me.headerContainerElement) {\n                EventHelper.on({\n                    click       : me.onTimeRangeClick,\n                    dblclick    : me.onTimeRangeClick,\n                    contextmenu : me.onTimeRangeClick,\n                    delegate    : me.baseSelector,\n                    element     : me.headerContainerElement,\n                    thisObj     : me\n                });\n            }\n\n            if (me.enableResizing) {\n\n                me.drag = DragHelper.new({\n                    name               : 'rangeDrag',\n                    lockX              : client.isVertical,\n                    lockY              : client.isHorizontal,\n                    constrain          : true,\n                    outerElement       : me.headerContainerElement,\n                    targetSelector     : `${me.baseSelector}`,\n                    isElementDraggable : (el, event) => !client.readOnly && me.isElementDraggable(el, event),\n                    rtlSource          : client,\n\n                    internalListeners : {\n                        dragstart : 'onDragStart',\n                        drag      : 'onDrag',\n                        drop      : 'onDrop',\n                        reset     : 'onDragReset',\n                        abort     : 'onInvalidDrop',\n                        thisObj   : me\n                    }\n                }, me.dragHelperConfig);\n\n                me.resize = ResizeHelper.new({\n                    direction          : client.mode,\n                    targetSelector     : `${me.baseSelector}.b-sch-range`,\n                    outerElement       : me.headerContainerElement,\n                    isElementResizable : (el, event) => !el.matches('.b-dragging,.b-readonly') && !event.target.matches('.b-fa'),\n                    internalListeners  : {\n                        resizestart : 'onResizeStart',\n                        resizing    : 'onResizeDrag',\n                        resize      : 'onResize',\n                        cancel      : 'onInvalidResize',\n                        reset       : 'onResizeReset',\n                        thisObj     : me\n                    }\n                }, me.resizeHelperConfig);\n            }\n        }\n\n        me.renderRanges();\n\n        if (me.tooltipTemplate) {\n            me.hoverTooltip = new Tooltip({\n                forElement : me.headerContainerElement,\n                getHtml({ activeTarget }) {\n                    const timeRange = me.resolveTimeRangeRecord(activeTarget);\n\n                    return me.tooltipTemplate({ timeRange });\n                },\n                forSelector : '.' + me.baseCls + (me.cls ? '.' + me.cls : '')\n            });\n        }\n    }\n\n    //endregion\n\n    //region Draw\n\n    refresh() {\n        this._timeRanges = null;\n        this.renderRanges();\n    }\n\n    getDOMConfig(startDate, endDate) {\n        const\n            me            = this,\n            bodyConfigs   = [],\n            headerConfigs = [];\n\n        if (!me.disabled) {\n            // clear label rotation map cache here, used to prevent height calculations for every timeRange entry to\n            // speed up using recurrences\n            me._labelRotationMap = {};\n\n            for (const range of me.timeRanges) {\n                const result = me.renderRange(range, startDate, endDate);\n                if (result) {\n                    bodyConfigs.push(result.bodyConfig);\n                    headerConfigs.push(result.headerConfig);\n                }\n            }\n        }\n\n        return [bodyConfigs, headerConfigs];\n    }\n\n    renderRanges() {\n        const\n            me                   = this,\n            { client }           = me,\n            { foregroundCanvas } = client;\n\n        // Scheduler/Gantt might not yet be rendered\n        if (foregroundCanvas && client.isPainted && !client.timeAxisSubGrid.collapsed) {\n            const\n                { headerContainerElement }   = me,\n                updatedBodyElements          = [],\n                [bodyConfigs, headerConfigs] = me.getDOMConfig();\n\n            if (!me.bodyCanvas) {\n                me.bodyCanvas = DomHelper.createElement({\n                    className     : `b-timeranges-canvas ${me.cls}-canvas`,\n                    parent        : foregroundCanvas,\n                    retainElement : true\n                });\n            }\n\n            DomSync.sync({\n                targetElement : me.bodyCanvas,\n                childrenOnly  : true,\n                domConfig     : {\n                    children    : bodyConfigs,\n                    syncOptions : {\n                        releaseThreshold : 0,\n                        syncIdField      : 'id'\n                    }\n                },\n                callback : me.showHeaderElements ? null : ({\n                    targetElement,\n                    action\n                }) => {\n                    // Might need to rotate label when not showing header elements\n                    if (action === 'reuseElement' || action === 'newElement' || action === 'reuseOwnElement') {\n                        // Collect all here, to not force reflows in the middle of syncing\n                        updatedBodyElements.push(targetElement);\n                    }\n                }\n            });\n\n            if (me.showHeaderElements && !me.headerCanvas) {\n                me.headerCanvas = DomHelper.createElement({\n                    className     : `${me.cls}-canvas`,\n                    parent        : headerContainerElement,\n                    retainElement : true\n                });\n            }\n\n            if (me.headerCanvas) {\n                DomSync.sync({\n                    targetElement : me.headerCanvas,\n                    childrenOnly  : true,\n                    domConfig     : {\n                        children    : headerConfigs,\n                        syncOptions : {\n                            releaseThreshold : 0,\n                            syncIdField      : 'id'\n                        }\n                    }\n                });\n            }\n\n            // Rotate labels last, to not force reflows. First check if rotation is needed\n            for (const bodyElement of updatedBodyElements) {\n                me.cacheRotation(bodyElement.elementData.timeRange, bodyElement);\n            }\n\n            // Then apply rotation\n            for (const bodyElement of updatedBodyElements) {\n                me.applyRotation(bodyElement.elementData.timeRange, bodyElement);\n            }\n        }\n    }\n\n    // Implement in subclasses\n    get timeRanges() {\n        return [];\n    }\n\n    /**\n     * Based on this method result the feature decides whether the provided range should\n     * be rendered or not.\n     * The method checks that the range intersects the current viewport.\n     *\n     * Override the method to implement your custom range rendering vetoing logic.\n     * @param {Scheduler.model.TimeSpan} range Range to render.\n     * @param {Date} [startDate] Specifies view start date. Defaults to view visible range start\n     * @param {Date} [endDate] Specifies view end date. Defaults to view visible range end\n     * @returns {Boolean} `true` if the range should be rendered and `false` otherwise.\n     */\n    shouldRenderRange(\n        range,\n        startDate = this.client.visibleDateRange.startDate,\n        endDate   = this.client.visibleDateRange.endDate\n    ) {\n        const\n            { timeAxis }                                             = this.client,\n            { startDate : rangeStart, endDate : rangeEnd, duration } = range;\n\n        return Boolean(rangeStart && (timeAxis.isContinuous || timeAxis.isTimeSpanInAxis(range)) && DateHelper.intersectSpans(\n            startDate,\n            endDate,\n            rangeStart,\n            // Lines are included longer, to make sure label does not disappear\n            duration ? rangeEnd : DateHelper.add(rangeStart, this._lineBufferDurationMS)\n        ));\n    }\n\n    getRangeDomConfig(timeRange, minDate, maxDate, relativeTo = 0) {\n        const\n            me         = this,\n            { client } = me,\n            { rtl }    = client,\n            startPos   = client.getCoordinateFromDate(DateHelper.max(timeRange.startDate, minDate), {\n                respectExclusion : true\n            }) - relativeTo,\n            endPos     = timeRange.endDate ? client.getCoordinateFromDate(DateHelper.min(timeRange.endDate, maxDate), {\n                respectExclusion : true,\n                isEnd            : true\n            }) - relativeTo : startPos,\n            size       = Math.abs(endPos - startPos),\n            isRange    = size > 0,\n            translateX = rtl ? `calc(${startPos}px - 100%)` : `${startPos}px`;\n\n        return {\n            className : {\n                [me.baseCls]     : 1,\n                [me.cls]         : me.cls,\n                [me.rangeCls]    : isRange,\n                [me.lineCls]     : !isRange,\n                [timeRange.cls]  : timeRange.cls,\n                'b-narrow-range' : isRange && size < me.narrowThreshold,\n                'b-readonly'     : timeRange.readOnly,\n                'b-rtl'          : rtl\n            },\n            dataset : {\n                id : timeRange.id\n            },\n            elementData : {\n                timeRange\n            },\n            style : client.isVertical\n                ? `transform: translateY(${translateX}); ${isRange ? `height:${size}px` : ''};`\n                : `transform: translateX(${translateX}); ${isRange ? `width:${size}px` : ''};`\n        };\n    }\n\n    renderRange(timeRange, startDate, endDate) {\n        const\n            me           = this,\n            { client }   = me,\n            { timeAxis } = client;\n\n        if (me.shouldRenderRange(timeRange, startDate, endDate) && timeAxis.startDate) {\n            const\n                config     = me.getRangeDomConfig(timeRange, timeAxis.startDate, timeAxis.endDate),\n                icon       = timeRange.iconCls && StringHelper.xss`<i class=\"${timeRange.iconCls}\"></i>`,\n                name       = timeRange.name && StringHelper.encodeHtml(timeRange.name),\n                labelTpl   = (name || icon) ? `<label>${icon || ''}${name || '&nbsp;'}</label>` : '',\n                bodyConfig = {\n                    ...config,\n                    style : config.style + (timeRange.style || ''),\n                    html  : me.bodyRenderer ? me.bodyRenderer({ timeRange }) : (me.showHeaderElements && !me.showLabelInBody ? '' : labelTpl)\n                };\n\n            let headerConfig;\n\n            if (me.showHeaderElements) {\n                headerConfig = {\n                    ...config,\n                    html : (me.headerRenderer ? me.headerRenderer({ timeRange }) : (me.showLabelInBody ? '' : labelTpl))\n                };\n            }\n\n            return { bodyConfig, headerConfig };\n        }\n    }\n\n    // Cache label rotation to not have to calculate for each occurrence when using recurring timeranges\n    cacheRotation(range, bodyElement) {\n        // Lines have no label. Do not check label content to do not force DOM layout!\n        if ((!range.iconCls && !range.name) || !range.duration) {\n            return;\n        }\n\n        const label = bodyElement.firstElementChild;\n\n        if (label && !range.recurringTimeSpan) {\n            this._labelRotationMap[range.id] = this.client.isVertical\n                ? label.offsetHeight < bodyElement.offsetHeight\n                : label.offsetWidth > bodyElement.offsetWidth;\n        }\n    }\n\n    applyRotation(range, bodyElement) {\n        const rotate = this._labelRotationMap[range.recurringTimeSpan?.id ?? range.id];\n\n        bodyElement.firstElementChild?.classList.toggle('b-vertical', Boolean(rotate));\n    }\n\n    getBodyElementByRecord(idOrRecord) {\n        const id = typeof idOrRecord === 'string' ? idOrRecord : idOrRecord?.id;\n\n        return id != null && DomSync.getChild(this.bodyCanvas, id);\n    }\n\n    // Implement in subclasses\n    resolveTimeRangeRecord(el) {}\n\n    get headerContainerElement() {\n        const\n            me                                       = this,\n            { isVertical, timeView, timeAxisColumn } = me.client;\n\n        if (!me._headerContainerElement) {\n            // Render into the subGrid´s header element or the vertical timeaxis depending on mode\n            if (isVertical && timeView.element) {\n                me._headerContainerElement = timeView.element.parentElement;\n            }\n            else if (!isVertical) {\n                me._headerContainerElement = timeAxisColumn.element;\n            }\n        }\n\n        return me._headerContainerElement;\n    }\n\n    //endregion\n\n    //region Settings\n\n    get showHeaderElements() {\n        return !this.client.hideHeaders && this._showHeaderElements;\n    }\n\n    updateShowHeaderElements(show) {\n        const { client } = this;\n\n        if (!this.isConfiguring) {\n            client.element.classList.toggle('b-sch-timeranges-with-headerelements', Boolean(show));\n\n            this.renderRanges();\n        }\n    }\n\n    //endregion\n\n    //region Menu items\n\n    /**\n     * Adds menu items for the context menu, and may mutate the menu configuration.\n     * @param {Object} options Contains menu items and extra data retrieved from the menu target.\n     * @param {Grid.column.Column} options.column Column for which the menu will be shown\n     * @param {Object<String,MenuItemConfig|Boolean|null>} options.items A named object to describe menu items\n     * @internal\n     */\n    populateTimeAxisHeaderMenu({ column, items }) {}\n\n    //endregion\n\n    //region Events & hooks\n\n    onPaint({ firstPaint }) {\n        if (firstPaint && this.client.isHorizontal) {\n            this.onUIReady();\n        }\n    }\n\n    onSchedulerHorizontalScroll() {\n        // Don't need a refresh, ranges are already available. Just need to draw those now in view\n        this.client.isHorizontal && this.renderRanges();\n    }\n\n    afterScroll() {\n        this.client.isVertical && this.renderRanges();\n    }\n\n    updateLineBuffer() {\n        const { timeAxisViewModel } = this.client;\n        // Lines have no duration, but we want them to be visible longer for the label to not suddenly disappear.\n        // We use a 300px buffer for that, recalculated as an amount of ms\n        this._lineBufferDurationMS = timeAxisViewModel.getDateFromPosition(300) - timeAxisViewModel.getDateFromPosition(0);\n    }\n\n    onInternalResize(element, newWidth, newHeight, oldWidth, oldHeight) {\n        if (this.client.isVertical && oldHeight !== newHeight) {\n            this.renderRanges();\n        }\n    }\n\n    onTimeAxisViewModelUpdate() {\n        this.updateLineBuffer();\n\n        this.refresh();\n    }\n\n    onTimeRangeClick(event) {\n        const timeRangeRecord = this.resolveTimeRangeRecord(event.target);\n\n        this.client.trigger(`timeRangeHeader${StringHelper.capitalize(event.type)}`, { event, domEvent : event, timeRangeRecord });\n    }\n\n    //endregion\n\n    //region Drag drop\n\n    showTip(context) {\n        const me = this;\n\n        if (me.showTooltip) {\n            me.clockTemplate = new ClockTemplate({\n                scheduler : me.client\n            });\n\n            me.tip = new Tooltip(ObjectHelper.assign({\n                id                       : `${me.client.id}-time-range-tip`,\n                cls                      : 'b-interaction-tooltip',\n                align                    : 'b-t',\n                autoShow                 : true,\n                updateContentOnMouseMove : true,\n                forElement               : context.element,\n                getHtml                  : () => me.getTipHtml(context.record, context.element)\n            }, me.showTooltip));\n        }\n    }\n\n    destroyTip() {\n        if (this.tip) {\n            this.tip.destroy();\n            this.tip = null;\n        }\n    }\n\n    isElementDraggable(el) {\n        el = el.closest(this.baseSelector + ':not(.b-resizing):not(.b-readonly)');\n\n        return el && !el.classList.contains('b-over-resize-handle');\n    }\n\n    onDragStart({ context }) {\n        const { client, drag } = this;\n\n        if (client.isVertical) {\n            drag.minY = 0;\n            // Moving the range, you can drag the start marker down until the end of the range hits the time axis end\n            drag.maxY = client.timeAxisViewModel.totalSize - context.element.offsetHeight;\n            // Setting min/max for X makes drag right of the header valid, but visually still constrained vertically\n            drag.minX = 0;\n            drag.maxX = Number.MAX_SAFE_INTEGER;\n        }\n        else {\n            drag.minX = 0;\n            // Moving the range, you can drag the start marker right until the end of the range hits the time axis end\n            drag.maxX = client.timeAxisViewModel.totalSize - context.element.offsetWidth;\n            // Setting min/max for Y makes drag below header valid, but visually still constrained horizontally\n            drag.minY = 0;\n            drag.maxY = Number.MAX_SAFE_INTEGER;\n        }\n\n        client.element.classList.add('b-dragging-timerange');\n    }\n\n    onDrop({ context }) {\n        this.client.element.classList.remove('b-dragging-timerange');\n    }\n\n    onInvalidDrop() {\n        this.drag.reset();\n        this.client.element.classList.remove('b-dragging-timerange');\n\n        this.destroyTip();\n    }\n\n    updateDateIndicator({ startDate, endDate }) {\n        const\n            me             = this,\n            { tip }        = me,\n            endDateElement = tip.element.querySelector('.b-sch-tooltip-enddate');\n\n        me.clockTemplate.updateDateIndicator(tip.element, startDate);\n        endDateElement && me.clockTemplate.updateDateIndicator(endDateElement, endDate);\n    }\n\n    onDrag({ context }) {\n        const\n            me         = this,\n            { client } = me,\n            box        = Rectangle.from(context.element),\n            startPos   = box.getStart(client.rtl, client.isHorizontal),\n            endPos     = box.getEnd(client.rtl, client.isHorizontal),\n            startDate  = client.getDateFromCoordinate(startPos, 'round', false),\n            endDate    = client.getDateFromCoordinate(endPos, 'round', false);\n\n        me.updateDateIndicator({ startDate, endDate });\n    }\n\n    onDragReset() {}\n\n    // endregion\n\n    // region Resize\n\n    onResizeStart() {}\n\n    onResizeDrag() {}\n\n    onResize() {}\n\n    onInvalidResize() {}\n\n    onResizeReset() {}\n\n    //endregion\n\n    //region Tooltip\n\n    /**\n     * Generates the html to display in the tooltip during drag drop.\n     *\n     */\n    getTipHtml(record, element) {\n        const\n            me         = this,\n            { client } = me,\n            box        = Rectangle.from(element),\n            startPos   = box.getStart(client.rtl, client.isHorizontal),\n            endPos     = box.getEnd(client.rtl, client.isHorizontal),\n            startDate  = client.getDateFromCoordinate(startPos, 'round', false),\n            endDate    = record.endDate && client.getDateFromCoordinate(endPos, 'round', false),\n            startText  = client.getFormattedDate(startDate),\n            endText    = endDate && client.getFormattedEndDate(endDate, startDate);\n\n        return me.dragTipTemplate({\n            name           : record.name || '',\n            startDate,\n            endDate,\n            startText,\n            endText,\n            startClockHtml : me.clockTemplate.template({\n                date : startDate,\n                text : startText,\n                cls  : 'b-sch-tooltip-startdate'\n            }),\n            endClockHtml : endText && me.clockTemplate.template({\n                date : endDate,\n                text : endText,\n                cls  : 'b-sch-tooltip-enddate'\n            })\n        });\n    }\n\n    //endregion\n}\n","import DomHelper from '../../Core/helper/DomHelper.js';\nimport DomSync from '../../Core/helper/DomSync.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport Delayable from '../../Core/mixin/Delayable.js';\nimport AttachToProjectMixin from '../../Scheduler/data/mixin/AttachToProjectMixin.js';\n\n/**\n * @module Scheduler/feature/ColumnLines\n */\nconst emptyObject = Object.freeze({});\n\n/**\n * Displays column lines for ticks, with a different styling for major ticks (by default they are darker). If this\n * feature is disabled, no lines are shown. If it's enabled, line are shown for the tick level which is set in current\n * ViewPreset. Please see {@link Scheduler.preset.ViewPreset#field-columnLinesFor} config for details.\n *\n * The lines are drawn as divs, with only visible lines available in DOM. The color and style of the lines are\n * determined the css rules for `.b-column-line` and `.b-column-line-major`.\n *\n * For vertical mode, this features also draws vertical resource column lines if scheduler is configured with\n * `columnLines : true` (which is the default, see {@link Grid.view.GridBase#config-columnLines}).\n *\n * This feature is **enabled** by default\n *\n * @extends Core/mixin/InstancePlugin\n * @mixes Core/mixin/Delayable\n * @demo Scheduler/basic\n * @inlineexample Scheduler/feature/ColumnLines.js\n * @classtype columnLines\n * @feature\n */\nexport default class ColumnLines extends InstancePlugin.mixin(AttachToProjectMixin, Delayable) {\n    //region Config\n\n    static get $name() {\n        return 'ColumnLines';\n    }\n\n    static get delayable() {\n        return {\n            refresh : {\n                type              : 'raf',\n                cancelOutstanding : true\n            }\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            after : ['render', 'updateCanvasSize', 'onVisibleDateRangeChange', 'onVisibleResourceRangeChange']\n        };\n    }\n\n    //endregion\n\n    //region Init & destroy\n\n    construct(client, config) {\n        client.useBackgroundCanvas = true;\n\n        super.construct(client, config);\n    }\n\n    attachToResourceStore(resourceStore) {\n        const { client } = this;\n\n        super.attachToResourceStore(resourceStore);\n\n        if (client.isVertical) {\n            client.resourceStore.ion({\n                name : 'resourceStore',\n                group({ groupers }) {\n                    if (groupers.length === 0) {\n                        this.refresh();\n                    }\n                },\n                thisObj : this\n            });\n        }\n    }\n\n    doDisable(disable) {\n        super.doDisable(disable);\n\n        if (!this.isConfiguring) {\n            this.refresh();\n        }\n    }\n\n    //endregion\n\n    //region Draw\n\n    /**\n     * Draw lines when scheduler/gantt is rendered.\n     * @private\n     */\n    render() {\n        this.refresh();\n    }\n\n    getColumnLinesDOMConfig(startDate, endDate) {\n        const\n            me               = this,\n            { client }       = me,\n            { rtl }          = client,\n            m                = rtl ? -1 : 1,\n            {\n                timeAxisViewModel,\n                isHorizontal,\n                resourceStore,\n                variableColumnWidths\n            }                = client,\n            { columnConfig } = timeAxisViewModel;\n\n        const\n            linesForLevel      = timeAxisViewModel.columnLinesFor,\n            majorLinesForLevel = Math.max(linesForLevel - 1, 0),\n            start              = startDate.getTime(),\n            end                = endDate.getTime(),\n            domConfigs         = [],\n            dates              = new Set(),\n            dimension          = isHorizontal ? 'X' : 'Y';\n\n        if (!me.disabled) {\n            const addLineConfig = (tick, isMajor) => {\n                const tickStart = tick.start.getTime();\n                // Only start of tick matters.\n                // Each tick has an exact calculated start position along the time axis\n                // and carries a border on its left, so column lines follow from\n                // tick 1 (zero-based) onwards.\n                if (tickStart > start && tickStart < end && !dates.has(tickStart)) {\n                    dates.add(tickStart);\n                    domConfigs.push({\n                        role      : 'presentation',\n                        className : isMajor ? 'b-column-line-major' : 'b-column-line',\n                        style     : {\n                            transform : `translate${dimension}(${tick.coord * m}px)`\n                        },\n                        dataset : {\n                            line : isMajor ? `major-${tick.index}` : `line-${tick.index}`\n                        }\n                    });\n                }\n            };\n\n            // Collect configs for major lines\n            if (linesForLevel !== majorLinesForLevel) {\n                for (let i = 1; i <= columnConfig[majorLinesForLevel].length - 1; i++) {\n                    addLineConfig(columnConfig[majorLinesForLevel][i], true);\n                }\n            }\n\n            // And normal lines, skipping dates already occupied by major lines\n            for (let i = 1; i <= columnConfig[linesForLevel].length - 1; i++) {\n                addLineConfig(columnConfig[linesForLevel][i], false);\n            }\n\n            // Add vertical resource column lines, if grid is configured to show column lines\n            if (!isHorizontal && client.columnLines) {\n                const\n                    { columnWidth } = client.resourceColumns;\n                let {\n                    first : firstResource,\n                    last  : lastResource\n                }               = client.currentOrientation.getResourceRange(true);\n\n                let nbrGroupHeaders = 0;\n\n                if (firstResource > -1) {\n                    for (let i = firstResource; i < lastResource + 1; i++) {\n                        const\n                            resourceRecord = resourceStore.getAt(i);\n\n                        // Only add lines for group children\n                        if (resourceRecord.isGroupHeader) {\n                            lastResource++;\n                            nbrGroupHeaders++;\n                            continue;\n                        }\n\n                        const\n                            instanceMeta = resourceRecord.instanceMeta(resourceStore),\n                            left         = variableColumnWidths ? instanceMeta.insetStart + resourceRecord.columnWidth - 1 : (i - nbrGroupHeaders + 1) * columnWidth - 1;\n\n                        domConfigs.push({\n                            className : {\n                                'b-column-line'            : 1,\n                                'b-resource-column-line'   : 1,\n                                'b-resource-group-divider' : resourceStore.isGrouped && instanceMeta.groupParent?.groupChildren[instanceMeta.groupParent?.groupChildren.length - 1] === resourceRecord\n                            },\n                            style : {\n                                transform : `translateX(${left * m}px)`\n                            },\n                            dataset : {\n                                line : `resource-${i}`\n                            }\n                        });\n                    }\n                }\n            }\n        }\n\n        return domConfigs;\n    }\n\n    /**\n     * Draw column lines that are in view\n     * @private\n     */\n    refresh() {\n        const\n            me                     = this,\n            { client }             = me,\n            { timeAxis }           = client,\n            { startDate, endDate } = client.visibleDateRange || emptyObject,\n            axisStart              = timeAxis.startDate;\n\n        // Early bailout for timeaxis without start date or when starting with schedule collapsed\n        if (!axisStart || !startDate || me.client.timeAxisSubGrid.collapsed) {\n            return;\n        }\n\n        if (!me.element) {\n            me.element = DomHelper.createElement({\n                parent    : client.backgroundCanvas,\n                className : 'b-column-lines-canvas'\n            });\n        }\n\n        const domConfigs = me.getColumnLinesDOMConfig(startDate, endDate);\n\n        DomSync.sync({\n            targetElement : me.element,\n            onlyChildren  : true,\n            domConfig     : {\n                children    : domConfigs,\n                syncOptions : {\n                    // When zooming in and out we risk getting a lot of released lines if we do not limit it\n                    releaseThreshold : 4\n                }\n            },\n            syncIdField : 'line'\n        });\n    }\n\n    //endregion\n\n    //region Events\n\n    // Called when visible date range changes, for example from zooming, scrolling, resizing\n    onVisibleDateRangeChange() {\n        this.refresh();\n    }\n\n    // Called when visible resource range changes, for example on scroll and resize\n    onVisibleResourceRangeChange({ firstResource, lastResource }) {\n        this.refresh();\n    }\n\n    updateCanvasSize() {\n        this.refresh();\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(ColumnLines, true, ['Scheduler', 'Gantt', 'TimelineHistogram']);\n","import Base from '../../../Core/Base.js';\nimport DomHelper from '../../../Core/helper/DomHelper.js';\nimport Objects from '../../../Core/helper/util/Objects.js';\nimport Rectangle from '../../../Core/helper/util/Rectangle.js';\nimport Tooltip from '../../../Core/widget/Tooltip.js';\nimport EventHelper from '../../../Core/helper/EventHelper.js';\nimport DependencyBaseModel from '../../model/DependencyBaseModel.js';\nimport StringHelper from '../../../Core/helper/StringHelper.js';\n\n/**\n * @module Scheduler/feature/mixin/DependencyCreation\n */\n\n// <remove-on-release>\n// TODO: refactor this class using StateChart utility to be implemented in Core/util/StateChart.js or XState library if allowed to be used\n// </remove-on-release>\n\n/**\n * Mixin for Dependencies feature that handles dependency creation (drag & drop from terminals which are shown on hover).\n * Requires {@link Core.mixin.Delayable} to be mixed in alongside.\n *\n * @mixin\n */\nexport default Target => class DependencyCreation extends (Target || Base) {\n    static get $name() {\n        return 'DependencyCreation';\n    }\n\n    //region Config\n\n    static get defaultConfig() {\n        return {\n            /**\n             * `false` to require a drop on a target event bar side circle to define the dependency type.\n             * If dropped on the event bar, the `defaultValue` of the DependencyModel `type` field will be used to\n             * determine the target task side.\n             *\n             * @member {Boolean} allowDropOnEventBar\n             */\n            /**\n             * `false` to require a drop on a target event bar side circle to define the dependency type.\n             * If dropped on the event bar, the `defaultValue` of the DependencyModel `type` field will be used to\n             * determine the target task side.\n             *\n             * @config {Boolean}\n             * @default\n             */\n            allowDropOnEventBar : true,\n\n            /**\n             * `false` to not show a tooltip while creating a dependency\n             * @config {Boolean}\n             * @default\n             */\n            showCreationTooltip : true,\n\n            /**\n             * A tooltip config object that will be applied to the dependency creation {@link Core.widget.Tooltip}\n             * @config {TooltipConfig}\n             */\n            creationTooltip : null,\n\n            /**\n             * A template function that will be called to generate the HTML contents of the dependency creation tooltip.\n             * You can return either an HTML string or a {@link DomConfig} object.\n             * @prp {Function} creationTooltipTemplate\n             * @param {Object} data Data about the dependency being created\n             * @param {Scheduler.model.TimeSpan} data.source The from event\n             * @param {Scheduler.model.TimeSpan} data.target The target event\n             * @param {String} data.fromSide The from side (start, end, top, bottom)\n             * @param {String} data.toSide The target side (start, end, top, bottom)\n             * @param {Boolean} data.valid The validity of the dependency\n             * @returns {String|DomConfig}\n             */\n\n            /**\n             * CSS class used for terminals\n             * @config {String}\n             * @default\n             */\n            terminalCls : 'b-sch-terminal',\n\n            /**\n             * Where (on event bar edges) to display terminals. The sides are `'start'`, `'top'`,\n             * `'end'` and `'bottom'`\n             * @config {String[]}\n             */\n            terminalSides : ['start', 'top', 'end', 'bottom'],\n\n            /**\n             * Set to `false` to not allow creating dependencies\n             * @config {Boolean}\n             * @default\n             */\n            allowCreate : true\n        };\n    }\n\n    //endregion\n\n    //region Init & destroy\n\n    construct(view, config) {\n        super.construct(view, config);\n\n        const me = this;\n\n        me.view = view;\n        me.eventName = view.scheduledEventName;\n\n        view.ion({ readOnly : () => me.updateCreateListeners() });\n\n        me.updateCreateListeners();\n\n        me.chain(view, 'onElementTouchMove', 'onElementTouchMove');\n    }\n\n    doDestroy() {\n        const me = this;\n\n        me.detachListeners('view');\n\n        me.creationData = null;\n\n        me.pointerUpMoveDetacher?.();\n        me.creationTooltip?.destroy();\n\n        super.doDestroy();\n    }\n\n    updateCreateListeners() {\n        const me = this;\n\n        if (!me.view) {\n            return;\n        }\n\n        me.detachListeners('view');\n\n        if (me.isCreateAllowed) {\n            me.view.ion({\n                name                          : 'view',\n                [`${me.eventName}mouseenter`] : 'onTimeSpanMouseEnter',\n                [`${me.eventName}mouseleave`] : 'onTimeSpanMouseLeave',\n                thisObj                       : me\n            });\n        }\n    }\n\n    set allowCreate(value) {\n        this._allowCreate = value;\n\n        this.updateCreateListeners();\n    }\n\n    get allowCreate() {\n        return this._allowCreate;\n    }\n\n    get isCreateAllowed() {\n        return this.allowCreate && !this.view.readOnly && !this.disabled;\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * Show terminals when mouse enters event/task element\n     * @private\n     */\n    onTimeSpanMouseEnter({\n        event, source, [`${this.eventName}Record`]: record, [`${this.eventName}Element`]: element\n    }) {\n        if (!record.isCreating && !record.readOnly && (!this.client.features.nestedEvents || record.parent.isRoot)) {\n            const\n                me               = this,\n                { creationData } = me,\n                eventBarElement  = DomHelper.down(element, source.eventInnerSelector);\n\n            // When we enter a different event than the one we started on\n            if (record !== creationData?.source) {\n                me.showTerminals(record, eventBarElement);\n\n                if (creationData && event.target.closest(me.client.eventSelector)) {\n                    creationData.timeSpanElement = eventBarElement;\n                    me.onOverTargetEventBar(event);\n                }\n            }\n        }\n    }\n\n    /**\n     * Hide terminals when mouse leaves event/task element\n     * @private\n     */\n    onTimeSpanMouseLeave(event) {\n        const\n            me               = this,\n            { creationData } = me,\n            element          = event[`${me.eventName}Element`],\n            timeSpanLeft     = DomHelper.down(element, me.view.eventInnerSelector),\n            target           = event.event?.relatedTarget,\n            timeSpanElement  = creationData?.timeSpanElement;\n\n        // Can happen when unhovering an occurrence during update\n        if (!target) {\n            return;\n        }\n\n        if (!creationData || !timeSpanElement || !target || !DomHelper.isDescendant(timeSpanElement, target)) {\n            // We cannot hide the terminals for non-trusted events because non-trusted means it's\n            // synthesized from a touchmove event and if the source element of a touchmove\n            // leaves the DOM, the touch gesture is ended.\n            if (event.event.isTrusted || (timeSpanLeft !== creationData?.sourceElement)) {\n                me.hideTerminals(element);\n            }\n        }\n\n        if (creationData && !creationData.finalizing && !target.closest(me.client.eventSelector)) {\n            creationData.timeSpanElement = null;\n            me.onOverNewTargetWhileCreating(undefined, undefined, event);\n        }\n    }\n\n    onTerminalMouseOver(event) {\n        if (this.creationData) {\n            this.onOverTargetEventBar(event);\n        }\n    }\n\n    /**\n     * Remove hover styling when mouse leaves terminal. Also hides terminals when mouse leaves one it and not creating a\n     * dependency.\n     * @private\n     */\n    onTerminalMouseOut(event) {\n        const\n            me               = this,\n            { creationData } = me,\n            eventElement     = event.target.closest(me.view.eventSelector);\n\n        if (eventElement && (!me.showingTerminalsFor || !DomHelper.isDescendant(eventElement, me.showingTerminalsFor)) && (!creationData || eventElement !== creationData.timeSpanElement)) {\n            me.hideTerminals(eventElement);\n            me.view.unhover(eventElement, event);\n        }\n\n        if (creationData) {\n            me.onOverNewTargetWhileCreating(event.relatedTarget, creationData.target, event);\n        }\n    }\n\n    /**\n     * Start creating a dependency when mouse is pressed over terminal\n     * @private\n     */\n    onTerminalPointerDown(event) {\n        const me = this;\n\n        // ignore non-left button clicks\n        if (event.button === 0 && !me.creationData) {\n            const\n                scheduler              = me.view,\n                timeAxisSubGridElement = scheduler.timeAxisSubGridElement,\n                terminalNode           = event.target,\n                timeSpanElement        = terminalNode.closest(scheduler.eventInnerSelector),\n                viewBounds             = Rectangle.from(scheduler.element, document.body);\n\n            event.stopPropagation();\n\n            me.creationData = {\n                sourceElement  : timeSpanElement,\n                source         : scheduler.resolveTimeSpanRecord(timeSpanElement).$original,\n                fromSide       : terminalNode.dataset.side,\n                startPoint     : Rectangle.from(terminalNode, timeAxisSubGridElement).center,\n                startX         : event.pageX - viewBounds.x + scheduler.scrollLeft,\n                startY         : event.pageY - viewBounds.y + scheduler.scrollTop,\n                valid          : false,\n                sourceResource : scheduler.resolveResourceRecord?.(event),\n                tooltip        : me.creationTooltip\n            };\n\n            me.pointerUpMoveDetacher = EventHelper.on({\n                pointerup : {\n                    element : scheduler.element.getRootNode(),\n                    handler : 'onMouseUp',\n                    passive : false\n                },\n                pointermove : {\n                    element : timeAxisSubGridElement,\n                    handler : 'onMouseMove',\n                    passive : false\n                },\n                thisObj : me\n            });\n\n            // If root element is anything but Document (it could be Document Fragment or regular Node in case of LWC)\n            // then we should also add listener to document to cancel dependency creation\n            me.documentPointerUpDetacher = EventHelper.on({\n                pointerup : {\n                    element : document,\n                    handler : 'onDocumentMouseUp'\n                },\n                keydown : {\n                    element : document,\n                    handler : ({ key }) => {\n                        if (key === 'Escape') {\n                            me.abort();\n                        }\n                    }\n                },\n                thisObj : me\n            });\n        }\n    }\n\n    onElementTouchMove(event) {\n        super.onElementTouchMove?.(event);\n\n        if (this.connector) {\n            // Prevent touch scrolling while dragging a connector\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * Update connector line showing dependency between source and target when mouse moves. Also check if mouse is over\n     * a valid target terminal\n     * @private\n     */\n    onMouseMove(event) {\n        const\n            me                            = this,\n            { view, creationData : data } = me,\n            viewBounds                    = Rectangle.from(view.element, document.body),\n            deltaX                        = (event.pageX - viewBounds.x + view.scrollLeft) - data.startX,\n            deltaY                        = (event.pageY - viewBounds.y + view.scrollTop) - data.startY,\n            length                        = Math.round(Math.sqrt(deltaX * deltaX + deltaY * deltaY)) - 3,\n            angle                         = Math.atan2(deltaY, deltaX);\n\n        let { connector } = me;\n\n        if (!connector) {\n            if (me.onRequestDragCreate(event) === false) {\n                return;\n            }\n            connector = me.connector;\n        }\n\n        connector.style.width     = `${length}px`;\n        connector.style.transform = `rotate(${angle}rad)`;\n\n        me.lastMouseMoveEvent = event;\n    }\n\n    onRequestDragCreate(event) {\n        const\n            me                            = this,\n            { view, creationData : data } = me;\n\n        /**\n         * Fired on the owning Scheduler/Gantt before a dependency creation drag operation starts. Return `false` to\n         * prevent it\n         * @event beforeDependencyCreateDrag\n         * @on-owner\n         * @param {Scheduler.model.TimeSpan} source The source task\n         */\n        if (view.trigger('beforeDependencyCreateDrag', { data, source : data.source }) === false) {\n            me.abort();\n            return false;\n        }\n\n        view.element.classList.add('b-creating-dependency');\n\n        me.createConnector(data.startPoint.x, data.startPoint.y);\n\n        /**\n         * Fired on the owning Scheduler/Gantt when a dependency creation drag operation starts\n         * @event dependencyCreateDragStart\n         * @on-owner\n         * @param {Scheduler.model.TimeSpan} source The source task\n         */\n        view.trigger('dependencyCreateDragStart', { data, source : data.source  });\n\n        if (me.showCreationTooltip) {\n            const tip = me.creationTooltip || (me.creationTooltip = me.createDragTooltip());\n\n            me.creationData.tooltip = tip;\n\n            tip.disabled = false;\n            tip.show();\n\n            tip.onMouseMove(event);\n        }\n\n        view.scrollManager.startMonitoring({\n            scrollables : [\n                {\n                    element   : view.timeAxisSubGrid.scrollable.element,\n                    direction : 'horizontal'\n                },\n                {\n                    element   : view.scrollable.element,\n                    direction : 'vertical'\n                }\n            ],\n            callback : () => me.lastMouseMoveEvent && me.onMouseMove(me.lastMouseMoveEvent)\n        });\n    }\n\n    onOverTargetEventBar(event) {\n        const\n            me                                                = this,\n            { view, creationData: data, allowDropOnEventBar } = me,\n            { target }                                        = event;\n\n        let overEventRecord = view.resolveTimeSpanRecord(target).$original;\n\n        // use main event if a segment resolved\n        if (overEventRecord?.isEventSegment) {\n            overEventRecord = overEventRecord.event;\n        }\n\n        if (Objects.isPromise(data.valid) || (!allowDropOnEventBar && !target.classList.contains(me.terminalCls))) {\n            return;\n        }\n\n        if (overEventRecord !== data.source) {\n            me.onOverNewTargetWhileCreating(target, overEventRecord, event);\n        }\n    }\n\n    async onOverNewTargetWhileCreating(targetElement, overEventRecord, event) {\n        const\n            me                                                            = this,\n            { view, creationData : data, allowDropOnEventBar, connector } = me;\n\n        if (Objects.isPromise(data.valid)) {\n            return;\n        }\n\n        // stop target updating if dependency finalizing in progress\n        if (data.finalizing) {\n            return;\n        }\n\n        // Connector might not exist at this point because `pointerout` on the terminal might fire before `pointermove`\n        // on the time axis subgrid. This is difficult to reproduce, so shouldn't be triggered often.\n        // https://github.com/bryntum/support/issues/3116#issuecomment-894256799\n        if (!connector) {\n            return;\n        }\n\n        connector.classList.remove('b-valid', 'b-invalid');\n        data.timeSpanElement && DomHelper.removeClsGlobally(data.timeSpanElement, 'b-sch-terminal-active');\n\n        if (!overEventRecord || overEventRecord === data.source || (!allowDropOnEventBar && !targetElement.classList.contains(me.terminalCls))) {\n            data.target = data.toSide = null;\n            data.valid = false;\n            connector.classList.add('b-invalid');\n        }\n        else {\n            const\n                target     = data.target = overEventRecord,\n                { source } = data;\n\n            let toSide  = targetElement.dataset.side;\n\n            // If we allow dropping anywhere on a task, resolve target side based on the default type of the\n            // dependency model used\n            if (allowDropOnEventBar && !targetElement.classList.contains(me.terminalCls)) {\n                toSide = me.getTargetSideFromType(me.dependencyStore.modelClass.fieldMap.type.defaultValue || DependencyBaseModel.Type.EndToStart);\n            }\n\n            if (view.resolveResourceRecord) {\n                data.targetResource = view.resolveResourceRecord(event);\n            }\n\n            let dependencyType;\n\n            data.toSide = toSide;\n\n            const\n                fromSide       = data.fromSide,\n                updateValidity = valid => {\n                    if (!me.isDestroyed) {\n                        data.valid = valid;\n                        targetElement.classList.add(valid ? 'b-valid' : 'b-invalid');\n                        connector.classList.add(valid ? 'b-valid' : 'b-invalid');\n                        /**\n                         * Fired on the owning Scheduler/Gantt when asynchronous dependency validation completes\n                         * @event dependencyValidationComplete\n                         * @on-owner\n                         * @param {Scheduler.model.TimeSpan} source The source task\n                         * @param {Scheduler.model.TimeSpan} target The target task\n                         * @param {Number} dependencyType The dependency type, see {@link Scheduler.model.DependencyBaseModel#property-Type-static}\n                         */\n                        view.trigger('dependencyValidationComplete', {\n                            data,\n                            source,\n                            target,\n                            dependencyType\n                        });\n                    }\n                };\n\n            // NOTE: Top/Bottom sides are not taken into account due to\n            //       scheduler doesn't check for type value anyway, whereas\n            //       gantt will reject any other dependency types undefined in\n            //       DependencyBaseModel.Type enumeration.\n            switch (true) {\n                case fromSide === 'start' && toSide === 'start':\n                    dependencyType = DependencyBaseModel.Type.StartToStart;\n                    break;\n                case fromSide === 'start' && toSide === 'end':\n                    dependencyType = DependencyBaseModel.Type.StartToEnd;\n                    break;\n                case fromSide === 'end' && toSide === 'start':\n                    dependencyType = DependencyBaseModel.Type.EndToStart;\n                    break;\n                case fromSide === 'end' && toSide === 'end':\n                    dependencyType = DependencyBaseModel.Type.EndToEnd;\n                    break;\n            }\n\n            /**\n             * Fired on the owning Scheduler/Gantt when asynchronous dependency validation starts\n             * @event dependencyValidationStart\n             * @on-owner\n             * @param {Scheduler.model.TimeSpan} source The source task\n             * @param {Scheduler.model.TimeSpan} target The target task\n             * @param {Number} dependencyType The dependency type, see {@link Scheduler.model.DependencyBaseModel#property-Type-static}\n             */\n            view.trigger('dependencyValidationStart', {\n                data,\n                source,\n                target,\n                dependencyType\n            });\n\n            let valid = data.valid = me.dependencyStore.isValidDependency(source, target, dependencyType);\n\n            // Promise is returned when using the engine\n            if (Objects.isPromise(valid)) {\n                valid = await valid;\n                updateValidity(valid);\n            }\n            else {\n                updateValidity(valid);\n            }\n\n            const validityCls = valid ? 'b-valid' : 'b-invalid';\n            connector.classList.add(validityCls);\n            data.timeSpanElement?.querySelector(`.b-sch-terminal[data-side=${toSide}]`)?.classList.add('b-sch-terminal-active', validityCls);\n        }\n\n        me.updateCreationTooltip();\n    }\n\n    /**\n     * Create a new dependency if mouse release over valid terminal. Hides connector\n     * @private\n     */\n    async onMouseUp() {\n        const\n            me   = this,\n            data = me.creationData;\n\n        data.finalizing = true;\n        me.pointerUpMoveDetacher?.();\n\n        if (data.valid) {\n            /**\n             * Fired on the owning Scheduler/Gantt when a dependency drag creation operation is about to finalize\n             *\n             * @event beforeDependencyCreateFinalize\n             * @on-owner\n             * @preventable\n             * @async\n             * @param {Scheduler.model.TimeSpan} source The source task\n             * @param {Scheduler.model.TimeSpan} target The target task\n             * @param {'start'|'end'|'top'|'bottom'} fromSide The from side (start / end / top / bottom)\n             * @param {'start'|'end'|'top'|'bottom'} toSide The to side (start / end / top / bottom)\n             */\n            const result = await me.view.trigger('beforeDependencyCreateFinalize', data);\n\n            if (result === false) {\n                data.valid = false;\n            }\n            // Await any async validation logic before continuing\n            else if (Objects.isPromise(data.valid)) {\n                data.valid = await data.valid;\n            }\n\n            if (data.valid) {\n                let dependency = me.createDependency(data);\n\n                if (dependency !== null) {\n                    if (Objects.isPromise(dependency)) {\n                        dependency = await dependency;\n                    }\n\n                    data.dependency = dependency;\n\n                    /**\n                     * Fired on the owning Scheduler/Gantt when a dependency drag creation operation succeeds\n                     * @event dependencyCreateDrop\n                     * @on-owner\n                     * @param {Scheduler.model.TimeSpan} source The source task\n                     * @param {Scheduler.model.TimeSpan} target The target task\n                     * @param {Scheduler.model.DependencyBaseModel} dependency The created dependency\n                     */\n                    me.view.trigger('dependencyCreateDrop', { data, source : data.source, target : data.target, dependency });\n                    me.doAfterDependencyDrop(data);\n                }\n            }\n            else {\n                me.doAfterDependencyDrop(data);\n            }\n        }\n        else {\n            data.valid = false;\n            me.doAfterDependencyDrop(data);\n        }\n\n        me.abort();\n    }\n\n    doAfterDependencyDrop(data) {\n        /**\n         * Fired on the owning Scheduler/Gantt after a dependency drag creation operation finished, no matter to outcome\n         * @event afterDependencyCreateDrop\n         * @on-owner\n         * @param {Scheduler.model.TimeSpan} source The source task\n         * @param {Scheduler.model.TimeSpan} target The target task\n         * @param {Scheduler.model.DependencyBaseModel} dependency The created dependency\n         */\n        this.view.trigger('afterDependencyCreateDrop', {\n            data,\n            ...data\n        });\n    }\n\n    onDocumentMouseUp({ target }) {\n        if (!this.view.timeAxisSubGridElement.contains(target)) {\n            this.abort();\n        }\n    }\n\n    /**\n     * Aborts dependency creation, removes proxy and cleans up listeners\n     */\n    abort() {\n        const\n            me                     = this,\n            { view, creationData } = me;\n\n        // Remove terminals from source and target events.\n        if (creationData) {\n            const { source, sourceResource, target, targetResource } = creationData;\n\n            if (source) {\n                const el = view.getElementFromEventRecord(source, sourceResource);\n                if (el) {\n                    me.hideTerminals(el);\n                }\n            }\n            if (target) {\n                const el = view.getElementFromEventRecord(target, targetResource);\n                if (el) {\n                    me.hideTerminals(el);\n                }\n            }\n        }\n\n        if (me.creationTooltip) {\n            me.creationTooltip.disabled = true;\n        }\n\n        me.creationData = me.lastMouseMoveEvent = null;\n\n        me.pointerUpMoveDetacher?.();\n\n        me.documentPointerUpDetacher?.();\n\n        me.removeConnector();\n    }\n\n    //endregion\n\n    //region Connector\n\n    /**\n     * Creates a connector line that visualizes dependency source & target\n     * @private\n     */\n    createConnector(x, y) {\n        const\n            me       = this,\n            { view } = me;\n\n        me.clearTimeout(me.removeConnectorTimeout);\n        me.connector = DomHelper.createElement({\n            parent    : view.timeAxisSubGridElement,\n            className : `${me.baseCls}-connector`,\n            style     : `left:${x}px;top:${y}px`\n        });\n\n        view.element.classList.add('b-creating-dependency');\n    }\n\n    createDragTooltip() {\n        const\n            me       = this,\n            { view } = me;\n\n        return me.creationTooltip = Tooltip.new({\n            id             : `${view.id}-dependency-drag-tip`,\n            cls            : 'b-sch-dependency-creation-tooltip',\n            loadingMsg     : '',\n            anchorToTarget : false,\n            // Keep tip visible until drag drop operation is finalized\n            forElement     : view.timeAxisSubGridElement,\n            trackMouse     : true,\n            // Do not constrain at all, want it to be able to go outside of the viewport to not get in the way\n            constrainTo    : null,\n\n            header : {\n                dock : 'right'\n            },\n\n            internalListeners : {\n                // Show initial content immediately\n                beforeShow : 'updateCreationTooltip',\n                thisObj    : me\n            }\n        }, me.creationTooltip);\n    }\n\n    /**\n     * Remove connector\n     * @private\n     */\n    removeConnector() {\n        const\n            me                  = this,\n            { connector, view } = me;\n\n        if (connector) {\n            connector.classList.add('b-removing');\n            connector.style.width = '0';\n            me.removeConnectorTimeout = me.setTimeout(() => {\n                connector.remove();\n                me.connector = null;\n            }, 200);\n        }\n\n        view.element.classList.remove('b-creating-dependency');\n        me.creationTooltip && me.creationTooltip.hide();\n\n        view.scrollManager.stopMonitoring();\n    }\n\n    //endregion\n\n    //region Terminals\n\n    /**\n     * Show terminals for specified event at sides defined in #terminalSides.\n     * @param {Scheduler.model.TimeSpan} timeSpanRecord Event/task to show terminals for\n     * @param {HTMLElement} element Event/task element\n     */\n    showTerminals(timeSpanRecord, element) {\n        const me = this;\n\n        // Record not part of project is a transient record in a display store, not meant to be manipulated\n        if (!me.isCreateAllowed || !timeSpanRecord.project) {\n            return;\n        }\n\n        const\n            cls                 = me.terminalCls,\n            terminalsVisibleCls = `${cls}s-visible`;\n\n        // We operate on the event bar, not the wrap\n        element = DomHelper.down(element, me.view.eventInnerSelector);\n\n        // bail out if terminals already shown or if view is readonly\n        // do not draw new terminals if we are resizing event\n        if (!element.classList.contains(terminalsVisibleCls) && !me.view.element.classList.contains('b-resizing-event') && !me.view.readOnly) {\n            /**\n             * Fired on the owning Scheduler/Gantt before showing dependency terminals on a task or event. Return `false` to\n             * prevent it\n             * @event beforeShowTerminals\n             * @on-owner\n             * @param {Scheduler.model.TimeSpan} source The hovered task\n             */\n            if (me.client.trigger('beforeShowTerminals', { source : timeSpanRecord }) === false) {\n                return;\n            }\n\n            // create terminals for desired sides\n            me.terminalSides.forEach(side => {\n                // Allow code to use left for the start side and right for the end side\n                side = me.fixSide(side);\n\n                const terminal = DomHelper.createElement({\n                    parent    : element,\n                    className : `${cls} ${cls}-${side}`,\n                    dataset   : {\n                        side,\n                        feature : true\n                    }\n                });\n\n                terminal.detacher = EventHelper.on({\n                    element     : terminal,\n                    mouseover   : 'onTerminalMouseOver',\n                    mouseout    : 'onTerminalMouseOut',\n                    // Needs to be pointerdown to match DragHelper, otherwise will be preventing wrong event\n                    pointerdown : {\n                        handler : 'onTerminalPointerDown',\n                        capture : true\n                    },\n                    thisObj : me\n                });\n            });\n\n            element.classList.add(terminalsVisibleCls);\n            timeSpanRecord.internalCls.add(terminalsVisibleCls);\n\n            me.showingTerminalsFor = element;\n        }\n    }\n\n    fixSide(side) {\n        if (side === 'left') {\n            return 'start';\n        }\n        if (side === 'right') {\n            return 'end';\n        }\n        return side;\n    }\n\n    /**\n     * Hide terminals for specified event\n     * @param {HTMLElement} eventElement Event element\n     */\n    hideTerminals(eventElement) {\n        // remove all terminals\n        const\n            me                  = this,\n            eventParams         = me.client.getTimeSpanMouseEventParams(eventElement),\n            timeSpanRecord      = eventParams?.[`${me.eventName}Record`],\n            terminalsVisibleCls = `${me.terminalCls}s-visible`;\n\n        DomHelper.forEachSelector(eventElement, `.${me.terminalCls}`, terminal => {\n            terminal.detacher && terminal.detacher();\n            terminal.remove();\n        });\n\n        DomHelper.down(eventElement, me.view.eventInnerSelector).classList.remove(terminalsVisibleCls);\n        timeSpanRecord.internalCls.remove(terminalsVisibleCls);\n\n        me.showingTerminalsFor = null;\n    }\n\n    //endregion\n\n    //region Dependency creation\n\n    /**\n     * Create a new dependency from source terminal to target terminal\n     * @internal\n     */\n    createDependency(data) {\n        const\n            { source, target, fromSide, toSide } = data,\n            type                                 = (fromSide === 'start' ? 0 : 2) + (toSide === 'end' ? 1 : 0);\n\n        const newDependency = this.dependencyStore.add({\n            from : source.id,\n            to   : target.id,\n            type,\n            fromSide,\n            toSide\n        });\n\n        return newDependency !== null ? newDependency[0] : null;\n    }\n\n    getTargetSideFromType(type) {\n        if (type === DependencyBaseModel.Type.StartToStart || type === DependencyBaseModel.Type.EndToStart) {\n            return 'start';\n        }\n\n        return 'end';\n    }\n\n    //endregion\n\n    //region Tooltip\n\n    /**\n     * Update dependency creation tooltip\n     * @private\n     */\n    updateCreationTooltip() {\n        const\n            me            = this,\n            data          = me.creationData,\n            { valid }     = data,\n            tip           = me.creationTooltip,\n            { classList } = tip.element;\n\n        // Promise, when using engine\n        if (Objects.isPromise(valid)) {\n            classList.remove('b-invalid');\n            classList.add('b-checking');\n\n            return new Promise(resolve => valid.then(valid => {\n                data.valid = valid;\n\n                if (!tip.isDestroyed) {\n                    resolve(me.updateCreationTooltip());\n                }\n            }));\n        }\n\n        tip.html = me.creationTooltipTemplate(data);\n    }\n\n    creationTooltipTemplate(data) {\n        const\n            me                 = this,\n            { tooltip, valid } = data,\n            { classList }      = tooltip.element;\n\n        Object.assign(data, {\n            fromText : StringHelper.encodeHtml(data.source.name),\n            toText   : StringHelper.encodeHtml(data.target?.name ?? ''),\n            fromSide : data.fromSide,\n            toSide   : data.toSide || ''\n        });\n\n        let tipTitleIconClsSuffix,\n            tipTitleText;\n\n        classList.toggle('b-invalid', !valid);\n        classList.remove('b-checking');\n\n        // Valid\n        if (valid === true) {\n            tipTitleIconClsSuffix = 'valid';\n            tipTitleText          = me.L('L{Dependencies.valid}');\n        }\n        // Invalid\n        else {\n            tipTitleIconClsSuffix = 'invalid';\n            tipTitleText          = me.L('L{Dependencies.invalid}');\n        }\n\n        tooltip.title = `<i class=\"b-icon b-icon-${tipTitleIconClsSuffix}\"></i>${tipTitleText}`;\n\n        return {\n            children : [{\n                className : 'b-sch-dependency-tooltip',\n                children  : [\n                    { dataset : { ref : 'fromLabel' }, tag : 'label', text : me.L('L{Dependencies.from}') },\n                    { dataset : { ref : 'fromText' }, text : data.fromText },\n                    { dataset : { ref : 'fromBox' }, className : `b-sch-box b-${data.fromSide}` },\n                    { dataset : { ref : 'toLabel' }, tag : 'label', text : me.L('L{Dependencies.to}') },\n                    { dataset : { ref : 'toText' }, text : data.toText },\n                    { dataset : { ref : 'toBox' }, className : `b-sch-box b-${data.toSide}` }\n                ]\n            }]\n        };\n    }\n\n    //endregion\n\n    doDisable(disable) {\n        if (!this.isConfiguring) {\n            this.updateCreateListeners();\n        }\n\n        super.doDisable(disable);\n    }\n};\n","// <remove-on-release>\n// TODO: Consider basing on visible row count\n// </remove-on-release>\nconst ROWS_PER_CELL = 25;\n\n// Mixin that handles the dependency grid cache\n//\n// Grid cache explainer\n// ────────────────────\n// The purpose of the grid cache is to reduce the amount of dependencies we have to iterate over when drawing by\n// partitioning them into a virtual grid. With for example 10k deps we would have to iterate over all 10k on\n// each draw since any of them might be intersecting the view.\n//\n// The cells are horizontally based on ticks (50 per cell) and vertically on rows (also 50 per cell. Each cell\n// lists which dependencies intersect it. When drawing we only have to iterate over the dependencies for the\n// cells that intersect the viewport.\n//\n// The grid cache is populated when dependencies are drawn. Any change to deps, resources, events or assignments\n// clears the cache.\n//\n// The dependency drawn below will be included in the set that is considered for drawing if tickCell 0 or\n// tickCell 1 and rowCell 0 intersects the current view (it is thus represented twice in the grid cache)\n//\n//       tickCell 0           tickCell 1\n//       tick 0-49            tick 50-99\n//    ┌────────────────────┬─────────────────────┐\n// r r│0,0                 │1,0                  │\n// o o│     │              │                     │\n// w w│     │     !!!!!!!!!│!!!!!!!!!!!          │\n// C  │     │     ! View   │          !          │\n// e 0│     │     ! port   │          !          │\n// l -│     │     !        │          !          │\n// l 4│     └─────!────────┼──────────!────►     │\n// 0 9│           !        │          !          │\n//    ├────────────────────┼─────────────────────┤\n// r r│0,1        !        │1,1       !          │\n// o o│           !        │          !          │\n// w w│           !!!!!!!!!│!!!!!!!!!!!          │\n// C  │                    │                     │\n// e 5│                    │                     │\n// l 0│                    │                     │\n// l -│                    │                     │\n// 1 9│                    │                     │\n//   9└────────────────────┴─────────────────────┘\n//               uoᴉʇɐɹʇsnꞁꞁᴉ əɥɔɐɔ pᴉɹ⅁\nexport default Target => class DependencyGridCache extends Target {\n    static $name = 'DependencyGridCache';\n\n    gridCache = null;\n\n    // Dependencies that might intersect the current viewport and thus should be considered for drawing\n    getDependenciesToConsider(startMS, endMS, startIndex, endIndex) {\n        const\n            me            = this,\n            { gridCache } = me,\n            { timeAxis }  = me.client;\n\n        if (gridCache) {\n            const\n                dependencies = new Set(),\n                fromMSCell   = Math.floor((startMS - timeAxis.startMS) / me.MS_PER_CELL),\n                toMSCell     = Math.floor((endMS - timeAxis.startMS) / me.MS_PER_CELL),\n                fromRowCell  = Math.floor(startIndex / ROWS_PER_CELL),\n                toRowCell    = Math.floor(endIndex / ROWS_PER_CELL);\n\n            for (let i = fromMSCell; i <= toMSCell; i++) {\n                const msCell = gridCache[i];\n                if (msCell) {\n                    for (let j = fromRowCell; j <= toRowCell; j++) {\n                        const intersectingDependencies = msCell[j];\n                        if (intersectingDependencies) {\n                            for (let i = 0; i < intersectingDependencies.length; i++) {\n                                dependencies.add(intersectingDependencies[i]);\n                            }\n                        }\n                    }\n                }\n            }\n\n            return dependencies;\n        }\n    }\n\n    // A (single) dependency was drawn, we might want to store info about it in the grid cache\n    afterDrawDependency(dependency, fromIndex, toIndex, fromDateMS, toDateMS) {\n        const me = this;\n\n        if (me.constructGridCache) {\n            const\n                { MS_PER_CELL } = me,\n                {\n                    startMS : timeAxisStartMS,\n                    endMS   : timeAxisEndMS\n                }               = me.client.timeAxis,\n                timeAxisCells   = Math.ceil((timeAxisEndMS - timeAxisStartMS) / MS_PER_CELL),\n                fromMSCell      = Math.floor((fromDateMS - timeAxisStartMS) / MS_PER_CELL),\n                toMSCell        = Math.floor((toDateMS - timeAxisStartMS) / MS_PER_CELL),\n                fromRowCell     = Math.floor(fromIndex / ROWS_PER_CELL),\n                toRowCell       = Math.floor(toIndex / ROWS_PER_CELL),\n                firstMSCell     = Math.min(fromMSCell, toMSCell),\n                lastMSCell      = Math.max(fromMSCell, toMSCell),\n                firstRowCell    = Math.min(fromRowCell, toRowCell),\n                lastRowCell     = Math.max(fromRowCell, toRowCell);\n\n            // Ignore dependencies fully outside of the time axis\n            if ((firstMSCell < 0 && lastMSCell < 0) || (firstMSCell > timeAxisCells && lastMSCell > timeAxisCells)) {\n                return;\n            }\n\n            // Cache from time axis start, to time axis end (\"cropping\" deps starting or ending outside)\n            const\n                startMSCell = Math.max(firstMSCell, 0),\n                endMSCell   = Math.min(lastMSCell, timeAxisCells);\n\n            for (let i = startMSCell; i <= endMSCell; i++) {\n                const msCell = me.gridCache[i] ?? (me.gridCache[i] = {});\n                for (let j = firstRowCell; j <= lastRowCell; j++) {\n                    const rowCell = msCell[j] ?? (msCell[j] = []);\n                    rowCell.push(dependency);\n                }\n            }\n        }\n    }\n\n    // All dependencies are about to be drawn, check if we need to build the grid cache\n    beforeDraw() {\n        const me = this;\n\n        if (!me.gridCache) {\n            const { visibleDateRange } = me.client;\n\n            me.constructGridCache = true;\n\n            // Adjust number of ms used in grid cache to match viewport\n            me.MS_PER_CELL = Math.max(visibleDateRange.endMS - visibleDateRange.startMS, 1000);\n\n            // Start with empty cache, will be populated as deps are drawn\n            me.gridCache = {};\n        }\n    }\n\n    // All dependencies are drawn, we no longer need to rebuild the cache\n    afterDraw() {\n        this.constructGridCache = false;\n    }\n\n    reset() {\n        this.gridCache = null;\n    }\n};\n","import Base from '../../Core/Base.js';\nimport ArrayHelper from '../../Core/helper/ArrayHelper.js';\nimport WalkHelper from '../../Core/helper/WalkHelper.js';\n\n// Start adjusting if there is system scaling > 130%\nconst\n    THRESHOLD      = Math.min(1 / globalThis.devicePixelRatio, 0.75),\n    BOX_PROPERTIES = ['start', 'end', 'top', 'bottom'],\n    equalEnough    = (a, b) => Math.abs(a - b) < 0.1,\n    sideToSide     = {\n        l : 'left',\n        r : 'right',\n        t : 'top',\n        b : 'bottom'\n    };\n\n/**\n * @module Scheduler/util/RectangularPathFinder\n */\n\n/**\n * Class which finds rectangular path, i.e. path with 90 degrees turns, between two boxes.\n * @private\n */\nexport default class RectangularPathFinder extends Base {\n    static get configurable() {\n        return {\n            /**\n             * Default start connection side: 'left', 'right', 'top', 'bottom'\n             * @config {'top'|'bottom'|'left'|'right'}\n             * @default\n             */\n            startSide : 'right',\n\n            // /**\n            //  * Default start arrow size in pixels\n            //  * @config {Number}\n            //  * @default\n            //  */\n            // startArrowSize : 0,\n\n            /**\n             * Default start arrow staff size in pixels\n             * @config {Number}\n             * @default\n             */\n            startArrowMargin : 12,\n\n            /**\n             * Default starting connection point shift from box's arrow pointing side middle point\n             * @config {Number}\n             * @default\n             */\n            startShift : 0,\n\n            /**\n             * Default end arrow pointing direction, possible values are: 'left', 'right', 'top', 'bottom'\n             * @config {'top'|'bottom'|'left'|'right'}\n             * @default\n             */\n            endSide : 'left',\n\n            // /**\n            //  * Default end arrow size in pixels\n            //  * @config {Number}\n            //  * @default\n            //  */\n            // endArrowSize : 0,\n\n            /**\n             * Default end arrow staff size in pixels\n             * @config {Number}\n             * @default\n             */\n            endArrowMargin : 12,\n\n            /**\n             * Default ending connection point shift from box's arrow pointing side middle point\n             * @config {Number}\n             * @default\n             */\n            endShift : 0,\n\n            /**\n             * Start / End box vertical margin, the amount of pixels from top and bottom line of a box where drawing\n             * is prohibited\n             * @config {Number}\n             * @default\n             */\n            verticalMargin : 2,\n\n            /**\n             * Start / End box horizontal margin, the amount of pixels from left and right line of a box where drawing\n             * @config {Number}\n             * @default\n             */\n            horizontalMargin : 5,\n\n            /**\n             * Other rectangular areas (obstacles) to search path through\n             * @config {Object[]}\n             * @default\n             */\n            otherBoxes : null,\n\n            /**\n             * The owning Scheduler. Mandatory so that it can determin RTL state.\n             * @config {Scheduler.view.Scheduler}\n             * @private\n             */\n            client : {}\n        };\n    }\n\n    /**\n     * Returns list of horizontal and vertical segments connecting two boxes\n     * <pre>\n     *    |    | |  |    |       |\n     *  --+----+----+----*-------*---\n     *  --+=>Start  +----*-------*--\n     *  --+----+----+----*-------*--\n     *    |    | |  |    |       |\n     *    |    | |  |    |       |\n     *  --*----*-+-------+-------+--\n     *  --*----*-+         End <=+--\n     *  --*----*-+-------+-------+--\n     *    |    | |  |    |       |\n     * </pre>\n     * Path goes by lines (-=) and turns at intersections (+), boxes depicted are adjusted by horizontal/vertical\n     * margin and arrow margin, original boxes are smaller (path can't go at original box borders). Algorithm finds\n     * the shortest path with minimum amount of turns. In short it's mix of \"Lee\" and \"Dijkstra pathfinding\"\n     * with turns amount taken into account for distance calculation.\n     *\n     * The algorithm is not very performant though, it's O(N^2), where N is amount of\n     * points in the grid, but since the maximum amount of points in the grid might be up to 34 (not 36 since\n     * two box middle points are not permitted) that might be ok for now.\n     *\n     * @param {Object} lineDef An object containing any of the class configuration option overrides as well\n     *                         as `startBox`, `endBox`, `startHorizontalMargin`, `startVerticalMargin`,\n     *                         `endHorizontalMargin`, `endVerticalMargin` properties\n     * @param {Object} lineDef.startBox An object containing `start`, `end`, `top`, `bottom` properties\n     * @param {Object} lineDef.endBox   An object containing `start`, `end`, `top`, `bottom` properties\n     * @param {Number} lineDef.startHorizontalMargin Horizontal margin override for start box\n     * @param {Number} lineDef.startVerticalMargin   Vertical margin override for start box\n     * @param {Number} lineDef.endHorizontalMargin   Horizontal margin override for end box\n     * @param {Number} lineDef.endVerticalMargin     Vertical margin override for end box\n     *\n     *\n     * @returns {Object[]|Boolean} Array of line segments or false if path cannot be found\n     * @returns {Number} return.x1\n     * @returns {Number} return.y1\n     * @returns {Number} return.x2\n     * @returns {Number} return.y2\n     */\n    //\n    //@ignore\n    //@privateparam {Function[]|Function} noPathFallbackFn\n    //     A function or array of functions which will be tried in case a path can't be found\n    //     Each function will be given a line definition it might try to adjust somehow and return.\n    //     The new line definition returned will be tried to find a path.\n    //     If a function returns false, then next function will be called if any.\n    //\n    findPath(lineDef, noPathFallbackFn) {\n        const\n            me              = this,\n            originalLineDef = lineDef;\n\n        let lineDefFull,\n            startBox,\n            endBox,\n            startShift,\n            endShift,\n            startSide,\n            endSide,\n            // startArrowSize,\n            // endArrowSize,\n            startArrowMargin,\n            endArrowMargin,\n            horizontalMargin,\n            verticalMargin,\n            startHorizontalMargin,\n            startVerticalMargin,\n            endHorizontalMargin,\n            endVerticalMargin,\n            otherHorizontalMargin,\n            otherVerticalMargin,\n            otherBoxes,\n\n            connStartPoint, connEndPoint,\n            pathStartPoint, pathEndPoint,\n            gridStartPoint, gridEndPoint,\n            startGridBox, endGridBox,\n            grid, path, tryNum;\n\n        noPathFallbackFn = ArrayHelper.asArray(noPathFallbackFn);\n\n        for (tryNum = 0; lineDef && !path;) {\n            lineDefFull = Object.assign(me.config, lineDef);\n\n            startBox              = lineDefFull.startBox;\n            endBox                = lineDefFull.endBox;\n            startShift            = lineDefFull.startShift;\n            endShift              = lineDefFull.endShift;\n            startSide             = lineDefFull.startSide;\n            endSide               = lineDefFull.endSide;\n            // startArrowSize        = lineDefFull.startArrowSize;\n            // endArrowSize          = lineDefFull.endArrowSize;\n            startArrowMargin      = lineDefFull.startArrowMargin;\n            endArrowMargin        = lineDefFull.endArrowMargin;\n            horizontalMargin      = lineDefFull.horizontalMargin;\n            verticalMargin        = lineDefFull.verticalMargin;\n            startHorizontalMargin = lineDefFull.hasOwnProperty('startHorizontalMargin') ? lineDefFull.startHorizontalMargin : horizontalMargin;\n            startVerticalMargin   = lineDefFull.hasOwnProperty('startVerticalMargin') ? lineDefFull.startVerticalMargin : verticalMargin;\n            endHorizontalMargin   = lineDefFull.hasOwnProperty('endHorizontalMargin') ? lineDefFull.endHorizontalMargin : horizontalMargin;\n            endVerticalMargin     = lineDefFull.hasOwnProperty('endVerticalMargin') ? lineDefFull.endVerticalMargin : verticalMargin;\n            otherHorizontalMargin = lineDefFull.hasOwnProperty('otherHorizontalMargin') ? lineDefFull.otherHorizontalMargin : horizontalMargin;\n            otherVerticalMargin   = lineDefFull.hasOwnProperty('otherVerticalMargin') ? lineDefFull.otherVerticalMargin : verticalMargin;\n            otherBoxes            = lineDefFull.otherBoxes;\n\n            startSide = me.normalizeSide(startSide);\n            endSide   = me.normalizeSide(endSide);\n\n            connStartPoint = me.getConnectionCoordinatesFromBoxSideShift(startBox, startSide, startShift);\n            connEndPoint   = me.getConnectionCoordinatesFromBoxSideShift(endBox, endSide, endShift);\n\n            startGridBox   = me.calcGridBaseBoxFromBoxAndDrawParams(startBox, startSide/*, startArrowSize*/, startArrowMargin, startHorizontalMargin, startVerticalMargin);\n            endGridBox     = me.calcGridBaseBoxFromBoxAndDrawParams(endBox, endSide/*, endArrowSize*/, endArrowMargin, endHorizontalMargin, endVerticalMargin);\n\n            // Iterate over points and merge those which are too close to each other (e.g. if difference is less than one\n            // over devicePixelRatio we won't even see this effect in GUI)\n            // https://github.com/bryntum/support/issues/3923\n            BOX_PROPERTIES.forEach(property => {\n                // We're talking subpixel precision here, so it doesn't really matter which value we choose\n                if (Math.abs(startGridBox[property] - endGridBox[property]) <= THRESHOLD) {\n                    endGridBox[property] = startGridBox[property];\n                }\n            });\n\n            if (me.shouldLookForPath(startBox, endBox, startGridBox, endGridBox)) {\n                otherBoxes     = otherBoxes?.map(box =>\n                    me.calcGridBaseBoxFromBoxAndDrawParams(box, false/*, 0*/, 0, otherHorizontalMargin, otherVerticalMargin)\n                );\n                pathStartPoint = me.getConnectionCoordinatesFromBoxSideShift(startGridBox, startSide, startShift);\n                pathEndPoint   = me.getConnectionCoordinatesFromBoxSideShift(endGridBox, endSide, endShift);\n                grid           = me.buildPathGrid(startGridBox, endGridBox, pathStartPoint, pathEndPoint, startSide, endSide, otherBoxes);\n                gridStartPoint = me.convertDecartPointToGridPoint(grid, pathStartPoint);\n                gridEndPoint   = me.convertDecartPointToGridPoint(grid, pathEndPoint);\n                path           = me.findPathOnGrid(grid, gridStartPoint, gridEndPoint, startSide, endSide);\n            }\n\n            //<debug>\n            // drawPathGrid(grid, lineDef.startBox, lineDef.endBox, startGridBox, endGridBox, otherBoxes, 4);\n            //</debug>\n\n            // Loop if\n            // - path is still not found\n            // - have no next line definition (which should be obtained from call to one of the functions from noPathFallbackFn array\n            // - have noPathFallBackFn array\n            // - current try number is less then noPathFallBackFn array length\n            for (lineDef = false; !path && !lineDef && noPathFallbackFn && tryNum < noPathFallbackFn.length; tryNum++) {\n                lineDef = (noPathFallbackFn[tryNum])(lineDefFull, originalLineDef);\n            }\n        }\n\n        if (path) {\n            path = me.prependPathWithArrowStaffSegment(path, connStartPoint/*, startArrowSize*/, startSide);\n            path = me.appendPathWithArrowStaffSegment(path, connEndPoint/*, endArrowSize*/, endSide);\n            path = me.optimizePath(path);\n        }\n\n        return path;\n    }\n\n    // Compares boxes relative position in the given direction.\n    //  0 - 1 is to the left/top of 2\n    //  1 - 1 overlaps with left/top edge of 2\n    //  2 - 1 is inside 2\n    // -2 - 2 is inside 1\n    //  3 - 1 overlaps with right/bottom edge of 2\n    //  4 - 1 is to the right/bottom of 2\n    static calculateRelativePosition(box1, box2, vertical = false) {\n        const\n            startProp = vertical ? 'top' : 'start',\n            endProp   = vertical ? 'bottom' : 'end';\n\n        let result;\n\n        if (box1[endProp] < box2[startProp]) {\n            result = 0;\n        }\n        else if (box1[endProp] <= box2[endProp] && box1[endProp] >= box2[startProp] && box1[startProp] < box2[startProp]) {\n            result = 1;\n        }\n        else if (box1[startProp] >= box2[startProp] && box1[endProp] <= box2[endProp]) {\n            result = 2;\n        }\n        else if (box1[startProp] < box2[startProp] && box1[endProp] > box2[endProp]) {\n            result = -2;\n        }\n        else if (box1[startProp] <= box2[endProp] && box1[endProp] > box2[endProp]) {\n            result = 3;\n        }\n        else {\n            result = 4;\n        }\n\n        return result;\n    }\n\n    // Checks if relative position of the original and marginized boxes is the same\n    static boxOverlapChanged(startBox, endBox, gridStartBox, gridEndBox, vertical = false) {\n        const\n            calculateOverlap = RectangularPathFinder.calculateRelativePosition,\n            originalOverlap  = calculateOverlap(startBox, endBox, vertical),\n            finalOverlap     = calculateOverlap(gridStartBox, gridEndBox, vertical);\n\n        return originalOverlap !== finalOverlap;\n    }\n\n    shouldLookForPath(startBox, endBox, gridStartBox, gridEndBox) {\n        let result = true;\n\n        // Only calculate overlap if boxes are narrow in horizontal direction\n        if (\n            // We refer to the original arrow margins because during lookup those might be nullified and we need some\n            // criteria to tell if events are too narrow\n            (startBox.end - startBox.start <= this.startArrowMargin || endBox.end - endBox.start <= this.endArrowMargin) &&\n            Math.abs(RectangularPathFinder.calculateRelativePosition(startBox, endBox, true)) === 2\n        ) {\n            result = !RectangularPathFinder.boxOverlapChanged(startBox, endBox, gridStartBox, gridEndBox);\n        }\n\n        return result;\n    }\n\n    getConnectionCoordinatesFromBoxSideShift(box, side, shift) {\n        let coords;\n\n        // Note that we deal with screen geometry here, not logical dependency sides\n        // Possible 'start' and 'end' have been resolved to box sides.\n        switch (side) {\n            case 'left':\n                coords = {\n                    x : box.start,\n                    y : (box.top + box.bottom) / 2 + shift\n                };\n                break;\n            case 'right':\n                coords = {\n                    x : box.end,\n                    y : (box.top + box.bottom) / 2 + shift\n                };\n                break;\n            case 'top':\n                coords = {\n                    x : (box.start + box.end) / 2 + shift,\n                    y : box.top\n                };\n                break;\n            case 'bottom':\n                coords = {\n                    x : (box.start + box.end) / 2 + shift,\n                    y : box.bottom\n                };\n                break;\n        }\n\n        return coords;\n    }\n\n    calcGridBaseBoxFromBoxAndDrawParams(box, side/*, arrowSize*/, arrowMargin, horizontalMargin, verticalMargin) {\n        let gridBox;\n\n        switch (this.normalizeSide(side)) {\n            case 'left':\n                gridBox = {\n                    start  : box.start - Math.max(/*arrowSize + */arrowMargin, horizontalMargin),\n                    end    : box.end + horizontalMargin,\n                    top    : box.top - verticalMargin,\n                    bottom : box.bottom + verticalMargin\n                };\n                break;\n            case 'right':\n                gridBox = {\n                    start  : box.start - horizontalMargin,\n                    end    : box.end + Math.max(/*arrowSize + */arrowMargin, horizontalMargin),\n                    top    : box.top - verticalMargin,\n                    bottom : box.bottom + verticalMargin\n                };\n                break;\n            case 'top':\n                gridBox = {\n                    start  : box.start - horizontalMargin,\n                    end    : box.end + horizontalMargin,\n                    top    : box.top - Math.max(/*arrowSize + */arrowMargin, verticalMargin),\n                    bottom : box.bottom + verticalMargin\n                };\n                break;\n            case 'bottom':\n                gridBox = {\n                    start  : box.start - horizontalMargin,\n                    end    : box.end + horizontalMargin,\n                    top    : box.top - verticalMargin,\n                    bottom : box.bottom + Math.max(/*arrowSize + */arrowMargin, verticalMargin)\n                };\n                break;\n            default:\n                gridBox = {\n                    start  : box.start - horizontalMargin,\n                    end    : box.end + horizontalMargin,\n                    top    : box.top - verticalMargin,\n                    bottom : box.bottom + verticalMargin\n                };\n        }\n\n        return gridBox;\n    }\n\n    normalizeSide(side) {\n        const { rtl } = this.client;\n\n        side => sideToSide[side] || side;\n\n        if (side === 'start') {\n            return rtl ? 'right' : 'left';\n        }\n        if (side === 'end') {\n            return rtl ? 'left' : 'right';\n        }\n        return side;\n    }\n\n    buildPathGrid(startGridBox, endGridBox, pathStartPoint, pathEndPoint, startSide, endSide, otherGridBoxes) {\n        let xs, ys,\n            y, x, ix, iy, xslen, yslen, ib, blen, box, permitted, point;\n\n        const\n            points       = {},\n            linearPoints = [];\n\n        xs = [\n            startGridBox.start,\n            (startSide === 'left' || startSide === 'right') ? (startGridBox.start + startGridBox.end) / 2 : pathStartPoint.x,\n            startGridBox.end,\n            endGridBox.start,\n            (endSide === 'left' || endSide === 'right') ? (endGridBox.start + endGridBox.end) / 2 : pathEndPoint.x,\n            endGridBox.end\n        ];\n        ys = [\n            startGridBox.top,\n            (startSide === 'top' || startSide === 'bottom') ? (startGridBox.top + startGridBox.bottom) / 2 : pathStartPoint.y,\n            startGridBox.bottom,\n            endGridBox.top,\n            (endSide === 'top' || endSide === 'bottom') ? (endGridBox.top + endGridBox.bottom) / 2 : pathEndPoint.y,\n            endGridBox.bottom\n        ];\n\n        if (otherGridBoxes) {\n            otherGridBoxes.forEach(box => {\n                xs.push(box.start, (box.start + box.end) / 2, box.end);\n                ys.push(box.top, (box.top + box.bottom) / 2, box.bottom);\n            });\n        }\n\n        xs = [...new Set(xs.sort((a, b) => a - b))];\n        ys = [...new Set(ys.sort((a, b) => a - b))];\n\n        // <remove-on-release>\n        // TODO: fastest way to make unique, Set is slower\n        // for ( let i = 0, I = array.length; i < I; i++ ) {\n        //     if ( ~array.indexOf( array[ i ], i + 1 ) ) {\n        //         array.splice( i, 1 );\n        //         i--;\n        //         I--;\n        //     }\n        // }\n        // </remove-on-release>\n\n        for (iy = 0, yslen = ys.length; iy < yslen; ++iy) {\n            points[iy] = points[iy] || {};\n            y          = ys[iy];\n            for (ix = 0, xslen = xs.length; ix < xslen; ++ix) {\n                x = xs[ix];\n\n                permitted = (\n                    (x <= startGridBox.start || x >= startGridBox.end || y <= startGridBox.top || y >= startGridBox.bottom) &&\n                    (x <= endGridBox.start || x >= endGridBox.end || y <= endGridBox.top || y >= endGridBox.bottom)\n                );\n\n                if (otherGridBoxes) {\n                    for (ib = 0, blen = otherGridBoxes.length; permitted && ib < blen; ++ib) {\n                        box       = otherGridBoxes[ib];\n                        permitted = (x <= box.start || x >= box.end || y <= box.top || y >= box.bottom) ||\n                            // Allow point if it is a path start/end even if point is inside any box\n                            (x === pathStartPoint.x && y === pathStartPoint.y) ||\n                            (x === pathEndPoint.x && y === pathEndPoint.y);\n                    }\n                }\n\n                point = {\n                    distance : Number.MAX_SAFE_INTEGER,\n                    permitted,\n                    x,\n                    y,\n                    ix,\n                    iy\n                };\n\n                points[iy][ix] = point;\n                linearPoints.push(point);\n            }\n        }\n\n        return {\n            width  : xs.length,\n            height : ys.length,\n            xs,\n            ys,\n            points,\n            linearPoints\n        };\n    }\n\n    convertDecartPointToGridPoint(grid, point) {\n        const\n            x = grid.xs.indexOf(point.x),\n            y = grid.ys.indexOf(point.y);\n\n        return grid.points[y][x];\n    }\n\n    findPathOnGrid(grid, gridStartPoint, gridEndPoint, startSide, endSide) {\n        const me = this;\n\n        let path = false;\n\n        if (gridStartPoint.permitted && gridEndPoint.permitted) {\n            grid = me.waveForward(grid, gridStartPoint, 0);\n            path = me.collectPath(grid, gridEndPoint, endSide);\n        }\n\n        return path;\n    }\n\n    // Returns neighbors from Von Neiman ambit (see Lee pathfinding algorithm description)\n    getGridPointNeighbors(grid, gridPoint, predicateFn) {\n        const\n            ix     = gridPoint.ix,\n            iy     = gridPoint.iy,\n            result = [];\n\n        let neighbor;\n\n        // NOTE:\n        // It's important to push bottom neighbors first since this method is used\n        // in collectPath(), which recursively collects path from end to start node\n        // and if bottom neighbors are pushed first in result array then collectPath()\n        // will produce a line which is more suitable (pleasant looking) for our purposes.\n        if (iy < grid.height - 1) {\n            neighbor = grid.points[iy + 1][ix];\n            (!predicateFn || predicateFn(neighbor)) && result.push(neighbor);\n        }\n        if (iy > 0) {\n            neighbor = grid.points[iy - 1][ix];\n            (!predicateFn || predicateFn(neighbor)) && result.push(neighbor);\n        }\n        if (ix < grid.width - 1) {\n            neighbor = grid.points[iy][ix + 1];\n            (!predicateFn || predicateFn(neighbor)) && result.push(neighbor);\n        }\n        if (ix > 0) {\n            neighbor = grid.points[iy][ix - 1];\n            (!predicateFn || predicateFn(neighbor)) && result.push(neighbor);\n        }\n\n        return result;\n    }\n\n    waveForward(grid, gridStartPoint, distance) {\n        const me = this;\n\n        // I use the WalkHelper here because a point on a grid and it's neighbors might be considered as a hierarchy.\n        // The point is the parent node, and it's neighbors are the children nodes. Thus the grid here is hierarchical\n        // data structure which can be walked. WalkHelper walks non-recursively which is exactly what I need as well.\n        WalkHelper.preWalkUnordered(\n            // Walk starting point - a node is a grid point and it's distance from the starting point\n            [gridStartPoint, distance],\n            // Children query function\n            // NOTE: It's important to fix neighbor distance first, before waving to a neighbor, otherwise waving might\n            //       get through a neighbor point setting it's distance to a value more than (distance + 1) whereas we,\n            //       at the children querying moment in time, already know that the possibly optimal distance is (distance + 1)\n            ([point, distance]) => me.getGridPointNeighbors(\n                grid,\n                point,\n                neighborPoint => neighborPoint.permitted && (neighborPoint.distance > distance + 1)\n            ).map(\n                neighborPoint => [neighborPoint, distance + 1] // Neighbor distance fixation\n            ),\n            // Walk step iterator function\n            ([point, distance]) => point.distance = distance // Neighbor distance applying\n        );\n\n        return grid;\n    }\n\n    collectPath(grid, gridEndPoint, endSide) {\n        const\n            me   = this,\n            path = [];\n\n        let pathFound = true,\n            neighbors,\n            lowestDistanceNeighbor,\n            xDiff, yDiff;\n\n        while (pathFound && gridEndPoint.distance) {\n            neighbors = me.getGridPointNeighbors(grid, gridEndPoint, point =>\n                point.permitted && (point.distance === gridEndPoint.distance - 1)\n            );\n\n            pathFound = neighbors.length > 0;\n\n            if (pathFound) {\n                // Prefer turnless neighbors first\n                neighbors = neighbors.sort((a, b) => {\n                    let xDiff, yDiff;\n\n                    xDiff = a.ix - gridEndPoint.ix;\n                    yDiff = a.iy - gridEndPoint.iy;\n\n                    const resultA = (\n                        ((endSide === 'left' || endSide === 'right') && yDiff === 0) ||\n                        ((endSide === 'top' || endSide === 'bottom') && xDiff === 0)\n                    ) ? -1 : 1;\n\n                    xDiff = b.ix - gridEndPoint.ix;\n                    yDiff = b.iy - gridEndPoint.iy;\n\n                    const resultB = (\n                        ((endSide === 'left' || endSide === 'right') && yDiff === 0) ||\n                        ((endSide === 'top' || endSide === 'bottom') && xDiff === 0)\n                    ) ? -1 : 1;\n\n                    if (resultA > resultB) return 1;\n                    if (resultA < resultB) return -1;\n                    // apply additional sorting to be sure to pick bottom path in IE\n                    if (resultA === resultB) return a.y > b.y ? -1 : 1;\n                });\n\n                lowestDistanceNeighbor = neighbors[0];\n\n                path.push({\n                    x1 : lowestDistanceNeighbor.x,\n                    y1 : lowestDistanceNeighbor.y,\n                    x2 : gridEndPoint.x,\n                    y2 : gridEndPoint.y\n                });\n\n                // Detecting new side, either xDiff or yDiff must be 0 (but not both)\n                xDiff = lowestDistanceNeighbor.ix - gridEndPoint.ix;\n                yDiff = lowestDistanceNeighbor.iy - gridEndPoint.iy;\n\n                switch (true) {\n                    case !yDiff && xDiff > 0:\n                        endSide = 'left';\n                        break;\n                    case !yDiff && xDiff < 0:\n                        endSide = 'right';\n                        break;\n                    case !xDiff && yDiff > 0:\n                        endSide = 'top';\n                        break;\n                    case !xDiff && yDiff < 0:\n                        endSide = 'bottom';\n                        break;\n                }\n\n                gridEndPoint = lowestDistanceNeighbor;\n            }\n        }\n\n        return pathFound && path.reverse() || false;\n    }\n\n    prependPathWithArrowStaffSegment(path, connStartPoint/*, startArrowSize*/, startSide) {\n        if (path.length > 0) {\n            const\n                firstSegment   = path[0],\n                prependSegment = {\n                    x2 : firstSegment.x1,\n                    y2 : firstSegment.y1\n                };\n\n            switch (startSide) {\n                case 'left':\n                    prependSegment.x1 = connStartPoint.x/* - startArrowSize*/;\n                    prependSegment.y1 = firstSegment.y1;\n                    break;\n                case 'right':\n                    prependSegment.x1 = connStartPoint.x/* + startArrowSize*/;\n                    prependSegment.y1 = firstSegment.y1;\n                    break;\n                case 'top':\n                    prependSegment.x1 = firstSegment.x1;\n                    prependSegment.y1 = connStartPoint.y/* - startArrowSize*/;\n                    break;\n                case 'bottom':\n                    prependSegment.x1 = firstSegment.x1;\n                    prependSegment.y1 = connStartPoint.y/* + startArrowSize*/;\n                    break;\n            }\n\n            path.unshift(prependSegment);\n        }\n\n        return path;\n    }\n\n    appendPathWithArrowStaffSegment(path, connEndPoint/*, endArrowSize*/, endSide) {\n        if (path.length > 0) {\n            const\n                lastSegment   = path[path.length - 1],\n                appendSegment = {\n                    x1 : lastSegment.x2,\n                    y1 : lastSegment.y2\n                };\n\n            switch (endSide) {\n                case 'left':\n                    appendSegment.x2 = connEndPoint.x/* - endArrowSize*/;\n                    appendSegment.y2 = lastSegment.y2;\n                    break;\n                case 'right':\n                    appendSegment.x2 = connEndPoint.x/* + endArrowSize*/;\n                    appendSegment.y2 = lastSegment.y2;\n                    break;\n                case 'top':\n                    appendSegment.x2 = lastSegment.x2;\n                    appendSegment.y2 = connEndPoint.y/* - endArrowSize*/;\n                    break;\n                case 'bottom':\n                    appendSegment.x2 = lastSegment.x2;\n                    appendSegment.y2 = connEndPoint.y/* + endArrowSize*/;\n                    break;\n            }\n\n            path.push(appendSegment);\n        }\n\n        return path;\n    }\n\n    optimizePath(path) {\n        const optPath = [];\n\n        let prevSegment,\n            curSegment;\n\n        if (path.length > 0) {\n            prevSegment = path.shift();\n            optPath.push(prevSegment);\n\n            while (path.length > 0) {\n                curSegment = path.shift();\n                // both segments are as good as equal\n                if (\n                    equalEnough(prevSegment.x1, curSegment.x1) && equalEnough(prevSegment.y1, curSegment.y1) &&\n                    equalEnough(prevSegment.x2, curSegment.x2) && equalEnough(prevSegment.y2, curSegment.y2)\n                ) {\n                    prevSegment = curSegment;\n                }\n                // both segments are horizontal or very nearly so\n                else if (equalEnough(prevSegment.y1, prevSegment.y2) && equalEnough(curSegment.y1, curSegment.y2)) {\n                    prevSegment.x2 = curSegment.x2;\n                }\n                // both segments are vertical or very nearly so\n                else if (equalEnough(prevSegment.x1, prevSegment.x2) && equalEnough(curSegment.x1, curSegment.x2)) {\n                    prevSegment.y2 = curSegment.y2;\n                }\n                // segments have different orientation (path turn)\n                else {\n                    optPath.push(curSegment);\n                    prevSegment = curSegment;\n                }\n            }\n        }\n\n        return optPath;\n    }\n}\n\n//<debug>\nfunction createBox(startBox, deltaX, deltaY, scale, stroke) {\n    const points = [\n        [startBox.start * scale - deltaX, startBox.top * scale - deltaY],\n        [startBox.start * scale - deltaX, startBox.bottom * scale - deltaY],\n        [startBox.end * scale - deltaX, startBox.bottom * scale - deltaY],\n        [startBox.end * scale - deltaX, startBox.top * scale - deltaY],\n        [startBox.start * scale - deltaX, startBox.top * scale - deltaY]\n    ].map(pair => `${pair[0]},${pair[1]}`).join(' ');\n\n    return `<polyline points=\"${points}\" style=\"stroke:${stroke || 'blue'};stroke-width:4;\"/>`;\n}\n// eslint-disable-next-line no-unused-vars\nfunction drawPathGrid(grid, sourceBox, targetBox, sourceRegion, targetRegion, otherBoxes, scale = 4) {\n    const\n        rowHeight       = 61,\n        xs              = grid.xs.map(x => x * scale),\n        ys              = grid.ys.map(y => y * scale),\n        xsLength        = xs.length,\n        ysLength        = ys.length,\n        verticalLines   = xs.map(x => `<line style=\"stroke:black\" x1=\"${x - xs[0]}\" x2=\"${x - xs[0]}\"\" y1=\"0\" y2=\"${ys[ysLength - 1] - ys[0]}\"/>`),\n        horizontalLines = ys.map(y => `<line style=\"stroke:black\" x1=\"0\" x2=\"${xs[xsLength - 1] - xs[0]}\"\" y1=\"${y - ys[0]}\" y2=\"${y - ys[0]}\" style=\"${y / scale === rowHeight ? 'stroke:red' : ''}\"/>`),\n        extraLines      = [];\n\n    sourceRegion && extraLines.push(createBox(sourceRegion, xs[0], ys[0], scale, 'green'));\n    targetRegion && extraLines.push(createBox(targetRegion, xs[0], ys[0], scale, 'green'));\n    sourceBox && extraLines.push(createBox(sourceBox, xs[0], ys[0], scale));\n    targetBox && extraLines.push(createBox(targetBox, xs[0], ys[0], scale));\n\n    (otherBoxes || []).forEach(box => extraLines.push(createBox(box, xs[0], ys[0], scale, 'red')));\n\n    console.log(`<svg width=\"${xs[xsLength - 1] - xs[0]}\" height=\"${ys[ysLength - 1] - ys[0]}\">${\n        verticalLines.concat(horizontalLines, extraLines).join('')}</svg>`);\n}\n//</debug>\n","import DependencyModel from '../../model/DependencyModel.js';\nimport RectangularPathFinder from '../../util/RectangularPathFinder.js';\nimport DomHelper from '../../../Core/helper/DomHelper.js';\nimport ObjectHelper from '../../../Core/helper/ObjectHelper.js';\nimport Rectangle from '../../../Core/helper/util/Rectangle.js';\n\n// <remove-on-release>\n// TODO: Tests\n// </remove-on-release>\n\n// Determine a line segments drawing direction\nfunction drawingDirection(pointSet) {\n    if (pointSet.x1 === pointSet.x2) {\n        return pointSet.y2 > pointSet.y1 ? 'd' : 'u';\n    }\n\n    return pointSet.x2 > pointSet.x1 ? 'r' : 'l';\n}\n\n// Determine a line segments length\nfunction segmentLength(pointSet) {\n    return pointSet.x1 === pointSet.x2 ? pointSet.y2 - pointSet.y1 : pointSet.x2 - pointSet.x1;\n}\n\n// Define an arc to tie two line segments together\nfunction arc(pointSet, nextPointSet, radius) {\n    const\n        corner  = drawingDirection(pointSet) + drawingDirection(nextPointSet),\n        // Flip x if this or next segment is drawn right to left\n        rx      = radius * (corner.includes('l') ? -1 : 1),\n        // Flip y if this or next segment is drawn bottom to top\n        ry      = radius * (corner.includes('u') ? -1 : 1),\n        // Positive (0) or negative (1) angle\n        sweep   = corner === 'ur' || corner === 'lu' || corner === 'dl' || corner === 'rd' ? 1 : 0;\n\n    return `a${rx},${ry} 0 0 ${sweep} ${rx},${ry}`;\n}\n\n// Define a line for a set of points, tying it together with the next set with an arc when applicable\nfunction line(pointSet, nextPointSet, location, radius, prevRadius) {\n\n    // Horizontal or vertical line\n    let line      = pointSet.x1 === pointSet.x2 ? 'v' : 'h',\n        useRadius = radius;\n\n    // Add an arc?\n    if (radius) {\n        const\n            // Length of this line segment\n            length     = segmentLength(pointSet),\n            // Length of the next one. Both are needed to determine max radius (half of the shortest delta)\n            nextLength = nextPointSet ? Math.abs(segmentLength(nextPointSet)) : Number.MAX_SAFE_INTEGER,\n            // Line direction\n            sign       = Math.sign(length);\n\n        // If we are not passed a radius from the previous line drawn, we use the configured radius. It is used to shorten\n        // this lines length to fit the arc that connects it to the previous line\n        if (prevRadius == null) {\n            prevRadius = radius;\n        }\n\n        // We cannot use a radius larger than half our or our successor's length, doing so would make the segment too long\n        // when the arc is created\n        if (Math.abs(length) < radius * 2 || nextLength < radius * 2) {\n            useRadius = Math.min(Math.abs(length), nextLength) / 2;\n        }\n\n        const\n            // Radius of neighbouring arcs, subtracted from length below...\n            subtract  = location === 'single' ? 0 : location === 'first' ? useRadius : location === 'between' ? prevRadius + useRadius : /*last*/ prevRadius,\n            // ...to produce the length of the line segment to draw\n            useLength = length - subtract * sign;\n\n        // Apply line segment length, unless it passed over 0 in which case we stick to 0\n        line += Math.sign(useLength) !== sign ? 0 : useLength;\n\n        // Add an arc if applicable\n        if (location !== 'last' && location !== 'single' && useRadius > 0) {\n            line += ` ${arc(pointSet, nextPointSet, useRadius)}`;\n        }\n    }\n    // Otherwise take a shorter code path\n    else {\n        line += segmentLength(pointSet);\n    }\n\n    return {\n        line,\n        currentRadius : radius !== useRadius ? useRadius : null\n    };\n}\n\n// Define an SVG path base on points from the path finder.\n// Each segment in the path can be joined by an arc\nfunction pathMapper(radius, points) {\n    const { length } = points;\n\n    if (!length) {\n        return '';\n    }\n\n    let currentRadius = null;\n\n    return `M${points[0].x1},${points[0].y1} ${points.map((pointSet, i) => {\n        // Segment placement among all segments, used to determine if an arc should be added\n        const\n            location =\n                  length === 1 ? 'single'\n                      : i === length - 1 ? 'last'\n                          : i === 0 ? 'first'\n                              : 'between',\n            lineSpec = line(pointSet, points[i + 1], location, radius, currentRadius);\n\n        ({ currentRadius } = lineSpec);\n\n        return lineSpec.line;\n    }).join(' ')}`;\n}\n\n// Mixin that holds the code needed to generate DomConfigs for dependency lines\nexport default Target => class DependencyLineGenerator extends Target {\n    static $name = 'DependencyLineGenerator';\n\n    lineCache = {};\n\n    onSVGReady() {\n        // <remove-on-release>\n        // TODO: Get rid of pathFinderConfig?? Move to configurable\n        // </remove-on-release>\n        const me = this;\n\n        me.pathFinder = new RectangularPathFinder({\n            ...me.pathFinderConfig,\n            client : me.client\n        });\n        me.lineDefAdjusters = me.createLineDefAdjusters();\n\n        me.createMarker();\n    }\n\n    changeRadius(radius) {\n        if (radius !== null) {\n            ObjectHelper.assertNumber(radius, 'radius');\n        }\n\n        return radius;\n    }\n\n    updateRadius() {\n        if (!this.isConfiguring) {\n            this.reset();\n        }\n    }\n\n    updateRenderer() {\n        if (!this.isConfiguring) {\n            this.reset();\n        }\n    }\n\n    changeClickWidth(width) {\n        if (width !== null) {\n            ObjectHelper.assertNumber(width, 'clickWidth');\n        }\n\n        return width;\n    }\n\n    updateClickWidth() {\n        if (!this.isConfiguring) {\n            this.reset();\n        }\n    }\n\n    //region Marker\n\n    createMarker() {\n        const\n            me            = this,\n            { markerDef } = me,\n            svg           = this.client.svgCanvas,\n            // SVG markers has to use an id, we want the id to be per scheduler when using multiple\n            markerId      = markerDef ? `${me.client.id}-arrowEnd` : 'arrowEnd';\n\n        me.marker?.remove();\n\n        svg.style.setProperty('--scheduler-dependency-marker', `url(#${markerId})`);\n\n        me.marker = DomHelper.createElement({\n            parent        : svg,\n            id            : markerId, // no-sanity\n            tag           : 'marker',\n            className     : 'b-sch-dependency-arrow',\n            ns            : 'http://www.w3.org/2000/svg',\n            markerHeight  : 11,\n            markerWidth   : 11,\n            refX          : 8.5,\n            refY          : 3,\n            viewBox       : '0 0 9 6',\n            orient        : 'auto-start-reverse',\n            markerUnits   : 'userSpaceOnUse',\n            retainElement : true,\n            children      : [{\n                tag : 'path',\n                ns  : 'http://www.w3.org/2000/svg',\n                d   : me.markerDef ?? 'M3,0 L3,6 L9,3 z'\n            }]\n        });\n    }\n\n    updateMarkerDef() {\n        if (!this.isConfiguring) {\n            this.createMarker();\n        }\n    }\n\n    //endregion\n\n    //region DomConfig\n\n    getAssignmentElement(assignment) {\n        // If we are dragging an event, we need to use the proxy element\n        // (which is not the original element if we are not constrained to timeline)\n        const proxyElement = this.client.features.eventDrag?.getProxyElement?.(assignment);\n\n        return proxyElement || this.client.getElementFromAssignmentRecord(assignment);\n    }\n\n    // Generate a DomConfig for a dependency line between two assignments (tasks in Gantt)\n    getDomConfigs(dependency, fromAssignment, toAssignment, forceBoxes) {\n        const\n            me     = this,\n            key    = me.getDependencyKey(dependency, fromAssignment, toAssignment),\n            // Under certain circumstances (scrolling) we might be able to reuse the previous DomConfig.\n            cached = me.lineCache[key];\n\n        // Create line def if not cached, or we are live drawing and have event elements (dragging, transitioning etc)\n        if (me.constructLineCache || !cached || forceBoxes || (me.drawingLive && (me.getAssignmentElement(fromAssignment) || me.getAssignmentElement(toAssignment)))) {\n            const\n                lineDef     = me.prepareLineDef(dependency, fromAssignment, toAssignment, forceBoxes),\n                points      = lineDef && me.pathFinder.findPath(lineDef, me.lineDefAdjusters),\n                {\n                    client,\n                    clickWidth\n                }           = me,\n                { toEvent } = dependency;\n\n            if (points) {\n                const\n                    highlighted = me.highlighted.get(dependency),\n                    domConfig   = {\n                        tag     : 'path',\n                        ns      : 'http://www.w3.org/2000/svg',\n                        d       : pathMapper(me.radius ?? 0, points),\n                        role    : 'presentation',\n                        dataset : {\n                            syncId : key,\n                            depId  : dependency.id,\n                            fromId : fromAssignment.id,\n                            toId   : toAssignment.id\n                        },\n                        elementData : {\n                            dependency,\n                            points\n                        },\n                        class : {\n                            [me.baseCls]                                : 1,\n                            [dependency.cls]                            : dependency.cls,\n                            // Data highlight\n                            [dependency.highlighted]                    : dependency.highlighted,\n                            // Feature highlight\n                            [highlighted && [...highlighted].join(' ')] : highlighted,\n                            [me.noMarkerCls]                            : lineDef.hideMarker,\n                            'b-inactive'                                : dependency.active === false,\n                            'b-sch-bidirectional-line'                  : dependency.bidirectional,\n                            'b-readonly'                                : dependency.readOnly,\n                            // If target event is outside the view add special CSS class to hide marker (arrow)\n                            'b-sch-dependency-ends-outside' :\n                                (!toEvent.milestone && (toEvent.endDate <= client.startDate || client.endDate <= toEvent.startDate)) ||\n                                (toEvent.milestone && (toEvent.endDate < client.startDate || client.endDate < toEvent.startDate))\n                        }\n                    };\n\n                me.renderer?.({\n                    domConfig,\n                    points,\n                    dependencyRecord     : dependency,\n                    fromAssignmentRecord : fromAssignment,\n                    toAssignmentRecord   : toAssignment,\n                    fromBox              : lineDef.startBox,\n                    toBox                : lineDef.endBox,\n                    fromSide             : lineDef.startSide,\n                    toSide               : lineDef.endSide\n                });\n\n                const configs = [domConfig];\n\n                if (clickWidth > 1) {\n                    configs.push({\n                        ...domConfig, // Shallow on purpose, to not waste perf cloning deeply\n                        class : {\n                            ...domConfig.class,\n                            'b-click-area' : 1\n                        },\n                        dataset : {\n                            ...domConfig.dataset,\n                            syncId : `${domConfig.dataset.syncId}-click-area`\n                        },\n                        style : {\n                            strokeWidth : clickWidth\n                        }\n                    });\n                }\n\n                return me.lineCache[key] = configs;\n            }\n\n            // Nothing to draw or cache\n            return me.lineCache[key] = null;\n        }\n\n        return cached;\n    }\n\n    //endregion\n\n    //region Bounds\n\n    // Generates `otherBoxes` config for rectangular path finder, which push dependency line to the row boundary.\n    // It should be enough to return single box with top/bottom taken from row top/bottom and left/right taken from source\n    // box, extended by start arrow margin to both sides.\n    generateBoundaryBoxes(box, side) {\n        // We need two boxes for the bottom edge, because otherwise path cannot be found. Ideally that shouldn't be\n        // necessary. Other solution would be to adjust bottom by -1px, but that would make some dependency lines to take\n        // 1px different path on a row boundary, which doesn't look nice (but slightly more performant)\n        if (side === 'bottom') {\n            return [\n                {\n                    start  : box.left,\n                    end    : box.left + box.width / 2,\n                    top    : box.rowTop,\n                    bottom : box.rowBottom\n                },\n                {\n                    start  : box.left + box.width / 2,\n                    end    : box.right,\n                    top    : box.rowTop,\n                    bottom : box.rowBottom\n                }\n            ];\n        }\n        else {\n            return [\n                {\n                    start  : box.left - this.pathFinder.startArrowMargin,\n                    end    : box.right + this.pathFinder.startArrowMargin,\n                    top    : box.rowTop,\n                    bottom : box.rowBottom\n                }\n            ];\n        }\n\n        // //<debug>\n        // globalThis.DEBUG && boxes.forEach(box => {\n        //     DomHelper.createElement({\n        //         parent : document.querySelector('.b-sch-foreground-canvas'),\n        //         html   : `<div style=\"left:${box.start}px;top:${box.top}px;width:${box.end - box.start}px;height:${box.bottom - box.top}px;border:1px solid green;position:absolute;\"></div>`\n        //     });\n        // });\n        // //</debug>\n    }\n\n    // Bounding box for an assignment, uses elements bounds if rendered\n    getAssignmentBounds(assignment) {\n        const\n            { client } = this,\n            element    = this.getAssignmentElement(assignment);\n\n        if (element && !client.isExporting) {\n            const rectangle = Rectangle.from(element, this.relativeTo);\n\n            if (client.isHorizontal) {\n                let row = client.getRowById(assignment.resource.id);\n\n                // Outside of its row? It is being dragged, resolve new row\n                if (rectangle.y < row.top || rectangle.bottom > row.bottom) {\n                    const overRow = client.rowManager.getRowAt(rectangle.center.y, true);\n                    if (overRow) {\n                        row = overRow;\n                    }\n                }\n\n                rectangle.rowTop = row.top;\n                rectangle.rowBottom = row.bottom;\n            }\n\n            return rectangle;\n        }\n\n        return client.isEngineReady && client.getAssignmentEventBox(assignment, true);\n    }\n\n    //endregion\n\n    //region Sides\n\n    getConnectorStartSide(timeSpanRecord) {\n        return this.client.currentOrientation.getConnectorStartSide(timeSpanRecord);\n    }\n\n    getConnectorEndSide(timeSpanRecord) {\n        return this.client.currentOrientation.getConnectorEndSide(timeSpanRecord);\n    }\n\n    getDependencyStartSide(dependency) {\n        const { fromEvent, type, fromSide } = dependency;\n\n        if (fromSide) {\n            return fromSide;\n        }\n\n        switch (true) {\n            case type === DependencyModel.Type.StartToEnd:\n            case type === DependencyModel.Type.StartToStart:\n                return this.getConnectorStartSide(fromEvent);\n\n            case type === DependencyModel.Type.EndToStart:\n            case type === DependencyModel.Type.EndToEnd:\n                return this.getConnectorEndSide(fromEvent);\n\n            default:\n                // Default value might not be applied yet when rendering early in Pro / Gantt\n                return this.getConnectorEndSide(fromEvent);\n        }\n    }\n\n    getDependencyEndSide(dependency) {\n        const { toEvent, type, toSide } = dependency;\n\n        if (toSide) {\n            return toSide;\n        }\n\n        // Fallback to view trait if dependency end side is not given /*or can be obtained from type*/\n        switch (true) {\n            case type === DependencyModel.Type.EndToEnd:\n            case type === DependencyModel.Type.StartToEnd:\n                return this.getConnectorEndSide(toEvent);\n\n            case type === DependencyModel.Type.EndToStart:\n            case type === DependencyModel.Type.StartToStart:\n                return this.getConnectorStartSide(toEvent);\n\n            default:\n                // Default value might not be applied yet when rendering early in Pro / Gantt\n                return this.getConnectorStartSide(toEvent);\n        }\n    }\n\n    //endregion\n\n    //region Line def\n\n    // An array of functions used to alter path config when no path found.\n    // It first tries to shrink arrow margins and secondly hides arrows entirely\n    createLineDefAdjusters() {\n        const { client } = this;\n\n        function shrinkArrowMargins(lineDef) {\n            const { barMargin } = client;\n\n            let adjusted = false;\n\n            if (lineDef.startArrowMargin > barMargin || lineDef.endArrowMargin > barMargin) {\n                lineDef.startArrowMargin = lineDef.endArrowMargin = barMargin;\n                adjusted = true;\n            }\n\n            return adjusted ? lineDef : adjusted;\n        }\n\n        function resetArrowMargins(lineDef) {\n            let adjusted = false;\n\n            if (lineDef.startArrowMargin > 0 || lineDef.endArrowMargin > 0) {\n                lineDef.startArrowMargin = lineDef.endArrowMargin = 0;\n                adjusted = true;\n            }\n\n            return adjusted ? lineDef : adjusted;\n        }\n\n        function shrinkHorizontalMargin(lineDef, originalLineDef) {\n            let adjusted = false;\n\n            if (lineDef.horizontalMargin > 2) {\n                lineDef.horizontalMargin = 1;\n                adjusted = true;\n                originalLineDef.hideMarker = true;\n            }\n\n            return adjusted ? lineDef : adjusted;\n        }\n\n        return [\n            shrinkArrowMargins,\n            resetArrowMargins,\n            shrinkHorizontalMargin\n        ];\n    }\n\n    // Overridden in Gantt\n    adjustLineDef(dependency, lineDef) {\n        return lineDef;\n    }\n\n    // Prepare data to feed to the path finder\n    prepareLineDef(dependency, fromAssignment, toAssignment, forceBoxes) {\n        const\n            me             = this,\n            startSide      = me.getDependencyStartSide(dependency),\n            endSide        = me.getDependencyEndSide(dependency),\n            startRectangle = forceBoxes?.from ?? me.getAssignmentBounds(fromAssignment),\n            endRectangle   = forceBoxes?.to ?? me.getAssignmentBounds(toAssignment),\n            otherBoxes     = [];\n\n        if (!startRectangle || !endRectangle) {\n            return null;\n        }\n\n        let {\n            startArrowMargin,\n            verticalMargin\n        } = me.pathFinder;\n\n        if (me.client.isHorizontal) {\n            // Only add otherBoxes if assignments are in different resources\n            if (startRectangle.rowTop != null && startRectangle.rowTop !== endRectangle.rowTop) {\n                otherBoxes.push(...me.generateBoundaryBoxes(startRectangle, startSide));\n            }\n\n            // Do not change start arrow margin in case dependency is bidirectional\n            if (!dependency.bidirectional) {\n                if (/(top|bottom)/.test(startSide)) {\n                    startArrowMargin = me.client.barMargin / 2;\n                }\n\n                verticalMargin = me.client.barMargin / 2;\n            }\n        }\n\n        return me.adjustLineDef(dependency, {\n            startBox              : startRectangle,\n            endBox                : endRectangle,\n            otherBoxes,\n            startArrowMargin,\n            verticalMargin,\n            otherVerticalMargin   : 0,\n            otherHorizontalMargin : 0,\n            startSide,\n            endSide\n        });\n    }\n\n    //endregion\n\n    //region Cache\n\n    // All dependencies are about to be drawn, check if we need to build the line cache\n    beforeDraw() {\n        super.beforeDraw();\n\n        if (!Object.keys(this.lineCache).length) {\n            this.constructLineCache = true;\n        }\n    }\n\n    // All dependencies are drawn, we no longer need to rebuild the cache\n    afterDraw() {\n        super.afterDraw();\n\n        this.constructLineCache = false;\n    }\n\n    reset() {\n        super.reset();\n\n        this.lineCache = {};\n    }\n\n    //endregion\n\n};\n","import Tooltip from '../../../Core/widget/Tooltip.js';\n\n/**\n * @module Scheduler/feature/mixin/DependencyTooltip\n */\n\nconst\n    // Map dependency type to side of a box, for displaying an icon in the tooltip\n    fromBoxSide = [\n        'start',\n        'start',\n        'end',\n        'end'\n    ],\n    toBoxSide   = [\n        'start',\n        'end',\n        'start',\n        'end'\n    ];\n\n/**\n * Mixin that adds tooltip support to the {@link Scheduler/feature/Dependencies} feature.\n * @mixin\n */\nexport default Target => class DependencyTooltip extends Target {\n    static $name = 'DependencyTooltip';\n\n    static configurable = {\n        /**\n         * Set to true to show a tooltip when hovering a dependency line\n         * @config {Boolean}\n         */\n        showTooltip : true,\n\n        /**\n         * A template function allowing you to configure the contents of the tooltip shown when hovering a\n         * dependency line. You can return either an HTML string or a {@link DomConfig} object.\n         * @prp {Function} tooltipTemplate\n         * @param {Scheduler.model.DependencyBaseModel} dependency The dependency record\n         * @returns {String|DomConfig}\n         */\n        tooltipTemplate(dependency) {\n            return {\n                children : [{\n                    className : 'b-sch-dependency-tooltip',\n                    children  : [\n                        { tag : 'label', text : this.L('L{Dependencies.from}') },\n                        { text : dependency.fromEvent.name },\n                        { className : `b-sch-box b-${dependency.fromSide || fromBoxSide[dependency.type]}` },\n                        { tag : 'label', text : this.L('L{Dependencies.to}') },\n                        { text : dependency.toEvent.name },\n                        { className : `b-sch-box b-${dependency.toSide || toBoxSide[dependency.type]}` }\n                    ]\n                }]\n            };\n        },\n\n        /**\n         * A tooltip config object that will be applied to the dependency hover tooltip. Can be used to for example\n         * customize delay\n         * @config {TooltipConfig}\n         */\n        tooltip : {\n            $config : 'nullify',\n\n            value : {}\n        }\n    };\n\n    changeTooltip(tooltip, old) {\n        const me = this;\n\n        old?.destroy();\n\n        if (!me.showTooltip || !tooltip) {\n            return null;\n        }\n\n        return Tooltip.new({\n            align          : 'b-t',\n            id             : `${me.client.id}-dependency-tip`,\n            // <remove-on-release>\n            // TODO: need some way better to specify this. maybe each feature should be queried?\n            // </remove-on-release>\n            forSelector    : `.b-timelinebase:not(.b-eventeditor-editing,.b-taskeditor-editing,.b-resizing-event,.b-dragcreating,.b-dragging-event,.b-creating-dependency) .${me.baseCls}`,\n            forElement     : me.client.timeAxisSubGridElement,\n            showOnHover    : true,\n            hoverDelay     : 0,\n            hideDelay      : 0,\n            anchorToTarget : false,\n            textContent    : false, // Skip max-width setting\n            trackMouse     : false,\n            getHtml        : me.getHoverTipHtml.bind(me)\n        }, tooltip);\n    }\n\n    /**\n     * Generates DomConfig content for the tooltip shown when hovering a dependency\n     * @param {Object} tooltipConfig\n     * @returns {DomConfig} DomConfig used as tooltips content\n     * @private\n     */\n    getHoverTipHtml({ activeTarget }) {\n        return this.tooltipTemplate(this.resolveDependencyRecord(activeTarget));\n    }\n};\n","import DomSync from '../../Core/helper/DomSync.js';\nimport VersionHelper from '../../Core/helper/VersionHelper.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\nimport Delayable from '../../Core/mixin/Delayable.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport AttachToProjectMixin from '../data/mixin/AttachToProjectMixin.js';\nimport DependencyCreation from './mixin/DependencyCreation.js';\nimport DependencyGridCache from './mixin/DependencyGridCache.js';\nimport DependencyLineGenerator from './mixin/DependencyLineGenerator.js';\nimport DependencyTooltip from './mixin/DependencyTooltip.js';\n\nconst\n    eventNameMap = {\n        click       : 'Click',\n        dblclick    : 'DblClick',\n        contextmenu : 'ContextMenu'\n    },\n    emptyObject = Object.freeze({});\n\n/**\n * @module Scheduler/feature/Dependencies\n */\n\nconst collectLinkedAssignments = assignment => {\n    const result = [assignment];\n\n    if (assignment.resource?.hasLinks) {\n        // Fake linked assignments\n        result.push(...assignment.resource.$links.map(l => ({\n            id               : `${l.id}_${assignment.id}`,\n            resource         : l,\n            event            : assignment.event,\n            drawDependencies : assignment.drawDependencies\n        })));\n    }\n\n    return result;\n};\n\n/**\n * Feature that draws dependencies between events. Uses a {@link Scheduler.data.DependencyStore} to determine which\n * dependencies to draw, if none is defined one will be created automatically. Dependencies can also be specified as\n * `scheduler.dependencies`, see example below:\n *\n * {@inlineexample Scheduler/feature/Dependencies.js}\n *\n * Dependencies also work in vertical mode:\n *\n * {@inlineexample Scheduler/feature/DependenciesVertical.js}\n *\n * To customize the dependency tooltip, you can provide the {@link #config-tooltip} config and specify a\n * {@link Core.widget.Tooltip#config-getHtml} function. For example:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         dependencies : {\n *             tooltip : {\n *                 getHtml({ activeTarget }) {\n *                     const dependencyModel = scheduler.resolveDependencyRecord(activeTarget);\n *\n *                     if (!dependencyModel) return null;\n *\n *                     const { fromEvent, toEvent } = dependencyModel;\n *\n *                     return `${fromEvent.name} (${fromEvent.id}) -> ${toEvent.name} (${toEvent.id})`;\n *                 }\n *             }\n *         }\n *     }\n * }\n * ```\n *\n * ## Styling dependency lines\n *\n * You can easily customize the arrows drawn between events. To change all arrows, apply the following basic SVG CSS:\n *\n * ```css\n * .b-sch-dependency {\n *    stroke-width: 2;\n *    stroke : red;\n * }\n *\n * .b-sch-dependency-arrow {\n *     fill: red;\n * }\n * ```\n *\n * To style an individual dependency line, you can provide a [cls](#Scheduler/model/DependencyModel#field-cls) in your\n * data:\n *\n * ```json\n * {\n *     \"id\"   : 9,\n *     \"from\" : 7,\n *     \"to\"   : 8,\n *     \"cls\"  : \"special-dependency\"\n * }\n * ```\n *\n * ```scss\n * // Make line dashed\n * .b-sch-dependency {\n *    stroke-dasharray: 5, 5;\n * }\n * ```\n *\n * To customize the marker used for the lines (the arrow header), you can supply a SVG path definition to the\n * {@link #config-markerDef} config:\n *\n * {@inlineexample Scheduler/feature/DependenciesMarker.js}\n *\n * You can also specify a {@link #config-radius} to get lines with rounded \"corners\", for a less boxy look:\n *\n * {@inlineexample Scheduler/feature/DependenciesRadius.js}\n *\n * For advanced use cases, you can also manipulate the {@link DomConfig} used to create a dependency line in a\n * {@link #config-renderer} function.\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * @mixes Core/mixin/Delayable\n * @mixes Scheduler/feature/mixin/DependencyCreation\n * @mixes Scheduler/feature/mixin/DependencyTooltip\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Scheduler/dependencies\n * @classtype dependencies\n * @feature\n */\nexport default class Dependencies extends InstancePlugin.mixin(\n    AttachToProjectMixin,\n    Delayable,\n    DependencyCreation,\n    DependencyGridCache,\n    DependencyLineGenerator,\n    DependencyTooltip\n) {\n\n    // <debug>\n    // region Localization test\n    static localization = [\n        'L{DependencyType.SS}',\n        'L{DependencyType.SF}',\n        'L{DependencyType.FS}',\n        'L{DependencyType.FF}',\n        'L{DependencyType.StartToStart}',\n        'L{DependencyType.StartToEnd}',\n        'L{DependencyType.EndToStart}',\n        'L{DependencyType.EndToEnd}',\n        'L{DependencyType.long}',\n        'L{DependencyType.short}'\n    ];\n    // endregion\n    // </debug>\n\n    static $name = 'Dependencies';\n\n    /**\n     * Fired when dependencies are rendered\n     * @on-owner\n     * @event dependenciesDrawn\n     */\n\n    //region Config\n\n    static configurable = {\n        /**\n         * The CSS class to add to a dependency line when hovering over it\n         * @config {String}\n         * @default\n         * @private\n         */\n        overCls : 'b-sch-dependency-over',\n\n        /**\n         * The CSS class applied to dependency lines\n         * @config {String}\n         * @default\n         * @private\n         */\n        baseCls : 'b-sch-dependency',\n\n        /**\n         * The CSS class applied to a too narrow dependency line (to hide markers)\n         * @config {String}\n         * @default\n         * @private\n         */\n        noMarkerCls : 'b-sch-dependency-markerless',\n\n        /**\n         * SVG path definition used as marker (arrow head) for the dependency lines.\n         * Should fit in a viewBox that is 9 x 6.\n         *\n         * ```javascript\n         * const scheduler = new Scheduler({\n         *     features : {\n         *         dependencies : {\n         *             // Circular marker\n         *             markerDef : 'M 2,3 a 3,3 0 1,0 6,0 a 3,3 0 1,0 -6,0'\n         *         }\n         *     }\n         * });\n         * ```\n         *\n         * @config {String}\n         * @default 'M3,0 L3,6 L9,3 z'\n         */\n        markerDef : null,\n\n        /**\n         * Radius (in px) used to draw arcs where dependency line segments connect. Specify it to get a rounded look.\n         * The radius will during drawing be reduced as needed on a per segment basis to fit lines.\n         *\n         * ```javascript\n         * const scheduler = new Scheduler({\n         *     features : {\n         *         dependencies : {\n         *             // Round the corner where line segments connect, similar to 'border-radius: 5px'\n         *             radius : 5\n         *         }\n         *     }\n         * });\n         * ```\n         *\n         * <div class=\"note\">Using a radius slightly degrades dependency rendering performance. If your app displays\n         * a lot of dependencies, it might be worth taking this into account when deciding if you want to use radius\n         * or not</div>\n         *\n         * @config {Number}\n         */\n        radius : null,\n\n        /**\n         * Renderer function, supply one if you want to manipulate the {@link DomConfig} object used to draw a\n         * dependency line between two assignments.\n         *\n         * ```javascript\n         * const scheduler = new Scheduler({\n         *     features : {\n         *         dependencies : {\n         *             renderer({ domConfig, fromAssignmentRecord : from, toAssignmentRecord : to }) {\n         *                 // Add a custom CSS class to dependencies between important assignments\n         *                 domConfig.class.important = from.important || to.important;\n         *                 domConfig.class.veryImportant = from.important && to.important;\n         *             }\n         *         }\n         *     }\n         * }\n         * ```\n         *\n         * @param {Object} renderData\n         * @param {DomConfig} renderData.domConfig that will be used to create the dependency line, can be manipulated by the\n         * renderer\n         * @param {Scheduler.model.DependencyModel} renderData.dependencyRecord The dependency being rendered\n         * @param {Scheduler.model.AssignmentModel} renderData.fromAssignmentRecord Drawing line from this assignment\n         * @param {Scheduler.model.AssignmentModel} renderData.toAssignmentRecord Drawing line to this assignment\n         * @param {Object[]} renderData.points A collection of points making up the line segments for the dependency\n         * line. Read-only in the renderer, any manipulation should be done to `domConfig`\n         * @param {Core.helper.util.Rectangle} renderData.fromBox Bounds for the fromAssignment's element\n         * @param {Core.helper.util.Rectangle} renderData.toBox Bounds for the toAssignment's element\n         * @param {'top'|'right'|'bottom'|'left'} renderData.fromSide Drawn from this side of the fromAssignment\n         * @param {'top'|'right'|'bottom'|'left'} renderData.toSide Drawn to this side of the fromAssignment\n         * @prp {Function}\n         */\n        renderer : null,\n\n        /**\n         * Specify `true` to highlight incoming and outgoing dependencies when hovering an event.\n         * @prp {Boolean}\n         */\n        highlightDependenciesOnEventHover : null,\n\n        /**\n         * Specify `false` to prevent dependencies from being drawn during scroll, for smoother scrolling in schedules\n         * with lots of dependencies. Dependencies will be drawn when scrolling stops instead.\n         * @prp {Boolean}\n         * @default\n         */\n        drawOnScroll : true,\n\n        /**\n         * The clickable/touchable width of the dependency line in pixels. Setting this to a number greater than 1 will\n         * draw an invisible but clickable line along the same path as the dependency line, making it easier to click.\n         * The tradeoff is that twice as many lines will be drawn, which can affect performance.\n         * @prp {Number}\n         */\n        clickWidth : null,\n\n        /**\n         * By default, the refresh of dependencies is buffered by 10 milliseconds so that multiple changes\n         * which may cause the dependency lines to become invalid are coalesced into one refresh. This is more\n         * efficient, but may mean the dependency lines may lag behind expectations when moving a pointer.\n         *\n         * Set this to `true` to update dependency lines immediately upon any change which causes them\n         * to require an update.\n         * @prp {Boolean}\n         * @default false\n         * @private\n         */\n        immediateRefresh : null\n    };\n\n    static delayable = {\n        doRefresh : 10\n    };\n\n    static get pluginConfig() {\n        return {\n            chain  : ['render', 'onPaint', 'onElementClick', 'onElementDblClick', 'onElementContextMenu', 'onElementMouseOver', 'onElementMouseOut', 'bindStore'],\n            assign : ['getElementForDependency', 'getElementsForDependency', 'resolveDependencyRecord']\n        };\n    };\n\n    domConfigs  = new Map();\n    drawingLive = false;\n    lastScrollX = null;\n    highlighted = new Map();\n    // Cached lookups\n    visibleResources = null;\n    usingLinks       = null;\n    visibleDateRange = null;\n    relativeTo       = null;\n\n    //endregion\n\n    //region Init & destroy\n\n    construct(client, config) {\n        super.construct(client, config);\n\n        const { scheduledEventName } = client;\n\n        client.ion({\n            svgCanvasCreated                            : 'onSVGReady',\n            // These events trigger live refresh behaviour\n            animationStart                              : 'refresh',\n            // eventDrag in Scheduler, taskDrag in Gantt\n            [scheduledEventName + 'DragStart']          : 'refresh',\n            [scheduledEventName + 'DragAbort']          : 'refresh',\n            [scheduledEventName + 'ResizeStart']        : 'refresh',\n            [scheduledEventName + 'SegmentDragStart']   : 'refresh',\n            [scheduledEventName + 'SegmentResizeStart'] : 'refresh',\n            // These events shift the surroundings to such extent that grid cache needs rebuilding to be sure that\n            // all dependencies are considered\n            timelineViewportResize                      : 'reset',\n            timeAxisViewModelUpdate                     : 'reset',\n            toggleNode                                  : 'reset',\n            thisObj                                     : this\n        });\n\n        client.rowManager.ion({\n            refresh           : 'reset', // For example when changing barMargin or rowHeight\n            changeTotalHeight : 'reset', // For example when collapsing groups\n            thisObj           : this\n        });\n\n        this.bindStore(client.store);\n    }\n\n    doDisable(disable) {\n        if (!this.isConfiguring) {\n            // Need a flag to clear dependencies when disabled, since drawing is otherwise disabled too\n            this._isDisabling = disable;\n            this.draw();\n            this._isDisabling = false;\n        }\n\n        super.doDisable(disable);\n    }\n\n    //endregion\n\n    //region RefreshTriggers\n\n    get rowStore() {\n        return this.client.isVertical ? this.client.resourceStore : this.client.store;\n    }\n\n    // React to replacing or refreshing a display store\n    bindStore(store) {\n        const me = this;\n\n        if (!me.client.isVertical) {\n            me.detachListeners('store');\n\n            if (me.client.usesDisplayStore) {\n                store?.ion({\n                    name    : 'store',\n                    refresh : 'onStoreRefresh',\n                    thisObj : me\n                });\n\n                me.reset();\n            }\n        }\n    }\n\n    onStoreRefresh() {\n        this.reset();\n    }\n\n    // <remove-on-release>\n    // TODO: Need toggleNode, viewportResize, translateRow, changeTotalHeight, idChange ?\n    // </remove-on-release>\n\n    attachToProject(project) {\n        super.attachToProject(project);\n\n        project?.ion({\n            name            : 'project',\n            commitFinalized : 'reset',\n            thisObj         : this\n        });\n    }\n\n    attachToResourceStore(resourceStore) {\n        super.attachToResourceStore(resourceStore);\n\n        resourceStore?.ion({\n            name    : 'resourceStore',\n            change  : 'onResourceStoreChange',\n            refresh : 'onResourceStoreChange',\n            thisObj : this\n        });\n    }\n\n    onResourceStoreChange() {\n        // Might have added or removed links, need to re-cache the flag\n        this.usingLinks = null;\n        this.reset();\n    }\n\n    attachToEventStore(eventStore) {\n        super.attachToEventStore(eventStore);\n\n        eventStore?.ion({\n            name    : 'eventStore',\n            refresh : 'reset',\n            thisObj : this\n        });\n    }\n\n    attachToAssignmentStore(assignmentStore) {\n        super.attachToAssignmentStore(assignmentStore);\n\n        assignmentStore?.ion({\n            name    : 'assignmentStore',\n            refresh : 'reset',\n            thisObj : this\n        });\n    }\n\n    attachToDependencyStore(dependencyStore) {\n        super.attachToDependencyStore(dependencyStore);\n\n        dependencyStore?.ion({\n            name    : 'dependencyStore',\n            change  : 'reset',\n            refresh : 'reset',\n            thisObj : this\n        });\n    }\n\n    updateDrawOnScroll(drawOnScroll) {\n        const me = this;\n\n        me.detachListeners('scroll');\n\n        if (drawOnScroll) {\n            me.client.ion({\n                name             : 'scroll',\n                scroll           : 'doRefresh',\n                horizontalScroll : 'onHorizontalScroll',\n                prio             : -100, // After Scheduler draws on scroll, since we target elements\n                thisObj          : me\n            });\n        }\n        else {\n            me.client.scrollable.ion({\n                name      : 'scroll',\n                scrollEnd : 'draw',\n                thisObj   : me\n            });\n\n            me.client.timeAxisSubGrid.scrollable.ion({\n                name      : 'scroll',\n                scrollEnd : 'draw',\n                thisObj   : me\n            });\n        }\n    }\n\n    onHorizontalScroll({ subGrid, scrollX }) {\n        if (scrollX !== this.lastScrollX && subGrid === this.client.timeAxisSubGrid) {\n            this.lastScrollX = scrollX;\n            this.draw();\n        }\n    }\n\n    onPaint() {\n        this.refresh();\n    }\n\n    //endregion\n\n    //region Dependency types\n\n    // Used by DependencyField\n    static getLocalizedDependencyType(type) {\n        return type ? this.L(`L{DependencyType.${type}}`) : '';\n    }\n\n    //endregion\n\n    //region Elements\n\n    getElementForDependency(dependency, fromAssignment, toAssignment) {\n        return this.getElementsForDependency(dependency, fromAssignment, toAssignment)[0];\n    }\n\n    // NOTE: If we ever make this public we should change it to use the syncIdMap. Currently not needed since only\n    // used in tests\n    getElementsForDependency(dependency, fromAssignment, toAssignment) {\n        // Selector targeting all instances of a dependency\n        let selector = `[data-dep-id=\"${dependency.id}\"]`;\n\n        // Optionally narrow it down to a single instance (assignment)\n        if (fromAssignment) {\n            selector += `[data-from-id=\"${fromAssignment.id}\"]`;\n        }\n        if (toAssignment) {\n            selector += `[data-to-id=\"${toAssignment.id}\"]`;\n        }\n\n        return Array.from(this.client.svgCanvas.querySelectorAll(selector));\n    }\n\n    /**\n     * Returns the dependency record for a DOM element\n     * @param {HTMLElement} element The dependency line element\n     * @returns {Scheduler.model.DependencyModel} The dependency record\n     */\n    resolveDependencyRecord(element) {\n        return element.elementData?.dependency;\n    }\n\n    isDependencyElement(element) {\n        return element.matches(`.${this.baseCls}`);\n    }\n\n    //endregion\n\n    //region DOM Events\n\n    onElementClick(event) {\n        const dependency = this.resolveDependencyRecord(event.target);\n\n        if (dependency) {\n            const eventName = eventNameMap[event.type];\n\n            /**\n             * Fires on the owning Scheduler/Gantt when a context menu event is registered on a dependency line.\n             * @event dependencyContextMenu\n             * @on-owner\n             * @param {Scheduler.view.Scheduler} source The scheduler\n             * @param {Scheduler.model.DependencyModel} dependency\n             * @param {MouseEvent} event\n             */\n            /**\n             * Fires on the owning Scheduler/Gantt when a click is registered on a dependency line.\n             * @event dependencyClick\n             * @on-owner\n             * @param {Scheduler.view.Scheduler} source The scheduler\n             * @param {Scheduler.model.DependencyModel} dependency\n             * @param {MouseEvent} event\n             */\n            /**\n             * Fires on the owning Scheduler/Gantt when a double click is registered on a dependency line.\n             * @event dependencyDblClick\n             * @on-owner\n             * @param {Scheduler.view.Scheduler} source The scheduler\n             * @param {Scheduler.model.DependencyModel} dependency\n             * @param {MouseEvent} event\n             */\n            this.client.trigger(`dependency${eventName}`, {\n                dependency,\n                event\n            });\n        }\n    }\n\n    onElementDblClick(event) {\n        return this.onElementClick(event);\n    }\n\n    onElementContextMenu(event) {\n        return this.onElementClick(event);\n    }\n\n    onElementMouseOver(event) {\n        const\n            me         = this,\n            dependency = me.resolveDependencyRecord(event.target);\n\n        if (dependency) {\n            /**\n             * Fires on the owning Scheduler/Gantt when the mouse moves over a dependency line.\n             * @event dependencyMouseOver\n             * @on-owner\n             * @param {Scheduler.view.Scheduler} source The scheduler\n             * @param {Scheduler.model.DependencyModel} dependency\n             * @param {MouseEvent} event\n             */\n            me.client.trigger('dependencyMouseOver', {\n                dependency,\n                event\n            });\n\n            if (me.overCls) {\n                me.highlight(dependency);\n            }\n        }\n    }\n\n    onElementMouseOut(event) {\n        const\n            me         = this,\n            dependency = me.resolveDependencyRecord(event.target);\n\n        if (dependency) {\n            /**\n             * Fires on the owning Scheduler/Gantt when the mouse moves out of a dependency line.\n             * @event dependencyMouseOut\n             * @on-owner\n             * @param {Scheduler.view.Scheduler} source The scheduler\n             * @param {Scheduler.model.DependencyModel} dependency\n             * @param {MouseEvent} event\n             */\n            me.client.trigger('dependencyMouseOut', {\n                dependency,\n                event\n            });\n\n            if (me.overCls) {\n                me.unhighlight(dependency);\n            }\n        }\n    }\n\n    //endregion\n\n    //region Export\n\n    // Export calls this fn to determine if a dependency should be included or not\n    isDependencyVisible(dependency) {\n        const\n            me           = this,\n            { rowStore } = me,\n            {\n                fromEvent,\n                toEvent\n            }            = dependency;\n\n        // Bail out early in case source or target doesn't exist\n        if (!fromEvent || !toEvent) {\n            return false;\n        }\n\n        const\n            fromResource = fromEvent.resource,\n            toResource   = toEvent.resource;\n\n        // Verify these are real existing Resources and not collapsed away (resource not existing in resource store)\n        if (!rowStore.isAvailable(fromResource) || !rowStore.isAvailable(toResource)) {\n            return false;\n        }\n\n        return fromEvent.isModel &&\n            !fromResource.instanceMeta(rowStore).hidden &&\n            !toResource.instanceMeta(rowStore).hidden;\n    }\n\n    //endregion\n\n    //region Highlight\n\n    updateHighlightDependenciesOnEventHover(enable) {\n        const me = this;\n\n        if (enable) {\n            const { client } = me;\n\n            client.ion({\n                name                                       : 'highlightOnHover',\n                [`${client.scheduledEventName}MouseEnter`] : params => me.highlightEventDependencies(params.eventRecord || params.taskRecord),\n                [`${client.scheduledEventName}MouseLeave`] : params => me.unhighlightEventDependencies(params.eventRecord || params.taskRecord),\n                thisObj                                    : me\n            });\n        }\n        else {\n            me.detachListeners('highlightOnHover');\n        }\n    }\n\n    highlight(dependency, cls = this.overCls) {\n        let classes = this.highlighted.get(dependency);\n\n        if (!classes) {\n            this.highlighted.set(dependency, classes = new Set());\n        }\n\n        classes.add(cls);\n\n        // Update element directly instead of refreshing and letting DomSync handle it,\n        // to optimize highlight performance with many dependencies on screen\n        for (const element of this.getElementsForDependency(dependency)) {\n            element.classList.add(cls);\n        }\n    }\n\n    unhighlight(dependency, cls = this.overCls) {\n        const classes = this.highlighted.get(dependency);\n\n        if (classes) {\n            classes.delete(cls);\n\n            if (!classes.size) {\n                this.highlighted.delete(dependency);\n            }\n        }\n\n        // Update element directly instead of refreshing and letting DomSync handle it,\n        // to optimize highlight performance with many dependencies on screen\n        for (const element of this.getElementsForDependency(dependency)) {\n            element.classList.remove(cls);\n        }\n    }\n\n    highlightEventDependencies(timespan, cls) {\n        timespan.dependencies.forEach(dep => this.highlight(dep, cls));\n    }\n\n    unhighlightEventDependencies(timespan, cls) {\n        timespan.dependencies.forEach(dep => this.unhighlight(dep, cls));\n    }\n\n    //endregion\n\n    //region Drawing\n\n    // Implemented in DependencyGridCache to return dependencies that might intersect the current viewport and thus\n    // should be considered for drawing. Fallback value here is used when there is no grid cache (which happens when it\n    // is reset. Also useful in case we want to have it configurable or opt out automatically for small datasets)\n    getDependenciesToConsider(startMS, endMS, startIndex, endIndex) {\n        // Get records from grid cache\n        return super.getDependenciesToConsider?.(startMS, endMS, startIndex, endIndex) ??\n            // Falling back to using all valid deps (fix for not trying to draw conflicted deps)\n            this.project.dependencyStore.records.filter(d => d.isValid);\n    }\n\n    // String key used as syncId\n    getDependencyKey(dependency, fromAssignment, toAssignment) {\n        return `dep:${dependency.id};from:${fromAssignment.id};to:${toAssignment.id}`;\n    }\n\n    // <remove-on-release>\n    // Draw a single dependency, if it is in view (overridden in Gantt)\n    // TODO: Was public\n    // </remove-on-release>\n    drawDependency(dependency, batch = false, forceBoxes = null) {\n        const\n            me           = this,\n            {\n                domConfigs,\n                client,\n                rowStore,\n                topIndex,\n                bottomIndex\n            }            = me,\n            {\n                eventStore,\n                useInitialAnimation\n            }            = client,\n            { idMap }    = rowStore,\n            {\n                startMS,\n                endMS\n            }            = me.visibleDateRange,\n            {\n                fromEvent,\n                toEvent\n            }            = dependency;\n\n        let fromAssigned = fromEvent.assigned,\n            toAssigned   = toEvent.assigned;\n\n        if (\n            // No point in trying to draw dep between unscheduled/non-existing events\n            fromEvent.isScheduled && toEvent.isScheduled &&\n            // Or between filtered out events\n            eventStore.includes(fromEvent) && eventStore.includes(toEvent) &&\n            // Or unassigned ones\n            fromAssigned?.size && toAssigned?.size\n        ) {\n            // Add links, if used\n            if (me.usingLinks) {\n                fromAssigned = [...fromAssigned].flatMap(collectLinkedAssignments);\n                toAssigned = [...toAssigned].flatMap(collectLinkedAssignments);\n            }\n\n            for (const from of fromAssigned) {\n                for (const to of toAssigned) {\n                    const\n                        // Using direct lookup in idMap instead of indexOf() for performance.\n                        // Resource might be filtered out or not exist at all\n                        fromIndex  = idMap[from.resource?.id]?.index,\n                        toIndex    = idMap[to.resource?.id]?.index,\n                        fromDateMS = Math.min(fromEvent.startDateMS, toEvent.startDateMS),\n                        toDateMS   = Math.max(fromEvent.endDateMS, toEvent.endDateMS);\n\n                    // Draw only if dependency intersects view, unless it is part of an export\n                    if (\n                        client.isExporting || fromIndex != null && toIndex != null &&\n                        (from.drawDependencies !== false && to.drawDependencies !== false) &&\n                        (rowStore.isAvailable(from.resource) && (rowStore.isAvailable(to.resource))) && !(\n                            // Both ends above view\n                            (fromIndex < topIndex && toIndex < topIndex) ||\n                            // Both ends below view\n                            (fromIndex > bottomIndex && toIndex > bottomIndex) ||\n                            // Both ends before view\n                            (fromDateMS < startMS && toDateMS < startMS) ||\n                            // Both ends after view\n                            (fromDateMS > endMS && toDateMS > endMS)\n                        )\n                    ) {\n                        const\n                            key            = me.getDependencyKey(dependency, from, to),\n                            lineDomConfigs = me.getDomConfigs(dependency, from, to, forceBoxes);\n\n                        if (lineDomConfigs) {\n                            // Allow deps to match animation delay of their events (the bottommost one) when fading in\n                            if (useInitialAnimation) {\n                                lineDomConfigs[0].style = {\n                                    animationDelay : `${Math.max(fromIndex, toIndex) / 20 * 1000}ms`\n                                };\n                            }\n\n                            domConfigs.set(key, lineDomConfigs);\n                        }\n                        // No room to draw a line\n                        else {\n                            domConfigs.delete(key);\n                        }\n                    }\n\n                    // Give mixins a shot at running code after a dependency is drawn. Used by grid cache to cache the\n                    // dependency (when needed)\n                    me.afterDrawDependency(dependency, fromIndex, toIndex, fromDateMS, toDateMS);\n                }\n            }\n        }\n\n        if (!batch) {\n            me.domSync();\n        }\n    }\n\n    // Hooks used by grid cache, to keep code in this file readable\n    afterDrawDependency(dependency, fromIndex, toIndex, fromDateMS, toDateMS) {\n        super.afterDrawDependency?.(dependency, fromIndex, toIndex, fromDateMS, toDateMS);\n    }\n\n    beforeDraw() {\n        super.beforeDraw?.();\n    }\n\n    afterDraw() {\n        super.afterDraw?.();\n    }\n\n    // Update DOM\n    domSync(targetElement = this.client.svgCanvas) {\n        DomSync.sync({\n            targetElement,\n            domConfig : {\n                onlyChildren : true,\n                children     : Array.from(this.domConfigs.values()).flat()\n            },\n            syncIdField      : 'syncId',\n            releaseThreshold : 0,\n            strict           : true,\n            callback() {\n                // <remove-on-release>\n                // TODO: trigger events\n                // </remove-on-release>\n            }\n        });\n    }\n\n    fillDrawingCache() {\n        const\n            me         = this,\n            { client } = me;\n\n        // Cache subgrid bounds for the duration of this draw call to not have to figure it out per dep\n        me.relativeTo = Rectangle.from(client.foregroundCanvas);\n\n        // Cache other lookups too\n        me.visibleResources = client.visibleResources;\n        me.visibleDateRange = client.visibleDateRange;\n\n        me.topIndex     = me.rowStore.indexOf(me.visibleResources.first);\n        me.bottomIndex  = me.rowStore.indexOf(me.visibleResources.last);\n\n        // Cache link lookup, to avoid semi-expensive flatMap calls in drawDependency\n        if (me.usingLinks == null) {\n            me.usingLinks = client.resourceStore.some(r => r.hasLinks);\n        }\n    }\n\n    // Draw all dependencies intersecting the current viewport immediately\n    draw() {\n        const\n            me                  = this,\n            { client }          = me,\n            { visibleDateRange } = client;\n\n        if (client.refreshSuspended || !client.foregroundCanvas || !visibleDateRange || !client.isEngineReady || (me.disabled && !me._isDisabling) || client.isExporting) {\n            return;\n        }\n\n        me.fillDrawingCache();\n\n        me.domConfigs.clear();\n\n        // Nothing to draw if there are no rows or no ticks or we are disabled\n        if (client.firstVisibleRow && client.lastVisibleRow && client.timeAxis.count && !me.disabled &&\n            (visibleDateRange.endMS - visibleDateRange.startMS > 0)\n        ) {\n            const\n                {\n                    topIndex,\n                    bottomIndex\n                }                   = me,\n                dependencies        = me.getDependenciesToConsider(visibleDateRange.startMS, visibleDateRange.endMS, topIndex, bottomIndex);\n\n            // Give mixins a shot at doing something before deps are drawn. Used by grid cache to determine if\n            // the cache should be rebuilt\n            me.beforeDraw();\n\n            for (const dependency of dependencies) {\n                me.drawDependency(dependency, true);\n            }\n\n            // Give mixins a shot at doing something after all deps are drawn\n            me.afterDraw();\n        }\n\n        me.domSync();\n\n        client.trigger('dependenciesDrawn');\n    }\n\n    //endregion\n\n    //region Refreshing\n\n    // Performs a draw on next frame, not intended to be called directly, call refresh() instead\n    doRefresh() {\n        const\n            me                     = this,\n            { client }             = me,\n            { scheduledEventName } = client;\n\n        me.draw();\n\n        // Refresh each frame during animations, during dragging & resizing  (if we have dependencies)\n        me.drawingLive = client.dependencyStore.count &&\n            (\n                client.isAnimating || (client.useInitialAnimation && client.eventStore.count) ||\n                client.features[`${scheduledEventName}Drag`]?.isActivelyDragging ||\n                client.features[`${scheduledEventName}Resize`]?.isResizing ||\n                client.features[`${scheduledEventName}SegmentDrag`]?.isActivelyDragging ||\n                client.features[`${scheduledEventName}SegmentResize`]?.isResizing\n            );\n\n        me.drawingLive && me.refresh(false);\n    }\n\n    /**\n     * Redraws dependencies on the next animation frame\n     */\n    refresh(immediateRefresh = this.immediateRefresh) {\n        const { client } = this;\n\n        // Queue up a draw unless refresh is suspended.\n        // immediateRefresh must be true to function because this method may be used as an event listener\n        // so therefore may receive an event object as a sole parameter.\n        if (!client.refreshSuspended && !this.disabled && client.isPainted && !client.timeAxisSubGrid.collapsed) {\n            (immediateRefresh === true ? this.doRefresh.now : this.doRefresh).call(this);\n        }\n    }\n\n    // Resets grid cache and performs a draw on next frame. Conditions when it should be called:\n    // * Zooming\n    // * Shifting time axis\n    // * Resizing window\n    // * CRUD\n    // ...\n    reset({ source, type } = emptyObject) {\n        super.reset?.();\n        // Refresh immediately if the timeline viewport is changing size\n        this.refresh(source === this.client && type === 'timelineviewportresize');\n    }\n\n    /**\n     * Draws all dependencies for the specified task.\n     * @deprecated 5.1 The Dependencies feature was refactored and this fn is no longer needed\n     */\n    drawForEvent() {\n        VersionHelper.deprecate('Scheduler', '6.0.0', 'Dependencies.drawForEvent() is no longer needed');\n        this.refresh();\n    }\n\n    //endregion\n\n    //region Scheduler hooks\n\n    render() {\n        // Pull in the svg canvas early to have it available during drawing\n        this.client.getConfig('svgCanvas');\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(Dependencies, false, ['Scheduler', 'ResourceHistogram']);\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\n\n/**\n * @module Scheduler/feature/EventFilter\n */\n\n/**\n * Adds event filter menu items to the timeline header context menu.\n *\n * {@inlineexample Scheduler/feature/EventFilter.js}\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *   features : {\n *     eventFilter : true // `true` by default, set to `false` to disable the feature and remove the menu item from the timeline header\n *   }\n * });\n * ```\n *\n * This feature is **enabled** by default\n *\n * @extends Core/mixin/InstancePlugin\n * @classtype eventFilter\n * @feature\n */\nexport default class EventFilter extends InstancePlugin {\n\n    static get $name() {\n        return 'EventFilter';\n    }\n\n    static get pluginConfig() {\n        return {\n            chain : ['populateTimeAxisHeaderMenu']\n        };\n    }\n\n    /**\n     * Populates the header context menu items.\n     * @param {Object} options Contains menu items and extra data retrieved from the menu target.\n     * @param {Object<String,MenuItemConfig|Boolean|null>} options.items A named object to describe menu items\n     * @internal\n     */\n    populateTimeAxisHeaderMenu({ items }) {\n        const me = this;\n\n        items.eventsFilter = {\n            text        : 'L{filterEvents}',\n            icon        : 'b-fw-icon b-icon-filter',\n            disabled    : me.disabled,\n            localeClass : me,\n            weight      : 100,\n            menu        : {\n                type        : 'popup',\n                localeClass : me,\n                items       : {\n                    nameFilter : {\n                        weight               : 110,\n                        type                 : 'textfield',\n                        cls                  : 'b-eventfilter b-last-row',\n                        clearable            : true,\n                        keyStrokeChangeDelay : 300,\n                        label                : 'L{byName}',\n                        localeClass          : me,\n                        width                : 200,\n                        internalListeners    : {\n                            change  : me.onEventFilterChange,\n                            thisObj : me\n                        }\n                    }\n                },\n                onBeforeShow({ source : menu }) {\n                    const\n                        [filterByName] = menu.items,\n                        filter         = me.store.filters.getBy('property', 'name');\n\n                    filterByName.value = filter?.value || '';\n                }\n            }\n        };\n    }\n\n    onEventFilterChange({ value }) {\n        if (value !== '') {\n            this.store.filter('name', value);\n        }\n        else {\n            this.store.removeFilter('name');\n        }\n    }\n\n    get store() {\n        const { client } = this;\n\n        return client.isGanttBase ? client.store : client.eventStore;\n    }\n}\n\nEventFilter.featureClass = 'b-event-filter';\n\nGridFeatureManager.registerFeature(EventFilter, true, ['Scheduler', 'Gantt']);\nGridFeatureManager.registerFeature(EventFilter, false, 'ResourceHistogram');\n","import DateHelper from '../../../Core/helper/DateHelper.js';\nimport TimeSpan from '../../model/TimeSpan.js';\n\n/**\n * @module Scheduler/feature/mixin/NonWorkingTimeMixin\n */\n\n/**\n * Mixin with functionality shared between {@link Scheduler/feature/NonWorkingTime} and\n * {@link Scheduler/feature/EventNonWorkingTime}.\n * @mixin\n */\nexport default Target => class NonWorkingTimeMixin extends Target {\n    static $name = 'NonWorkingTimeMixin';\n\n    static configurable = {\n        /**\n         * The maximum time axis unit to display non-working ranges for ('hour' or 'day' etc).\n         * When zooming to a view with a larger unit, no non-working time elements will be rendered.\n         *\n         * **Note:** Be careful with setting this config to big units like 'year'. When doing this,\n         * make sure the timeline {@link Scheduler/view/TimelineBase#config-startDate start} and\n         * {@link Scheduler/view/TimelineBase#config-endDate end} dates are set tightly.\n         * When using a long range (for example many years) with non-working time elements rendered per hour,\n         * you will end up with millions of elements, impacting performance.\n         * When zooming, use the {@link Scheduler/view/mixin/TimelineZoomable#config-zoomKeepsOriginalTimespan} config.\n         * @config {'millisecond'|'second'|'minute'|'hour'|'day'|'week'|'month'|'quarter'|'year'}\n         * @default\n         */\n        maxTimeAxisUnit : 'week'\n    };\n\n    getNonWorkingTimeRanges(calendar, startDate, endDate) {\n        if (!calendar.getNonWorkingTimeRanges) {\n            const result = [];\n\n            // <remove-on-release>\n            // TODO: Ask arcady if there is a built-in way for this\n            // </remove-on-release>\n\n            calendar.forEachAvailabilityInterval(\n                { startDate, endDate, isForward : true },\n                (intervalStartDate, intervalEndDate, calendarCacheInterval) => {\n                    for (const [entry, cache] of calendarCacheInterval.intervalGroups) {\n                        if (!cache.getIsWorking()) {\n                            result.push({\n                                name      : entry.name,\n                                iconCls   : entry.iconCls,\n                                cls       : entry.cls,\n                                startDate : intervalStartDate,\n                                endDate   : intervalEndDate\n                            });\n                        }\n                    }\n                }\n            );\n\n            return result;\n        }\n\n        return calendar.getNonWorkingTimeRanges(startDate, endDate);\n    }\n\n    getCalendarTimeRanges(calendar, ignoreName = false) {\n        const\n            me                      = this,\n            { timeAxis, fillTicks } = me.client,\n            { unit, increment }     = timeAxis,\n            shouldPaint             = !me.maxTimeAxisUnit || DateHelper.compareUnits(unit, me.maxTimeAxisUnit) <= 0;\n\n        if (calendar && shouldPaint && timeAxis.count) {\n            const\n                allRanges     = me.getNonWorkingTimeRanges(calendar, timeAxis.startDate, timeAxis.endDate),\n                timeSpans     = allRanges.map(interval => new TimeSpan({\n                    name      : interval.name,\n                    cls       : `b-nonworkingtime ${interval.cls || ''}`,\n                    startDate : interval.startDate,\n                    endDate   : interval.endDate\n                })),\n                mergedSpans = [];\n\n            let prevRange = null;\n\n            // intervals returned by the calendar are not merged, let's combine them to yield fewer elements\n            for (const range of timeSpans) {\n                if (prevRange && range.startDate <= prevRange.endDate && (ignoreName || range.name === prevRange.name) && range.duration > 0) {\n                    prevRange.endDate = range.endDate;\n                }\n                else {\n                    mergedSpans.push(range);\n                    range.setData('id', `nonworking-${mergedSpans.length}`);\n                    prevRange = range;\n                }\n            }\n\n            // When filling ticks, non-working-time ranges are cropped to full ticks too\n            if (fillTicks) {\n                mergedSpans.forEach(span => {\n                    span.setStartEndDate(\n                        DateHelper.ceil(span.startDate, { magnitude : increment, unit }),\n                        DateHelper.floor(span.endDate, { magnitude : increment, unit })\n                    );\n                });\n            }\n\n            return mergedSpans;\n        }\n        else {\n            return [];\n        }\n    }\n\n    //region Basic scheduler calendar\n\n    setupDefaultCalendar() {\n        const { client, project } = this;\n\n        if (\n            // Might have been set up by NonWorkingTime / EventNonWorkingTime already\n            !this.autoGeneratedWeekends &&\n            // For basic scheduler...\n            !client.isSchedulerPro &&\n            !client.isGantt &&\n            // ...that uses the default calendar...\n            project.effectiveCalendar === project.defaultCalendar &&\n            // ...and has no defined intervals\n            !project.defaultCalendar.intervalStore.count\n        ) {\n            this.autoGeneratedWeekends = true;\n            this.updateDefaultCalendar();\n        }\n    }\n\n    updateDefaultCalendar() {\n        if (this.autoGeneratedWeekends) {\n            const\n                calendar     = this.client.project.effectiveCalendar,\n                intervals    = this.defaultNonWorkingIntervals,\n                hasIntervals = Boolean(intervals.length);\n\n            // The default \"weekends\" calendar should not be time zone converted\n            calendar.ignoreTimeZone = true;\n\n            calendar.clearIntervals(hasIntervals);\n\n            // Update weekends as non-working time\n            if (hasIntervals) {\n                calendar.addIntervals(intervals);\n            }\n        }\n    }\n\n    updateLocalization() {\n        super.updateLocalization?.();\n\n        this.autoGeneratedWeekends && this.updateDefaultCalendar();\n    }\n\n    get defaultNonWorkingIntervals() {\n        const dayNames  = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n        return DateHelper.nonWorkingDaysAsArray.map(dayIndex => ({\n            recurrentStartDate : `on ${dayNames[dayIndex]} at 0:00`,\n            recurrentEndDate   : `on ${dayNames[(dayIndex + 1) % 7]} at 0:00`,\n            isWorking          : false\n        }));\n    }\n\n    //endregion\n};\n","import AbstractTimeRanges from './AbstractTimeRanges.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport VersionHelper from '../../Core/helper/VersionHelper.js';\nimport AttachToProjectMixin from '../data/mixin/AttachToProjectMixin.js';\nimport NonWorkingTimeMixin from './mixin/NonWorkingTimeMixin.js';\n\n/**\n * @module Scheduler/feature/NonWorkingTime\n */\n\n/**\n * Feature that allows styling of weekends (and other non-working time) by adding timeRanges for those days.\n *\n * {@inlineexample Scheduler/feature/NonWorkingTime.js}\n *\n * By default, the basic Scheduler's calendar is empty. When enabling this feature in the basic Scheduler, it injects\n * Saturday and Sunday weekend intervals if no intervals are encountered. For Scheduler Pro, it visualizes the project\n * calendar and does not automatically inject anything. You have to define a Calendar in the application and assign it\n * to the project, for more information on how to do that, please see Scheduler Pro's Scheduling/Calendars guide.\n *\n * Please note that to not clutter the view (and have a large negative effect on performance) the feature does not\n * render ranges shorter than the base unit used by the time axis. The behavior can be disabled with\n * {@link #config-hideRangesOnZooming} config.\n *\n * The feature also bails out of rendering ranges for very zoomed out views completely for the same reasons (see\n * {@link #config-maxTimeAxisUnit} for details).\n *\n * Also note that the feature uses virtualized rendering, only the currently visible non-working-time ranges are\n * available in the DOM.\n *\n * This feature is **off** by default for Scheduler, but **enabled** by default for Scheduler Pro.\n * For info on enabling it, see {@link Grid/view/mixin/GridFeatures}.\n *\n * @extends Scheduler/feature/AbstractTimeRanges\n * @demo Scheduler/nonworkingdays\n * @classtype nonWorkingTime\n * @mixes Scheduler/feature/mixin/NonWorkingTimeMixin\n * @feature\n */\nexport default class NonWorkingTime extends AbstractTimeRanges.mixin(AttachToProjectMixin, NonWorkingTimeMixin) {\n    //region Default config\n\n    static $name = 'NonWorkingTime';\n\n    /** @hideconfigs enableResizing, store*/\n\n    static get defaultConfig() {\n        return {\n            /**\n             * Set to `true` to highlight non-working periods of time\n             * @config {Boolean}\n             * @deprecated Since 5.2.0, will be removed since the feature is pointless if set to false\n             */\n            highlightWeekends : null,\n\n            /**\n             * The feature by default does not render ranges smaller than the base unit used by the time axis.\n             * Set this config to `false` to disable this behavior.\n             *\n             * <div class=\"note\">The {@link #config-maxTimeAxisUnit} config defines a zoom level at which to bail out of\n             * rendering ranges completely.</div>\n             * @config {Boolean}\n             * @default\n             */\n            hideRangesOnZooming : true,\n\n            showHeaderElements : true,\n            showLabelInBody    : true,\n\n            autoGeneratedWeekends : false\n        };\n    }\n\n    static pluginConfig = {\n        chain : [\n            'onPaint',\n            'attachToProject',\n            'updateLocalization',\n            'onConfigChange',\n            'onSchedulerHorizontalScroll'\n        ]\n    };\n\n    //endregion\n\n    //region Init & destroy\n\n    doDestroy() {\n        this.attachToCalendar(null);\n        super.doDestroy();\n    }\n\n    set highlightWeekends(highlight) {\n        VersionHelper.deprecate('Scheduler', '6.0.0', 'Deprecated in favour of disabling the feature');\n\n        this.disabled = !highlight;\n    }\n\n    get highlightWeekends() {\n        return !this.disabled;\n    }\n\n    onConfigChange({ name }) {\n        if (!this.isConfiguring && name === 'fillTicks') {\n            this.refresh();\n        }\n    }\n\n    //endregion\n\n    //region Project\n\n    attachToProject(project) {\n        super.attachToProject(project);\n\n        this.attachToCalendar(project.effectiveCalendar);\n\n        // if there's no graph yet - need to delay this call until it appears, but not for scheduler\n        if (!project.graph && !this.client.isScheduler) {\n            project.ion({\n                name      : 'project',\n                dataReady : { fn : () => this.attachToCalendar(project.effectiveCalendar), once : true },\n                thisObj   : this\n            });\n        }\n\n        project.ion({\n            name           : 'project',\n            calendarChange : () => this.attachToCalendar(project.effectiveCalendar),\n            thisObj        : this\n        });\n    }\n\n    //endregion\n\n    //region TimeAxisViewModel\n\n    onTimeAxisViewModelUpdate(...args) {\n        this._timeAxisUnitDurationMs = null;\n        return super.onTimeAxisViewModelUpdate(...args);\n    }\n\n    //endregion\n\n    //region Calendar\n\n    attachToCalendar(calendar) {\n        const\n            me                  = this,\n            { project, client } = me;\n\n        me.detachListeners('calendar');\n\n        me.autoGeneratedWeekends = false;\n\n        if (calendar) {\n            // Sets up a default weekend calendar for basic Scheduler, when no calendar is set\n            me.setupDefaultCalendar();\n\n            calendar.intervalStore.ion({\n                name   : 'calendar',\n                change : () => me.setTimeout(() => me.refresh(), 1)\n            });\n        }\n\n        // On changing calendar we react to a data level event which is triggered after project refresh.\n        // Redraw right away\n        if (client.isEngineReady && !client.project.isDelayingCalculation && !client.isDestroying) {\n            me.refresh();\n        }\n        // Initially there is no guarantee we are ready to draw, wait for refresh\n        else if (!project.isDestroyed) {\n            me.detachListeners('initialProjectListener');\n            project.ion({\n                name : 'initialProjectListener',\n                refresh({ isCalculated }) {\n                    // Cant render early, have to wait for calculations\n                    if (isCalculated !== false) {\n                        me.refresh();\n                        me.detachListeners('initialProjectListener');\n                    }\n                },\n                thisObj : me\n            });\n        }\n    }\n\n    get calendar() {\n        return this.project?.effectiveCalendar;\n    }\n\n    //endregion\n\n    //region Draw\n\n    get timeAxisUnitDurationMs() {\n        // calculate and cache duration of the timeAxis unit in milliseconds\n        if (!this._timeAxisUnitDurationMs) {\n            this._timeAxisUnitDurationMs = DateHelper.as('ms', 1, this.client.timeAxis.unit);\n        }\n\n        return this._timeAxisUnitDurationMs;\n    }\n\n    /**\n     * Based on this method result the feature decides whether the provided non-working period should\n     * be rendered or not.\n     * The method checks that the range has non-zero {@link Scheduler.model.TimeSpan#field-duration},\n     * lays in the visible timespan and its duration is longer or equal the base timeaxis unit\n     * (if {@link #config-hideRangesOnZooming} is `true`).\n     *\n     * Override the method to implement your custom range rendering vetoing logic.\n     * @param {Scheduler.model.TimeSpan} range Range to render.\n     * @returns {Boolean} `true` if the range should be rendered and `false` otherwise.\n     */\n    shouldRenderRange(range) {\n        // if the range is longer or equal than one timeAxis unit then render it\n        return super.shouldRenderRange(range) && (!this.hideRangesOnZooming || range.durationMS >= this.timeAxisUnitDurationMs);\n    }\n\n    // Calendar intervals as TimeSpans, with adjacent intervals merged to create fewer\n    get timeRanges() {\n        const me = this;\n\n        if (!me._timeRanges) {\n            me._timeRanges = me.getCalendarTimeRanges(me.calendar);\n        }\n\n        return me._timeRanges;\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(NonWorkingTime, false, 'Scheduler');\nGridFeatureManager.registerFeature(NonWorkingTime, true, ['SchedulerPro', 'Gantt', 'ResourceHistogram']);\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport Tooltip from '../../Core/widget/Tooltip.js';\nimport ClockTemplate from '../tooltip/ClockTemplate.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\n\n/**\n * @module Scheduler/feature/ScheduleTooltip\n */\n\n/**\n * Feature that displays a tooltip containing the time at the mouse position when hovering empty parts of the schedule.\n * To hide the schedule tooltip, just disable this feature:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         scheduleTooltip : false\n *     }\n * });\n * ```\n *\n * You can also output a message along with the default time indicator (to indicate resource availability etc)\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *    features : {\n *       scheduleTooltip : {\n *           getText(date, event, resource) {\n *               return 'Hovering ' + resource.name;\n *           }\n *       }\n *   }\n * });\n * ```\n *\n * To take full control over the markup shown in the tooltip you can override the {@link #function-generateTipContent} method:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         scheduleTooltip : {\n *             generateTipContent({ date, event, resourceRecord }) {\n *                 return `\n *                     <dl>\n *                         <dt>Date</dt><dd>${date}</dd>\n *                         <dt>Resource</dt><dd>${resourceRecord.name}</dd>\n *                     </dl>\n *                 `;\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * Configuration properties from the feature are passed down into the resulting {@link Core.widget.Tooltip} instance.\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         scheduleTooltip : {\n *             // Don't show the tip until the mouse has been over the schedule for three seconds\n *             hoverDelay : 3000\n *         }\n *     }\n * });\n * ```\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Scheduler/basic\n * @inlineexample Scheduler/feature/ScheduleTooltip.js\n * @classtype scheduleTooltip\n * @feature\n */\nexport default class ScheduleTooltip extends InstancePlugin {\n    //region Config\n\n    static get $name() {\n        return 'ScheduleTooltip';\n    }\n\n    static get configurable() {\n        return {\n            messageTemplate : data => `<div class=\"b-sch-hovertip-msg\">${data.message}</div>`,\n\n            /**\n             * Set to `true` to hide this tooltip when hovering non-working time. Defaults to `false` for Scheduler,\n             * `true` for SchedulerPro\n             * @config {Boolean}\n             */\n            hideForNonWorkingTime : null\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        return {\n            chain : ['onPaint']\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    /**\n     * Set up drag and drop and hover tooltip.\n     * @private\n     */\n    onPaint({ firstPaint }) {\n        if (!firstPaint) {\n            return;\n        }\n\n        const\n            me         = this,\n            { client } = me;\n\n        if (client.isSchedulerPro && me.hideForNonWorkingTime === undefined) {\n            me.hideForNonWorkingTime = true;\n        }\n\n        let reshowListener;\n\n        const tip = me.hoverTip = new Tooltip({\n            id                       : `${client.id}-schedule-tip`,\n            cls                      : 'b-sch-scheduletip',\n            allowOver                : true,\n            hoverDelay               : 0,\n            hideDelay                : 100,\n            showOnHover              : true,\n            forElement               : client.timeAxisSubGridElement,\n            anchorToTarget           : false,\n            trackMouse               : true,\n            updateContentOnMouseMove : true,\n            // disable text content and monitor resize for tooltip, otherwise it doesn't\n            // get sized properly on first appearance\n            monitorResize            : false,\n            textContent              : false,\n            forSelector              : '.b-schedulerbase:not(.b-dragging-event):not(.b-dragcreating) .b-grid-body-container:not(.b-scrolling) .b-timeline-subgrid:not(.b-scrolling) > :not(.b-sch-foreground-canvas):not(.b-group-footer):not(.b-group-row) *',\n            // Do not constrain at all, want it to be able to go outside of the viewport to not get in the way\n            getHtml                  : me.getHoverTipHtml.bind(me),\n            onDocumentMouseDown(event) {\n                // Click on the scheduler hides until the very next\n                // non-button-pressed mouse move!\n                if (tip.forElement.contains(event.event.target)) {\n                    reshowListener = EventHelper.on({\n                        thisObj   : me,\n                        element   : client.timeAxisSubGridElement,\n                        mousemove : e => tip.internalOnPointerOver(e),\n                        capture   : true\n                    });\n                }\n\n                const hideAnimation = tip.hideAnimation;\n                tip.hideAnimation = false;\n                tip.constructor.prototype.onDocumentMouseDown.call(tip, event);\n                tip.hideAnimation = hideAnimation;\n            },\n            // on Core/mixin/Events constructor, me.config.listeners is deleted and attributed its value to me.configuredListeners\n            // to then on processConfiguredListeners it set me.listeners to our TooltipBase\n            // but since we need our initial config.listeners to set to our internal tooltip, we leave processConfiguredListeners empty\n            // to avoid lost our listeners to apply for our internal tooltip here and force our feature has all Tooltip events firing\n            ...me.config,\n            internalListeners : me.configuredListeners\n        });\n\n        // We have to add our own listener after instantiation because it may conflict with a configured listener\n        tip.ion({\n            pointerover({ event }) {\n                const buttonsPressed = 'buttons' in event ? event.buttons > 0\n                    : event.which > 0; // fallback for Safari which doesn't support 'buttons'\n\n                // This is the non-button-pressed mousemove\n                // after the document mousedown\n                if (!buttonsPressed && reshowListener) {\n                    reshowListener();\n                }\n\n                // Never any tooltip while interaction is ongoing and a mouse button is pressed\n                return !me.disabled && !buttonsPressed;\n            },\n            innerhtmlupdate({ source }) {\n                me.clockTemplate.updateDateIndicator(source.element, me.lastTime);\n            }\n        });\n\n        // Update tooltip after zooming\n        client.ion({\n            timeAxisViewModelUpdate : 'updateTip',\n            thisObj                 : me\n        });\n\n        me.clockTemplate = new ClockTemplate({\n            scheduler : client\n        });\n    }\n\n    // leave configuredListeners alone until render time at which they are used on the tooltip\n    processConfiguredListeners() {}\n\n    updateTip() {\n        if (this.hoverTip.isVisible) {\n            this.hoverTip.updateContent();\n        }\n    }\n\n    doDestroy() {\n        this.destroyProperties('clockTemplate', 'hoverTip');\n        super.doDestroy();\n    }\n\n    //endregion\n\n    //region Contents\n\n    /**\n     * @deprecated Use {@link #function-generateTipContent} instead.\n     * Gets html to display in hover tooltip (tooltip displayed on empty parts of scheduler)\n     * @private\n     */\n    getHoverTipHtml({ tip, event }) {\n        const\n            me        = this,\n            scheduler = me.client,\n            date      = event && scheduler.getDateFromDomEvent(event, 'floor', true);\n\n        let html      = me.lastHtml;\n\n        // event.target might be null in the case of being hosted in a web component https://github.com/bryntum/bryntum-suite/pull/4488\n        if (date && event.target) {\n            const resourceRecord = scheduler.resolveResourceRecord(event);\n\n            // resourceRecord might be null if user hover over the tooltip, but we shouldn't hide the tooltip in this case\n            if ((resourceRecord && (date - me.lastTime !== 0 || resourceRecord.id !== me.lastResourceId))) {\n                if (me.hideForNonWorkingTime) {\n                    const isWorkingTime = resourceRecord.isWorkingTime(date);\n\n                    tip.element.classList.toggle('b-nonworking-time', !isWorkingTime);\n                }\n\n                me.lastResourceId = resourceRecord.id;\n                html              = me.lastHtml = me.generateTipContent({ date, event, resourceRecord });\n            }\n        }\n        else {\n            tip.hide();\n            me.lastTime = null;\n            me.lastResourceId = null;\n        }\n\n        return html;\n    }\n\n    /**\n     * Called as mouse pointer is moved over a new resource or time block. You can override this to show\n     * custom HTML in the tooltip.\n     * @param {Object} context\n     * @param {Date} context.date The date of the hovered point\n     * @param {Event} context.event The DOM event that triggered this tooltip to show\n     * @param {Scheduler.model.ResourceModel} context.resourceRecord The resource record\n     * @returns {String} The HTML contents to show in the tooltip (an empty return value will hide the tooltip)\n     */\n    generateTipContent({ date, event, resourceRecord }) {\n        const\n            me          = this,\n            clockHtml   = me.clockTemplate.generateContent({\n                date,\n                text : me.client.getFormattedDate(date)\n            }),\n            messageHtml = me.messageTemplate({\n                message : me.getText(date, event, resourceRecord) || ''\n            });\n\n        me.lastTime = date;\n\n        return clockHtml + messageHtml;\n    }\n\n    /**\n     * Override this to render custom text to default hover tip\n     * @param {Date} date\n     * @param {Event} event Browser event\n     * @param {Scheduler.model.ResourceModel} resourceRecord The resource record\n     * @returns {String}\n     */\n    getText(date, event, resourceRecord) {}\n\n    //endregion\n}\n\n// <remove-on-release>\n// TODO: Refactor SASS so that auto-generated class name of 'b-' + cls.name.toLowerCase() can be used.\n// </remove-on-release>\nScheduleTooltip.featureClass = 'b-scheduletip';\n\nGridFeatureManager.registerFeature(ScheduleTooltip, true, 'Scheduler');\nGridFeatureManager.registerFeature(ScheduleTooltip, false, 'ResourceUtilization');\n","import HeaderMenu from '../../Grid/feature/HeaderMenu.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport '../../Core/widget/Slider.js';\n\n/**\n * @module Scheduler/feature/TimeAxisHeaderMenu\n */\nconst setTimeSpanOptions = {\n    maintainVisibleStart : true\n};\n\n/**\n * Adds scheduler specific menu items to the timeline header context menu.\n *\n * ## Default timeaxis header menu items\n *\n * Here is the list of menu items provided by this and other features:\n *\n * | Reference          | Text                  | Weight | Feature                                           | Description                  |\n * |--------------------|-----------------------|--------|---------------------------------------------------|------------------------------|\n * | `eventsFilter`     | Filter tasks          | 100    | {@link Scheduler.feature.EventFilter EventFilter} | Submenu for event filtering  |\n * | \\>`nameFilter`     | By name               | 110    | {@link Scheduler.feature.EventFilter EventFilter} | Filter by `name`             |\n * | `zoomLevel`        | Zoom                  | 200    | *This feature*                                    | Submenu for timeline zooming |\n * | \\>`zoomSlider`     | -                     | 210    | *This feature*                                    | Changes current zoom level   |\n * | `dateRange`        | Date range            | 300    | *This feature*                                    | Submenu for timeline range   |\n * | \\>`startDateField` | Start date            | 310    | *This feature*                                    | Start date for the timeline  |\n * | \\>`endDateField`   | End date              | 320    | *This feature*                                    | End date for the timeline    |\n * | \\>`leftShiftBtn`   | <                     | 330    | *This feature*                                    | Shift backward               |\n * | \\>`todayBtn`       | Today                 | 340    | *This feature*                                    | Go to today                  |\n * | \\>`rightShiftBtn`  | \\>                    | 350    | *This feature*                                    | Shift forward                |\n * | `currentTimeLine`  | Show current timeline | 400    | {@link Scheduler.feature.TimeRanges TimeRanges}   | Show current time line       |\n *\n * \\> - first level of submenu\n *\n * ## Customizing the menu items\n *\n * The menu items in the TimeAxis Header menu can be customized, existing items can be changed or removed,\n * and new items can be added. This is handled using the `items` config of the feature.\n *\n * ### Add extra items:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         timeAxisHeaderMenu : {\n *             items : {\n *                 extraItem : {\n *                     text : 'Extra',\n *                     icon : 'b-fa b-fa-fw b-fa-flag',\n *                     onItem() {\n *                         ...\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * ### Remove existing items:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         timeAxisHeaderMenu : {\n *             items : {\n *                 zoomLevel : false\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * ### Customize existing item:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         timeAxisHeaderMenu : {\n *             items : {\n *                 zoomLevel : {\n *                     text : 'Scale'\n *                 }\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * ### Customizing submenu items:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *      features : {\n *          timeAxisHeaderMenu : {\n *              items : {\n *                  dateRange : {\n *                      menu : {\n *                          items : {\n *                              todayBtn : {\n *                                  text : 'Now'\n *                              }\n *                          }\n *                      }\n *                  }\n *              }\n *          }\n *      }\n * });\n * ```\n *\n * ### Manipulate existing items:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         timeAxisHeaderMenu : {\n *             // Process items before menu is shown\n *             processItems({ items }) {\n *                  // Add an extra item dynamically\n *                 items.coolItem = {\n *                     text : 'Cool action',\n *                     onItem() {\n *                           // ...\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * Full information of the menu customization can be found in the [\"Customizing the Event menu, the Schedule menu, and the TimeAxisHeader menu\"](#Scheduler/guides/customization/contextmenu.md)\n * guide.\n *\n * This feature is **enabled** by default\n *\n * @extends Grid/feature/HeaderMenu\n * @demo Scheduler/basic\n * @classtype timeAxisHeaderMenu\n * @feature\n * @inlineexample Scheduler/feature/TimeAxisHeaderMenu.js\n */\nexport default class TimeAxisHeaderMenu extends HeaderMenu {\n\n    //region Config\n\n    static get $name() {\n        return 'TimeAxisHeaderMenu';\n    }\n\n    static get defaultConfig() {\n        return {\n            /**\n             * A function called before displaying the menu that allows manipulations of its items.\n             * Returning `false` from this function prevents the menu being shown.\n             *\n             * ```javascript\n             *   features         : {\n             *       timeAxisHeaderMenu : {\n             *           processItems({ items }) {\n             *               // Add or hide existing items here as needed\n             *               items.myAction = {\n             *                   text   : 'Cool action',\n             *                   icon   : 'b-fa b-fa-fw b-fa-ban',\n             *                   onItem : () => console.log('Some coolness'),\n             *                   weight : 300 // Move to end\n             *               };\n             *\n             *               // Hide zoom slider\n             *               items.zoomLevel.hidden = true;\n             *           }\n             *       }\n             *   },\n             * ```\n             *\n             * @param {Object} context An object with information about the menu being shown\n             * @param {Object<String,MenuItemConfig>} context.items An object containing the {@link Core.widget.MenuItem menu item} configs keyed by their id\n             * @param {Event} context.event The DOM event object that triggered the show\n             * @config {Function}\n             * @preventable\n             */\n            processItems : null,\n\n            /**\n             * This is a preconfigured set of items used to create the default context menu.\n             *\n             * The `items` provided by this feature are listed in the intro section of this class. You can\n             * configure existing items by passing a configuration object to the keyed items.\n             *\n             * To remove existing items, set corresponding keys `null`:\n             *\n             * ```javascript\n             * const scheduler = new Scheduler({\n             *     features : {\n             *         timeAxisHeaderMenu : {\n             *             items : {\n             *                 eventsFilter : null\n             *             }\n             *         }\n             *     }\n             * });\n             * ```\n             *\n             * See the feature config in the above example for details.\n             *\n             * @config {Object<String,MenuItemConfig|Boolean|null>} items\n             */\n            items : null,\n\n            type : 'timeAxisHeader'\n        };\n    }\n\n    static get pluginConfig() {\n        const config = super.pluginConfig;\n\n        config.chain.push('populateTimeAxisHeaderMenu');\n\n        return config;\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * This event fires on the owning Scheduler before the context menu is shown for the time axis header.\n     * Allows manipulation of the items to show in the same way as in the {@link #config-processItems}.\n     *\n     * Returning `false` from a listener prevents the menu from being shown.\n     *\n     * @event timeAxisHeaderMenuBeforeShow\n     * @on-owner\n     * @preventable\n     * @param {Scheduler.view.Scheduler} source The scheduler\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Object<String,MenuItemConfig>} items Menu item configs\n     * @param {Grid.column.Column} column Time axis column\n     */\n\n    /**\n     * This event fires on the owning Scheduler after the context menu is shown for a header\n     * @event timeAxisHeaderMenuShow\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The scheduler\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Object<String,MenuItemConfig>} items Menu item configs\n     * @param {Grid.column.Column} column Time axis column\n     */\n\n    /**\n     * This event fires on the owning Scheduler when an item is selected in the header context menu.\n     * @event timeAxisHeaderMenuItem\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The scheduler\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Core.widget.MenuItem} item Selected menu item\n     * @param {Grid.column.Column} column Time axis column\n     */\n\n    //endregion\n\n    construct() {\n        super.construct(...arguments);\n\n        if (this.triggerEvent.includes('click') && this.client.zoomOnTimeAxisDoubleClick) {\n            this.client.zoomOnTimeAxisDoubleClick = false;\n        }\n    }\n\n    shouldShowMenu(eventParams) {\n        const\n            { column, targetElement } = eventParams,\n            { client } = this;\n\n        if (client.isHorizontal) {\n            return column?.enableHeaderContextMenu !== false && column?.isTimeAxisColumn;\n        }\n\n        return targetElement.matches('.b-sch-header-timeaxis-cell');\n    }\n\n    showContextMenu(eventParams) {\n        super.showContextMenu(...arguments);\n\n        if (this.menu) {\n            // the TimeAxis's context menu probably will cause scrolls because it manipulates the dates.\n            // The menu should not hide on scroll when for a TimeAxisColumn\n            this.menu.scrollAction = 'realign';\n        }\n    }\n\n    populateTimeAxisHeaderMenu({ items }) {\n        const\n            me         = this,\n            { client } = me,\n            dateStep   = {\n                magnitude : client.timeAxis.shiftIncrement,\n                unit      : client.timeAxis.shiftUnit\n            };\n\n        Object.assign(items, {\n            zoomLevel : {\n                text        : 'L{pickZoomLevel}',\n                localeClass : me,\n                icon        : 'b-fw-icon b-icon-search-plus',\n                disabled    : !client.presets.count || me.disabled,\n                weight      : 200,\n                menu        : {\n                    type  : 'popup',\n                    items : {\n                        zoomSlider : {\n                            weight               : 210,\n                            type                 : 'slider',\n                            minWidth             : 130,\n                            showValue            : false,\n                            // so that we can use the change event which is easier to inject in tests\n                            triggerChangeOnInput : true\n                        }\n                    },\n                    onBeforeShow({ source : menu }) {\n                        const [zoom] = menu.items;\n\n                        zoom.min = client.minZoomLevel;\n                        zoom.max = client.maxZoomLevel;\n                        zoom.value = client.zoomLevel;\n\n                        // Default slider value is 50 which causes the above to trigger onZoomSliderChange (when\n                        // maxZoomLevel < 50) if we add our listener prior to this point.\n                        me.zoomDetatcher = zoom.ion({ change : 'onZoomSliderChange', thisObj : me });\n                    },\n                    onHide() {\n                        if (me.zoomDetatcher) {\n                            me.zoomDetatcher();\n                            me.zoomDetatcher = null;\n                        }\n                    }\n                }\n            },\n            dateRange : {\n                text        : 'L{activeDateRange}',\n                localeClass : me,\n                icon        : 'b-fw-icon b-icon-calendar',\n                weight      : 300,\n                menu        : {\n                    type     : 'popup',\n                    cls      : 'b-sch-timeaxis-menu-daterange-popup',\n                    defaults : {\n                        localeClass : me\n                    },\n                    items : {\n                        startDateField : {\n                            type              : 'datefield',\n                            label             : 'L{startText}',\n                            weight            : 310,\n                            labelWidth        : '6em',\n                            required          : true,\n                            step              : dateStep,\n                            internalListeners : {\n                                change  : me.onRangeDateFieldChange,\n                                thisObj : me\n                            }\n                        },\n                        endDateField : {\n                            type              : 'datefield',\n                            label             : 'L{endText}',\n                            weight            : 320,\n                            labelWidth        : '6em',\n                            required          : true,\n                            step              : dateStep,\n                            internalListeners : {\n                                change  : me.onRangeDateFieldChange,\n                                thisObj : me\n                            }\n                        },\n                        leftShiftBtn : {\n                            type              : 'button',\n                            weight            : 330,\n                            cls               : 'b-left-nav-btn',\n                            icon              : 'b-icon b-icon-previous',\n                            color             : 'b-blue b-raised',\n                            flex              : 1,\n                            margin            : 0,\n                            internalListeners : {\n                                click   : me.onLeftShiftBtnClick,\n                                thisObj : me\n                            }\n                        },\n                        todayBtn : {\n                            type              : 'button',\n                            weight            : 340,\n                            cls               : 'b-today-nav-btn',\n                            color             : 'b-blue b-raised',\n                            text              : 'L{todayText}',\n                            flex              : 4,\n                            margin            : '0 8',\n                            internalListeners : {\n                                click   : me.onTodayBtnClick,\n                                thisObj : me\n                            }\n                        },\n                        rightShiftBtn : {\n                            type              : 'button',\n                            weight            : 350,\n                            cls               : 'b-right-nav-btn',\n                            icon              : 'b-icon b-icon-next',\n                            color             : 'b-blue b-raised',\n                            flex              : 1,\n                            internalListeners : {\n                                click   : me.onRightShiftBtnClick,\n                                thisObj : me\n                            }\n                        }\n                    },\n                    internalListeners : {\n                        paint   : me.initDateRangeFields,\n                        thisObj : me\n                    }\n                }\n            }\n        });\n    }\n\n    onZoomSliderChange({ value }) {\n        const me = this;\n\n        // Zooming maintains timeline center point by scrolling the newly rerendered timeline to the\n        // correct point to maintain the visual center. Temporarily inhibit context menu hide on scroll\n        // of its context element.\n        me.menu.scrollAction = 'realign';\n\n        me.client.zoomLevel = value;\n\n        me.menu.setTimeout({\n            fn                : () => me.menu.scrollAction = 'hide',\n            delay             : 100,\n            cancelOutstanding : true\n        });\n    }\n\n    initDateRangeFields({ source : dateRange, firstPaint }) {\n        if (firstPaint) {\n            const { widgetMap } = dateRange;\n\n            this.startDateField = widgetMap.startDateField;\n            this.endDateField = widgetMap.endDateField;\n        }\n\n        this.initDates();\n    }\n\n    initDates() {\n        const me = this;\n\n        me.startDateField.suspendEvents();\n        me.endDateField.suspendEvents();\n\n        // The actual scheduler start dates may include time, but our Date field cannot currently handle\n        // a time portion and throws it away, so when we need the value from an unchanged field, we need\n        // to use the initialValue set from the timeAxis values.\n        // Until our DateField can optionally include a time value, this is the solution.\n        me.startDateField.value = me.startDateFieldInitialValue = me.client.startDate;\n        me.endDateField.value = me.endDateFieldInitialValue = me.client.endDate;\n\n        me.startDateField.resumeEvents();\n        me.endDateField.resumeEvents();\n    }\n\n    onRangeDateFieldChange({ source }) {\n        const\n            me               = this,\n            startDateChanged = (source === me.startDateField),\n            { client }       = me,\n            { timeAxis }     = client,\n            startDate        = me.startDateFieldInitialValue && !startDateChanged ? me.startDateFieldInitialValue : me.startDateField.value;\n\n        let endDate = me.endDateFieldInitialValue && startDateChanged ? me.endDateFieldInitialValue : me.endDateField.value;\n\n        // When either of the fields is changed, we no longer use its initialValue from the timeAxis start or end\n        // so that gets nulled to indicate that it's unavailable and the real field value is to be used.\n        if (startDateChanged) {\n            me.startDateFieldInitialValue = null;\n        }\n        else {\n            me.endDateFieldInitialValue = null;\n        }\n\n        // Because the start and end dates are exclusive, avoid a zero\n        // length time axis by incrementing the end by one tick unit\n        // if they are the same.\n        if (!(endDate - startDate)) {\n            endDate = DateHelper.add(endDate, timeAxis.shiftIncrement, timeAxis.shiftUnit);\n        }\n        // if start date got bigger than end date set end date to start date plus one tick\n        else if (endDate < startDate) {\n            endDate = DateHelper.add(startDate, timeAxis.shiftIncrement, timeAxis.shiftUnit);\n        }\n\n        // setTimeSpan will try to keep the scroll position the same.\n        client.setTimeSpan(startDate, endDate, setTimeSpanOptions);\n\n        me.initDates();\n    }\n\n    onLeftShiftBtnClick() {\n        this.client.timeAxis.shiftPrevious();\n        this.initDates();\n    }\n\n    onTodayBtnClick() {\n        const today = DateHelper.clearTime(new Date());\n\n        this.client.setTimeSpan(today, DateHelper.add(today, 1, 'day'));\n        this.initDates();\n    }\n\n    onRightShiftBtnClick() {\n        this.client.timeAxis.shiftNext();\n        this.initDates();\n    }\n}\n\nGridFeatureManager.registerFeature(TimeAxisHeaderMenu, true, ['Scheduler', 'TimelineHistogram', 'Gantt']);\n"],"names":["Base","initialize","props","Object","assign","new","instance","CalendarCacheIntervalMultiple","constructor","config","intervalGroups","combineWith","interval","copy","slice","push","calendar","getIsWorkingForEvery","isWorkingForEvery","_calendar","intervals","getGroups","isWorking","getIsWorkingForSome","isWorkingForSome","getCalendars","calendars","isCalendarWorking","getCalendarsWorkStatus","get","calendarsWorkStatus","res","Map","set","getCalendarsWorking","calendarsWorking","getCalendarsNonWorking","calendarsNonWorking","intervalsByCalendar","forEach","data","apply","unique","stripDuplicates","sort","interval1","interval2","getPriorityField","CalendarCacheMultiple","CalendarCache","calendarCaches","intervalCache","IntervalCache","emptyInterval","combineIntervalsFn","fillCache","startDate","endDate","calendarCache","includeWrappingRangeFrom","COMBINED_CALENDARS_CACHE","combineCalendars","uniqueOnly","length","Error","calendar1","calendar2","internalId","hash","map","join","versionsHash","version","cached","cache","DurationColumn","NumberColumn","compositeField","$name","type","isGanttColumn","fields","name","defaultValue","defaults","min","max","step","largeStep","field","text","instantUpdate","filterType","sortable","durationEntity1","durationEntity2","ms1","getValue","ms2","construct","arguments","sortFn","args","call","defaultEditor","ObjectHelper","cleanupProperties","durationUnitField","roundValue","duration","nbrDecimals","grid","durationDisplayPrecision","decimalPrecision","multiplier","Math","pow","rounded","round","formatValue","durationUnit","Duration","unit","magnitude","DateHelper","getLocalizedNameOfUnit","defaultRenderer","value","record","isExport","durationValue","toClipboardString","toString","fromClipboardString","string","parseDuration","fullDuration","calculateFillValue","ColumnStore","registerColumnType","_$name","DragBase","InstancePlugin","defaultConfig","tooltipTemplate","valid","startClockHtml","endClockHtml","message","showTooltip","showExactDropPosition","store","dragHelperConfig","tooltipCls","configurable","constrainDragToTimeline","constrainDragToResource","constrainDragToTimeSlot","tip","$config","align","allowTargetOut","autoShow","updateContentOnMouseMove","throttleDragEvent","pluginConfig","chain","internalSnapToPosition","snapTo","_this$snapToPosition","dragData","snapToPosition","assignmentRecord","eventRecord","resourceRecord","newResource","buildDragHelperConfig","me","client","timeAxisViewModel","isHorizontal","lockY","lockX","externalDropTargetSelector","dropTargetSelector","Objects","merge","positioning","minX","maxX","constrain","cloneTarget","removeProxyAfterDrop","dragWithin","document","body","hideOriginalElement","dropTargetCls","outerElement","timeAxisSubGridElement","targetSelector","eventSelector","scrollManager","createProxy","el","snapCoordinates","element","newX","newY","snap","draggedEventRecord","draggedEntities","coordinate","getCoordinate","snappedDate","getDateFromPosition","isWorkingTime","add","snappedPosition","getPositionFromDate","x","y","internalListeners","beforedragstart","dragstart","afterdragstart","drag","drop","abort","abortFinalized","reset","thisObj","isElementDraggable","event","onPaint","firstPaint","_me$drag","destroy","DragHelper","rowManager","ion","changeTotalHeight","_me$dragData","updateYConstraint","scheduledEventName","clockTemplate","ClockTemplate","scheduler","doDestroy","_this$drag","_this$clockTemplate","_this$tip","tipId","id","changeTip","oldTip","result","Tooltip","reconfigure","mergeConfigs","forElement","getHtml","getTipHtml","bind","cls","owner","innerHtmlUpdate","proxy","cloneNode","classList","mode","onBeforeDragStart","context","getMinimalDragData","readOnly","disabled","isDraggable","pointerStartDate","getDateFromXY","startClientX","startPageY","triggerBeforeEventDrag","capitalizedEventName","_client","onAfterDragStart","isDragging","_this$drag2","isActivelyDragging","finalizing","onDragStart","_client2","_menuFeature$hideCont","findClientFromTarget","currentOverClient","unifiedProxy","unifiedDrag","onMouseOverNewTimeline","getDragData","suspendElementRedrawing","tipTarget","dragProxy","firstChild","showBy","triggerDragStart","eventMenu","taskMenu","features","menuFeature","hideContextMenu","updateDateIndicator","endDateElement","querySelector","target","test","center","Rectangle","from","DomHelper","elementFromPoint","Widget","fromElement","isResourceHistogram","onDrag","dd","start","updateDragContext","dirty","triggerEventDrag","externalDragValidity","lastAlignSpec","realign","newTimeline","initial","scrollables","remove","stopMonitoring","timeAxisSubGrid","scrollable","direction","startMonitoring","callback","onScrollManagerScrollCallback","triggerBeforeEventDropFinalize","eventType","eventData","trigger","onDrop","_me$tip","modified","hide","isValidDrop","Boolean","externalDropTarget","beforeDropTriggered","finalize","async","domEvent","origStart","onDragAbort","_me$currentOverClient","_me$tip2","currentOrientation","resetDraggedElements","triggerDragAbort","onDragAbortFinalized","_me$client","_me$client2","triggerDragAbortFinalized","onDragReset","source","dragHelper","_dragHelper$context","currentTimeline","started","eventBarEls","resumeRecordElementRedrawing","i","draggingCls","retainElement","onInternalInvalidDrop","_me$tip3","triggerAfterDrop","updateRecords","clientEventTipFeature","taskTooltip","eventTooltip","isPromise","refreshRows","enabled","setTimeout","info","isAssignment","lastDragStartDate","constrainToTimeSlot","browserEvent","getProductDragContext","timeDiff","timeAxis","isContinuous","timeAxisPosition","pageX","startPageX","pageY","pointerDate","getDateFromCoordinate","range","resolveStartEndDates","adjustStartDate","positionDirty","L","checkDragValidity","_dd$externalDragValid","suspendRecordElementRedrawing","suspend","getRecordElement","instanceMeta","resumeElementRedrawing","productDragData","setupProductDragData","startEvent","timespan","origEnd","startsOutsideView","endsOutsideView","multiSelect","isSchedulerBase","multiEventSelect","selectionMode","elementStartX","elementStartY","clientCoordinate","startClientY","selectAssignment","ctrlKey","selectEvent","sourceDate","screenSourceDate","relatedElements","setupConstraints","constrainRegion","elRegion","tickSize","constrained","xTickSize","yTickSize","setXConstraint","left","right","width","setYConstraint","top","bottom","height","snapPixelAmount","getScheduleRegion","offsetHeight","iLeft","iRight","iTickSize","iUp","iDown","minY","maxY","roundDate","Date","snapRelativeToEventStartDate","constrainStartDate","draggedElement","timeline","proxyRect","eventInnerSelector","fillSnap","fillTicks","end","getStartEndDatesFromRectangle","offsetMS","startOf","proxyMS","offsetPx","deflate","proxyStart","getStart","rtl","isVertical","dateInAxis","tick","getTickFromDate","getDateFromTick","startText","getFormattedDate","endText","getFormattedEndDate","dragged","timeSpanRecord","isTask","template","date","isMilestone","updateConstrainDragToTimeSlot","axis","updateConstrainDragToResource","updateConstrainDragToTimeline","isConfiguring","dateConstraints","scheduleableRecord","taskRecord","durationMS","getElementFromContext","grabbed","getRelatedRecords","coord","tipAlign","EventResize","mixin","Draggable","Droppable","draggingItemCls","resizingItemInnerCls","leftHandle","rightHandle","topHandle","bottomHandle","handleSize","dynamicHandleSize","allowResizeToZero","reservedSpace","touchHandleSize","dragThreshold","dragTouchStartDelay","draggingClsSelector","showExactResizePosition","validatorFn","validatorFnThisObj","axisLock","trackMouse","hideDelay","ignoreSelector","dragActiveCls","_this$dragging","dragging","render","dragSelector","dragItemSelector","dragRootElement","dropRootElement","dragLock","isEventElementDraggable","eventElement","eventResizable","resizable","isOverStartHandle","isOverEndHandle","onEventDataGenerated","wrapperCls","_this$dragging2","_this$dragging2$conte","onDragPointerMove","_dragging$context","visibleDateRange","dimension","pageScroll","globalThis","offset","clientRect","startCoord","endCoord","getEnd","getDateFromCoord","local","clientStartCoord","clientEndCoord","isResizing","beforeDrag","resolveTimeSpanRecord","itemElement","isGanttBase","resolveResourceRecord","project","isOccurrence","mousedownDate","triggerBeforeResize","dragStart","_client$features$even","_client$resolveAssign","resolveEventRecord","isBatchUpdating","wrapStartDate","wrapEndDate","useEventBuffer","eventBuffer","eventStartDate","eventEndDate","horizontal","draggingEnd","toSet","wrapToSet","otherEnd","setMethod","setOtherMethod","elRect","clientX","clientY","timespanRecord","oldValue","edge","originalStartDate","originalEndDate","meta","split","listenToBatchedUpdates","beginListeningForBatchedUpdates","beginEventRecordBatch","setupProductResizeContext","triggerEventResizeStart","getResizeStartParams","resizedRecord","resolveAssignmentRecord","show","getTooltipTarget","getBeforeResizeParams","_this$client","_this$client2","StringHelper","capitalize","triggerEventResizeEnd","triggerEventPartialResize","triggerBeforeEventResizeFinalize","dragEnter","_drag$context","resizeEventPartiallyInternal","_client$features$even2","diff","getTime","applyDateConstraints","_context$dateConstrai","_context$dateConstrai2","minDate","maxDate","moveDrag","enableEventAnimations","weekStartDay","resolutionUnit","resolutionIncrement","eventStart","eventEnd","isScroll","crossedOver","avoidedZeroSize","onDragEndSwitch","resolution","isEventDragCreate","tooNarrow","sign","checkValidity","partialResizeEvent","stores","eventStore","alignTo","dragEnd","aborted","EventHelper","getPagePoint","equals","cleanup","dragDrop","updateRecord","wasChanged","internalUpdateRecord","cancelEventRecordBatch","resources","resource","repaintEventsForResource","isDestroyed","changed","endListeningForBatchedUpdates","unHighlightHandle","getResizeEndParams","generation","batching","TimeSpan","prototype","inSetNormalize","isEntity","_client$features$even3","run","setOtherEnd","promisesToWait","Promise","all","endBatch","batchChanges","commitAsync","onDragItemMouseMove","pointerType","handleSelector","checkResizeHandles","overItem","allowResize","isOverAnyHandle","highlightHandle","onDragItemMouseLeave","oldOverItem","_item$syncIdMap","item","handleTargetElement","syncIdMap","_item$syncIdMap2","inner","_this$getHandleRect","getHandleRect","contains","_this$getHandleRect2","side","eventEl","closest","eventCls","dim","handleSpec","offsetWidth","isResizable","eventRect","clone","handleStyle","getComputedStyle","BrowserHelper","isHoverableDevice","undefined","parseFloat","handleVisThresh","handleVisibilityThreshold","centerGap","deflateArgs","oppositeEnd","constrainTo","setupDragContext","isElementResizable","changeHandleSize","VersionHelper","deprecate","changeTouchHandleSize","isTooltip","innerhtmlupdate","_me$clockTemplate","_element","handleHoldingElement","handleEl","startsOutside","endsOutside","anchorSize","basicValidityCheck","html","tipData","beginBatch","cancelBatch","_client$resolveResour","_client$resolveAssign2","_client$getDateConstr","getDateConstraints","allowOverlap","some","isDateRangeAvailable","GridFeatureManager","registerFeature","Target","TaskEditTransactional","captureStm","force","transactionalFeaturesEnabled","startStmTransaction","freeStm","commitOrReject","hasStmCapture","startRecordingEarly","startFeatureTransaction","commitStmTransaction","finishFeatureTransaction","rejectStmTransaction","rejectFeatureTransaction","TransactionalFeature","AttachToProjectMixin","detachFromProject","getStmCapture","_editorPromiseResolve","applyStmCapture","stmCapture","stm","chainResolved","startTransaction","queue","_me$trigger","_stmInitiallyDisabled","_stmInitiallyAutoRecord","autoRecord","isRecording","stopTransaction","enable","resolve","_me$_editorPromiseRes","rejectTransaction","afterApplyStashCallback","_me$_editorPromiseRes2","isEngineReady","transactionId","stash","IdHelper","generateId","isDestroying","_project$commitAsync","_me$trigger2","applyStash","getDragCreateDragDistance","_this$source","_this$source$client$f","taskEdit","_canceling","getDistanceBetween","DragCreateBase","TaskEditStm","dragTolerance","preventMultiple","tipTemplate","before","changeValidatorFn","createValidatorFn","initialDate","pan","eventDragSelect","isRowEmpty","rowRecord","preventDragSelect","startDrag","proxyElement","matchScheduleCell","$original","isSpecialRow","monitoringConfig","getDistance","updateDragTolerance","doCreate","finalized","completeFinalization","finalizeDragCreate","_me$onAborted","cancelDragCreate","onAborted","transferred","_this$tip2","parentElement","onElementContextMenu","prepareCreateContextForFinalization","createContext","renderData","_this$dragging$contex","handleBeforeDragCreate","dateTime","TooltipBase","autoUpdate","hoverDelay","monitorRecordUpdate","testConfig","processConfig","forSelector","_me$tooltip","tooltip","setConfig","destroyProperties","doDisable","disable","_me$tooltip2","tipCls","scrollAction","showOnHover","anchorToTarget","configuredListeners","overtarget","keys","$meta","configs","defineProperty","v","processConfiguredListeners","addListener","_this$tooltip","defaultDetacher","tooltipDetacher","removeListener","_this$tooltip2","activeTarget","recordProp","recordType","endDateValue","getDisplayEndDate","onTipShow","updateListener","change","onRecordUpdate","buffer","onTipHide","_this$updateListener","onOverNewTarget","newTarget","isVisible","scrolling","updateContent","aligningToElement","internalOnPointerOver","lastPointerEvent","AbstractTimeRanges","Delayable","rangeCls","lineCls","enableResizing","dragTipTemplate","encodeHtml","baseCls","headerRenderer","bodyRenderer","narrowThreshold","showHeaderElements","renderRows","onUIReady","once","$$name","toLowerCase","baseSelector","_me$resize","detachListeners","resize","renderRanges","setupTimeAxisViewModelListeners","update","includeChange","updateLineBuffer","timeAxisViewModelChange","hideHeaders","headerContainerElement","on","click","onTimeRangeClick","dblclick","contextmenu","delegate","rtlSource","ResizeHelper","matches","resizestart","resizing","cancel","resizeHelperConfig","hoverTooltip","timeRange","resolveTimeRangeRecord","refresh","_timeRanges","getDOMConfig","bodyConfigs","headerConfigs","_labelRotationMap","timeRanges","renderRange","bodyConfig","headerConfig","foregroundCanvas","isPainted","collapsed","updatedBodyElements","bodyCanvas","createElement","className","parent","DomSync","sync","targetElement","childrenOnly","domConfig","children","syncOptions","releaseThreshold","syncIdField","action","headerCanvas","bodyElement","cacheRotation","elementData","applyRotation","shouldRenderRange","rangeStart","rangeEnd","isTimeSpanInAxis","intersectSpans","_lineBufferDurationMS","getRangeDomConfig","relativeTo","startPos","getCoordinateFromDate","respectExclusion","endPos","isEnd","size","abs","isRange","translateX","dataset","style","icon","iconCls","xss","labelTpl","showLabelInBody","label","firstElementChild","recurringTimeSpan","_range$recurringTimeS","_bodyElement$firstEle","rotate","toggle","getBodyElementByRecord","idOrRecord","getChild","timeView","timeAxisColumn","_headerContainerElement","_showHeaderElements","updateShowHeaderElements","populateTimeAxisHeaderMenu","column","items","onSchedulerHorizontalScroll","afterScroll","onInternalResize","newWidth","newHeight","oldWidth","oldHeight","onTimeAxisViewModelUpdate","timeRangeRecord","showTip","destroyTip","totalSize","Number","MAX_SAFE_INTEGER","onInvalidDrop","box","onResizeStart","onResizeDrag","onResize","onInvalidResize","onResizeReset","emptyObject","freeze","ColumnLines","delayable","cancelOutstanding","after","useBackgroundCanvas","attachToResourceStore","resourceStore","group","groupers","getColumnLinesDOMConfig","m","variableColumnWidths","columnConfig","linesForLevel","columnLinesFor","majorLinesForLevel","domConfigs","dates","Set","addLineConfig","isMajor","tickStart","has","role","transform","line","index","columnLines","columnWidth","resourceColumns","first","firstResource","last","lastResource","getResourceRange","nbrGroupHeaders","_instanceMeta$groupPa","_instanceMeta$groupPa2","getAt","isGroupHeader","insetStart","isGrouped","groupParent","groupChildren","axisStart","backgroundCanvas","onlyChildren","onVisibleDateRangeChange","onVisibleResourceRangeChange","updateCanvasSize","DependencyCreation","allowDropOnEventBar","showCreationTooltip","creationTooltip","terminalCls","terminalSides","allowCreate","view","eventName","updateCreateListeners","_me$pointerUpMoveDeta","_me$creationTooltip","creationData","pointerUpMoveDetacher","isCreateAllowed","_allowCreate","onTimeSpanMouseEnter","isCreating","nestedEvents","isRoot","eventBarElement","down","showTerminals","timeSpanElement","onOverTargetEventBar","onTimeSpanMouseLeave","_event$event","timeSpanLeft","relatedTarget","isDescendant","isTrusted","sourceElement","hideTerminals","onOverNewTargetWhileCreating","onTerminalMouseOver","onTerminalMouseOut","showingTerminalsFor","unhover","onTerminalPointerDown","button","_scheduler$resolveRes","terminalNode","viewBounds","stopPropagation","fromSide","startPoint","startX","scrollLeft","startY","scrollTop","sourceResource","pointerup","getRootNode","handler","passive","pointermove","documentPointerUpDetacher","keydown","key","onElementTouchMove","_super$onElementTouch","connector","preventDefault","onMouseMove","deltaX","deltaY","sqrt","angle","atan2","onRequestDragCreate","lastMouseMoveEvent","createConnector","createDragTooltip","_overEventRecord","overEventRecord","isEventSegment","removeClsGlobally","toSide","_data$timeSpanElement","_data$timeSpanElement2","getTargetSideFromType","dependencyStore","modelClass","fieldMap","DependencyBaseModel","Type","EndToStart","targetResource","dependencyType","updateValidity","StartToStart","StartToEnd","EndToEnd","isValidDependency","validityCls","updateCreationTooltip","onMouseUp","_me$pointerUpMoveDeta2","dependency","createDependency","doAfterDependencyDrop","onDocumentMouseUp","_me$pointerUpMoveDeta3","_me$documentPointerUp","getElementFromEventRecord","removeConnector","clearTimeout","removeConnectorTimeout","loadingMsg","header","dock","beforeShow","terminalsVisibleCls","fixSide","terminal","feature","detacher","mouseover","mouseout","pointerdown","capture","internalCls","eventParams","getTimeSpanMouseEventParams","forEachSelector","newDependency","to","then","creationTooltipTemplate","_data$target","fromText","toText","tipTitleIconClsSuffix","tipTitleText","title","ref","tag","ROWS_PER_CELL","DependencyGridCache","gridCache","getDependenciesToConsider","startMS","endMS","startIndex","endIndex","dependencies","fromMSCell","floor","MS_PER_CELL","toMSCell","fromRowCell","toRowCell","msCell","j","intersectingDependencies","afterDrawDependency","fromIndex","toIndex","fromDateMS","toDateMS","constructGridCache","timeAxisStartMS","timeAxisEndMS","timeAxisCells","ceil","firstMSCell","lastMSCell","firstRowCell","lastRowCell","startMSCell","endMSCell","rowCell","beforeDraw","afterDraw","THRESHOLD","devicePixelRatio","BOX_PROPERTIES","equalEnough","a","b","RectangularPathFinder","startSide","startArrowMargin","startShift","endSide","endArrowMargin","endShift","verticalMargin","horizontalMargin","otherBoxes","findPath","lineDef","noPathFallbackFn","originalLineDef","lineDefFull","startBox","endBox","startHorizontalMargin","startVerticalMargin","endHorizontalMargin","endVerticalMargin","otherHorizontalMargin","otherVerticalMargin","connStartPoint","connEndPoint","pathStartPoint","pathEndPoint","gridStartPoint","gridEndPoint","startGridBox","endGridBox","path","tryNum","ArrayHelper","asArray","hasOwnProperty","normalizeSide","getConnectionCoordinatesFromBoxSideShift","calcGridBaseBoxFromBoxAndDrawParams","property","shouldLookForPath","_otherBoxes","buildPathGrid","convertDecartPointToGridPoint","findPathOnGrid","prependPathWithArrowStaffSegment","appendPathWithArrowStaffSegment","optimizePath","calculateRelativePosition","box1","box2","vertical","startProp","endProp","boxOverlapChanged","gridStartBox","gridEndBox","calculateOverlap","originalOverlap","finalOverlap","shift","coords","arrowMargin","gridBox","otherGridBoxes","xs","ys","ix","iy","xslen","yslen","ib","blen","permitted","point","points","linearPoints","distance","indexOf","waveForward","collectPath","getGridPointNeighbors","gridPoint","predicateFn","neighbor","WalkHelper","preWalkUnordered","neighborPoint","pathFound","neighbors","lowestDistanceNeighbor","xDiff","yDiff","resultA","resultB","x1","y1","x2","y2","reverse","firstSegment","prependSegment","unshift","lastSegment","appendSegment","optPath","prevSegment","curSegment","drawingDirection","pointSet","segmentLength","arc","nextPointSet","radius","corner","rx","includes","ry","sweep","location","prevRadius","useRadius","nextLength","subtract","useLength","currentRadius","pathMapper","lineSpec","DependencyLineGenerator","lineCache","onSVGReady","pathFinder","pathFinderConfig","lineDefAdjusters","createLineDefAdjusters","createMarker","changeRadius","assertNumber","updateRadius","updateRenderer","changeClickWidth","updateClickWidth","_me$marker","markerDef","svg","svgCanvas","markerId","marker","setProperty","ns","markerHeight","markerWidth","refX","refY","viewBox","orient","markerUnits","d","updateMarkerDef","getAssignmentElement","assignment","_this$client$features","_this$client$features2","eventDrag","getProxyElement","getElementFromAssignmentRecord","getDomConfigs","fromAssignment","toAssignment","forceBoxes","getDependencyKey","constructLineCache","drawingLive","prepareLineDef","clickWidth","toEvent","_me$renderer","highlighted","syncId","depId","fromId","toId","class","noMarkerCls","hideMarker","active","bidirectional","milestone","renderer","dependencyRecord","fromAssignmentRecord","toAssignmentRecord","fromBox","toBox","strokeWidth","generateBoundaryBoxes","rowTop","rowBottom","getAssignmentBounds","isExporting","rectangle","row","getRowById","overRow","getRowAt","getAssignmentEventBox","getConnectorStartSide","getConnectorEndSide","getDependencyStartSide","fromEvent","DependencyModel","getDependencyEndSide","shrinkArrowMargins","barMargin","adjusted","resetArrowMargins","shrinkHorizontalMargin","adjustLineDef","startRectangle","endRectangle","fromBoxSide","toBoxSide","DependencyTooltip","changeTooltip","old","textContent","getHoverTipHtml","resolveDependencyRecord","eventNameMap","collectLinkedAssignments","_assignment$resource","hasLinks","$links","l","drawDependencies","Dependencies","overCls","highlightDependenciesOnEventHover","drawOnScroll","immediateRefresh","doRefresh","lastScrollX","visibleResources","usingLinks","svgCanvasCreated","animationStart","timelineViewportResize","timeAxisViewModelUpdate","toggleNode","bindStore","_isDisabling","draw","rowStore","usesDisplayStore","onStoreRefresh","attachToProject","commitFinalized","onResourceStoreChange","attachToEventStore","attachToAssignmentStore","assignmentStore","attachToDependencyStore","updateDrawOnScroll","scroll","horizontalScroll","prio","scrollEnd","onHorizontalScroll","subGrid","scrollX","getLocalizedDependencyType","getElementForDependency","getElementsForDependency","selector","Array","querySelectorAll","_element$elementData","isDependencyElement","onElementClick","onElementDblClick","onElementMouseOver","highlight","onElementMouseOut","unhighlight","isDependencyVisible","fromResource","toResource","isAvailable","isModel","hidden","updateHighlightDependenciesOnEventHover","params","highlightEventDependencies","unhighlightEventDependencies","classes","delete","dep","_super$getDependencie","records","filter","isValid","drawDependency","batch","_fromAssigned","_toAssigned","topIndex","bottomIndex","useInitialAnimation","idMap","fromAssigned","assigned","toAssigned","isScheduled","flatMap","_idMap$from$resource$","_from$resource","_idMap$to$resource$id","_to$resource","startDateMS","endDateMS","lineDomConfigs","animationDelay","domSync","_super$afterDrawDepen","_super$beforeDraw","_super$afterDraw","values","flat","strict","fillDrawingCache","r","refreshSuspended","clear","firstVisibleRow","lastVisibleRow","count","_client$features","_client$features2","_client$features3","_client$features4","isAnimating","now","_super$reset","drawForEvent","getConfig","EventFilter","eventsFilter","localeClass","weight","menu","nameFilter","clearable","keyStrokeChangeDelay","onEventFilterChange","onBeforeShow","filterByName","filters","getBy","removeFilter","featureClass","NonWorkingTimeMixin","maxTimeAxisUnit","getNonWorkingTimeRanges","forEachAvailabilityInterval","isForward","intervalStartDate","intervalEndDate","calendarCacheInterval","entry","getIsWorking","getCalendarTimeRanges","ignoreName","increment","shouldPaint","compareUnits","allRanges","timeSpans","mergedSpans","prevRange","setData","span","setStartEndDate","setupDefaultCalendar","autoGeneratedWeekends","isSchedulerPro","isGantt","effectiveCalendar","defaultCalendar","intervalStore","updateDefaultCalendar","defaultNonWorkingIntervals","hasIntervals","ignoreTimeZone","clearIntervals","addIntervals","updateLocalization","_super$updateLocaliza","dayNames","nonWorkingDaysAsArray","dayIndex","recurrentStartDate","recurrentEndDate","NonWorkingTime","highlightWeekends","hideRangesOnZooming","attachToCalendar","onConfigChange","graph","isScheduler","dataReady","fn","calendarChange","_timeAxisUnitDurationMs","isDelayingCalculation","isCalculated","_this$project","timeAxisUnitDurationMs","as","ScheduleTooltip","messageTemplate","hideForNonWorkingTime","reshowListener","hoverTip","allowOver","monitorResize","onDocumentMouseDown","mousemove","e","hideAnimation","pointerover","buttonsPressed","buttons","which","lastTime","updateTip","getDateFromDomEvent","lastHtml","lastResourceId","generateTipContent","clockHtml","generateContent","messageHtml","getText","setTimeSpanOptions","maintainVisibleStart","TimeAxisHeaderMenu","HeaderMenu","processItems","triggerEvent","zoomOnTimeAxisDoubleClick","shouldShowMenu","enableHeaderContextMenu","isTimeAxisColumn","showContextMenu","dateStep","shiftIncrement","shiftUnit","zoomLevel","presets","zoomSlider","minWidth","showValue","triggerChangeOnInput","zoom","minZoomLevel","maxZoomLevel","zoomDetatcher","onHide","dateRange","startDateField","labelWidth","required","onRangeDateFieldChange","endDateField","leftShiftBtn","color","flex","margin","onLeftShiftBtnClick","todayBtn","onTodayBtnClick","rightShiftBtn","onRightShiftBtnClick","paint","initDateRangeFields","onZoomSliderChange","delay","widgetMap","initDates","suspendEvents","startDateFieldInitialValue","endDateFieldInitialValue","resumeEvents","startDateChanged","setTimeSpan","shiftPrevious","today","clearTime","shiftNext"],"mappings":"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oBAAoBA,CAAC5B,IAAI,EAAE;AACvB,IAAA,MAAM,IAAItU,KAAK,CAAC,uBAAuB,CAAC,CAAA;AAC5C,GAAA;AACA;EACA2U,qBAAqBA,CAACxE,EAAE,EAAE;AACtB,IAAA,MAAM,IAAInQ,KAAK,CAAC,uBAAuB,CAAC,CAAA;AAC5C,GAAA;EACA8V,gBAAgBA,CAAC9R,MAAM,EAAE;AACrB,IAAA,MAAM,IAAIhE,KAAK,CAAC,uBAAuB,CAAC,CAAA;AAC5C,GAAA;AACA;AACJ,CAAA;;AACA6E,QAAQ,CAACD,MAAM,GAAG,UAAU;;ACz+B5B;AACA;AACA;AACA,MAAMmX,QAAQ,GAAG;AACb7D,EAAAA,GAAG,EAAM,KAAK;AACdH,EAAAA,KAAK,EAAI,WAAW;AACpBI,EAAAA,MAAM,EAAG,KAAK;AACdL,EAAAA,IAAI,EAAK,OAAA;AACb,CAAC,CAAA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMkE,WAAW,SAASlX,cAAc,CAACmX,KAAK,CAACC,SAAS,EAAEC,SAAS,CAAC,CAAC;AAChF;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACA;EACA,WAAWrb,KAAKA,GAAG;AACf,IAAA,OAAO,aAAa,CAAA;AACxB,GAAA;EACA,WAAW4E,YAAYA,GAAG;IACtB,OAAO;AACH0W,MAAAA,eAAe,EAAG,2BAA2B;A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ACA;AACA;AACA;AACYC,MAAAA,gBAAgB,EAAG,EAAE;AACrB;AACZ;AACA;AACA;AACA;AACYC,MAAAA,UAAU,EAAG,CAAC;AACd;AACZ;AACA;AACA;AACA;AACYC,MAAAA,OAAO,EAAG,MAAM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACZ;AACA;AACA;AACA;AACYC,MAAAA,cAAc,EAAG,EAAE;AACnB;AACZ;AACA;AACA;AACA;AACYC,MAAAA,QAAQ,EAAG,CAAC;AACZ;AACZ;AACA;AACA;AACA;AACA;AACYC,MAAAA,cAAc,EAAG,CAAC;AAClB;AACZ;AACA;AACA;AACA;AACYC,MAAAA,gBAAgB,EAAG,CAAC;AACpB;AACZ;AACA;AACA;AACA;AACYC,MAAAA,UAAU,EAAG,IAAI;AACjB;AACZ;AACA;AACA;AACA;AACYvlC,MAAAA,MAAM,EAAG,EAAC;KACb,CAAA;AACL,GAAA;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAwlC,EAAAA,QAAQA,CAACC,OAAO,EAAEC,gBAAgB,EAAE;IAChC,MACI3lC,EAAE,GAAgB,IAAI;AACtB4lC,MAAAA,eAAe,GAAGF,OAAO,CAAA;AAC7B,IAAA,IAAIG,WAAW,EACXC,QAAQ,EACRC,MAAM,EACNb,UAAU,EACVG,QAAQ,EACRL,SAAS,EACTG,OAAO;AACP;AACA;AACAF,MAAAA,gBAAgB,EAChBG,cAAc,EACdG,gBAAgB,EAChBD,cAAc,EACdU,qBAAqB,EACrBC,mBAAmB,EACnBC,mBAAmB,EACnBC,iBAAiB,EACjBC,qBAAqB,EACrBC,mBAAmB,EACnBb,UAAU,EACVc,cAAc,EAAEC,YAAY,EAC5BC,cAAc,EAAEC,YAAY,EAC5BC,cAAc,EAAEC,YAAY,EAC5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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM2uC,YAAY,SAAS71C,cAAc,CAACmX,KAAK,CAC1D0Q,oBAAoB,EACpBiI,SAAS,EACTgM,kBAAkB,EAClB0I,mBAAmB,EACnB0K,uBAAuB,EACvB8F,iBACJ,CAAC,CAAC;EACE,OAAOh5C,KAAK,GAAG,cAAc,CAAA;AAC7B;AACJ;AACA;AACA;AACA;AACI;AACA,EAAA,OAAO4E,YAAY,GAAG;AAClB;AACR;AACA;AACA;AACA;AACA;AACQk1C,IAAAA,OAAO,EAAG,uBAAuB;AACjC;AACR;AACA;AACA;AACA;AACA;AACQ1lB,IAAAA,OAAO,EAAG,kBAAkB;AAC5B;AACR;AACA;AACA;AACA;AACA;AACQqiB,IAAAA,WAAW,EAAG,6BAA6B;AAC3C;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQxC,IAAAA,SAAS,EAAG,IAAI;AAChB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ9B,IAAAA,MAAM,EAAG,IAAI;AACb;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ2E,IAAAA,QAAQ,EAAG,IAAI;AACf;AACR;AACA;AACA;AACQiD,IAAAA,iCAAiC,EAAG,IAAI;AACxC;AACR;AACA;AACA;AACA;AACA;AACQC,IAAAA,YAAY,EAAG,IAAI;AACnB;AACR;AACA;AACA;AACA;AACA;AACQhE,IAAAA,UAAU,EAAG,IAAI;AACjB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQiE,IAAAA,gBAAgB,EAAG,IAAA;GACtB,CAAA;AACD,EAAA,OAAOpd,SAAS,GAAG;AAC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ACzB,GAAA;AACA;AACJ,CAAA;;AACAytB,cAAc,CAACtgD,MAAM,GAAG,gBAAgB,CAAA;AAAE6mB,kBAAkB,CAACC,eAAe,CAACw5B,cAAc,EAAE,KAAK,EAAE,WAAW,CAAC,CAAA;AAChHz5B,kBAAkB,CAACC,eAAe,CAACw5B,cAAc,EAAE,IAAI,EAAE,CAAC,cAAc,EAAE,OAAO,EAAE,mBAAmB,CAAC,CAAC;;AC3LxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMgB,eAAe,SAASphD,cAAc,CAAC;AACxD;EACA,WAAWhE,KAAKA,GAAG;AACf,IAAA,OAAO,iBAAiB,CAAA;AAC5B,GAAA;EACA,WAAW4E,YAAYA,GAAG;IACtB,OAAO;AACHygD,MAAAA,eAAe,EAAG3nD,IAAI,IAAK,mCAAkCA,IAAI,CAAC4G,OAAQ,CAAO,MAAA,CAAA;AACjF;AACZ;AACA;AACA;AACA;AACYghD,MAAAA,qBAAqB,EAAG,IAAA;KAC3B,CAAA;AACL,GAAA;AACA;EACA,WAAW//C,YAAYA,GAAG;IACtB,OAAO;MACHC,KAAK,EAAG,CAAC,SAAS,CAAA;KACrB,CAAA;AACL,GAAA;AACA;AACA;AACA;AACJ;AACA;AACA;AACIoE,EAAAA,OAAOA,CAAC;AAAEC,IAAAA,UAAAA;AAAW,GAAC,EAAE;IACpB,IAAI,CAACA,UAAU,EAAE;AACb,MAAA,OAAA;AACJ,KAAA;IACA,MACI1D,EAAE,GAAW,IAAI;AACjB,MAAA;AAAEC,QAAAA,MAAAA;AAAO,OAAC,GAAGD,EAAE,CAAA;IACnB,IAAIC,MAAM,CAAC88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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMC,kBAAkB,SAASC,UAAU,CAAC;AACvD;EACA,WAAWhnD,KAAKA,GAAG;AACf,IAAA,OAAO,oBAAoB,CAAA;AAC/B,GAAA;EACA,WAAWiE,aAAaA,GAAG;IACvB,OAAO;AACH;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACYgjD,MAAAA,YAAY,EAAG,IAAI;AACnB;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY7rB,MAAAA,KAAK,EAAG,IAAI;AACZn7B,MAAAA,IAAI,EAAG,gBAAA;KACV,CAAA;AACL,GAAA;EACA,WAAWsF,YAAYA,GAAG;AACtB,IAAA,MAAM5J,MA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"}