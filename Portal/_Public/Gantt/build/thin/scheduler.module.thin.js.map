{"version":3,"file":"scheduler.module.thin.js","sources":["../../../Scheduler/lib/Scheduler/data/mixin/PartOfBaseProject.js","../../../Scheduler/lib/Scheduler/column/EventColorColumn.js","../../../Scheduler/lib/Scheduler/column/ResourceCollapseColumn.js","../../../Scheduler/lib/Scheduler/feature/EventDragSelect.js","../../../Scheduler/lib/Scheduler/feature/EventNonWorkingTime.js","../../../Scheduler/lib/Scheduler/feature/GroupSummary.js","../../../Scheduler/lib/Scheduler/feature/HeaderZoom.js","../../../Scheduler/lib/Scheduler/feature/Pan.js","../../../Scheduler/lib/Scheduler/feature/ResourceMenu.js","../../../Scheduler/lib/Scheduler/feature/ResourceTimeRanges.js","../../../Scheduler/lib/Scheduler/feature/SimpleEventEdit.js","../../../Scheduler/lib/Scheduler/feature/Split.js","../../../Scheduler/lib/Scheduler/feature/Summary.js","../../../Scheduler/lib/Scheduler/feature/TimeSelection.js","../../../Scheduler/lib/Scheduler/util/ScheduleTableExporter.js","../../../Scheduler/lib/Scheduler/feature/experimental/ExcelExporter.js","../../../Scheduler/lib/Scheduler/view/Scheduler.js","../../../Scheduler/lib/Scheduler/widget/UndoRedo.js","../../../Scheduler/lib/Scheduler/widget/ViewPresetCombo.js","../../../Scheduler/bundle/entry.thin.js"],"sourcesContent":["// Private class that leverages the differences between a core and a basic project\nexport default Target => class PartOfBaseProject extends Target {\n    static get $name() {\n        return 'PartOfBaseProject';\n    }\n\n    get assignmentStore() {\n        return this.project.assignmentStore;\n    }\n\n    get calendarManagerStore() {\n        return this.project.calendarManagerStore;\n    }\n\n    get dependencyStore() {\n        return this.project.dependencyStore;\n    }\n\n    get eventStore() {\n        return this.project.eventStore;\n    }\n\n    get resourceStore() {\n        return this.project.resourceStore;\n    }\n};\n","import ColorColumn from '../../Grid/column/ColorColumn.js';\nimport '../widget/EventColorPicker.js';\nimport ColumnStore from '../../Grid/data/ColumnStore.js';\n\n/**\n * @module Scheduler/column/EventColorColumn\n */\n\n/**\n * A column that displays Event's `eventColor` values (built-in color classes or CSS colors) as a colored element\n * similar to the {@link Scheduler.widget.EventColorField}. When the user clicks the element, a\n * {@link Scheduler.widget.EventColorPicker} lets the user select from a\n * {@link Scheduler.view.mixin.TimelineEventRendering#config-eventColor range of colors}.\n *\n * ```javascript\n * new Scheduler({\n *    columns : [\n *       {\n *          type : 'eventcolor',\n *          text : 'EventColor'\n *       }\n *    ]\n * });\n * ```\n *\n * {@inlineexample Scheduler/column/EventColorColumn.js}\n *\n * @extends Grid/column/ColorColumn\n * @classType eventcolor\n * @column\n */\nexport default class EventColorColumn extends ColorColumn {\n    static $name = 'EventColorColumn';\n\n    static type = 'eventcolor';\n\n    static defaults = {\n        colorEditorType : 'eventcolorpicker',\n        field           : 'eventColor'\n    };\n\n}\n\nColumnStore.registerColumnType(EventColorColumn);\n","import Column from '../../Grid/column/Column.js';\nimport ColumnStore from '../../Grid/data/ColumnStore.js';\n\n/**\n * @module Scheduler/column/ResourceCollapseColumn\n */\n\n/**\n * A column toggling the resource {@link Scheduler.model.ResourceModel#field-eventLayout} between `none` and `stack`.\n *\n * @inlineexample Scheduler/column/ResourceCollapseColumn.js\n * @classType resourceCollapse\n * @extends Grid/column/Column\n * @column\n */\nexport default class ResourceCollapseColumn extends Column {\n\n    static get $name() {\n        return 'ResourceCollapseColumn';\n    }\n\n    static get type() {\n        return 'resourceCollapse';\n    }\n\n    static get defaults() {\n        return {\n            /** @hideconfigs renderer */\n            width     : '3em',\n            align     : 'center',\n            sortable  : false,\n            groupable : false,\n            editor    : false,\n            minWidth  : 0,\n            cellCls   : 'b-resourcecollapse-cell',\n            renderer  : ({ record }) => ({\n                tag   : 'i',\n                class : {\n                    'b-icon'                 : 1,\n                    'b-icon-expand-resource' : 1,\n                    'b-flip'                 : record.eventLayout !== 'none'\n                }\n            })\n        };\n    }\n\n    onCellClick({ record, event }) {\n        // Prevent native scrolling on space key press\n        event.preventDefault();\n        record.eventLayout = record.eventLayout !== 'none' ? 'none' : 'stack';\n    }\n}\n\nColumnStore.registerColumnType(ResourceCollapseColumn);\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\nimport Delayable from '../../Core/mixin/Delayable.js';\n\n/**\n * @module Scheduler/feature/EventDragSelect\n */\n\n/**\n * Enables users to click and drag to select events (or assignments in multi assignment mode) inside the Scheduler's\n * timeline. Press CTRL/CMD-key to extend an existing selection.\n *\n * {@inlineexample Scheduler/feature/EventDragSelect.js}\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * **NOTE:** Incompatible with the {@link Scheduler.feature.EventDragCreate} and the {@link Scheduler.feature.Pan} features.\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *   features : {\n *     eventDragSelect : true,\n *     eventDragCreate : false\n *   }\n * });\n * ```\n *\n * @demo Scheduler/dragselection\n * @extends Core/mixin/InstancePlugin\n * @mixes Core/mixin/Delayable\n * @classtype eventDragSelect\n * @feature\n */\nexport default class EventDragSelect extends Delayable(InstancePlugin) {\n    // region Events\n    /**\n     * Fires on the owning Scheduler before drag selection starts. Return false to prevent the operation.\n     * @event beforeEventDragSelect\n     * @preventable\n     * @on-owner\n     * @param {Event} event The native browser DOM event\n     */\n    //endregion\n\n    // region Init\n\n    static $name = 'EventDragSelect';\n\n    targetSelector = '.b-sch-timeaxis-cell, .b-timeaxissubgrid';\n\n    construct(client, config) {\n\n        client.multiEventSelect = true;\n\n        super.construct(client, config);\n    }\n\n    //endregion\n\n    //region Plugin config\n\n    // Plugin configuration. This plugin chains some of the functions in Scheduler.\n    static pluginConfig = {\n        chain : ['onElementMouseDown', 'onElementMouseMove']\n    };\n\n    //endregion\n\n    onElementMouseDown(event) {\n        const\n            me                                            = this,\n            { client }                                    = me,\n            { foregroundCanvas }                          = client,\n            { target, button, touches, clientX, clientY } = event,\n            canvasRect                                    = Rectangle.from(foregroundCanvas, true);\n\n        // only react to mouse input, and left button\n        // only react to mousedown directly on grid cell or subgrid element\n        if (touches || button !== 0 || me.disabled || !target.matches(me.targetSelector) || client.trigger('beforeEventDragSelect', { event }) === false) {\n            return;\n        }\n\n        // Prevent grid dragselection\n        // (reset by GridSelection)\n        client.preventDragSelect = true;\n\n        me.startX = clientX - canvasRect.x;\n        me.startY = clientY - canvasRect.y;\n        me.element = DomHelper.createElement({\n            tag           : 'div',\n            className     : 'b-dragselect-rect',\n            parent        : client.foregroundCanvas,\n            retainElement : true,\n            style         : {\n                transform : `translate(${me.startX}px, ${me.startY}px)`\n            }\n        });\n\n        client.element.classList.add('b-dragselecting');\n        if (!event.ctrlKey && !event.metaKey) {\n            client.clearEventSelection();\n        }\n\n        me.originalSelection = client.selectedAssignments.slice();\n        me.subGridElementRect = Rectangle.from(client.timeAxisSubGridElement, true);\n\n        // No key processing during drag selection\n        client.navigator.disabled = true;\n\n        client.enableScrollingCloseToEdges(client.timeAxisSubGrid);\n\n        me.mouseUpDetacher = EventHelper.on({\n            element : document,\n            mouseup : 'onDocumentMouseUp',\n            thisObj : me\n        });\n    }\n\n    get eventRectangles() {\n        const\n            { client }    = this,\n            // When using nested events, only drag select parents\n            eventElements = Array.from(client.foregroundCanvas.children).filter(node => node.matches(`${client.eventSelector}, .b-nested-events-container`));\n\n        return eventElements.map(el => {\n            const record = client.resolveAssignmentRecord(el);\n            return {\n                rectangle : Rectangle.from(el, true),\n                record,\n                selected  : client.selectedAssignments.includes(record)\n            };\n        });\n    }\n\n    onElementMouseMove(event) {\n        const me = this;\n\n        if (typeof me.startX === 'number') {\n            const\n                canvasRect  = me.rectangle = Rectangle.from(me.client.foregroundCanvas, true),\n                x           = Math.min(Math.max(event.clientX - canvasRect.x, 0), canvasRect.width + 1),\n                y           = Math.min(Math.max(event.clientY - canvasRect.y, 0), canvasRect.height + 1),\n                rect        = new Rectangle(me.startX, me.startY, x - me.startX, y - me.startY);\n\n            DomHelper.setTranslateXY(me.element, rect.x, rect.y);\n            me.element.style.width  = `${rect.width}px`;\n            me.element.style.height = `${rect.height}px`;\n\n            me.updateSelection();\n        }\n    }\n\n    onDocumentMouseUp(event) {\n        const\n            me                                 = this,\n            { client }                         = me,\n            { selectedAssignments, navigator } = client;\n\n        client.disableScrollingCloseToEdges(client.timeAxisSubGrid);\n\n        me.element?.remove();\n        client.element.classList.remove('b-dragselecting');\n        me.startX = me.startY = null;\n\n        // Navigator will react to the 'click' event which clears selection, bypass this\n        navigator.skipNextClick = client.timeAxisSubGridElement.contains(event.target);\n        navigator.disabled = false;\n\n        // If we selected something, focus last selected event so keyboard navigation works\n        if (selectedAssignments.length) {\n            navigator.skipScrollIntoView = true;\n            client.activeAssignment = selectedAssignments[selectedAssignments.length - 1];\n            navigator.activeItem?.focus();\n            navigator.skipScrollIntoView = false;\n        }\n\n        me.mouseUpDetacher();\n    }\n\n    updateSelection() {\n        const\n            me            = this,\n            selectionRect = me.rectangle = Rectangle.from(me.element, true),\n            {\n                eventRectangles,\n                client\n            }             = me,\n            // If any currently selected assignments have had their DOM representation\n            // released due to being scrolled out of view, they must remain selected.\n            // Collect assignments which have no DOM representation as the initial\n            // selection.\n            selection     = client.selectedAssignments.reduce((r, a) => {\n                if (!client.getElementFromAssignmentRecord(a)) {\n                    r.push(a);\n                }\n                return r;\n            }, []);\n\n        for (const assignmentData of eventRectangles) {\n            if (selectionRect.intersect(assignmentData.rectangle, true)) {\n                assignmentData.selected = true;\n                selection.push(assignmentData.record);\n            }\n        }\n\n        selection.push(...me.originalSelection);\n        client.selectedAssignments = selection;\n    }\n}\n\nGridFeatureManager.registerFeature(EventDragSelect, false, 'Scheduler');\n","import GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport AttachToProjectMixin from '../data/mixin/AttachToProjectMixin.js';\nimport NonWorkingTimeMixin from './mixin/NonWorkingTimeMixin.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\n\n/**\n * @module Scheduler/feature/EventNonWorkingTime\n */\n\n/**\n * Feature that allows rendering non-working time ranges into event bars (weekends for Scheduler, effective calendar for\n * SchedulerPro):\n *\n * {@inlineexample Scheduler/feature/EventNonWorkingTime.js}\n *\n * Please note that to not clutter the view (and have a large negative effect on performance) the feature bails out of\n * rendering ranges for very zoomed out views (see {@link #config-maxTimeAxisUnit} for details).\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid/view/mixin/GridFeatures}.\n *\n * @extends Scheduler/feature/AbstractTimeRanges\n * @classtype eventNonWorkingTime\n * @mixes Scheduler/feature/mixin/NonWorkingTimeMixin\n * @feature\n */\nexport default class EventNonWorkingTime extends InstancePlugin.mixin(AttachToProjectMixin, NonWorkingTimeMixin) {\n    static $name = 'EventNonWorkingTime';\n\n    static pluginConfig = {\n        chain : [\n            'onTimeAxisViewModelUpdate',\n            'updateLocalization',\n            'onEventDataGenerated'\n        ]\n    };\n\n    // Cannot use `static properties = {}`, new Map would pollute the prototype\n    static get properties() {\n        return {\n            calendarRangeCache : new Map()\n        };\n    }\n\n    doDisable(disable) {\n        this.client.refresh();\n\n        super.doDisable(disable);\n    }\n\n    attachToCalendarManagerStore(store) {\n        super.attachToCalendarManagerStore(store);\n\n        const me = this;\n\n        store.ion({\n            name    : 'calendarManagerStore',\n            change  : 'onCalendarChange',\n            thisObj : me\n        });\n\n        // Schedulers calendar is not part of the calendar manager store\n        if (me.client.isScheduler) {\n            me.project.effectiveCalendar.intervals.ion({\n                name    : 'calendarManagerStore',\n                change  : 'onCalendarChange',\n                thisObj : me\n            });\n        }\n\n        me.setupDefaultCalendar();\n    }\n\n    onCalendarChange() {\n        this.calendarRangeCache.clear();\n    }\n\n    onTimeAxisViewModelUpdate() {\n        this.calendarRangeCache.clear();\n    }\n\n    //region Draw\n\n    getRangeDomConfig(timeRange, minDate, maxDate, relativeTo) {\n        const\n            me         = this,\n            { client } = me,\n            { rtl }    = client,\n            startPos   = client.getCoordinateFromDate(DateHelper.max(timeRange.startDate, minDate)) - relativeTo,\n            endPos     = timeRange.endDate ? client.getCoordinateFromDate(DateHelper.min(timeRange.endDate, maxDate)) - relativeTo : startPos,\n            size       = Math.abs(endPos - startPos),\n            isRange    = size > 0,\n            translateX = rtl ? `calc(${startPos}px - 100%)` : `${startPos}px`;\n\n        return {\n            className : {\n                // Borrow styling from time ranges\n                'b-sch-timerange'      : 1,\n                'b-sch-range'          : 1,\n                'b-sch-nonworkingtime' : 1,\n                [timeRange.cls]        : timeRange.cls,\n                'b-rtl'                : rtl\n            },\n            dataset : {\n                id : timeRange.id\n            },\n            elementData : {\n                timeRange\n            },\n            style : client.isVertical\n                ? `transform: translateY(${translateX}); ${isRange ? `height:${size}px` : ''};`\n                : `transform: translateX(${translateX}); ${isRange ? `width:${size}px` : ''};`\n        };\n    }\n\n    getCalendarTimeRanges(calendar) {\n        let cached = this.calendarRangeCache.get(calendar);\n\n        if (!cached) {\n            cached = super.getCalendarTimeRanges(calendar, true);\n            this.calendarRangeCache.set(calendar, cached);\n        }\n\n        return cached;\n    }\n\n    // Render ranges into event bars\n    onEventDataGenerated({ eventRecord, endMS, startMS, start, end, left, top, children }) {\n        if (this.enabled) {\n            const\n                { isVertical } = this.client,\n                // Use combined calendar for Pro & Gantt, project calendar for Scheduler\n                calendar       = eventRecord.effectiveCalendarsCombination ?? this.client.project.calendar;\n\n            for (const timeRange of this.getCalendarTimeRanges(calendar)) {\n                // Only care about ranges inside the event bar\n                if (timeRange.startDateMS < endMS && timeRange.endDateMS > startMS) {\n                    const domConfig = this.getRangeDomConfig(timeRange, start, end, isVertical ? top : left);\n                    children.push(domConfig);\n                }\n            }\n        }\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(EventNonWorkingTime, false, 'Scheduler');\n","import GridGroupSummary from '../../Grid/feature/GroupSummary.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport Tooltip from '../../Core/widget/Tooltip.js';\n\n// Actions that trigger rerendering of group summary rows\nconst\n    eventStoreRefreshActions      = {\n        update : 1,\n        filter : 1\n    },\n    assignmentStoreRefreshActions = {\n        add       : 1,\n        remove    : 1,\n        update    : 1,\n        removeAll : 1,\n        filter    : 1\n    };\n\n/**\n * @module Scheduler/feature/GroupSummary\n */\n\n// noinspection JSClosureCompilerSyntax\n/**\n * A special version of the Grid GroupSummary feature that enables summaries within scheduler. To use a single summary\n * it is easiest to configure {@link #config-renderer}, for multiple summaries see {@link #config-summaries}.\n *\n * This feature is <strong>disabled</strong> by default. It is **not** supported in vertical mode.\n *\n * @extends Grid/feature/GroupSummary test\n *\n * @classtype groupSummary\n * @feature\n * @inlineexample Scheduler/feature/GroupSummary.js\n * @demo Scheduler/groupsummary\n *\n * @typings Grid.feature.GroupSummary -> Grid.feature.GridGroupSummary\n */\nexport default class GroupSummary extends GridGroupSummary {\n    //region Config\n\n    static get $name() {\n        return 'GroupSummary';\n    }\n\n    static get defaultConfig() {\n        return {\n            /**\n             * Show tooltip containing summary values and labels\n             * @config {Boolean}\n             * @default\n             */\n            showTooltip : true,\n\n            /**\n             * Array of summary configs which consists of a label and a {@link #config-renderer} function\n             * ```\n             *  summaries : [\n             *      {\n             *         label : 'Label',\n             *         renderer : ({ startDate, endDate, eventStore, resourceStore, events, resources, groupRecord, groupField, groupValue }) => {\n             *             // return display value\n             *             returns '<div>Renderer output</div>';\n             *         }\n             *      }\n             *  ]\n             *  ```\n             * @config {SchedulerSummaryOptions[]}\n             */\n            summaries : null,\n\n            /**\n             * Renderer function for a single time axis tick in a group summary row.\n             * Should calculate a sum and return HTML as a result.\n             *\n             * ```javascript\n             * new Scheduler({\n             *     features : {\n             *         groupSummary : {\n             *             renderer : ({ startDate, endDate, eventStore, resourceStore, events, resources, groupRecord, groupField, groupValue }) => {\n             *                 // return display value\n             *                 returns '<div>Renderer output</div>';\n             *             }\n             *         }\n             *     }\n             * });\n             * ```\n             *\n             * @param {Date} startDate Tick start date\n             * @param {Date} endDate Tick end date\n             * @param {Scheduler.model.EventModel[]} events Events which belong to the group\n             * @param {Scheduler.model.ResourceModel[]} resources Resources which belong to the group\n             * @param {Scheduler.data.EventStore} eventStore Event store\n             * @param {Scheduler.data.ResourceStore} resourceStore Resource store\n             * @param {Core.data.Model} groupRecord Current groups header row record\n             * @param {String} groupField Current groups field name\n             * @param {String} groupValue Current groups value\n             * @returns {String} Html content\n             * @config {Function}\n             */\n            renderer : null\n        };\n    }\n\n    static get properties() {\n        return {\n            footersToUpdate : new Set()\n        };\n    }\n\n    static get pluginConfig() {\n        return {\n            chain : ['render']\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    construct(scheduler, config) {\n        const me = this;\n\n        if (scheduler.isVertical) {\n            throw new Error('GroupSummary feature is not supported in vertical mode');\n        }\n\n        me.scheduler = scheduler;\n\n        super.construct(scheduler, config);\n\n        if (!me.summaries && me.renderer) {\n            me.summaries = [{ renderer : me.renderer }];\n        }\n\n        if (scheduler.isSchedulerBase) {\n            scheduler.eventStore.ion({\n                changePreCommit : me.onEventStoreChange,\n                thisObj         : me\n            });\n\n            scheduler.assignmentStore.ion({\n                changePreCommit : me.onAssignmentStoreChange,\n                thisObj         : me\n            });\n\n            scheduler.ion({\n                timeAxisViewModelUpdate : me.onTimeAxisChange,\n                thisObj                 : me\n            });\n\n            scheduler.project.ion({\n                dataReady : me.onProjectDataReady,\n                thisObj   : me\n            });\n        }\n\n        //<debug>\n        if (!me.summaries) {\n            throw new Error('Summaries required');\n        }\n        //</debug>\n    }\n\n    doDestroy() {\n        this._tip?.destroy();\n\n        super.doDestroy();\n    }\n\n    //endregion\n\n    //region Events\n\n    onTimeAxisChange() {\n        this.scheduler.rowManager.forEach(row => {\n            if (row.isGroupFooter) {\n                row.render();\n            }\n        });\n    }\n\n    onEventStoreChange({ action, records, changes }) {\n        // Scheduler does minimal update on event changes, it will not rerender the summary rows.\n        // Need to handle that here\n        if (eventStoreRefreshActions[action]) {\n            const resources = new Set();\n\n            records.forEach(eventRecord => eventRecord.resources.forEach(r => resources.add(r)));\n\n            this.afterChange(resources);\n        }\n    }\n\n    onAssignmentStoreChange({ action, records, changes }) {\n        if (assignmentStoreRefreshActions[action]) {\n            const resources = new Set();\n\n            records.forEach(assignment => assignment.resource && resources.add(assignment.resource));\n\n            // Include old resource on reassign\n            if (changes?.resourceId?.oldValue != null) {\n                const oldResource = this.scheduler.resourceStore.getById(changes.resourceId.oldValue);\n                oldResource && resources.add(oldResource);\n            }\n\n            this.afterChange(resources);\n        }\n    }\n\n    afterChange(affectedResources) {\n        const { rowManager } = this.scheduler;\n\n        // Collect footers to update\n        for (const resourceRecord of affectedResources) {\n            let row = rowManager.getRowFor(resourceRecord);\n            // Resource might not match a row (out of view, filtered out etc)\n            // Move down until footer is found, or we run out of rows (in case footer is below the buffer)\n\n            if (this.target === 'header') {\n                while (row && !row.isGroupHeader) {\n                    row = rowManager.getRow(row.index - 1);\n                }\n            }\n            else {\n                while (row && !row.isGroupFooter) {\n                    row = rowManager.getRow(row.index + 1);\n                }\n            }\n\n            row && this.footersToUpdate.add(row);\n        }\n    }\n\n    onProjectDataReady() {\n        const\n            {\n                footersToUpdate,\n                client\n            } = this;\n\n        // Only update the UI immediately if we are visible\n        if (client.isVisible) {\n            // Re-render only affected footers, once\n            if (footersToUpdate.size) {\n                for (const footer of footersToUpdate) {\n                    // Things happen async, footer might have been destroyed\n                    footer.render?.();\n                }\n\n                footersToUpdate.clear();\n            }\n        }\n        else {\n            client.whenVisible('refresh', client, [true]);\n        }\n    }\n\n    //endregion\n\n    //region Render\n\n    /**\n     * Called before rendering row contents, used to reset rows no longer used as group summary rows\n     * @private\n     */\n    onBeforeRenderRow({ row, record }) {\n        if (row.isGroupFooter && !record.meta.hasOwnProperty('groupFooterFor')) {\n            const timeaxisCell = row.elements.normal.querySelector('.b-sch-timeaxis-cell');\n            // remove summary cells if exist\n            if (timeaxisCell) {\n                timeaxisCell.innerHTML = '';\n            }\n        }\n\n        super.onBeforeRenderRow(...arguments);\n    }\n\n    /**\n     * Called by parent class to fill timeaxis with summary contents. Generates tick \"cells\" and populates them with\n     * summaries.\n     * ```\n     * <div class=\"b-timeaxis-group-summary\">\n     *     <div class=\"b-timeaxis-tick\">\n     *         <div class=\"b-timeaxix-summary-value\">x</div>\n     *         ...\n     *     </div>\n     *     ...\n     * </div>\n     * ```\n     * @private\n     */\n    generateHtml(column, records, cls, groupRecord, groupField, groupValue) {\n        // <remove-on-release>\n        // TODO: Use DOM config object instead of strings\n        // </remove-on-release>\n        if (column.type === 'timeAxis') {\n            const\n                me             = this,\n                { scheduler }  = me,\n                { eventStore } = scheduler,\n                colCfg         = scheduler.timeAxisViewModel.columnConfig;\n\n            let html = '';\n\n            // group events by ticks info once here to avoid performance lags\n            // should be inside `scheduler.isEngineReady` check to make sure all events were calculated\n            // https://github.com/bryntum/support/issues/2977\n            const eventsByTick = scheduler.getResourcesEventsPerTick(records, ({ event }) => {\n                return event.resources.some(resource => records.includes(resource)) && (!eventStore.isFiltered || eventStore.records.includes(event));\n            });\n\n            scheduler.timeAxis.forEach((tick, idx) => {\n                const\n                    groupEvents = eventsByTick[idx] || [],\n                    // <remove-on-release>\n                    // TODO: could turn this into a template\n                    // </remove-on-release>\n                    sumHtml     = me.summaries.map(config => {\n                        // summary renderer used to calculate and format value\n                        const value = config.renderer({\n                            startDate     : tick.startDate,\n                            endDate       : tick.endDate,\n                            resourceStore : scheduler.resourceStore,\n                            events        : groupEvents,\n                            resources     : records,\n                            eventStore,\n                            groupRecord,\n                            groupField,\n                            groupValue\n                        });\n\n                        return `<div class=\"b-timeaxis-summary-value\">${value}</div>`;\n                    }).join('');\n\n                // get width on column index from the last header config\n                html += `<div class=\"b-timeaxis-tick\" style=\"width: ${colCfg[colCfg.length - 1][idx].width}px\">${sumHtml}</div>`;\n            });\n\n            return `<div class=\"b-timeaxis-group-summary\">${html}</div>`;\n        }\n\n        return super.generateHtml(column, records, cls, groupRecord, groupField, groupValue);\n    }\n\n    /**\n     * Overrides parents function to return correct summary count, used when sizing row\n     * @private\n     */\n    updateSummaryHtml(cellElement, column, records) {\n        const count = super.updateSummaryHtml(cellElement, column, records);\n\n        if (column.type === 'timeAxis') {\n            const result = {\n                count  : 0,\n                height : 0\n            };\n\n            this.summaries.forEach(config => {\n                if (config.height) {\n                    result.height += config.height;\n                }\n                else {\n                    result.count++;\n                }\n            });\n\n            return result;\n        }\n\n        return count;\n    }\n\n    /**\n     * Generates tooltip contents for hovered summary tick\n     * @private\n     */\n    getTipHtml({ activeTarget }) {\n        const\n            me    = this,\n            index = Array.from(activeTarget.parentElement.children).indexOf(activeTarget),\n            tick  = me.scheduler.timeAxis.getAt(index);\n\n        let tipHtml = `<header>${me.L('L{Summary.Summary for}', me.scheduler.getFormattedDate(tick.startDate))}</header>`,\n            showTip = false;\n\n        DomHelper.forEachSelector(activeTarget, '.b-timeaxis-summary-value', (element, i) => {\n            const\n                label = me._labels[i],\n                text  = element.innerText.trim();\n\n            tipHtml += `<label>${label || ''}</label><div class=\"b-timeaxis-summary-value\">${text}</div>`;\n\n            if (element.innerHTML) {\n                showTip = true;\n            }\n        });\n\n        return showTip ? tipHtml : null;\n    }\n\n    /**\n     * Initialize tooltip on render\n     * @private\n     */\n    render() {\n        const\n            me            = this,\n            { scheduler } = me;\n\n        if (scheduler.isSchedulerBase) {\n            // if any sum config has a label, init tooltip\n            if (me.summaries?.some(config => config.label) && me.showTooltip && !me._tip) {\n                me._labels = me.summaries.map(config => config.label || '');\n\n                me._tip = new Tooltip({\n                    id             : `${scheduler.id}-groupsummary-tip`,\n                    cls            : 'b-timeaxis-summary-tip',\n                    hoverDelay     : 0,\n                    hideDelay      : 0,\n                    forElement     : scheduler.timeAxisSubGridElement,\n                    anchorToTarget : true,\n                    forSelector    : '.b-timeaxis-group-summary .b-timeaxis-tick',\n                    getHtml        : me.getTipHtml.bind(me)\n                });\n            }\n        }\n    }\n\n    //endregion\n\n    removeSummaryElements(rowEl) {\n        const summaryElement = rowEl.querySelector('.b-timeaxis-group-summary');\n\n        summaryElement?.remove();\n\n        super.removeSummaryElements();\n    }\n\n    hasSummary(column) {\n        return super.hasSummary(column) || column.isTimeAxisColumn;\n    }\n}\n\n// Override Grids GroupSummary with this improved version\nGridFeatureManager.registerFeature(GroupSummary, false, 'Scheduler');\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\n\n/**\n * @module Scheduler/feature/HeaderZoom\n */\n\n/**\n * Enables users to click and drag to zoom to a date range in Scheduler's header time axis. Only supported in horizontal\n * mode.\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *   features : {\n *     headerZoom : true\n *   }\n * });\n * ```\n *\n * {@inlineexample Scheduler/feature/HeaderZoom.js}\n *\n * <div class=\"note\">Not compatible with the {@link Scheduler/feature/TimeSelection} feature.</div>\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * @extends Core/mixin/InstancePlugin\n * @classtype headerZoom\n * @feature\n */\nexport default class HeaderZoom extends InstancePlugin {\n\n    static $name = 'HeaderZoom';\n\n    static get pluginConfig() {\n        return {\n            chain : ['onElementMouseDown', 'onElementMouseMove']\n        };\n    }\n\n    onElementMouseDown(event) {\n        const me = this;\n\n        // only react to mouse input, and left button\n        if (event.touches || event.button !== 0 || me.disabled) {\n            return;\n        }\n\n        // only react to mousedown directly on timeaxis cell\n        if (event.target.closest('.b-sch-header-timeaxis-cell')) {\n            const headerEl = me.client.subGrids.normal.header.headersElement;\n\n            me.startX = event.clientX;\n\n            me.element = DomHelper.createElement({\n                parent    : headerEl,\n                tag       : 'div',\n                className : 'b-headerzoom-rect'\n            });\n\n            me.headerElementRect = Rectangle.from(headerEl);\n\n            EventHelper.on({\n                element : document,\n                mouseup : 'onMouseUp',\n                thisObj : me,\n                once    : true\n            });\n        }\n    }\n\n    onElementMouseMove(event) {\n        const me = this;\n\n        if (typeof me.startX === 'number') {\n            const\n                x     = Math.max(event.clientX, me.headerElementRect.left),\n                left  = Math.min(me.startX, x),\n                width = Math.abs(me.startX - x),\n                rect  = new Rectangle(left - me.headerElementRect.x + me.client.scrollLeft, 0, width, me.headerElementRect.height);\n\n            DomHelper.setTranslateX(me.element, rect.left);\n            me.element.style.width = rect.width + 'px';\n        }\n    }\n\n    onMouseUp() {\n        const me = this;\n\n        if (typeof me.startX === 'number') {\n            const\n                { client } = me,\n                rect       = Rectangle.from(me.element),\n                startDate  = client.getDateFromCoordinate(rect.left, 'round', false),\n                endDate    = client.getDateFromCoordinate(rect.right, 'round', false);\n\n            me.element.remove();\n            me.startX = null;\n\n            client.zoomToSpan({\n                startDate,\n                endDate\n            });\n        }\n    }\n}\n\nGridFeatureManager.registerFeature(HeaderZoom, false, 'Scheduler');\n","import InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport EventHelper from '../../Core/helper/EventHelper.js';\n\n/**\n * @module Scheduler/feature/Pan\n */\n\n/**\n * Makes the scheduler's timeline pannable by dragging with the mouse. Try it out in the demo below.\n *\n * {@inlineexample Scheduler/feature/Pan.js}\n *\n * ```javascript\n * // Enable Pan\n * const scheduler = new Scheduler({\n *   features : {\n *     pan : true,\n *     eventDragCreate : false\n *   }\n * });\n * ```\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * <div class=\"note\">Incompatible with the {@link Scheduler.feature.EventDragCreate} and the\n * {@link Scheduler.feature.EventDragSelect} features.</div>\n *\n * @extends Core/mixin/InstancePlugin\n * @classtype pan\n * @feature\n */\nexport default class Pan extends InstancePlugin {\n    // region Init\n\n    static $name = 'Pan';\n\n    static configurable = {\n        /**\n         * Set to `false` to not pan horizontally\n         * @prp {Boolean}\n         * @default\n         */\n        horizontal : true,\n\n        /**\n         * Set to `false` to not pan vertically\n         * @prp {Boolean}\n         * @default\n         */\n        vertical : true,\n\n        /**\n         * Set to `false` to not pan horizontally when dragging in the time axis header\n         * @prp {Boolean}\n         * @default\n         */\n        enableInHeader : true\n    };\n\n    get targetSelector() {\n        return `.b-sch-timeaxis-cell,.b-timeline-subgrid${this.enableInHeader ? ',.b-sch-header-timeaxis-cell,.b-sch-header-text' : ''}`;\n    }\n\n    //endregion\n\n    //region Plugin config\n\n    static get pluginConfig() {\n        return {\n            chain : ['onElementMouseDown']\n        };\n    }\n\n    //endregion\n\n    // region Events\n\n    /**\n     * Fires on the owning Scheduler before pan starts. Return `false` to prevent the operation.\n     * @event beforePan\n     * @preventable\n     * @on-owner\n     * @param {Event} event The native browser DOM event\n     */\n\n    //endregion\n\n    onElementMouseDown(event) {\n        const\n            me                                            = this,\n            { client }                                    = me,\n            { button, touches, target, clientX, clientY } = event,\n            dragFeature                                   = client.features.taskDrag || client.features.eventDrag,\n            enablePanOnEvents                             = client.readOnly || !dragFeature?.enabled;\n\n        // only react to mouse input, and left button\n        if (touches || button !== 0 || me.disabled || client.trigger('beforePan', { event }) === false) {\n            return;\n        }\n\n        // only react to mousedown directly on grid cell, subgrid element or if drag is disabled - the events too\n        if (target.matches(me.targetSelector) || (enablePanOnEvents && target.closest(client.eventSelector))) {\n            me.mouseX   = clientX;\n            me.mouseY   = clientY;\n            me.onHeader = me.enableInHeader && target.closest('.b-sch-header-timeaxis-cell');\n\n            me.mouseDetacher = EventHelper.on({\n                element   : document,\n                mousemove : 'onMouseMove',\n                mouseup   : 'onMouseUp',\n                thisObj   : me\n            });\n        }\n    }\n\n    onMouseMove(event) {\n        const\n            me         = this,\n            { client } = me,\n            xScroller  = client.timeAxisSubGrid.scrollable,\n            yScroller  = client.scrollable,\n            x          = event.clientX,\n            y          = event.clientY;\n\n        event.preventDefault();\n\n        if (me.vertical && (client.isVertical || !me.onHeader)) {\n            yScroller.scrollBy(0, me.mouseY - y);\n        }\n\n        if (me.horizontal && (client.isHorizontal || !me.onHeader)) {\n            xScroller.scrollBy(me.mouseX - x);\n        }\n\n        me.mouseX = x;\n        me.mouseY = y;\n    }\n\n    onMouseUp() {\n        this.mouseDetacher();\n        this.mouseDetacher = null;\n    }\n\n    /**\n     * Yields `true` if a pan gesture is in process.\n     * @property {Boolean}\n     * @readonly\n     */\n    get isActive() {\n        return Boolean(this.mouseDetacher);\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(Pan, false, ['Scheduler', 'Gantt']);\n","import ContextMenuBase from '../../Core/feature/base/ContextMenuBase.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\n\n/**\n * @module Scheduler/feature/ResourceMenu\n */\n\n/**\n * Applicable only for Scheduler in `vertical` mode. Right click resource header cells to display a context menu.\n *\n * To invoke the menu in a keyboard-accessible manner, use the `SPACE` key when a resource cell is focused.\n *\n * {@inlineexample Scheduler/feature/ResourceMenu.js}\n *\n * ### Default menu items\n *\n * The ResourceMenu feature provides only one item by default:\n *\n * | Reference              | Text   | Weight | Description         |\n * |------------------------|--------|--------|---------------------|\n * | `remove`               | Delete | 100    | Delete the resource |\n *\n * ### Customizing the menu items\n *\n * The menu items in the resource menu can be customized, existing items can be changed or removed,\n * and new items can be added. This is handled using the `items` config of the feature.\n *\n * Add extra items for all columns:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     mode     : 'vertical',\n *     features : {\n *         resourceMenu : {\n *             items : {\n *                 extraItem : {\n *                     text   : 'My cell item',\n *                     icon   : 'fa fa-bus',\n *                     weight : 200,\n *                     onItem : () => ...\n *                 }\n *             }\n *         }\n *     }\n * });\n *\n * Remove an existing item:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     mode     : 'vertical',\n *     features : {\n *         resourceMenu : {\n *             items : {\n *                 remove : null\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * Customize existing item:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     mode     : 'vertical',\n *     features : {\n *         resourceMenu : {\n *             items : {\n *                 remove : {\n *                     text : 'Remove',\n *                     icon : 'b-fa b-fa-dumpster'\n *                 }\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * It is also possible to manipulate the default items and add new items in the processing function:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     mode     : 'vertical',\n *     features : {\n *         resourceMenu : {\n *             processItems({items, record}) {\n *                 if (record.cost > 5000) {\n *                     items.myItem = { text : 'Split cost' };\n *                 }\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * This feature is **disabled** by default.\n *\n * @extends Core/feature/base/ContextMenuBase\n * @demo Scheduler/vertical\n * @classtype resourceMenu\n * @feature\n */\nexport default class ResourceMenu extends ContextMenuBase {\n    //region Config\n\n    static $name = 'ResourceMenu';\n\n    static configurable = {\n        /**\n         * A function called before displaying the menu that allows manipulations of its items.\n         * Returning `false` from this function prevents the menu being shown.\n         *\n         * ```javascript\n         * features : {\n         *     resourceMenu : {\n         *         processItems({ items, record, column }) {\n         *             // Add or hide existing items here as needed\n         *             items.myAction = {\n         *                 text   : 'Cool action',\n         *                 icon   : 'b-fa b-fa-fw b-fa-ban',\n         *                 onItem : () => console.log(`Clicked ${record.name}`),\n         *                 weight : 1000 // Move to end\n         *             };\n         *\n         *             if (!record.allowDelete) {\n         *                 items.remove.hidden = true;\n         *             }\n         *         }\n         *     }\n         * },\n         * ```\n         * @param {Object} context An object with information about the menu being shown\n         * @param {Scheduler.model.ResourceModel} context.resourceRecord The record representing the current resource\n         * @param {Object<String,MenuItemConfig|Boolean|null>} context.items An object containing the\n         * {@link Core.widget.MenuItem menu item} configs keyed by their id\n         * @param {Event} context.event The DOM event object that triggered the show\n         * @config {Function}\n         * @preventable\n         */\n        processItems : null,\n\n        /**\n         * {@link Core.widget.Menu} items object containing named child menu items to apply to the feature's\n         * provided context menu.\n         *\n         * This may add extra items as below, but you can also configure, or remove any of the default items by\n         * configuring the name of the item as `null`\n         *\n         * ```javascript\n         * features : {\n         *     resourceMenu : {\n         *         // This object is applied to the Feature's predefined default items\n         *         items : {\n         *             switchToDog : {\n         *                 text : 'Dog',\n         *                 icon : 'b-fa b-fa-fw b-fa-dog',\n         *                 onItem({record}) {\n         *                     record.dog = true;\n         *                     record.cat = false;\n         *                 },\n         *                 weight : 500     // Make this second from end\n         *             },\n         *             switchToCat : {\n         *                 text : 'Cat',\n         *                 icon : 'b-fa b-fa-fw b-fa-cat',\n         *                 onItem({record}) {\n         *                     record.dog = false;\n         *                     record.cat = true;\n         *                 },\n         *                 weight : 510     // Make this sink to end\n         *             },\n         *             remove : {\n         *                 // Change icon for the delete item\n         *                 icon : 'b-fa b-fa-times'\n         *             }\n         *         }\n         *     }\n         * },\n         * ```\n         *\n         * @config {Object<String,MenuItemConfig|Boolean|null>}\n         */\n        items : null,\n\n        type : 'resource'\n    };\n\n    static get pluginConfig() {\n        const config = super.pluginConfig;\n\n        config.chain.push('populateResourceMenu');\n\n        return config;\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * This event fires on the owning scheduler before the context menu is shown for a resource.\n     * Allows manipulation of the items to show in the same way as in the {@link #config-processItems}.\n     *\n     * Returning `false` from a listener prevents the menu from being shown.\n     *\n     * @event resourceMenuBeforeShow\n     * @preventable\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The grid\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Object<String,MenuItemConfig>} items Menu item configs\n     * @param {Grid.column.Column} column Column\n     * @param {Scheduler.model.ResourceModel} resourceRecord Record\n     */\n\n    /**\n     * This event fires on the owning scheduler after the context menu is shown for a resource.\n     * @event resourceMenuShow\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The grid\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Object<String,MenuItemConfig>} items Menu item configs\n     * @param {Scheduler.model.ResourceModel} record Record\n     */\n\n    /**\n     * This event fires on the owning scheduler when an item is selected in the context menu.\n     * @event resourceMenuItem\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The grid\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Core.widget.MenuItem} item Selected menu item\n     * @param {Scheduler.model.ResourceModel} record Record\n     */\n\n    /**\n     * This event fires on the owning grid when a check item is toggled in the context menu.\n     * @event resourceMenuToggleItem\n     * @on-owner\n     * @param {Scheduler.view.Scheduler} source The grid\n     * @param {Core.widget.Menu} menu The menu\n     * @param {Core.widget.MenuItem} item Selected menu item\n     * @param {Scheduler.model.ResourceModel} resourceRecord Record\n     * @param {Boolean} checked Checked or not\n     */\n\n    //endregion\n\n    //region Menu handlers\n\n    getDataFromEvent(event) {\n        const\n            cellElement = event.target.closest('.b-resourceheader-cell'),\n            resourceId  = cellElement?.dataset.resourceId;\n\n        // Only yield data to show a menu if we are on a cell\n        if (resourceId) {\n            const resourceRecord = this.client.resourceStore.getById(resourceId);\n\n            return {\n                cellElement,\n                resourceRecord\n            };\n        }\n    }\n\n    //endregion\n\n    //region Getters/Setters\n\n    populateResourceMenu({ items, resourceRecord }) {\n        const { client } = this;\n\n        if (!client.readOnly) {\n            items.remove = {\n                text        : 'L{CellMenu.removeRow}',\n                localeClass : this,\n                icon        : 'b-fw-icon b-icon-trash',\n                cls         : 'b-separator',\n                weight      : 100,\n                disabled    : resourceRecord.readOnly,\n                onItem      : () => client.resourceStore.remove(resourceRecord)\n            };\n        }\n    }\n\n    get showMenu() {\n        return true;\n    }\n\n    //endregion\n}\n\nResourceMenu.featureClass = '';\n\nGridFeatureManager.registerFeature(ResourceMenu, false, ['Scheduler']);\n","import GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport ResourceTimeRangesBase from './base/ResourceTimeRangesBase.js';\nimport ResourceTimeRangeStore from '../data/ResourceTimeRangeStore.js';\n\n/**\n * @module Scheduler/feature/ResourceTimeRanges\n */\n\n/**\n * Feature that draws resource time ranges, shaded areas displayed behind events. These zones are similar to events in\n * that they have a start and end date but different in that they do not take part in the event layout, and they always\n * occupy full row height.\n *\n * {@inlineexample Scheduler/feature/ResourceTimeRanges.js}\n *\n * Each time range is represented by an instances of {@link Scheduler.model.ResourceTimeRangeModel}, held in a\n * {@link Scheduler.data.ResourceTimeRangeStore}. Currently they are readonly UI-wise, but can be manipulated on\n * the data level. To style the rendered elements, use the {@link Scheduler.model.TimeSpan#field-cls} field or use the\n * {@link Scheduler.model.ResourceTimeRangeModel#field-timeRangeColor} field.\n *\n * Data can be provided either using the {@link Scheduler.view.Scheduler#config-resourceTimeRanges} config on the\n * Scheduler config object:\n *\n * ```javascript\n * new Scheduler({\n *     ...\n *    features :  {\n *        resourceTimeRanges : true\n *    },\n *\n *    // Data specified directly on the Scheduler instance\n *    resourceTimeRanges : [\n *        // Either specify startDate & endDate or startDate & duration when defining a range\n *        { startDate : new Date(2019,0,1), endDate : new Date(2019,0,3), name : 'Occupied', timeRangeColor : 'red' },\n *        { startDate : new Date(2019,0,3), duration : 2, durationUnit : 'd', name : 'Available' },\n *    ]\n * })\n * ```\n *\n * Or the {@link Scheduler.view.Scheduler#config-resourceTimeRangeStore} config on the Scheduler config object:\n *\n * ```javascript\n * new Scheduler({\n *     ...\n *     features :  {\n *         resourceTimeRanges : true\n *     },\n *     resourceTimeRangeStore : new ResourceTimeRangeStore({\n *         readUrl : './resourceTimeRanges/'\n *     })\n * })\n * ```\n *\n * Or on the project, using the {#Scheduler/model/mixin/ProjectModelMixin#config-resourceTimeRangesData} config.\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * ## Recurring ranges support\n *\n * Resource time ranges can also be recurring, as seen in the example below:\n *\n * ```js\n * const resourceTimeRangeStore = new ResourceTimeRangeStore({\n *     data : [{\n *         id             : 1,\n *         resourceId     : 'r1',\n *         startDate      : '2019-01-01T11:00',\n *         endDate        : '2019-01-01T13:00',\n *         name           : 'Lunch',\n *         // this time range will repeat every day\n *         recurrenceRule : 'FREQ=DAILY'\n *     }]\n * });\n *\n * ```\n *\n * @extends Scheduler/feature/base/ResourceTimeRangesBase\n * @demo Scheduler/resourcetimeranges\n * @classtype resourceTimeRanges\n * @feature\n */\nexport default class ResourceTimeRanges extends ResourceTimeRangesBase {\n    //region Config\n\n    static $name = 'ResourceTimeRanges';\n\n    static configurable = {\n        rangeCls : 'b-sch-resourcetimerange',\n\n        /**\n         * Set to `true` to allow mouse interactions with the rendered range elements. By default, the range elements\n         * are not reachable with the mouse, and only serve as a static background.\n         * @prp {Boolean}\n         * @default\n         */\n        enableMouseEvents : false,\n\n        /**\n         * Specify value to use for the tabIndex attribute of resource time range elements\n         * @config {Number}\n         * @default\n         */\n        tabIndex : 0,\n\n        entityName : 'resourceTimeRange'\n    };\n\n    static get pluginConfig() {\n        const superConfig = super.pluginConfig;\n        return {\n            ...superConfig,\n            assign : ['resolveResourceTimeRangeRecord', 'getElementFromResourceTimeRangeRecord']\n        };\n    }\n\n    //endregion\n\n    //region Init\n\n    // <remove-on-release>\n    // TODO: move as much code as possible to attachToResourceTimeRangeStore\n    // </remove-on-release>\n    attachToProject(project) {\n        const\n            me                     = this,\n            { client : scheduler } = me;\n\n        super.attachToProject(project);\n\n        if (!project.resourceTimeRangeStore) {\n            project.resourceTimeRangeStore = scheduler.resourceTimeRangeStore || new ResourceTimeRangeStore({\n                owner : me\n            });\n\n            const { crudManager } = scheduler;\n\n            if (crudManager && !crudManager.resourceTimeRangeStore) {\n                crudManager.resourceTimeRangeStore = project.resourceTimeRangeStore;\n            }\n        }\n\n        const store = project.resourceTimeRangeStore;\n\n        if (!me.exposedOnScheduler) {\n            // ResourceZones can be set on scheduler or feature, for convenience\n            if (scheduler.resourceTimeRanges) {\n                store.add(scheduler.resourceTimeRanges);\n                delete scheduler.resourceTimeRanges;\n            }\n\n            // expose getter/setter for resourceTimeRanges on scheduler\n            Object.defineProperty(scheduler, 'resourceTimeRanges', {\n                get : () => store.records,\n                set : resourceTimeRanges => store.data = resourceTimeRanges\n            });\n\n            me.exposedOnScheduler = true;\n        }\n\n        // Link to projects resourceStore if not already linked to one\n        if (!store.resourceStore) {\n            store.resourceStore = project.resourceStore;\n        }\n\n        me.detachListeners('store');\n\n        store.ion({\n            name    : 'store',\n            change  : me.onStoreChange,\n            thisObj : me\n        });\n    }\n\n    // Called by ProjectConsumer after a new store is assigned at runtime\n    // <remove-on-release>\n    // TODO: move as much code as possible here from attachToProject\n    // </remove-on-release>\n    attachToResourceTimeRangeStore(store) {\n        this.attachToProject(this.project);\n        this.client.refresh();\n    }\n\n    get store() {\n        return this.project.resourceTimeRangeStore;\n    }\n\n    //endregion\n\n    //region Events\n\n    /**\n     * Triggered for mouse down ona resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeMouseDown\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for mouse up ona resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeMouseUp\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for click on a resource time range. Only triggered if the ResourceTimeRange feature is configured with\n     * `enableMouseEvents: true`.\n     * @event resourceTimeRangeClick\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for double-click on a resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeDblClick\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for right-click on a resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeContextMenu\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for mouse over on a resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeMouseOver\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    /**\n     * Triggered for mouse out of a resource time range. Only triggered if the ResourceTimeRange feature is configured\n     * with `enableMouseEvents: true`.\n     * @event resourceTimeRangeMouseOut\n     * @param {Scheduler.view.Scheduler} source This Scheduler\n     * @param {Scheduler.feature.ResourceTimeRanges} feature The ResourceTimeRange feature\n     * @param {Scheduler.model.ResourceTimeRangeModel} resourceTimeRangeRecord Resource time range record\n     * @param {Scheduler.model.ResourceModel} resourceRecord Resource record\n     * @param {MouseEvent} domEvent Browser event\n     * @on-owner\n     */\n\n    //endregion\n\n    /**\n     * Returns a resource time range record from the passed element\n     * @param {HTMLElement} rangeElement\n     * @returns {Scheduler.model.ResourceTimeRangeModel}\n     * @on-owner\n     * @function resolveResourceTimeRangeRecord\n     * @category DOM\n     */\n\n    /**\n     * Returns the element for the passed resource time range record, if rendered into DOM.\n     * @param {Scheduler.model.ResourceTimeRangeModel} record\n     * @returns {HTMLElement}\n     * @on-owner\n     * @function getElementFromResourceTimeRangeRecord\n     * @category DOM\n     */\n\n    // Called on render of resources events to get events to render. Add any ranges\n    // (chained function from Scheduler)\n    getEventsToRender(resource, events) {\n        if (!this.disabled) {\n            const { timeRanges } = resource.$original;\n\n            // if we have ranges and the feature is enabled\n            if (timeRanges?.length) {\n                const { startDate, endDate } = this.client;\n\n                timeRanges.forEach(timeRange => {\n                    // if this a recurring event let's include its visible occurrences\n                    if (timeRange.isRecurring) {\n                        events.push(...timeRange.getOccurrencesForDateRange(startDate, endDate));\n                    }\n                    else {\n                        events.push(timeRange);\n                    }\n                });\n            }\n        }\n\n        return events;\n    }\n\n    shouldInclude(eventRecord) {\n        return eventRecord.isResourceTimeRange && !eventRecord.isNonWorking && !eventRecord.isCalendarHighlightModel;\n    }\n\n    doDestroy() {\n        if (this.store?.owner === this) {\n            this.store.destroy();\n        }\n        super.doDestroy();\n    }\n}\n\n// No feature based styling needed, do not add a cls to Scheduler\nResourceTimeRanges.featureClass = '';\n\nGridFeatureManager.registerFeature(ResourceTimeRanges, false, 'Scheduler');\n","import GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport InstancePlugin from '../../Core/mixin/InstancePlugin.js';\nimport Editor from '../../Core/widget/Editor.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\nimport TaskEditStm from './mixin/TaskEditStm.js';\n\n/**\n * @module Scheduler/feature/SimpleEventEdit\n */\n\n/**\n * Feature that displays a text field to edit the event name. You can control the flow of this by listening to the events relayed by this class from the underlying {@link Core.widget.Editor}.\n * To use this feature, you also need to disable the built-in default editing feature:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         eventEdit       : false,\n *         simpleEventEdit : true\n *     }\n * });\n * ```\n *\n * This feature is **off** by default. For info on enabling it, see {@link Grid.view.mixin.GridFeatures}.\n *\n * @extends Core/mixin/InstancePlugin\n * @demo Scheduler/simpleeditor\n * @inlineexample Scheduler/feature/SimpleEventEdit.js\n * @classtype simpleEventEdit\n * @feature\n */\nexport default class SimpleEventEdit extends InstancePlugin.mixin(TaskEditStm) {\n\n    // region Events\n    /**\n     * Fired before the editor is shown to start an edit operation. Returning `false` from a handler vetoes the edit operation.\n     * @event beforeStart\n     * @param {Object} value The value to be edited.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     * @preventable\n     */\n    /**\n     * Fired when an edit operation has begun.\n     * @event start\n     * @param {Object} value The starting value of the field.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     */\n    /**\n     * Fired when an edit completion has been requested, either by `ENTER`, or focus loss (if configured to complete on blur).\n     * The completion may be vetoed, in which case, focus is moved back into the editor.\n     * @event beforeComplete\n     * @param {Object} oldValue The original value.\n     * @param {Object} value The new value.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     * @preventable\n     */\n    /**\n     * Edit has been completed, and any associated record or element has been updated.\n     * @event complete\n     * @param {Object} oldValue The original value.\n     * @param {Object} value The new value.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     */\n\n    /**\n     * Fired when cancellation has been requested, either by `ESC`, or focus loss (if configured to cancel on blur).\n     * The cancellation may be vetoed, in which case, focus is moved back into the editor.\n     * @event beforeCancel\n     * @param {Object} oldValue The original value.\n     * @param {Object} value The new value.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     * @preventable\n     */\n    /**\n     * Edit has been canceled without updating the associated record or element.\n     * @event cancel\n     * @param {Object} oldValue The original value.\n     * @param {Object} value The value of the field.\n     * @param {Core.widget.Editor} source The Editor that triggered the event.\n     */\n    // endregion\n\n    //region Config\n\n    static get $name() {\n        return 'SimpleEventEdit';\n    }\n\n    static get defaultConfig() {\n        return {\n            /**\n             * The event that shall trigger showing the editor. Defaults to `eventdblclick`, set to `''` or null to\n             * disable editing of existing events.\n             * @config {String}\n             * @default\n             * @category Editor\n             */\n            triggerEvent : 'eventdblclick',\n\n            /**\n             * The current {@link Scheduler.model.EventModel} record, which is being edited by the event editor.\n             * @property {Scheduler.model.EventModel}\n             * @readonly\n             */\n            eventRecord : null,\n\n            /**\n             * The {@link Scheduler.model.EventModel} field to edit\n             * @config {String}\n             * @category Editor\n             */\n            field : 'name',\n\n            /**\n             * The editor configuration, where you can control which widget to show\n             * @config {EditorConfig}\n             * @category Editor\n             */\n            editorConfig : null\n        };\n    }\n\n    static get pluginConfig() {\n        return {\n            chain : ['onEventEnterKey', 'editEvent']\n        };\n    }\n\n    //endregion\n\n    //region Editing\n\n    construct(scheduler, config) {\n        const me = this;\n\n        me.scheduler = scheduler;\n\n        scheduler.eventEdit = me;\n\n        super.construct(scheduler, config);\n\n        me.clientListenersDetacher = scheduler.ion({\n            [me.triggerEvent] : ({ eventRecord, eventElement }) => me.editEvent(eventRecord, eventRecord.resource, eventElement),\n            dragcreateend     : me.onDragCreateEnd,\n            thisObj           : me\n        });\n    }\n\n    doDestroy() {\n        this.clientListenersDetacher();\n\n        this.editor?.destroy();\n\n        super.doDestroy();\n    }\n\n    get eventStore() {\n        return this.scheduler.eventStore;\n    }\n\n    get project() {\n        return this.client.project;\n    }\n\n    // region Editor\n    /**\n     * Opens an Editor for the passed event. This function is exposed on Scheduler and can be called as\n     * `scheduler.editEvent()`.\n     * @param {Scheduler.model.EventModel} eventRecord The Event to edit\n     * @param {Scheduler.model.ResourceModel} [resourceRecord] The Resource record for the event.\n     * @on-owner\n     * @async\n     */\n    async editEvent(eventRecord, resourceRecord, element, stmCapture) {\n        const\n            me            = this,\n            { scheduler } = me,\n            { eventEdit } = me.client.features;\n\n        // If event edit feature also exists, we use simple edit for new events and eventEdit it for already created events\n        if (scheduler.readOnly || me.disabled || eventRecord.readOnly || (eventEdit && !eventEdit.disabled && !eventRecord.isCreating)) {\n            return;\n        }\n\n        let { editor } = me;\n\n        // Want to put editor in inner element (b-sch-event) to get correct font size, but when drag creating the proxy\n        // has no inner element\n        element = DomHelper.down(element, scheduler.eventInnerSelector) || element;\n\n        eventRecord = eventRecord.isAssignment ? eventRecord.event : eventRecord;\n\n        me.resource = resourceRecord;\n        me.event    = eventRecord;\n        me.element  = element;\n\n        scheduler.element.classList.add('b-eventeditor-editing');\n\n        if (editor) {\n            // Positioned editors remove themselves so that their appendTo element\n            // may have its content updated unobstructed.\n            editor.render(scheduler.timeAxisSubGridElement);\n        }\n        else {\n            // Editor is contained in, and owned by the TimeAxisSubGrid to avoid focus flipping out and in.\n            // The editor is an owned descendant of the SubGrid.\n            me.editor = editor = Editor.new({\n                owner        : scheduler.timeAxisSubGrid,\n                appendTo     : scheduler.timeAxisSubGridElement,\n                scrollAction : 'realign',\n                maxHeight    : 40,\n                align        : {\n                    align : scheduler.isHorizontal ? 'c-c' : 't-t'\n                },\n                cls               : 'b-simpleeventeditor',\n                internalListeners : {\n                    complete : 'onEditorComplete',\n                    cancel   : 'onEditorCancel',\n                    thisObj  : me\n                },\n\n                // Keys must not propagate into the scheduler\n                onInternalKeyDown : keyEvent => keyEvent.stopPropagation()\n            }, me.editorConfig);\n\n            me.relayEvents(me.editor, ['beforestart', 'start', 'beforecomplete', 'complete', 'beforecancel', 'cancel']);\n        }\n\n        if (stmCapture) {\n            me.stmInitiallyAutoRecord = stmCapture.stmInitiallyAutoRecord;\n            me.stmInitiallyDisabled = stmCapture.stmInitiallyDisabled;\n            me.hasStmCapture = true;\n\n            // indicate that editor has been opened, and is now managing the \"stm capture\"\n            stmCapture.transferred = true;\n        }\n        // it is set to `false` by calendar, to ignore the STM mechanism\n        else if (stmCapture !== false && !me.hasStmCapture) {\n            me.captureStm(true);\n        }\n\n        // Drag-created records get a \"New event\" name for cosmetic purposes.\n        // Remove just before editing.\n        if (eventRecord.isCreating) {\n            eventRecord.name = '';\n        }\n\n        await editor.startEdit({\n            target : element,\n            record : eventRecord,\n            field  : me.field\n        });\n\n        // If text label is not visible, scroll it into view\n        if (scheduler.isVertical && eventRecord.startDate < scheduler.visibleDateRange.startDate) {\n            editor.element.scrollIntoView();\n        }\n\n        // No key navigation during editing\n        scheduler.navigator.disabled = true;\n    }\n\n    onEditorComplete() {\n        // Promote event to being permanent so that it is syncable to the server as a new event\n        this.event.isCreating = false;\n\n        this.reset();\n\n        this.freeStm(true);\n    }\n\n    onEditorCancel() {\n        // Remove the transient event\n        if (this.event.isCreating) {\n            this.event.remove();\n        }\n\n        this.reset();\n\n        this.freeStm(false);\n    }\n\n    reset() {\n        this.scheduler.element.classList.remove('b-eventeditor-editing');\n\n        // Restore key navigation after editing\n        this.scheduler.navigator.disabled = false;\n        this.event                        = null;\n        this.resource                     = null;\n    }\n\n    //endregion\n\n    // chained from EventNavigation\n    onEventEnterKey({ assignmentRecord, eventRecord }) {\n        const\n            element        = assignmentRecord ? this.scheduler.getElementFromAssignmentRecord(assignmentRecord) : this.scheduler.getElementFromEventRecord(eventRecord),\n            resourceRecord = (assignmentRecord || eventRecord).resource;\n\n        this.editEvent(eventRecord, resourceRecord, element);\n    }\n\n    //endregion\n\n    onDragCreateEnd({ eventRecord, resourceRecord, eventElement, stmCapture }) {\n        this.element = eventElement;\n\n        this.editEvent(eventRecord, resourceRecord, eventElement, stmCapture);\n    }\n}\n\nGridFeatureManager.registerFeature(SimpleEventEdit, false, 'Scheduler');\n","import GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport GridSplit from '../../Grid/feature/Split.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\nimport ObjectHelper from '../../Core/helper/ObjectHelper.js';\nimport Rectangle from '../../Core/helper/util/Rectangle.js';\nimport DomHelper from '../../Core/helper/DomHelper.js';\n\n/**\n * @module Scheduler/feature/Split\n */\n\nconst\n    startScrollOptions = Object.freeze({\n        animate : false,\n        block   : 'start'\n    }),\n    endScrollOptions = Object.freeze({\n        animate : false,\n        block   : 'end'\n    });\n\n/**\n * This feature allows splitting the Scheduler into multiple views, either by using the cell context menu, or\n * programmatically by calling {@link #function-split split()}.\n *\n * {@inlineexample Scheduler/feature/Split.js}\n *\n * See {@link Grid/feature/Split} for more details.\n *\n * ## Scheduler specifics\n *\n * - Scheduler allows splitting by dates, either programmatically or by using the context menu.\n * - Scheduler prevents splitting in the grid part using the context menu.\n * - The `eventDrag` feature will automatically be configured to allow dragging between the clones (by setting\n *   `constrainDragToTimeline` to `false`).\n * - Splitting is not supported in vertical mode.\n *\n * {@note}\n * Note that although Gantt is related to Scheduler, splitting is not supported in Gantt.\n * {/@note}\n *\n * @classtype split\n * @feature\n * @extends Grid/feature/Split\n *\n * @typings Grid.feature.Split -> Grid.feature.GridSplit\n */\nexport default class Split extends GridSplit {\n    static $name = 'Split';\n\n    static configurable = {\n        /**\n         * Properties whose changes should be relayed to sub-views at runtime.\n         *\n         * Supply an object with property names as keys, and a truthy value to relay the change, or a falsy value to not\n         * relay it. The object will be merged with the default values.\n         *\n         * In addition to the properties relayed by Grid, Scheduler also relays these:\n         * * {@link Scheduler/view/Scheduler#property-barMargin}\n         * * {@link Scheduler/view/Scheduler#property-eventColor}\n         * * {@link Scheduler/view/Scheduler#property-eventStyle}\n         * * {@link Scheduler/view/Scheduler#property-eventLayout}\n         * * {@link Scheduler/view/Scheduler#property-fillTicks}\n         * * {@link Scheduler/view/Scheduler#property-resourceMargin}\n         * * {@link Scheduler/view/Scheduler#property-snap}\n         * * {@link Scheduler/view/Scheduler#property-tickSize}\n         *\n         * Example of supplying a custom set of properties to relay:\n         * ```javascript\n         * const scheduler = new Scheduler({\n         *     features : {\n         *         split : {\n         *             relayProperties : {\n         *                 barMargin : false, // Do not relay barMargin changes\n         *                 myConfig : true   // Relay changes to the myConfig property\n         *             }\n         *         }\n         *     }\n         * }\n         * ```\n         * @config {Object<String,Boolean>}\n         */\n        relayProperties : {\n            value : {\n                barMargin      : 1,\n                eventColor     : 1,\n                eventStyle     : 1,\n                eventLayout    : 1,\n                fillTicks      : 1,\n                resourceMargin : 1,\n                snap           : 1,\n                tickSize       : 1\n            },\n            $config : {\n                merge : 'merge'\n            }\n        }\n    };\n\n    static pluginConfig = {\n        chain  : ['populateCellMenu', 'populateScheduleMenu', 'afterConfigChange', 'afterAddListener', 'afterRemoveListener'],\n        assign : ['split', 'unsplit', 'subViews', 'syncSplits']\n    };\n\n    getClientConfig(appendTo, order, options, config) {\n        const\n            { client }   = this,\n            clientConfig = super.getClientConfig(appendTo, order, options, config);\n\n        // Grid demo in Schedulers docs\n        if (!client.isSchedulerBase && !client.isSchedulerProBase && !client.isGanttBase) {\n            return clientConfig;\n        }\n\n        // Use project instead of store / inline data\n        delete clientConfig.store;\n        delete clientConfig.events;\n        delete clientConfig.resources;\n        delete clientConfig.assignments;\n        delete clientConfig.dependencies;\n        delete clientConfig.resourceTimeRanges;\n        delete clientConfig.timeRanges;\n        clientConfig.project = client.project;\n        clientConfig.assignmentStore = clientConfig.project.assignmentStore;\n        clientConfig.crudManager = client.crudManager;\n        clientConfig.viewPreset = client.viewPreset;\n        clientConfig.startDate = client.startDate;\n        clientConfig.endDate = client.endDate;\n        clientConfig.selectedCollection = client.selectedCollection;\n\n        clientConfig.useInitialAnimation = false;\n\n        // Allow dragging between the clones, unless drag is explicitly turned off\n        if (clientConfig.features?.eventDrag !== false) {\n            ObjectHelper.setPath(clientConfig, 'features.eventDrag.constrainDragToTimeline', false);\n            client.features.eventDrag.constrainDragToTimeline = false;\n        }\n\n        return clientConfig;\n    }\n\n    unsplitCleanup(options) {\n        // Force time axis to get correct width\n        this.client.timeAxisSubGrid.onElementResize();\n    }\n\n    /**\n     * Fired when splitting the Scheduler.\n     * @event split\n     * @param {Scheduler.view.SchedulerBase[]} subViews The sub views created by the split\n     * @param {Object} options The options passed to the split call\n     * @param {'horizontal'|'vertical'|'both'} options.direction The direction of the split\n     * @param {Grid.column.Column} options.atColumn The column to split at\n     * @param {Core.data.Model} options.atRecord The record to split at\n     * @param {Date} options.atDate The date to split at\n     * @on-owner\n     */\n\n    processOptions(options) {\n        const { client } = this;\n\n        let { atDate, atRecord } = options;\n\n        // Check if center is a date if not given a specific split point\n        if (options.direction !== 'horizontal' && !options.atColumn && !options.atRecord && !atDate) {\n            const\n                bounds = Rectangle.from(client.element),\n                date   = client.getDateFromCoordinate(bounds.center.x, 'round', false);\n\n            // If it is a date, split at it\n            if (date) {\n                options.atDate = atDate = date;\n                options.atColumn = client.timeAxisColumn;\n            }\n        }\n\n        // Asked to split at a date, determine split sizes\n        if (atDate) {\n            if (!options.direction) {\n                options.direction = atRecord ? 'both' : 'vertical';\n            }\n\n            options.splitX = client.getCoordinateFromDate(atDate, { ignoreRTL : true }) - client.timeAxisSubGrid.scrollable.x;\n\n            if (client.rtl) {\n                options.splitX += client._bodyRectangle.width - Rectangle.from(client.timeAxisSubGridElement).right + DomHelper.scrollBarWidth;\n            }\n            else {\n                options.splitX += Rectangle.from(client.timeAxisSubGridElement, client.bodyContainer).left;\n            }\n\n            options.remainingWidth = Rectangle.from(client.element).width - options.splitX;\n        }\n\n        return super.processOptions(options);\n    }\n\n    /**\n     * Split the scheduler into two or four parts.\n     *\n     * - Splits into two when passed `direction : 'vertical'`, `direction : 'horizontal'` or `atColumn`, `atRecord` or\n     *   `atDate`.\n     * - Splits into four when passed `direction : 'both'` or `atColumn`/`atDate` and `atRecord`.\n     *\n     * ```javascript\n     * // Split horizontally (at the row in the center of the scheduler)\n     * await scheduler.split({ direction : 'horizontal' });\n     *\n     * // Split both ways by a specific date and resource\n     * await schedule.split({\n     *    atRecord : scheduler.resourceStore.getById(10),\n     *    atDate   : new Date(2023, 5, 8)\n     * });\n     * ```\n     *\n     * To return to a single scheduler, call {@link #function-unsplit}.\n     *\n     * Note that this function is callable directly on the scheduler instance.\n     *\n     * @param {Object} [options] Split options\n     * @param {'vertical'|'horizontal'|'both'} [options.direction] Split direction, 'vertical', 'horizontal' or 'both'.\n     * Not needed when passing `atColumn` or `atRecord`.\n     * @param {Date} [options.atDate] Date to split at. Has to be within the time axis\n     * @param {Grid.column.Column} [options.atColumn] Column to split at\n     * @param {Core.data.Model} [options.atRecord] Record to split at\n     * @returns {Promise} Resolves when split is complete, and subviews are scrolled to the correct position.\n     * @async\n     * @on-owner\n     */\n    async split(options = {}) {\n        const { client } = this;\n\n        if (client.isVertical) {\n            throw new Error('Splitting is not supported in vertical mode');\n        }\n\n        const result = await super.split(options);\n\n        if (result && options.atDate) {\n            await Promise.all([\n                // Scroll prev tick into view on left side\n                result[0].scrollToDate(DateHelper.add(options.atDate, -1, client.timeAxis.unit), endScrollOptions),\n                // And current tick into view on right side\n                result[1].scrollToDate(options.atDate, startScrollOptions)\n            ]);\n        }\n\n        // For whatever reason, the above scroll does not always refresh the timeaxis correctly, have not been able\n        // to track it down so triggering a refresh manually\n        client.timeAxisSubGrid.scrollable.x += 0.5;\n\n        return result;\n    }\n\n    //region Context menu\n\n    // Overwritten to prevent splitting in locked region\n    populateCellMenu() {}\n\n    populateScheduleMenu({ items, date, record }) {\n        const\n            me            = this,\n            { isSplit }   = me,\n            { splitFrom } = me.client;\n\n        // Splitting not supported in vertical mode\n        if (!me.disabled && me.client.isHorizontal) {\n            items.splitSchedule = {\n                text        : 'L{split}',\n                localeClass : me,\n                icon        : 'b-icon b-icon-split-vertical',\n                weight      : 500,\n                separator   : true,\n                hidden      : isSplit || splitFrom,\n\n                menu : {\n                    splitHorizontally : {\n                        text        : 'L{horizontally}',\n                        icon        : 'b-icon b-icon-split-horizontal',\n                        localeClass : me,\n                        weight      : 100,\n                        onItem() {\n                            me.split({ atRecord : record, direction : 'horizontal' }).then();\n                        }\n                    },\n                    splitVertically : {\n                        text        : 'L{vertically}',\n                        icon        : 'b-icon b-icon-split-vertical',\n                        localeClass : me,\n                        weight      : 200,\n                        onItem() {\n                            me.split({ atDate : date }).then();\n                        }\n                    },\n                    splitBoth : {\n                        text        : 'L{both}',\n                        icon        : 'b-icon b-icon-split-both',\n                        localeClass : me,\n                        weight      : 300,\n                        onItem() {\n                            me.split({ atDate : date, atRecord : record, direction : 'both' }).then();\n                        }\n                    }\n                }\n            };\n\n            items.unsplitSchedule = {\n                text        : 'L{unsplit}',\n                localeClass : me,\n                icon        : 'b-icon b-icon-clear',\n                hidden      : !(isSplit || splitFrom),\n                weight      : 550,\n                onItem() {\n                    (splitFrom || me).unsplit();\n                }\n            };\n        }\n    }\n\n    //endregion\n}\n\nGridFeatureManager.registerFeature(Split, false, 'Scheduler');\n","import TimelineSummary from './TimelineSummary.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport ObjectHelper from '../../Core/helper/ObjectHelper.js';\n\n/**\n * @module Scheduler/feature/Summary\n */\n\n/**\n * Defines a summary, used by the Summary and GroupSummary features.\n * @typedef SchedulerSummaryOptions\n * @property {String} label Label for the summary\n * @property {Function} renderer Function to calculate and render the summary value\n * @property {Date} renderer.startDate\n * @property {Date} renderer.endDate\n * @property {Scheduler.data.EventStore} renderer.eventStore\n * @property {Scheduler.data.ResourceStore} renderer.resourceStore\n * @property {Scheduler.model.EventModel[]} events\n * @property {Scheduler.model.ResourceModel[]} resources\n * @property {Core.data.Model} groupRecord\n * @property {String} groupField\n * @property {Object} groupValue\n */\n\n// noinspection JSClosureCompilerSyntax\n/**\n * A special version of the Grid Summary feature. This feature displays a summary row in the grid footer.\n * For regular columns in the locked section - specify type of summary on columns, available types are:\n * <dl class=\"wide\">\n * <dt>sum <dd>Sum of all values in the column\n * <dt>add <dd>Alias for sum\n * <dt>count <dd>Number of rows\n * <dt>countNotEmpty <dd>Number of rows containing a value\n * <dt>average <dd>Average of all values in the column\n * <dt>function <dd>A custom function, used with store.reduce. Should take arguments (sum, record)\n * </dl>\n * Columns can also specify a summaryRender to format the calculated sum.\n *\n * To summarize events, either provide a {@link #config-renderer} or use {@link #config-summaries}\n *\n * This feature is <strong>disabled</strong> by default.\n *\n * @extends Scheduler/feature/TimelineSummary\n * @classtype summary\n * @feature\n * @inlineexample Scheduler/feature/Summary.js\n * @demo Scheduler/summary\n *\n * @typings Grid.feature.Summary -> Grid.feature.GridSummary\n */\nexport default class Summary extends TimelineSummary {\n    //region Config\n\n    static get $name() {\n        return 'Summary';\n    }\n\n    static get configurable() {\n        return {\n            /**\n             * Array of summary configs which consists of a label and a {@link #config-renderer} function\n             *\n             * ```javascript\n             * new Scheduler({\n             *     features : {\n             *         summary : {\n             *             summaries : [\n             *                 {\n             *                     label : 'Label',\n             *                     renderer : ({ startDate, endDate, eventStore, resourceStore, events, element }) => {\n             *                         // return display value\n             *                         returns '<div>Renderer output</div>';\n             *                     }\n             *                 }\n             *             ]\n             *         }\n             *     }\n             * });\n             * ```\n             *\n             * @config {SchedulerSummaryOptions[]}\n             */\n            summaries : null,\n\n            /**\n             * Renderer function for a single time axis tick. Should calculate a sum and return HTML as a result.\n             *\n             * ```javascript\n             * new Scheduler({\n             *     features : {\n             *         summary : {\n             *             renderer : ({ startDate, endDate, eventStore, resourceStore, events, element }) => {\n             *                 // return display value\n             *                 returns '<div>Renderer output</div>';\n             *             }\n             *         }\n             *     }\n             * });\n             * ```\n             *\n             * @param {Date} startDate Tick start date\n             * @param {Date} endDate Tick end date\n             * @param {Scheduler.model.EventModel[]} events Events which belong to the group\n             * @param {Scheduler.data.EventStore} eventStore Event store\n             * @param {Scheduler.data.ResourceStore} resourceStore Resource store\n             * @param {HTMLElement} element Summary tick container\n             * @returns {String} Html content\n             * @config {Function}\n             */\n            renderer : null,\n\n            /**\n             * A config object for the {@link Grid.column.Column} used to contain the summary bar.\n             * @config {ColumnConfig}\n             */\n            verticalSummaryColumnConfig : null\n        };\n    }\n\n    // Plugin configuration. This plugin chains some of the functions in Grid.\n    static get pluginConfig() {\n        const config = super.pluginConfig;\n\n        config.chain.push('bindStore', 'updateEventStore', 'updateResourceStore');\n\n        return config;\n    }\n\n    //endregion\n\n    //region Init\n\n    construct(scheduler, config) {\n        const me = this;\n\n        me.scheduler = scheduler;\n\n        if (scheduler.isVertical) {\n            scheduler.timeAxisSubGrid.resizable = false;\n\n            config.hideFooters = true;\n\n            scheduler.add(scheduler.createSubGrid('right'));\n\n            me.summaryColumn = scheduler.columns.add(ObjectHelper.assign({\n                filterable              : null,\n                region                  : 'right',\n                cellCls                 : 'b-grid-footer b-sch-summarybar',\n                align                   : 'center',\n                sortable                : false,\n                editor                  : false,\n                groupable               : false,\n                htmlEncode              : false,\n                cellMenuItems           : false,\n                enableHeaderContextMenu : false,\n                hidden                  : me.disabled\n            }, me.verticalSummaryColumnConfig))[0];\n        }\n\n        super.construct(scheduler, config);\n\n        // Feature might be run from Grid (in docs), should not crash\n        // https://app.assembla.com/spaces/bryntum/tickets/6801/details\n        if (scheduler.isSchedulerBase) {\n            me.updateEventStore(scheduler.eventStore);\n            me.updateResourceStore(scheduler.resourceStore);\n        }\n    }\n\n    //endregion\n\n    //region Render\n\n    updateEventStore(eventStore) {\n        this.detachListeners('summaryEventStore');\n\n        eventStore.ion({\n            name    : 'summaryEventStore',\n            filter  : 'updateTimelineSummaries',\n            thisObj : this\n        });\n    }\n\n    updateResourceStore(resourceStore) {\n        this.detachListeners('summaryResourceStore');\n\n        resourceStore.ion({\n            name    : 'summaryResourceStore',\n            filter  : 'updateTimelineSummaries',\n            thisObj : this\n        });\n    }\n\n    /**\n     * Updates summaries.\n     * @private\n     */\n    updateTimelineSummaries() {\n        const\n            me                       = this,\n            { client : timeline }    = me,\n            { eventStore, timeAxis } = timeline,\n            summaryContainer         = me.summaryBarElement,\n            forResources             = (me.selectedOnly && timeline.selectedRecords.length)\n                ? timeline.selectedRecords : timeline.resourceStore.records;\n\n        if (summaryContainer && timeline.isEngineReady) {\n            // group events by ticks info once here to avoid performance lags\n            // should be inside `scheduler.isEngineReady` check to make sure all events were calculated\n            // https://github.com/bryntum/support/issues/2977\n            const eventsByTick = timeline.getResourcesEventsPerTick(forResources, ({ event }) => {\n                return !eventStore.isFiltered || eventStore.records.includes(event);\n            });\n\n            Array.from(summaryContainer.children).forEach((element, i) => {\n                const\n                    tick   = timeAxis.getAt(i),\n                    events = eventsByTick[i] || [];\n\n                let html    = '',\n                    tipHtml = `<header>${me.L('L{Summary for}', timeline.getFormattedDate(tick.startDate))}</header>`;\n\n                me.summaries.forEach(config => {\n                    const value     = config.renderer({\n                            startDate     : tick.startDate,\n                            endDate       : tick.endDate,\n                            resourceStore : timeline.resourceStore,\n                            eventStore,\n                            events,\n                            element\n                        }),\n                        valueHtml = value ? `<div class=\"b-timeaxis-summary-value\">${value}</div>` : '';\n\n                    if (me.summaries.length > 1 || value) {\n                        html += valueHtml;\n                    }\n\n                    tipHtml += valueHtml ? (`<label>${config.label || ''}</label>` + valueHtml) : '';\n                });\n\n                element.innerHTML = html;\n                // Only show tooltips for summary cells with content\n                element._tipHtml  = html ? tipHtml : '';\n            });\n        }\n    }\n}\n\n// Override Grids Summary with this improved version\nGridFeatureManager.registerFeature(Summary, false, 'Scheduler');\n","import AbstractTimeRanges from './AbstractTimeRanges.js';\nimport GridFeatureManager from '../../Grid/feature/GridFeatureManager.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\n\n/**\n * @module Scheduler/feature/TimeSelection\n */\n\n/**\n * Feature that allows selection of a time span in the time axis header. When a time span is selected in the header,\n * a {@link #event-timeSelectionChange} event is fired.\n *\n * {@inlineexample Scheduler/feature/TimeSelection.js}\n *\n * ## Configuration\n *\n * You can configure the content of the header element using the {@link #config-headerRenderer} function.\n *\n * <div class=\"note\">Not compatible with the {@link Scheduler/feature/HeaderZoom} feature.</div>\n *\n * @extends Scheduler/feature/AbstractTimeRanges\n * @demo Scheduler/time-selection\n * @classtype timeSelection\n * @feature\n */\nexport default class TimeSelection extends AbstractTimeRanges {\n    //region Default config\n\n    static $name = 'TimeSelection';\n\n    /** @hideconfigs enableResizing, showTooltip, dragTipTemplate, cls, showHeaderElements, tooltipTemplate */\n    /** @hideproperties showHeaderElements, timeRanges */\n    /** @hidefunctions getTipHtml, shouldRenderRange */\n\n    static get configurable() {\n        return {\n            enableResizing   : true,\n            showTooltip      : false,\n            dragTipTemplate  : null,\n            cls              : 'b-selected-time-span',\n            dragHelperConfig : {\n                // Data will be updated on drag, no need for DragHelper to touch the element\n                skipUpdatingElement : true\n            },\n            resizeHelperConfig : {\n                // Data will be updated on resize, no need for ResizeHelper to touch the element\n                skipUpdatingElement : true\n            },\n\n            /**\n             * Function used to generate the HTML content for the selected time span's header element.\n             *\n             * If you want to include an icon or similar to clear the selection on click, make sure to set\n             * `date-ref=\"closeButton\"` on it.\n             *\n             * ```javascript\n             * const scheduler = new Scheduler({\n             *   features : {\n             *     timeSelection : {\n             *       headerRenderer({ timeRange }) {\n             *         return `\n             *           ${DateHelper.format(timeRange.startDate, 'LL')}\n             *           <div class=\"close\" data-ref=\"closeButton></div>\n             *         `;\n             *       }\n             *     }\n             *   }\n             * });\n             * ```\n             * @config {Function} headerRenderer\n             * @param {Object} data Render data\n             * @param {Object} data.timeRange\n             * @param {Date} data.timeRange.startDate\n             * @param {Date} data.timeRange.endDate\n             * @returns {String}\n             * @category Common\n             */\n            headerRenderer({ timeRange }) {\n                const { dateFormat } = this.client.timeAxisViewModel.bottomHeader;\n\n                return `<span class=\"b-selection-start\">${DateHelper.format(timeRange.startDate, dateFormat)}</span>\n                        <span class=\"b-selection-end\">${DateHelper.format(timeRange.endDate, dateFormat)}</span>\n                        <i class='b-icon b-icon-close' data-ref=\"closeButton\" data-btip=\"L{Popup.close}\"></i>`;\n            },\n\n            /**\n             * The selected time span, which can be set using simple `startDate` and `endDate` properties\n             * @prp {Object} selectedTimeSpan\n             * @param {Date} selectedTimeSpan.startDate The start date of the selected time span\n             * @param {Date} selectedTimeSpan.endDate The end date of the selected time span\n             */\n            selectedTimeSpan : null\n        };\n    }\n\n    //endregion\n\n    //region Init & destroy\n\n    onUIReady() {\n        super.onUIReady();\n\n        this.client.ion({\n            timeAxisHeaderMouseDown : 'onTimeAxisHeaderMouseDown',\n            thisObj                 : this\n        });\n    }\n\n    onTimeAxisHeaderMouseDown({ startDate, endDate }) {\n        if (!this.disabled) {\n            this.selectedTimeSpan = {\n                startDate,\n                endDate\n            };\n        }\n    }\n\n    onTimeRangeClick(event) {\n        super.onTimeRangeClick(event);\n\n        const me = this;\n\n        if (!me.disabled && event.target.closest('.b-selected-time-span')) {\n            if (event.target.matches('[data-ref=\"closeButton\"]')) {\n                me.selectedTimeSpan = null;\n            }\n            else {\n                /**\n                 * Triggered when clicking the time selection header element\n                 * @event timeSelectionElementClick\n                 * @on-owner\n                 * @param {Scheduler.view.Scheduler} source The scheduler\n                 * @param {Date} startDate The selected range start date\n                 * @param {Date} endDate The selected range end date\n                 * @param {Event} domEvent The raw DOM event\n                 */\n                me.client.trigger('timeSelectionElementClick', {\n                    ...me.selectedTimeSpan,\n                    domEvent : event\n                });\n            }\n        }\n    }\n\n    updateFromCoords(x, y, width, height) {\n        const\n            { client } = this,\n            size       = client.isHorizontal ? width : height;\n\n        let start = client.isHorizontal ? x : y;\n\n        if (client.rtl && client.isHorizontal) {\n            start = Math.max(client.timeAxisViewModel.totalSize - start - size, 0);\n        }\n\n        const\n            startDate = client.getDateFromCoord({ coord : start, roundingMethod : 'round', ignoreRTL : true }),\n            endDate   = client.getDateFromCoord({ coord : start + size, roundingMethod : 'round', ignoreRTL : true });\n\n        this.selectedTimeSpan = {\n            startDate : DateHelper.max(startDate, client.startDate),\n            endDate   : DateHelper.min(endDate, client.endDate)\n        };\n    }\n\n    onResizeStart({ source }) {\n        const\n            {\n                timeAxisViewModel,\n                timeResolution\n            }                    = this.client,\n            resolutionDurationMS = DateHelper.asMilliseconds(timeResolution.increment, timeResolution.unit);\n\n        // Prevent resizing smaller than one resolution increment\n        this.resize.minWidth = timeAxisViewModel.getDistanceForDuration(resolutionDurationMS);\n    }\n\n    onResizeDrag({ context }) {\n        this.updateFromCoords(\n            context.newX,\n            context.newY,\n            context.newWidth ?? context.elementWidth,\n            context.newHeight ?? context.elementHeight\n        );\n    }\n\n    onDragStart(event) {\n        super.onDragStart(event);\n\n        const { context } = event;\n\n        context.elementWidth = context.element.offsetWidth;\n        context.elementHeight = context.element.offsetHeight;\n    }\n\n    onDrag({ context }) {\n        this.updateFromCoords(\n            context.newX,\n            context.newY,\n            context.elementWidth,\n            context.elementHeight\n        );\n    }\n\n    onDrop() {\n        this.client.element.classList.remove('b-dragging-timerange');\n    }\n\n    onDragReset() {\n        this.refresh();\n    }\n\n    get timeRanges() {\n        return this.selectedTimeSpan ? [this.selectedTimeSpan] : [];\n    }\n\n    // Always render the selection\n    shouldRenderRange() {\n        return true;\n    }\n\n    changeSelectedTimeSpan(timeSpan) {\n        if (timeSpan) {\n            timeSpan.id = 'time-selection';\n        }\n\n        return timeSpan;\n    }\n\n    updateSelectedTimeSpan(timeSpan) {\n        if (!this.isConfiguring) {\n            this.refresh();\n        }\n\n        /**\n         * Triggered when time selection changes\n         * @event timeSelectionChange\n         * @on-owner\n         * @param {Scheduler.view.Scheduler} source The scheduler\n         * @param {Date} startDate The selected range start date, or `undefined`\n         * @param {Date} endDate The selected range end date, or `undefined`\n         */\n        this.client.trigger('timeSelectionChange', {\n            ...timeSpan ?? {}\n        });\n    }\n}\n\nGridFeatureManager.registerFeature(TimeSelection, false, 'Scheduler');\n","import Localizable from '../../Core/localization/Localizable.js';\nimport GridTableExporter from '../../Grid/util/TableExporter.js';\nimport SchedulerBase from '../view/SchedulerBase.js';\n\n/**\n * @module Scheduler/util/ScheduleTableExporter\n */\n\n/**\n * This class transforms scheduler component into two arrays: rows and columns. Columns array contains objects with\n * meta information about column: field name, column name, width and type of the rendered value, rows array contains\n * arrays of cell values.\n *\n * ```javascript\n * const exporter = new ScheduleTableExporter({ target : scheduler });\n * exporter.export()\n *\n * // Output\n * {\n *     columns : [\n *         { field : 'name',      value : 'First name', type : 'string',  width : 100 },\n *         { field : 'name',      value : 'Task',       type : 'string',  width : 100, eventColumn : true },\n *         { field : 'startDate', value : 'Starts',     type : 'date',    width : 100, eventColumn : true },\n *         { field : 'endDate',   value : 'Ends',       type : 'date',    width : 100, eventColumn : true }\n *     ],\n *     rows : [\n *         ['Michael', 'Hand out dundies',      Date, Date],\n *         ['Michael', 'Buy condo',             Date, Date],\n *         ['Jim',     'Close sale to library', Date, Date]\n *     ]\n * }\n * ```\n *\n * ## How data is exported\n *\n * Data is exported as in the base class with minor addition: every event is exported on a separate row, like\n * demonstrated above.\n *\n * In case there are unassigned events, by default they will be exported as well\n *\n * ```javascript\n * // output\n * {\n *     rows : [\n *         ['Michael', 'Hand out dundies',      Date, Date],\n *         ['Michael', 'Buy condo',             Date, Date],\n *         ['Jim',     'Close sale to library', Date, Date],\n *         ['',        'No resource assigned'],\n *         ['',        'Halloween prep',        Date, Date],\n *         ['',        'New year prep',         Date, Date]\n *     ]\n * }\n * ```\n *\n * @extends Grid/util/TableExporter\n * @mixes Core/localization/Localizable\n */\nexport default class ScheduleTableExporter extends Localizable(GridTableExporter) {\n    static get defaultConfig() {\n        return {\n            /**\n             * Set to `false` to not include unassigned events in the export. `true` by default.\n             * @config {Boolean} includeUnassigned\n             * @default\n             */\n            includeUnassigned : true,\n\n            /**\n             * An array of Event columns configuration used to specify columns width, headers name, and column fields to\n             * get the data from.\n             * 'field' config is required. If 'text' is missing, the 'field' config will be used instead.\n             *\n             * For example:\n             * ```javascript\n             * eventColumns    : [\n             *     { text : 'Task', field : 'name' },\n             *     { text : 'Starts', field : 'startDate', width : 140 },\n             *     { text : 'Ends', field : 'endDate', width : 140 }\n             * ]\n             * ```\n             *\n             * @config {String[]|Object[]} eventColumns\n             * @default\n             */\n            eventColumns : [\n                { text : 'Task', field : 'name' },\n                { text : 'Starts', field : 'startDate', width : 140 },\n                { text : 'Ends', field : 'endDate', width : 140 }\n            ],\n\n            /**\n             * Function to sort events for each resource. By default events are sorted in the order of appending to the\n             * store.\n             * For example:\n             * ```javascript\n             * // Sorting by start date\n             * eventSortFn : (a, b) => a.startDate - b.startDate\n             * ```\n             * @config {Function}\n             * @internal\n             */\n            eventSortFn : null\n        };\n    }\n\n    construct(config = {}, ...args) {\n        super.construct(config, ...args);\n\n        if (!this.eventSortFn) {\n            this.eventSortFn = (a, b) => a.internalId - b.internalId;\n        }\n    }\n\n    normalizeColumns(config) {\n        super.normalizeColumns(config);\n\n        config.eventColumns = config.eventColumns.map(col => {\n            if (typeof col === 'string') {\n                return { field : col };\n            }\n            else {\n                return col;\n            }\n        });\n    }\n\n    generateExportData(config) {\n        const\n            me                 = this,\n            isScheduler        = this.target instanceof SchedulerBase,\n            resourceColumns    = me.generateColumns(config),\n            eventColumns       = isScheduler ? me.generateEventColumns(config) : [],\n            columns            = resourceColumns.concat(eventColumns),\n            rows               = me.generateRows(config);\n\n        return { columns, rows };\n    }\n\n    generateEventColumns(config) {\n        return config.eventColumns.map(column => this.processEventColumn(column, config));\n    }\n\n    processEventColumn(column, config) {\n        //<debug>\n        if (!column.field) {\n            // Without field on scheduler column we have nothing to export\n            console.warn('ExcelExporter: \"field\" config is required for event columns');\n        }\n        //</debug>\n\n        const\n            { width, minWidth }    = column,\n            { defaultColumnWidth } = config;\n\n        return {\n            field       : column.field,\n            value       : column.text,\n            width       : Math.max(width || defaultColumnWidth, minWidth || defaultColumnWidth),\n            eventColumn : true,\n            type        : this.getColumnType(column, this.target.eventStore)\n        };\n    }\n\n    generateRows(config) {\n        const\n            me         = this,\n            { target } = me;\n\n        let result;\n\n        if (!(target instanceof SchedulerBase)) {\n            result = super.generateRows(config);\n        }\n        else {\n            result = [];\n\n            // forEach skips group records, summary records etc\n            target.resourceStore.map(resourceRecord => {\n                // Get all events for resource (including assignment store)\n                const events = resourceRecord.events || [];\n\n                // Events order is not guaranteed, sort by internalId, that is guaranteed to grow with every new record\n                events.sort(me.eventSortFn);\n\n                // Set dummy event to have resource info printed without events\n                if (!events.length) {\n                    events.push('');\n                }\n\n                events.forEach(eventRecord => result.push(me.getRowData(config, resourceRecord, eventRecord)));\n            });\n\n            if (config.includeUnassigned && config.eventColumns.length) {\n                const notAssignedEvents = target.eventStore.query(eventRecord => !eventRecord.resources.length);\n\n                if (notAssignedEvents.length) {\n                    // Use offset to match first event column\n                    const cells = new Array(config.columns.length).fill('');\n\n                    cells.push(me.L('L{ExcelExporter.No resource assigned}'));\n\n                    result.push(cells);\n\n                    // Set dummy resource to have event info printed without resource\n                    notAssignedEvents.forEach(eventRecord => result.push(me.getRowData(config, null, eventRecord)));\n                }\n            }\n\n            // filter out empty rows\n            result = result.filter(cells => cells.length);\n        }\n\n        return result;\n    }\n\n    getRowData(config, resource, event) {\n        const\n            {\n                columns,\n                eventColumns\n            }             = config,\n            cells         = [],\n            resourceCells = this.processRecord(resource, columns, config);\n\n        // No cells from group footers (or from group headers if configured to not show them)\n        resourceCells && cells.push(...resourceCells);\n\n        if (!resource || !resource.isSpecialRow) {\n            const eventCells = this.processRecord(event, eventColumns, config);\n            // No cells from group footers (or from group headers if configured to not show them)\n            eventCells && cells.push(...eventCells);\n        }\n\n        return cells;\n    }\n}\n","/*eslint no-undef: \"error\"*/\nimport GridFeatureManager from '../../../Grid/feature/GridFeatureManager.js';\nimport GridExcelExporter from '../../../Grid/feature/experimental/ExcelExporter.js';\nimport ScheduleTableExporter from '../../util/ScheduleTableExporter.js';\n\n/**\n * @module Scheduler/feature/experimental/ExcelExporter\n */\n\n/**\n * **NOTE**: This class requires a 3rd party library to operate.\n *\n * A plugin that allows exporting Scheduler data to Excel without involving the server. It uses {@link Scheduler.util.ScheduleTableExporter}\n * class as data provider, [zipcelx library](https://www.npmjs.com/package/zipcelx)\n * forked and adjusted to support [column width config](https://github.com/bryntum/zipcelx/tree/column-width-build)\n * and [Microsoft XML specification](https://msdn.microsoft.com/en-us/library/office/documentformat.openxml.spreadsheet.aspx).\n * Zipcelx should be either in global scope (window) or can be provided with {@link #config-zipcelx} config.\n *\n * ```html\n * // Global scope\n * <script src=\"zipcelx.js\"></script>\n * ```\n *\n * ```javascript\n * // importing from package\n * import zipcelx from 'zipcelx';\n *\n * const grid = new Grid({\n *     features : {\n *         excelExporter : {\n *             zipcelx\n *         }\n *     }\n * })\n * ```\n *\n * Here is an example of how to add the feature:\n *\n * ```javascript\n * const scheduler = new Scheduler({\n *     features : {\n *         excelExporter : {\n *             // Choose the date format for date fields\n *             dateFormat : 'YYYY-MM-DD HH:mm',\n *             exporterConfig : {\n *                 // Choose the Resource fields to include in the exported file\n *                 columns : [{ text : 'Staff', field : 'name' }],\n *\n *                 // Choose the Event fields to include in the exported file\n *                 eventColumns    : [\n *                     { text : 'Task', field : 'name' },\n *                     { text : 'Starts', field : 'startDate', width : 140 },\n *                     { text : 'Ends', field : 'endDate', width : 140 }\n *                 ]\n *             }\n *         }\n *     }\n * });\n * ```\n *\n * And how to call it:\n *\n * ```javascript\n * scheduler.features.excelExporter.export({\n *     filename : 'Export',\n *     exporterConfig : {\n *         columns : [{ text : 'Staff', field : 'name' }]\n *     }\n * })\n * ```\n *\n * @extends Grid/feature/experimental/ExcelExporter\n * @classtype excelExporter\n * @feature\n * @demo Scheduler/exporttoexcel\n *\n * @typings Grid.feature.experimental.ExcelExporter -> Grid.feature.experimental.GridExcelExporter\n */\nexport default class ExcelExporter extends GridExcelExporter {\n    static get $name() {\n        return 'ExcelExporter';\n    }\n\n    static get defaultConfig() {\n        return {\n            /**\n             * Exporter class. Must subclass {@link Scheduler.util.ScheduleTableExporter}\n             * @config {Scheduler.util.ScheduleTableExporter}\n             * @typings {typeof ScheduleTableExporter}\n             * @default\n             */\n            exporterClass : ScheduleTableExporter,\n\n            /**\n             * Configuration object for {@link #config-exporterClass exporter class}.\n             * @config {Object}\n             */\n            exporterConfig : null\n        };\n    }\n}\n\nGridFeatureManager.registerFeature(ExcelExporter, false, 'Scheduler');\n","import SchedulerBase from './SchedulerBase.js';\n\nimport '../localization/En.js';\n\n// default features\nimport '../feature/ColumnLines.js';\nimport '../feature/EventCopyPaste.js';\nimport '../feature/EventDrag.js';\nimport '../feature/EventDragCreate.js';\nimport '../feature/EventEdit.js';\nimport '../feature/EventFilter.js';\nimport '../feature/EventMenu.js';\nimport '../feature/EventResize.js';\nimport '../feature/EventTooltip.js';\nimport '../feature/ScheduleContext.js';\nimport '../feature/ScheduleMenu.js';\nimport '../feature/ScheduleTooltip.js';\nimport '../feature/StickyEvents.js';\nimport '../feature/TimeAxisHeaderMenu.js';\n\n// Since Scheduler is based on SchedulerBase + GridBase, Grids default features needs to be pulled in here also\nimport '../../Grid/feature/CellEdit.js';\nimport '../../Grid/feature/CellMenu.js';\nimport '../../Grid/feature/ColumnDragToolbar.js';\nimport '../../Grid/feature/ColumnPicker.js';\nimport '../../Grid/feature/ColumnReorder.js';\nimport '../../Grid/feature/ColumnResize.js';\nimport '../../Grid/feature/Filter.js';\nimport '../../Grid/feature/FilterBar.js';\nimport '../../Grid/feature/Group.js';\nimport '../../Grid/feature/HeaderMenu.js';\nimport '../../Grid/feature/Sort.js';\nimport '../../Grid/feature/Stripe.js';\nimport '../../Grid/column/CheckColumn.js'; // For checkbox selection mode\n\n/**\n * @module Scheduler/view/Scheduler\n */\n\n/**\n * The Scheduler widget is a very powerful and performant UI component that displays an arbitrary number of \"locked\"\n * columns with a schedule occupying the remaining space. The schedule has a time axis at the top, one row per resource\n * and any number of events per resource.\n *\n * ## Intro\n * The Scheduler widget has a wide range of features and a large API to allow users to work with it efficiently in the\n * browser.\n *\n * The timeaxis displayed at the top of the Scheduler is configured using a {@link #config-startDate},\n * {@link #config-endDate} and a {@link #config-viewPreset}. The dates determine the outer limits of the range shown in\n * the timeaxis while the {@link Scheduler.preset.ViewPreset} decides the appearance and which dates are actually shown.\n * The Scheduler ships with a selection of predefined view presets, which can be found in\n * {@link Scheduler.preset.PresetManager}. If you want to specify view presets for a specific scheduler only, please see\n * {@link #config-presets} config.\n *\n * <div class=\"note\">Note that if you want to use infinite scroll along the time axis, configure\n * {@link #config-infiniteScroll} and {@link #config-visibleDate} instead of <code>startDate</code> and\n * <code>endDate</code></div>\n *\n * The Scheduler uses a {@link Scheduler.data.ResourceStore} to hold resources and an {@link Scheduler.data.EventStore}\n * to hold events. You can use inline data or load data using ajax, see the \"Working with data\" guides for more\n * information.\n *\n * The simplest schedule configured with inline data would look like this:\n *\n *      let scheduler = new Scheduler({\n *          appendTo : document.body,\n *\n *          startDate  : new Date(2018,4,6),\n *          endDate    : new Date(2018,4,12),\n *          viewPreset : 'dayAndWeek',\n *\n *           columns : [\n *              { field : 'name', text : 'Name', width: 100 }\n *          ],\n *\n *          resources : [\n *              { id : 1, name : 'Bernard' },\n *              { id : 2, name : 'Bianca' }\n *          ],\n *\n *          events : [\n *              { id : 1, resourceId : 1, name : 'Interview', startDate : '2018-05-06', endDate : '2018-05-07' },\n *              { id : 2, resourceId : 1, name : 'Press conference', startDate : '2018-05-08', endDate : '2018-05-09' },\n *              { id : 3, resourceId : 2, name : 'Audition', startDate : '2018-05-06', endDate : '2018-05-08' },\n *              { id : 4, resourceId : 2, name : 'Script deadline', startDate : '2018-05-11', endDate : '2018-05-11' }\n *          ]\n *      });\n *\n * {@inlineexample Scheduler/view/Simplest.js}\n * ## Inheriting from Bryntum Grid\n * Bryntum Scheduler inherits from Bryntum Grid, meaning that most features available in the grid are also available\n * for the scheduler. Common features include columns, cell editing, context menus, row grouping, sorting and more.\n * Note: If you want to use the Grid component standalone, e.g. to use drag-from-grid functionality, you need a separate\n * license for the Grid component.\n *\n * For more information on configuring columns, filtering, search etc. please see the {@link Grid.view.Grid Grid API docs}.\n * {@region Loading data}\n * As mentioned above Bryntum Scheduler uses an {@link Scheduler.data.EventStore} and a {@link Scheduler.data.ResourceStore}\n * to hold its data. Data is expected to be in JSON format and can be assigned inline (from memory) using the\n * {@link #config-events} and {@link #config-resources} shortcuts:\n *\n * ```javascript\n * let scheduler = new Scheduler({\n *    events : myArrayOfEventData,\n *    resources : myArrayOfResourceData\n * });\n * ```\n *\n * If you need to give additional store configuration, you can also specify store configs or instances:\n *\n * ```javascript\n * let resourceStore = new ResourceStore({\n *   // ResourceStore config object\n * })\n *\n * let scheduler = new Scheduler({\n *    // EventStore config object\n *    eventStore : {\n *       ...\n *    },\n *\n *    // Already existing ResourceStore instance\n *    resourceStore\n * });\n * ```\n *\n * To use Ajax to fetch data from a server, specify {@link Core.data.AjaxStore#config-readUrl}:\n *\n * ```javascript\n * let scheduler = new Scheduler({\n *    eventStore : {\n *        readUrl  : 'backend/read_events.php',\n *        autoLoad : true\n *    }\n * });\n * // If you do not specify autoLoad, trigger loading manually:\n * scheduler.eventStore.load();\n * ```\n *\n * For more information, see the \"Working with data\" guides.\n * {@endregion}\n * {@region Event styling}\n * Bryntum Schedulers appearance can be affected in a few different ways:\n *\n * * Switching themes\n * * Choosing event styles and colors\n * * Using renderer functions\n *\n * ### Switching themes\n *\n * Scheduler ships with five different themes, simply include the css file for the theme you would like to use on your\n * page. The themes are located in the `/build` folder. For example to include the material theme:\n *\n * ```html\n * <link rel=\"stylesheet\" href=\"build/scheduler.material.css\" data-bryntum-theme>\n * ```\n *\n * Included themes are (from left to right) classic-light, classic, classic-dark, stockholm and material:\n *\n * <img src=\"Scheduler/basic/thumb.classic-light.png\" alt=\"Classic-Light theme\" width=\"300\" style=\"margin-right: .5rem\">\n * <img src=\"Scheduler/basic/thumb.classic.png\" alt=\"Classic theme\" width=\"300\" style=\"margin-right: .5rem\">\n * <img src=\"Scheduler/basic/thumb.classic-dark.png\" alt=\"Classic-Dark theme\" width=\"300\" style=\"margin-right: .5rem\">\n * <img src=\"Scheduler/basic/thumb.stockholm.png\" alt=\"Stockholm theme\" width=\"300\" style=\"margin-right: .5rem\">\n * <img src=\"Scheduler/basic/thumb.material.png\" alt=\"Material theme\" width=\"300\">\n *\n * ### Choosing event styles and colors\n * The style and color of each event can be changed by assigning to the `eventStyle` and `eventColor` configs. These\n * configs are available at 3 different levels:\n *\n * * Scheduler level, affects all events (see {@link Scheduler.view.mixin.TimelineEventRendering#config-eventStyle} and\n *   {@link Scheduler.view.mixin.TimelineEventRendering#config-eventColor}).\n * * Resource level, affects all events assigned to that resource (see {@link Scheduler.model.mixin.ResourceModelMixin#field-eventStyle}\n *   and {@link Scheduler.model.mixin.ResourceModelMixin#field-eventColor}).\n * * Event level, affects that event (see {@link Scheduler/model/mixin/EventModelMixin#field-eventStyle} and\n *   {@link Scheduler/model/mixin/EventModelMixin#field-eventColor}).\n *\n * {@inlineexample Scheduler/view/Styles.js}\n *\n * For available styles, see {@link Scheduler.view.mixin/TimelineEventRendering#config-eventStyle}. For colors,\n * {@link Scheduler.view.mixin/TimelineEventRendering#config-eventColor}. Also take a look at the\n * <a href=\"../examples/eventstyles/\" target=\"_blank\">eventstyles demo</a>.\n *\n * ### Sorting overlapping events\n *\n * The order of overlapping events rendered in a horizontal scheduler can be customized by overriding\n * {@link Scheduler.view.mixin.SchedulerEventRendering#config-horizontalEventSorterFn} function on the scheduler.\n * For example:\n *\n * ```javascript\n * let scheduler = new Scheduler({\n *     horizontalEventSorterFn(a, b) {\n *         return b.startDate.getTime() - a.startDate.getTime();\n *     },\n *     ...\n * });\n * ```\n *\n * {@inlineexample Scheduler/view/SortingOverlappingEvents.js}\n *\n * ### Using render functions\n * Render function can be used to manipulate the rendering of rows (resources) and events. For information on row\n * renderers, see {@link Grid.column.Column#config-renderer}.\n *\n * Event rendering can be manipulated by specifying an {@link Scheduler.view.mixin/SchedulerEventRendering#config-eventRenderer} function. The function is called\n * for each event before it is rendered to DOM. By using its arguments you can add CSS classes, modify styling and\n * determine the contents of the event:\n *\n * ```javascript\n * let scheduler = new Scheduler({\n *\n *   events    : [...],\n *   resources : [...],\n *\n *   ...,\n *\n *   eventRenderer({resourceRecord, eventRecord, renderData}) {\n *      // add css class to the event\n *      renderData.cls.add('my-css-class');\n *\n *      // use an icon\n *      renderData.iconCls = 'b-fa b-fa-some-nice-icon';\n *\n *      // return value is used as events text\n *      return `${resourceRecord.name}: ${eventRecord.name}`;\n *   }\n * });\n * ```\n *\n * {@endregion}\n * {@region Event manipulation}\n * You can programmatically manipulate the events using data operations, see the \"Working with data\" guides for more\n * information. Events are reactive, changes reflect on the UI automatically. A small example on manipulating events:\n *\n * ```javascript\n * // change startDate of first event\n * scheduler.eventStore.first.startDate = new Date(2018,5,10);\n *\n * // remove last event\n * scheduler.eventStore.last.remove();\n *\n * // reassign an event\n * scheduler.eventStore.getById(10).resourceId = 2;\n * ```\n *\n * You can also allow your users to manipulate the events using the following features:\n *\n * * {@link Scheduler.feature.EventDrag}, drag and drop events within the schedule\n * * {@link Scheduler.feature.EventDragCreate}, create new events by click-dragging an empty area\n * * {@link Scheduler.feature.EventEdit}, show an event editing form\n * * {@link Scheduler.feature.SimpleEventEdit}, edit the event name easily\n * * {@link Scheduler.feature.EventResize}, resize events by dragging resize handles\n *\n * All of the features mentioned above are enabled by default.\n * {@endregion}\n * {@region Default configs}\n * There is a myriad of configs and features available for Scheduler (browse the API docs to find them), some of them on\n * by default and some of them requiring extra configuration. The code below tries to illustrate the major things that\n * are used by default:\n *\n * ```javascript\n * let scheduler = new Scheduler({\n *    // The following features are enabled by default:\n *    features : {\n *        cellEdit            : true, // Cell editing in the columns part\n *        columnLines         : true, // Column lines in the schedule part\n *        columnPicker        : true, // Header context menu item to toggle visible columns\n *        columnReorder       : true, // Reorder columns in grid part using drag and drop\n *        columnResize        : true, // Resize columns in grid part using the mouse\n *        cellMenu            : true, // Context menu for cells in the grid part\n *        eventMenu           : true, // Context menu for events\n *        eventDrag           : true, // Dragging events\n *        eventDragCreate     : true, // Drag creating events\n *        eventEdit           : true, // Event editor dialog\n *        eventFilter         : true, // Filtering events using header context menu\n *        eventCopyPaste      : true, // Allow using [Ctrl/CMD + C/X] and [Ctrl/CMD + V] to copy/cut and paste events\n *        eventResize         : true, // Resizing events using the mouse\n *        eventTooltip        : true, // Tooltips for events\n *        group               : true, // Row grouping\n *        headerMenu          : true, // Context menu for headers in the grid part\n *        timeAxisHeaderMenu  : true, // Header context menu for schedule part\n *        scheduleMenu        : true, // Context menu for empty parts of the schedule\n *        scheduleTooltip     : true, // Tooltip for empty parts of the schedule\n *        sort                : true  // Row sorting\n *    },\n *\n *    // From Grid\n *    animateRemovingRows       : false, // Rows will not slide out on removal\n *    autoHeight                : false, // Grid needs to have a height supplied through CSS (strongly recommended) or by specifying `height\n *    columnLines               : true,  // Grid part, themes might override it to hide lines anyway\n *    emptyText                 : 'No rows to display',\n *    enableTextSelection       : false, // Not allowed to select text in cells by default,\n *    fillLastColumn            : true,  // By default the last column is stretched to fill the grid\n *    fullRowRefresh            : true,  // Refreshes entire row when a cell value changes\n *    loadMask                  : 'Loading...',\n *    resizeToFitIncludesHeader : true,  // Also measure header when auto resizing columns\n *    responsiveLevels : {\n *      small : 400,\n *      medium : 600,\n *      large : '*'\n *    },\n *    rowHeight                  : 60,    // Scheduler specifies a default rowHeight in pixels\n *    showDirty                  : false, // No indicator for changed cells\n *\n *    // Scheduler specific\n *    autoAdjustTimeAxis             : true,      // startDate & endDate will be adjusted to display a suitable range\n *    allowOverlap                   : true,      // Events are allowed to overlap (overlays, stacks or packs depending on eventLayout)\n *    barMargin                      : 10,        // Space above + below each event\n *    createEventOnDblClick          : true,      // Allow creating new events by double clicking empty space\n *    enableDeleteKey                : true,      // Allow deleting events with delete / backspace keys\n *    enableEventAnimations          : true,      // Animate event changes\n *    eventBarTextField              : 'name',    // Field on EventModel to display in events\n *    eventColor                     : 'green',   // Use green as default color for events\n *    eventLayout                    : 'stack',   // Stack overlapping events by default\n *    eventStyle                     : 'plain',   // Use plain as default style for events\n *    managedEventSizing             : true,      // Calculate event sizes based on rowHeight & barMargin\n *    milestoneCharWidth             : 10,\n *    milestoneLayoutMode            : 'default',\n *    useInitialAnimation            : true,      // Fade in events initially\n *    viewPreset                     : 'weekAndDayLetter',\n *    zoomOnMouseWheel               : true,\n *    zoomOnTimeAxisDoubleClick      : true\n * });\n * ```\n *\n * {@endregion}\n * {@region Keyboard shortcuts}\n * Scheduler does not currently provide any keyboard shortcuts on its own. However, the following Scheduler features has\n * their own keyboard shortcuts. Follow the links for details.\n * * {@link Scheduler.feature.EventCopyPaste#keyboard-shortcuts EventCopyPaste}\n *\n * As Scheduler is a subclass of Grid, many of Grid's {@link Grid.view.Grid#keyboard-shortcuts keyboard-shortcuts}\n * works for Scheduler as well.\n *\n * For more information on how to customize keyboard shortcuts, please see\n * [our guide](#Scheduler/guides/customization/keymap.md)\n * {@endregion}\n * {@region Performance}\n * To make scheduler performance as good as possible it only renders the events and resources that are within view (plus\n * an additional buffer). Since adding to and removing from DOM comes with a performance penalty the elements are\n * instead repositioned and reused as you scroll. A side effect of this is that you cannot do direct DOM element\n * manipulation in a reliable way, instead you should use row and event renderer functions to achieve what you want (see\n * the section on event styling above).\n *\n * To put the scheduler to the test, try our <a href=\"../examples/bigdataset/\" target=\"_blank\">bigdataset demo</a>.\n * {@endregion}\n *\n * {@region Recurring Events}\n * From 4.0.0, there is no `RecurringEvents` Feature. There is an\n * {@link Scheduler/view/mixin/RecurringEvents#config-enableRecurringEvents} boolean config on the Scheduler.\n * Occurrences of recurring events are provided on a \"just in time\" basis by a new EventStore API which must now be used\n * when interrogating an EventStore.\n *\n * {@link Scheduler/data/mixin/GetEventsMixin#function-getEvents} is a multipurpose event gathering method which can be\n * asked to return events which match a set of criteria including a date range and a resource. By default, if the\n * requested date range contains occurrences of a recurring event, those occurrences are returned in the result array.\n *\n * ```javascript\n * myEventStore.getEvents({\n *     resourceRecord : myResourceRecord,\n *     startDate      : myScheduler.startDate,\n *     endDate        : myScheduler.endDate\n * });\n * ```\n *\n * Occurrences are *not* present in the store's data collection.\n *\n * To directly access occurrences of a recurring event which *intersect* a date range, use:\n *\n * ```js\n * recurringEvent.getOccurrencesForDateRange(startDate, endDate);\n * ```\n *\n * The `endDate` argument is optional if the occurrence for one date is required. This method always\n * returns an array. Note that it may be empty if no occurrences intersect the date range.\n *\n * ### Convert an occurrence to an exception\n * To programmatically convert an occurrence to be a single exception to its owner's sequence use:\n *\n * ```javascript\n * myOccurrence.beginBatch();\n * myOccurrence.startDate = DateHelper.add(myOccurrence.startDate, 1, 'day');\n * myOccurrence.name = 'Postponed to next day';\n * myOccurrence.recurrence = null; // This means it does NOT become a new recurring base event.\n * myOccurrence.endBatch();\n * ```\n *\n * That will cause that event to be inserted into the store as a concrete event definition, firing\n * an `add` event as would be expected, and will add an `exceptionDates` to its owning recurring event.\n *\n * When syncing this change back to the server, the `exceptionDates` array for the modified\n * recurring event now contains the exception dates correctly serialized into string form using\n * the `dateFormat` of the field. The system-supplied default value for this is\n * `'YYYY-MM-DDTHH:mm:ssZ'`\n *\n * ### Convert an occurrence to a new recurring event sequence.\n * To programmatically convert an occurrence to be the start of a new recurring sequence, use:\n *\n * ```javascript\n * myOccurrence.beginBatch();\n * myOccurrence.startDate = DateHelper.set(myOccurrence.startDate, 'hour', 14);\n * myOccurrence.name = 'Moved to 2pm from here on';\n * myOccurrence.endBatch();\n * ```\n *\n * That will cause that event to be inserted into the store as a concrete *recurring* event\n * definition, firing an `add` event as would be expected, and will terminate the previous\n * recurring owner of that occurrence on the day before the new event.\n * {@endregion}\n *\n * @extends Scheduler/view/SchedulerBase\n * @classType scheduler\n * @widget\n */\nexport default class Scheduler extends SchedulerBase {\n    static get $name() {\n        return 'Scheduler';\n    }\n\n    // Factoryable type name\n    static get type() {\n        return 'scheduler';\n    }\n}\n\n// Register this widget type with its Factory\nScheduler.initClass();\n","import UndoRedoBase from '../../Core/widget/base/UndoRedoBase.js';\nimport '../../Core/widget/Combo.js';\n\n/**\n * @module Scheduler/widget/UndoRedo\n */\n\nconst isProjectConsumer = w => w.isProjectConsumer;\n\n/**\n * A widget which encapsulates undo/redo functionality for the {@link Scheduler.model.ProjectModel project}\n * of a scheduling widget (`Scheduler`, `Gantt` or `Calendar`).\n *\n * To make use of this, the project must be configured with a\n * {@link Scheduler.model.mixin.ProjectModelMixin#config-stm State Tracking Manager}.\n *\n * If inserted into a scheduling widget (such as into a `tbar`, or `bbar`, or as an item in a context menu),\n * the project of the encapsulating scheduling widget will be used.\n *\n * If this widget is to be used \"standalone\" (rendered into the DOM outside of a scheduling widget),\n * this must be configured with a reference to the project, or the scheduling widget which is\n * using the project.\n *\n * There are three child widgets encapsulated which may be referenced through the {@link Core.widget.Container#property-widgetMap}:\n *\n * - `undoBtn` - The button which operates the undo operation (CTRL+Z, or CMD+Z in Mac OS)\n * - `transactionsCombo` - A combobox into which is pushed the list of transactions,\n * - `redoBtn` - The button which operates the redo operation (CTRL+SHIFT+Z, + CMD+SHIFT+Z in Mac OS)\n *\n * To disable keyboard shortcuts for undo/redo, set {@link Scheduler.view.Scheduler#config-enableUndoRedoKeys} to false.\n *\n * The transactionsCombo may be configured away if only the buttons are required:\n *\n * ```javascript\n * {\n *     type      : 'undoredo',\n *     items     : {\n *         transactionsCombo : null\n *     }\n * }\n * ```\n *\n * The example below illustrated how to embed an `undoredo` widget in the top toolbar of a Scheduler.\n * @extends Core/widget/base/UndoRedoBase\n * @classType undoredo\n * @demo Scheduler/undoredo\n * @inlineexample Scheduler/widget/UndoRedo.js\n * @widget\n */\nexport default class UndoRedo extends UndoRedoBase {\n    static get $name() {\n        return 'UndoRedo';\n    }\n\n    static get type() {\n        return 'undoredo';\n    }\n\n    static get configurable() {\n        return {\n            /**\n             * The Scheduling Widget (or its `id`) whose transaction to track.\n             *\n             * This may be a `Scheduler`, a `Gantt` or a `Calendar`.\n             *\n             * ```javascript\n             *     {\n             *         type      : 'undoredo',\n             *         scheduler : myCalendar\n             *     }\n             * ```\n             * @config {Core.widget.Widget|String}\n             */\n            scheduler : null,\n\n            /**\n             * Get/set ProjectModel instance, containing the data visualized by the SchedulerPro.\n             * @member {Scheduler.model.ProjectModel} project\n             * @typings {ProjectModel}\n             * @category Data\n             */\n\n            /**\n             * The Scheduling {@link Scheduler.model.ProjectModel project}'s whose\n             * transaction to track.\n             *\n             * ```javascript\n             *     {\n             *         type    : 'undoredo',\n             *         project : scheduler.project\n             *     }\n             * ```\n             * @config {Scheduler.model.ProjectModel|ProjectModelConfig}\n             * @category Data\n             */\n            project : null\n        };\n    }\n\n    construct() {\n        super.construct(...arguments);\n\n        // Look up a Project owner in our ancestors.\n        if (!this.stm) {\n            this.scheduler = this.up(isProjectConsumer);\n        }\n\n    }\n\n    changeScheduler(scheduler) {\n        return scheduler.isProjectConsumer ? scheduler : UndoRedo.getById(scheduler);\n    }\n\n    updateScheduler(scheduler) {\n        const { crudManager } = scheduler;\n\n        scheduler.ion({\n            projectChange : 'onProjectChanged',\n            thisObj       : this\n        });\n\n        if (crudManager) {\n            this.setupLoadListener(crudManager);\n        }\n        // No CrudManager, so it must be inline data, so we can start immediately\n        else {\n            this.onLoad();\n        }\n\n        this.stm = scheduler.project.stm;\n    }\n\n    setupLoadListener(source) {\n        source.detachListeners('load');\n        source.ion({\n            name    : 'load',\n            load    : 'onLoad',\n            thisObj : this\n        });\n    }\n\n    async onLoad() {\n        // Do not want normalization changes to be tracked by STM, wait until they are finished before enabling\n        await this.scheduler.project.commitAsync();\n\n        // Widget could be destroyed during async project commit\n        if (!this.isDestroyed) {\n            this.stm.enable();\n\n            this.fillUndoRedoCombo();\n        }\n    }\n\n    onProjectChanged({ project }) {\n        this.project = project;\n    }\n\n    updateProject(project) {\n        super.updateProject(...arguments);\n\n        // The original condition `(project && !this.scheduler?.isConfiguring)` is not\n        // correctly transpiled by angular webpack leading to https://github.com/bryntum/support/issues/3789\n        // The following syntax fixes the above bug\n        if (project && this.scheduler && !this.scheduler.isConfiguring) {\n            this.setupLoadListener(project);\n        }\n    }\n}\n\nUndoRedo.initClass();\n","import Combo from '../../Core/widget/Combo.js';\nimport Widget from '../../Core/widget/Widget.js';\nimport DateHelper from '../../Core/helper/DateHelper.js';\n\n/**\n * @module Scheduler/widget/ViewPresetCombo\n */\n\n/**\n * A combo for selecting {@link Scheduler.preset.ViewPreset} for Scheduler and Gantt. Lets the user select\n * between specified {@link #config-presets} available.\n *\n * {@inlineexample Scheduler/widget/ViewPresetCombo.js}\n *\n * Add it to the component's toolbar to connect it automatically:\n * ```javascript\n * new Scheduler({\n *    tbar : {\n *        viewPresetCombo: {\n *            type: 'viewpresetcombo',\n *            width: '7em'\n *        }\n *    }\n * });\n * ```\n *\n * Or specify which Scheduler, SchedulerPro or Gantt component instance it should connect to the {@link #config-client}\n * config:\n * ```javascript\n * const scheduler = new Scheduler({ ... });\n * const viewPresetCombo = new ViewPresetCombo({\n *     appendTo : 'someElementClassName',\n *     client   : scheduler\n * });\n * ```\n *\n * By default, the following presets are shown in the combo:\n * * {@link Scheduler.preset.PresetManager hourAndDay}\n * * {@link Scheduler.preset.PresetManager weekAndDay}\n * * {@link Scheduler.preset.PresetManager dayAndMonth}\n *\n * ## Changing selectable presets\n * To change the default selectable presets specify an array of preset ids. The presets specified must be available to\n * the client.\n *\n * ```javascript\n * viewPresetCombo: {\n *    presets: ['weekAndDay', 'dayAndMonth', 'myCustomPreset']\n * }\n * ```\n *\n * NOTE: The selectable presets will be arranged in the order provided in the {@link #config-presets} config.\n * @extends Core/widget/Combo\n * @classType viewpresetcombo\n * @widget\n */\nexport default class ViewPresetCombo extends Combo {\n    static $name = 'ViewPresetCombo';\n\n    static type = 'viewpresetcombo';\n\n    static configurable = {\n\n        /**\n         * An array containing string {@link Scheduler.preset.ViewPreset} ids available for selection. The specified\n         * presets must be {@link Scheduler.view.mixin.TimelineViewPresets#config-presets available} for the\n         * {@link #config-client} (Scheduler, SchedulerPro or Gantt) for it to work properly. The selectable presets\n         * will be arranged in the order provided here.\n         * @config {Array}\n         */\n        presets : ['hourAndDay', 'weekAndDay', 'dayAndMonth'],\n\n        /**\n         * If not added to a toolbar, provide a Scheduler, SchedulerPro or Gantt component instance to which the\n         * ViewPresetCombo should be connected.\n         * @config {Scheduler.view.TimelineBase}\n         * @default\n         */\n        client : null,\n\n        /**\n         * @hideconfigs caseSensitive,chipView,clearTextOnPickerHide,createOnUnmatched,displayField,displayValueRenderer,emptyText,encodeFilterParams,filterOnEnter,filterOperator,filterParamName,filterSelected,hideTrigger,inlinePicker,items,keyStrokeFilterDelay,minChars,multiSelect,multiValueSeparator,primaryFilter,store,triggerAction,validateFilter,value,valueField,containValues,container,inline,adopt,dataset,title,autoSelect,clearable,highlightExternalChange,keyStrokeChangeDelay,maxLength,minLength,placeholder,required,revertOnEscape,triggers,autoComplete,inputType,spellCheck,validateOnInput,tooltip,autoClose,autoExpand,picker,pickerAlignElement\n         */\n        /**\n         * @hideproperties filterOperator,isEmpty,queryLast,records,store,valueCollection,content,contentElement,dataset,html,overflowElement,errorTip,isEmptyInput,isValid,triggers,scrollable,cellInfo,tab\n         */\n        /**\n         * @hidefunctions clear,clearError,getErrors,select,setError,contains,exitFullscreen,requestFullscreen,owns,query,queryAll\n         */\n        /**\n         * @hideevents input\n         */\n\n        editable     : false,\n        valueField   : 'id',\n        displayField : 'name',\n        placeholder  : 'Select view'\n    };\n\n    construct() {\n        super.construct(...arguments);\n        this.scheduler.ion({\n            presetchange : this.onClientPresetChange,\n            thisObj      : this\n        });\n    }\n\n    // Returns current client (Scheduler, SchedulerPro or Gantt)\n    get scheduler() {\n        return this.client || this.up(widget => widget.isTimelineBase) || Widget.query(widget => widget.isTimelineBase);\n    }\n\n    changeValue(value, oldValue) {\n        // Set up items before applying value, to prevent an empty store from being created and then replaced,\n        // which in turn leads to preset changing (caused by https://github.com/bryntum/support/issues/5732)\n        this.getConfig('presets');\n\n        return super.changeValue(value, oldValue);\n    }\n\n    // Creates a chained store of the clients presets store filtered and sorted by the presets config\n    updatePresets(presets) {\n        this.store = this.scheduler.presets.chain(r => presets.includes(r.id));\n        this.store.sort((a, b) => presets.indexOf(a.id) - presets.indexOf(b.id));\n    }\n\n    // When client preset is changed from somewhere else, zooming for example.\n    onClientPresetChange({ preset }) {\n        const me = this;\n        if (!me._isSelecting) {\n            me.isSettingValue = true;\n            // Select preset in combo if it exists\n            if (me.store.includes(preset.id)) {\n                me.value = preset;\n            }\n            // Clear combo otherwise\n            else {\n                me.clear();\n            }\n            me.isSettingValue = false;\n        }\n    }\n\n    onSelect({ record }) {\n        if (!this.isSettingValue) {\n            const\n                { scheduler }                    = this,\n                { mainUnit, start, defaultSpan } = record;\n\n            scheduler.suspendRefresh();\n            this._isSelecting = true;\n            scheduler.viewPreset = record;\n            this._isSelecting = false;\n\n            if (mainUnit && defaultSpan) {\n                let beginningOf = mainUnit;\n                if (start && typeof start === 'string') {\n                    beginningOf = DateHelper.parseTimeUnit(start) ?? start;\n                }\n                let startDate = DateHelper.startOf(scheduler.startDate, beginningOf);\n\n                if (record.start && typeof start === 'number') {\n                    startDate = DateHelper.add(startDate, start, mainUnit);\n                }\n\n                const endDate = DateHelper.add(startDate, defaultSpan, mainUnit);\n                scheduler.setTimeSpan(startDate, endDate);\n            }\n            if (scheduler.isVertical) {\n                scheduler.scrollTop = 0;\n            }\n            else {\n                scheduler.scrollLeft = 0;\n            }\n            scheduler.resumeRefresh(true);\n        }\n    }\n\n    // If underlying store localizes, we need to sync the input field value\n    updateLocalization() {\n        super.updateLocalization();\n        this.syncInputFieldValue();\n    }\n}\n\n// Register this widget type with its Factory\nViewPresetCombo.initClass();\n","// Files are symlinked with \"grunt symlink\" task\n\nexport * from './entry.engine.js';\n\n//endregion\n\n// columns\nexport { default as DurationColumn } from '../lib/Scheduler/column/DurationColumn.js';\nexport { default as EventColorColumn } from '../lib/Scheduler/column/EventColorColumn.js';\nexport { default as ResourceCollapseColumn } from '../lib/Scheduler/column/ResourceCollapseColumn.js';\nexport { default as ResourceInfoColumn } from '../lib/Scheduler/column/ResourceInfoColumn.js';\nexport { default as ScaleColumn } from '../lib/Scheduler/column/ScaleColumn.js';\nexport { default as TimeAxisColumn } from '../lib/Scheduler/column/TimeAxisColumn.js';\nexport { default as VerticalTimeAxisColumn } from '../lib/Scheduler/column/VerticalTimeAxisColumn.js';\n\n// crud\nexport { default as AbstractCrudManager } from '../lib/Scheduler/crud/AbstractCrudManager.js';\nexport { default as AbstractCrudManagerMixin } from '../lib/Scheduler/crud/AbstractCrudManagerMixin.js';\nexport { default as AbstractCrudManagerValidation } from '../lib/Scheduler/crud/mixin/AbstractCrudManagerValidation.js';\nexport { default as AjaxTransport } from '../lib/Scheduler/crud/transport/AjaxTransport.js';\nexport { default as JsonEncoder } from '../lib/Scheduler/crud/encoder/JsonEncoder.js';\n\n// crud mixin\nexport { default as CrudManagerView } from '../lib/Scheduler/crud/mixin/CrudManagerView.js';\n\n// data\nexport { default as AssignmentStore } from '../lib/Scheduler/data/AssignmentStore.js';\nexport { default as CrudManager } from '../lib/Scheduler/data/CrudManager.js';\nexport { default as DependencyStore } from '../lib/Scheduler/data/DependencyStore.js';\nexport { default as EventStore } from '../lib/Scheduler/data/EventStore.js';\nexport { default as ResourceStore } from '../lib/Scheduler/data/ResourceStore.js';\nexport { default as ResourceTimeRangeStore } from '../lib/Scheduler/data/ResourceTimeRangeStore.js';\nexport { default as TimeAxis } from '../lib/Scheduler/data/TimeAxis.js';\n\n// data util\nexport { default as AbstractRecurrenceIterator } from '../lib/Scheduler/data/util/recurrence/AbstractRecurrenceIterator.js';\nexport { default as DailyRecurrenceIterator } from '../lib/Scheduler/data/util/recurrence/DailyRecurrenceIterator.js';\nexport { default as EventDayIndex } from '../lib/Scheduler/data/util/EventDayIndex.js';\nexport { default as MonthlyRecurrenceIterator } from '../lib/Scheduler/data/util/recurrence/MonthlyRecurrenceIterator.js';\nexport { default as RecurrenceDayRuleEncoder } from '../lib/Scheduler/data/util/recurrence/RecurrenceDayRuleEncoder.js';\nexport { default as RecurrenceLegend } from '../lib/Scheduler/data/util/recurrence/RecurrenceLegend.js';\nexport { default as WeeklyRecurrenceIterator } from '../lib/Scheduler/data/util/recurrence/WeeklyRecurrenceIterator.js';\nexport { default as YearlyRecurrenceIterator } from '../lib/Scheduler/data/util/recurrence/YearlyRecurrenceIterator.js';\n\n// data mixin\nexport { default as AssignmentStoreMixin } from '../lib/Scheduler/data/mixin/AssignmentStoreMixin.js';\nexport { default as AttachToProjectMixin } from '../lib/Scheduler/data/mixin/AttachToProjectMixin.js';\nexport { default as DependencyStoreMixin } from '../lib/Scheduler/data/mixin/DependencyStoreMixin.js';\nexport { default as EventStoreMixin } from '../lib/Scheduler/data/mixin/EventStoreMixin.js';\nexport { default as GetEventsMixin } from '../lib/Scheduler/data/mixin/GetEventsMixin.js';\nexport { default as PartOfBaseProject } from '../lib/Scheduler/data/mixin/PartOfBaseProject.js';\nexport { default as PartOfProject } from '../lib/Scheduler/data/mixin/PartOfProject.js';\nexport { default as ProjectConsumer } from '../lib/Scheduler/data/mixin/ProjectConsumer.js';\nexport { default as ProjectCrudManager } from '../lib/Scheduler/data/mixin/ProjectCrudManager.js';\nexport { default as RecurringEventsMixin } from '../lib/Scheduler/data/mixin/RecurringEventsMixin.js';\nexport { default as RecurringTimeSpansMixin } from '../lib/Scheduler/data/mixin/RecurringTimeSpansMixin.js';\nexport { default as ResourceStoreMixin } from '../lib/Scheduler/data/mixin/ResourceStoreMixin.js';\n\n// eventlayout\nexport { default as HorizontalLayoutPack } from '../lib/Scheduler/eventlayout/HorizontalLayoutPack.js';\nexport { default as HorizontalLayoutStack } from '../lib/Scheduler/eventlayout/HorizontalLayoutStack.js';\nexport { default as PackMixin } from '../lib/Scheduler/eventlayout/PackMixin.js';\n\n// feature base\nexport { default as DragBase } from '../lib/Scheduler/feature/base/DragBase.js';\nexport { default as DragCreateBase } from '../lib/Scheduler/feature/base/DragCreateBase.js';\nexport { default as EditBase } from '../lib/Scheduler/feature/base/EditBase.js';\nexport { default as ResourceTimeRangesBase } from '../lib/Scheduler/feature/base/ResourceTimeRangesBase.js';\nexport { default as TimeSpanMenuBase } from '../lib/Scheduler/feature/base/TimeSpanMenuBase.js';\nexport { default as TooltipBase } from '../lib/Scheduler/feature/base/TooltipBase.js';\n\n// feature\nexport { default as AbstractTimeRanges } from '../lib/Scheduler/feature/AbstractTimeRanges.js';\nexport { default as ColumnLines } from '../lib/Scheduler/feature/ColumnLines.js';\nexport { default as Dependencies } from '../lib/Scheduler/feature/Dependencies.js';\nexport { default as DependencyEdit } from '../lib/Scheduler/feature/DependencyEdit.js';\nexport { default as EventCopyPaste } from '../lib/Scheduler/feature/EventCopyPaste.js';\nexport { default as EventDrag } from '../lib/Scheduler/feature/EventDrag.js';\nexport { default as EventDragCreate } from '../lib/Scheduler/feature/EventDragCreate.js';\nexport { default as EventDragSelect } from '../lib/Scheduler/feature/EventDragSelect.js';\nexport { default as EventEdit } from '../lib/Scheduler/feature/EventEdit.js';\nexport { default as EventFilter } from '../lib/Scheduler/feature/EventFilter.js';\nexport { default as EventMenu } from '../lib/Scheduler/feature/EventMenu.js';\nexport { default as EventNonWorkingTime } from '../lib/Scheduler/feature/EventNonWorkingTime.js';\nexport { default as EventResize } from '../lib/Scheduler/feature/EventResize.js';\nexport { default as EventTooltip } from '../lib/Scheduler/feature/EventTooltip.js';\nexport { default as GroupSummary } from '../lib/Scheduler/feature/GroupSummary.js';\nexport { default as HeaderZoom } from '../lib/Scheduler/feature/HeaderZoom.js';\nexport { default as Labels } from '../lib/Scheduler/feature/Labels.js';\nexport { default as NonWorkingTime } from '../lib/Scheduler/feature/NonWorkingTime.js';\nexport { default as Pan } from '../lib/Scheduler/feature/Pan.js';\nexport { default as ResourceMenu } from '../lib/Scheduler/feature/ResourceMenu.js';\nexport { default as ResourceTimeRanges } from '../lib/Scheduler/feature/ResourceTimeRanges.js';\nexport { default as RowReorder } from '../lib/Scheduler/feature/RowReorder.js';\nexport { default as ScheduleContext } from '../lib/Scheduler/feature/ScheduleContext.js';\nexport { default as ScheduleMenu } from '../lib/Scheduler/feature/ScheduleMenu.js';\nexport { default as ScheduleTooltip } from '../lib/Scheduler/feature/ScheduleTooltip.js';\nexport { default as SimpleEventEdit } from '../lib/Scheduler/feature/SimpleEventEdit.js';\nexport { default as Split } from '../lib/Scheduler/feature/Split.js';\nexport { default as StickyEvents } from '../lib/Scheduler/feature/StickyEvents.js';\nexport { default as Summary } from '../lib/Scheduler/feature/Summary.js';\nexport { default as TimeAxisHeaderMenu } from '../lib/Scheduler/feature/TimeAxisHeaderMenu.js';\nexport { default as TimelineSummary } from '../lib/Scheduler/feature/TimelineSummary.js';\nexport { default as TimeRanges } from '../lib/Scheduler/feature/TimeRanges.js';\nexport { default as TimeSelection } from '../lib/Scheduler/feature/TimeSelection.js';\n\n// feature mixin\nexport { default as DependencyCreation } from '../lib/Scheduler/feature/mixin/DependencyCreation.js';\nexport { default as DependencyTooltip } from '../lib/Scheduler/feature/mixin/DependencyTooltip.js';\nexport { default as NonWorkingTimeMixin } from '../lib/Scheduler/feature/mixin/NonWorkingTimeMixin.js';\nexport { default as RecurringEventEdit } from '../lib/Scheduler/feature/mixin/RecurringEventEdit.js';\nexport { default as TaskEditStm } from '../lib/Scheduler/feature/mixin/TaskEditStm.js';\nexport { default as TaskEditTransactional } from '../lib/Scheduler/feature/mixin/TaskEditTransactional.js';\nexport { default as TransactionalFeature } from '../lib/Scheduler/feature/mixin/TransactionalFeature.js';\n\n// export\nexport { default as MultiPageExporter } from '../lib/Scheduler/feature/export/exporter/MultiPageExporter.js';\nexport { default as MultiPageVerticalExporter } from '../lib/Scheduler/feature/export/exporter/MultiPageVerticalExporter.js';\nexport { default as PdfExport } from '../lib/Scheduler/feature/export/PdfExport.js';\nexport { default as ScheduleRangeCombo } from '../lib/Scheduler/view/export/field/ScheduleRangeCombo.js';\nexport { default as SchedulerExportDialog } from '../lib/Scheduler/view/export/SchedulerExportDialog.js';\nexport { default as SinglePageExporter } from '../lib/Scheduler/feature/export/exporter/SinglePageExporter.js';\nexport { ScheduleRange } from '../lib/Scheduler/feature/export/Utils.js';\n\n// features experimental\nexport { default as ExcelExporter } from '../lib/Scheduler/feature/experimental/ExcelExporter.js';\n\n// model\nexport { default as AssignmentModel } from '../lib/Scheduler/model/AssignmentModel.js';\nexport { default as DependencyBaseModel } from '../lib/Scheduler/model/DependencyBaseModel.js';\nexport { default as DependencyModel } from '../lib/Scheduler/model/DependencyModel.js';\nexport { default as EventModel } from '../lib/Scheduler/model/EventModel.js';\nexport { default as ProjectModel } from '../lib/Scheduler/model/ProjectModel.js';\nexport { default as RecurrenceModel } from '../lib/Scheduler/model/RecurrenceModel.js';\nexport { default as ResourceModel } from '../lib/Scheduler/model/ResourceModel.js';\nexport { default as ResourceTimeRangeModel } from '../lib/Scheduler/model/ResourceTimeRangeModel.js';\nexport { default as TimeSpan } from '../lib/Scheduler/model/TimeSpan.js';\n\n// model mixin\nexport { default as AssignmentModelMixin } from '../lib/Scheduler/model/mixin/AssignmentModelMixin.js';\nexport { default as EventModelMixin } from '../lib/Scheduler/model/mixin/EventModelMixin.js';\nexport { default as ProjectModelCommon } from '../lib/Scheduler/model/mixin/ProjectModelCommon.js';\nexport { default as ProjectModelMixin } from '../lib/Scheduler/model/mixin/ProjectModelMixin.js';\nexport { default as ProjectModelTimeZoneMixin } from '../lib/Scheduler/model/mixin/ProjectModelTimeZoneMixin.js';\nexport { default as RecurringTimeSpan } from '../lib/Scheduler/model/mixin/RecurringTimeSpan.js';\nexport { default as ResourceModelMixin } from '../lib/Scheduler/model/mixin/ResourceModelMixin.js';\nexport { default as TimeZonedDatesMixin } from '../lib/Scheduler/model/mixin/TimeZonedDatesMixin.js';\n\n// preset\nexport { default as PresetManager } from '../lib/Scheduler/preset/PresetManager.js';\nexport { default as PresetStore } from '../lib/Scheduler/preset/PresetStore.js';\nexport { default as ViewPreset } from '../lib/Scheduler/preset/ViewPreset.js';\n\n// tooltip\nexport { default as ClockTemplate } from '../lib/Scheduler/tooltip/ClockTemplate.js';\n\n// util\nexport { default as RectangularPathFinder } from '../lib/Scheduler/util/RectangularPathFinder.js';\nexport { default as ScheduleTableExporter } from '../lib/Scheduler/util/ScheduleTableExporter.js';\n\n//view\nexport { default as HorizontalTimeAxis } from '../lib/Scheduler/view/HorizontalTimeAxis.js';\nexport { default as TimeAxisSubGrid } from '../lib/Scheduler/view/TimeAxisSubGrid.js';\nexport { default as Scheduler } from '../lib/Scheduler/view/Scheduler.js';\nexport { default as SchedulerBase } from '../lib/Scheduler/view/SchedulerBase.js';\nexport { default as EventEditor } from '../lib/Scheduler/view/EventEditor.js';\nexport { default as TimeAxisViewModel } from '../lib/Scheduler/view/model/TimeAxisViewModel.js';\nexport { default as TimelineBase } from '../lib/Scheduler/view/TimelineBase.js';\nexport { default as ResourceHeader } from '../lib/Scheduler/view/ResourceHeader.js';\nexport { default as TimelineHistogramBase } from '../lib/Scheduler/view/TimelineHistogramBase.js';\nexport { default as TimelineHistogram } from '../lib/Scheduler/view/TimelineHistogram.js';\n\n//view mixin\nexport { default as DelayedRecordsRendering } from '../lib/Scheduler/view/mixin/DelayedRecordsRendering.js';\nexport { default as Describable } from '../lib/Scheduler/view/mixin/Describable.js';\nexport { default as EventNavigation } from '../lib/Scheduler/view/mixin/EventNavigation.js';\nexport { default as EventSelection } from '../lib/Scheduler/view/mixin/EventSelection.js';\nexport { default as RecurringEvents } from '../lib/Scheduler/view/mixin/RecurringEvents.js';\nexport { default as SchedulerDom } from '../lib/Scheduler/view/mixin/SchedulerDom.js';\nexport { default as SchedulerDomEvents } from '../lib/Scheduler/view/mixin/SchedulerDomEvents.js';\nexport { default as SchedulerEventRendering } from '../lib/Scheduler/view/mixin/SchedulerEventRendering.js';\nexport { default as SchedulerRegions } from '../lib/Scheduler/view/mixin/SchedulerRegions.js';\nexport { default as SchedulerResourceRendering } from '../lib/Scheduler/view/mixin/SchedulerResourceRendering.js';\nexport { default as SchedulerScroll } from '../lib/Scheduler/view/mixin/SchedulerScroll.js';\nexport { default as SchedulerState } from '../lib/Scheduler/view/mixin/SchedulerState.js';\nexport { default as SchedulerStores } from '../lib/Scheduler/view/mixin/SchedulerStores.js';\nexport { default as TimelineDateMapper } from '../lib/Scheduler/view/mixin/TimelineDateMapper.js';\nexport { default as TimelineDomEvents } from '../lib/Scheduler/view/mixin/TimelineDomEvents.js';\nexport { default as TimelineEventRendering } from '../lib/Scheduler/view/mixin/TimelineEventRendering.js';\nexport { default as TimelineHistogramGrouping } from '../lib/Scheduler/view/mixin/TimelineHistogramGrouping.js';\nexport { default as TimelineHistogramScaleColumn } from '../lib/Scheduler/view/mixin/TimelineHistogramScaleColumn.js';\nexport { default as TimelineScroll } from '../lib/Scheduler/view/mixin/TimelineScroll.js';\nexport { default as TimelineState } from '../lib/Scheduler/view/mixin/TimelineState.js';\nexport { default as TimelineViewPresets } from '../lib/Scheduler/view/mixin/TimelineViewPresets.js';\nexport { default as TimelineZoomable } from '../lib/Scheduler/view/mixin/TimelineZoomable.js';\nexport { default as TransactionalFeatureMixin } from '../lib/Scheduler/view/mixin/TransactionalFeatureMixin.js';\n\n// view orientation\nexport { default as HorizontalRendering } from '../lib/Scheduler/view/orientation/HorizontalRendering.js';\nexport { default as VerticalRendering } from '../lib/Scheduler/view/orientation/VerticalRendering.js';\n\n//view recurrence\nexport { default as RecurrenceCombo } from '../lib/Scheduler/view/recurrence/field/RecurrenceCombo.js';\nexport { default as RecurrenceConfirmationPopup } from '../lib/Scheduler/view/recurrence/RecurrenceConfirmationPopup.js';\nexport { default as RecurrenceDaysButtonGroup } from '../lib/Scheduler/view/recurrence/field/RecurrenceDaysButtonGroup.js';\nexport { default as RecurrenceDaysCombo } from '../lib/Scheduler/view/recurrence/field/RecurrenceDaysCombo.js';\nexport { default as RecurrenceEditor } from '../lib/Scheduler/view/recurrence/RecurrenceEditor.js';\nexport { default as RecurrenceEditorPanel } from '../lib/Scheduler/view/recurrence/RecurrenceEditorPanel.js';\nexport { default as RecurrenceFrequencyCombo } from '../lib/Scheduler/view/recurrence/field/RecurrenceFrequencyCombo.js';\nexport { default as RecurrenceLegendButton } from '../lib/Scheduler/view/recurrence/RecurrenceLegendButton.js';\nexport { default as RecurrenceMonthDaysButtonGroup } from '../lib/Scheduler/view/recurrence/field/RecurrenceMonthDaysButtonGroup.js';\nexport { default as RecurrenceMonthsButtonGroup } from '../lib/Scheduler/view/recurrence/field/RecurrenceMonthsButtonGroup.js';\nexport { default as RecurrencePositionsCombo } from '../lib/Scheduler/view/recurrence/field/RecurrencePositionsCombo.js';\nexport { default as RecurrenceStopConditionCombo } from '../lib/Scheduler/view/recurrence/field/RecurrenceStopConditionCombo.js';\n\n// widget\nexport { default as EventColorPicker } from '../lib/Scheduler/widget/EventColorPicker.js';\nexport { default as EventColorField } from '../lib/Scheduler/widget/EventColorField.js';\nexport { default as ProjectCombo } from '../lib/Scheduler/widget/ProjectCombo.js';\nexport { default as ResourceCombo } from '../lib/Scheduler/widget/ResourceCombo.js';\nexport { default as ResourceFilter } from '../lib/Scheduler/widget/ResourceFilter.js';\nexport { default as SchedulerDatePicker } from '../lib/Scheduler/widget/SchedulerDatePicker.js';\nexport { default as UndoRedo } from '../lib/Scheduler/widget/UndoRedo.js';\nexport { default as ViewPresetCombo } from '../lib/Scheduler/widget/ViewPresetCombo.js';\n"],"names":["Target","PartOfBaseProject","$name","assignmentStore","project","calendarManagerStore","dependencyStore","eventStore","resourceStore","EventColorColumn","ColorColumn","type","defaults","colorEditorType","field","ColumnStore","registerColumnType","_$name","ResourceCollapseColumn","Column","width","align","sortable","groupable","editor","minWidth","cellCls","renderer","record","tag","class","eventLayout","onCellClick","event","preventDefault","EventDragSelect","Delayable","InstancePlugin","targetSelector","construct","client","config","multiEventSelect","pluginConfig","chain","onElementMouseDown","me","foregroundCanvas","target","button","touches","clientX","clientY","canvasRect","Rectangle","from","disabled","matches","trigger","preventDragSelect","startX","x","startY","y","element","DomHelper","createElement","className","parent","retainElement","style","transform","classList","add","ctrlKey","metaKey","clearEventSelection","originalSelection","selectedAssignments","slice","subGridElementRect","timeAxisSubGridElement","navigator","enableScrollingCloseToEdges","timeAxisSubGrid","mouseUpDetacher","EventHelper","on","document","mouseup","thisObj","eventRectangles","eventElements","Array","children","filter","node","eventSelector","map","el","resolveAssignmentRecord","rectangle","selected","includes","onElementMouseMove","Math","min","max","height","rect","setTranslateXY","updateSelection","onDocumentMouseUp","_me$element","disableScrollingCloseToEdges","remove","skipNextClick","contains","length","_navigator$activeItem","skipScrollIntoView","activeAssignment","activeItem","focus","selectionRect","selection","reduce","r","a","getElementFromAssignmentRecord","push","assignmentData","intersect","GridFeatureManager","registerFeature","EventNonWorkingTime","mixin","AttachToProjectMixin","NonWorkingTimeMixin","properties","calendarRangeCache","Map","doDisable","disable","refresh","attachToCalendarManagerStore","store","ion","name","change","isScheduler","effectiveCalendar","intervals","setupDefaultCalendar","onCalendarChange","clear","onTimeAxisViewModelUpdate","getRangeDomConfig","timeRange","minDate","maxDate","relativeTo","rtl","startPos","getCoordinateFromDate","DateHelper","startDate","endPos","endDate","size","abs","isRange","translateX","cls","dataset","id","elementData","isVertical","getCalendarTimeRanges","calendar","cached","get","set","onEventDataGenerated","eventRecord","endMS","startMS","start","end","left","top","enabled","effectiveCalendarsCombination","startDateMS","endDateMS","domConfig","eventStoreRefreshActions","update","assignmentStoreRefreshActions","removeAll","GroupSummary","GridGroupSummary","defaultConfig","showTooltip","summaries","footersToUpdate","Set","scheduler","Error","isSchedulerBase","changePreCommit","onEventStoreChange","onAssignmentStoreChange","timeAxisViewModelUpdate","onTimeAxisChange","dataReady","onProjectDataReady","doDestroy","_this$_tip","_tip","destroy","rowManager","forEach","row","isGroupFooter","render","action","records","changes","resources","afterChange","_changes$resourceId","assignment","resource","resourceId","oldValue","oldResource","getById","affectedResources","resourceRecord","getRowFor","isGroupHeader","getRow","index","isVisible","footer","_footer$render","call","whenVisible","onBeforeRenderRow","meta","hasOwnProperty","timeaxisCell","elements","normal","querySelector","innerHTML","arguments","generateHtml","column","groupRecord","groupField","groupValue","colCfg","timeAxisViewModel","columnConfig","html","eventsByTick","getResourcesEventsPerTick","some","isFiltered","timeAxis","tick","idx","groupEvents","sumHtml","value","events","join","updateSummaryHtml","cellElement","count","result","getTipHtml","activeTarget","parentElement","indexOf","getAt","tipHtml","L","getFormattedDate","showTip","forEachSelector","i","label","_labels","text","innerText","trim","_me$summaries","Tooltip","hoverDelay","hideDelay","forElement","anchorToTarget","forSelector","getHtml","bind","removeSummaryElements","rowEl","summaryElement","hasSummary","isTimeAxisColumn","HeaderZoom","closest","headerEl","subGrids","header","headersElement","headerElementRect","once","scrollLeft","setTranslateX","onMouseUp","getDateFromCoordinate","right","zoomToSpan","Pan","configurable","horizontal","vertical","enableInHeader","dragFeature","features","taskDrag","eventDrag","enablePanOnEvents","readOnly","mouseX","mouseY","onHeader","mouseDetacher","mousemove","onMouseMove","xScroller","scrollable","yScroller","scrollBy","isHorizontal","isActive","Boolean","ResourceMenu","ContextMenuBase","processItems","items","getDataFromEvent","populateResourceMenu","localeClass","icon","weight","onItem","showMenu","featureClass","ResourceTimeRanges","ResourceTimeRangesBase","rangeCls","enableMouseEvents","tabIndex","entityName","superConfig","assign","attachToProject","resourceTimeRangeStore","ResourceTimeRangeStore","owner","crudManager","exposedOnScheduler","resourceTimeRanges","Object","defineProperty","data","detachListeners","onStoreChange","attachToResourceTimeRangeStore","getEventsToRender","timeRanges","$original","isRecurring","getOccurrencesForDateRange","shouldInclude","isResourceTimeRange","isNonWorking","isCalendarHighlightModel","_this$store","SimpleEventEdit","TaskEditStm","triggerEvent","editorConfig","eventEdit","clientListenersDetacher","eventElement","editEvent","dragcreateend","onDragCreateEnd","_this$editor","stmCapture","isCreating","down","eventInnerSelector","isAssignment","Editor","new","appendTo","scrollAction","maxHeight","internalListeners","complete","cancel","onInternalKeyDown","keyEvent","stopPropagation","relayEvents","stmInitiallyAutoRecord","stmInitiallyDisabled","hasStmCapture","transferred","captureStm","startEdit","visibleDateRange","scrollIntoView","onEditorComplete","reset","freeStm","onEditorCancel","onEventEnterKey","assignmentRecord","getElementFromEventRecord","startScrollOptions","freeze","animate","block","endScrollOptions","Split","GridSplit","relayProperties","barMargin","eventColor","eventStyle","fillTicks","resourceMargin","snap","tickSize","$config","merge","getClientConfig","order","options","_clientConfig$feature","clientConfig","isSchedulerProBase","isGanttBase","assignments","dependencies","viewPreset","selectedCollection","useInitialAnimation","ObjectHelper","setPath","constrainDragToTimeline","unsplitCleanup","onElementResize","processOptions","atDate","atRecord","direction","atColumn","bounds","date","center","timeAxisColumn","splitX","ignoreRTL","_bodyRectangle","scrollBarWidth","bodyContainer","remainingWidth","split","Promise","all","scrollToDate","unit","populateCellMenu","populateScheduleMenu","isSplit","splitFrom","splitSchedule","separator","hidden","menu","splitHorizontally","then","splitVertically","splitBoth","unsplitSchedule","unsplit","Summary","TimelineSummary","verticalSummaryColumnConfig","resizable","hideFooters","createSubGrid","summaryColumn","columns","filterable","region","htmlEncode","cellMenuItems","enableHeaderContextMenu","updateEventStore","updateResourceStore","updateTimelineSummaries","timeline","summaryContainer","summaryBarElement","forResources","selectedOnly","selectedRecords","isEngineReady","valueHtml","_tipHtml","TimeSelection","AbstractTimeRanges","enableResizing","dragTipTemplate","dragHelperConfig","skipUpdatingElement","resizeHelperConfig","headerRenderer","dateFormat","bottomHeader","format","selectedTimeSpan","onUIReady","timeAxisHeaderMouseDown","onTimeAxisHeaderMouseDown","onTimeRangeClick","domEvent","updateFromCoords","totalSize","getDateFromCoord","coord","roundingMethod","onResizeStart","source","timeResolution","resolutionDurationMS","asMilliseconds","increment","resize","getDistanceForDuration","onResizeDrag","context","newX","newY","newWidth","elementWidth","newHeight","elementHeight","onDragStart","offsetWidth","offsetHeight","onDrag","onDrop","onDragReset","shouldRenderRange","changeSelectedTimeSpan","timeSpan","updateSelectedTimeSpan","isConfiguring","ScheduleTableExporter","Localizable","GridTableExporter","includeUnassigned","eventColumns","eventSortFn","args","b","internalId","normalizeColumns","col","generateExportData","SchedulerBase","resourceColumns","generateColumns","generateEventColumns","concat","rows","generateRows","processEventColumn","defaultColumnWidth","eventColumn","getColumnType","sort","getRowData","notAssignedEvents","query","cells","fill","resourceCells","processRecord","isSpecialRow","eventCells","ExcelExporter","GridExcelExporter","exporterClass","exporterConfig","Scheduler","initClass","isProjectConsumer","w","UndoRedo","UndoRedoBase","stm","up","changeScheduler","updateScheduler","projectChange","setupLoadListener","onLoad","load","commitAsync","isDestroyed","enable","fillUndoRedoCombo","onProjectChanged","updateProject","ViewPresetCombo","Combo","presets","editable","valueField","displayField","placeholder","presetchange","onClientPresetChange","widget","isTimelineBase","Widget","changeValue","getConfig","updatePresets","preset","_isSelecting","isSettingValue","onSelect","mainUnit","defaultSpan","suspendRefresh","beginningOf","parseTimeUnit","startOf","setTimeSpan","scrollTop","resumeRefresh","updateLocalization","syncInputFieldValue","HOSTS","ONE_DAY","EXPIRING_CLASSES","VersionHelper","isTestEnv","host","location","test","href","initialized","initExpiryHelper","baseClass","ExpiryHelper","__foo","product","productName","version","getVersion","callHomeDelay","blockUrl","BrowserHelper","queryString","Product","verifyUrl","blocked","lastVersionCheck","trialKey","versionCheckKey","console","log","cacheTrialStartTime","isExpired","readyState","onTrialExpired","addEventListener","setTimeout","updateBlockedStatus","timeString","getLocalStorageItem","time","Number","isNaN","trialStartTime","Date","now","setLocalStorageItem","_window$bryntum","_window$bryntum$this$","window","bryntum","expired","saveVersionCheckKey","url","encodeURIComponent","logUrl","license","img","Image","onload","naturalWidth","blockTrial","onerror","src","rootEl","rootElement","expirationShown","warn","floatRoot","Toast","show","timeout","removeEachSelector","fromElement","maskExpiredWidget","removeLocalStorageItem","mask","cover","setWaterMark","darkColor","lightColor","_DomHelper$themeInfo","_DomHelper$themeInfo$","thumb","color","themeInfo","toLowerCase","endsWith","svgString","backgroundImage","btoa","applyBaseOverride","Override","apply","onPaintOverride","setWatermarks","targets","values","GlobalEvents","Dependencies","domSync","_overridden","HorizontalRendering","onRenderDone","_this$scheduler","isSchedulerPro","VerticalRendering","_this$scheduler2","ignoreDomainRe","websiteUrls","products","frameworks","splice","prod","framework","flat","match","newScript","dataLayer","gtag","head","appendChild"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMwB,YAAY,SAASC,eAAe,CAAC;AACtD;EACA,OAAO9V,KAAK,GAAG,cAAc,CAAA;AAC7B,EAAA,OAAOsU,YAAY,GAAG;AAClB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQyB,IAAAA,YAAY,EAAG,IAAI;AACnB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQC,IAAAA,KAAK,EAAG,IAAI;AACZvV,IAAAA,IAAI,EAAG,UAAA;GACV,CAAA;EACD,WAAWgC,YAAYA,GAAG;AACtB,IAAA,MAAMF,MAAM,GAAG,KAAK,CAACE,YAAY,CAAA;AACjCF,IAAAA,MAAM,CAACG,KAAK,CAACsF,IAAI,CAAC,sBAAsB,CAAC,CAAA;AACzC,IAAA,OAAOzF,MAAM,CAAA;AACjB,GAAA;AACA;AACA;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACA;EACA0T,gBAAgBA,CAAClU,KAAK,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,GAAG;AACL,UAAA,CAACsI,SAAS,IAAIhc,EAAE,EAAE0c,OAAO,EAAE,CAAA;AAC/B,SAAA;OACH,CAAA;AACL,KAAA;AACJ,GAAA;AACA;AACJ,CAAA;;AACA9D,KAAK,CAACza,MAAM,GAAG,OAAO,CAAA;AAAEoH,kBAAkB,CAACC,eAAe,CAACoT,KAAK,EAAE,KAAK,EAAE,WAAW,CAAC;;AC3RrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM+D,OAAO,SAASC,eAAe,CAAC;AACjD;EACA,WAAWxf,KAAKA,GAAG;AACf,IAAA,OAAO,SAAS,CAAA;AACpB,GAAA;EACA,WAAWsU,YAAYA,GAAG;IACtB,OAAO;AACH;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY5H,MAAAA,SAAS,EAAG,IAAI;AAChB;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACYjL,MAAAA,QAAQ,EAAG,IAAI;AACf;AACZ;AACA;AACA;AACYge,MAAAA,2BAA2B,EAAG,IAAA;KACjC,CAAA;AACL,GAAA;AACA;EACA,WAAWhd,YAAYA,GAAG;AACtB,IAAA,MAAMF,MAAM,GAAG,KAAK,CAACE,YAAY,CAAA;IACjCF,MAAM,CAACG,KAAK,CAACsF,IAAI,CAAC,WAAW,EAAE,kBAAkB,EAAE,qBAAqB,CAAC,CAAA;AACzE,IAAA,OAAOzF,MAAM,CAAA;AACjB,GAAA;AACA;AACA;AACAF,EAAAA,SAASA,CAACwK,SAAS,EAAEtK,MAAM,EAAE;IACzB,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A;AACA3B,qBAAqB,CAACljB,MAAM,GAAG,uBAAuB;;ACtMtD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMmlB,aAAa,SAASC,eAAiB,CAAC;EACzD,WAAWnmB,KAAKA,GAAG;AACf,IAAA,OAAO,eAAe,CAAA;AAC1B,GAAA;EACA,WAAWwM,aAAaA,GAAG;IACvB,OAAO;AACH;AACZ;AACA;AACA;AACA;AACA;AACY4Z,MAAAA,aAAa,EAAGnC,qBAAqB;AACrC;AACZ;AACA;AACA;AACYoC,MAAAA,cAAc,EAAG,IAAA;KACpB,CAAA;AACL,GAAA;AACJ,CAAA;AACAH,aAAa,CAACnlB,MAAM,GAAG,eAAe,CAAA;AAAEoH,kBAAkB,CAACC,eAAe,CAAC8d,aAAa,EAAE,KAAK,EAAE,WAAW,CAAC;;AClE7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMI,SAAS,SAASzB,aAAa,CAAC;EACjD,WAAW7kB,KAAKA,GAAG;AACf,IAAA,OAAO,WAAW,CAAA;AACtB,GAAA;AACA;EACA,WAAWS,IAAIA,GAAG;AACd,IAAA,OAAO,WAAW,CAAA;AACtB,GAAA;AACJ,CAAA;AACA;AACA6lB,SAAS,CAACC,SAAS,EAAE,CAAA;AACrBD,SAAS,CAACvlB,MAAM,GAAG,WAAW;;ACla9B;AACA;AACA;AACA,MAAMylB,iBAAiB,GAAGC,CAAC,IAAIA,CAAC,CAACD,iBAAiB,CAAA;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAME,QAAQ,SAASC,YAAY,CAAC;EAC/C,WAAW3mB,KAAKA,GAAG;AACf,IAAA,OAAO,UAAU,CAAA;AACrB,GAAA;EACA,WAAWS,IAAIA,GAAG;AACd,IAAA,OAAO,UAAU,CAAA;AACrB,GAAA;EACA,WAAW6T,YAAYA,GAAG;IACtB,OAAO;AACH;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACYzH,MAAAA,SAAS,EAAG,IAAI;AAChB;AACZ;AACA;AACA;AACA;AACA;AACY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY3M,MAAAA,OAAO,EAAG,IAAA;KAC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"}